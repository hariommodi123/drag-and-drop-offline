/*! For license information please see main.b819b8e6.js.LICENSE.txt */
(()=>{"use strict";var e={579:(e,t,n)=>{e.exports=n(1153)},1153:(e,t,n)=>{var r=n(5043),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},2284:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{A:()=>r})},2730:(e,t,n)=>{var r=n(5043),i=n(8853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!u.call(p,e)||!u.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),j=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var T=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var M,R=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(Hp){var t=Hp.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Wp){var r=Wp}Reflect.construct(e,[],t)}else{try{t.call()}catch(Wp){r=Wp}e.call(t.prototype)}else{try{throw Error()}catch(Wp){r=Wp}e()}}catch(Wp){if(Wp&&r&&"string"===typeof Wp.stack){for(var i=Wp.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case _:return"Portal";case k:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case j:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return q(e(t))}catch(Hp){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Zp){return e.body}}function J(e,t){var n=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Q(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,_e=null,Ne=null;function Se(e){if(e=bi(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function ke(e){_e?Ne?Ne.push(e):Ne=[e]:_e=e}function Ae(){if(_e){var e=_e,t=Ne;if(Ne=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function je(e,t){return e(t)}function Pe(){}var Ie=!1;function Ce(e,t,n){if(Ie)return e(t,n);Ie=!0;try{return je(e,t,n)}finally{Ie=!1,(null!==_e||null!==Ne)&&(Pe(),Ae())}}function Ee(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Le=!1;if(d)try{var De={};Object.defineProperty(De,"passive",{get:function(){Le=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(Bp){Le=!1}function Te(e,t,n,r,i,a,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(Xp){this.onError(Xp)}}var Oe=!1,Me=null,Re=!1,Fe=null,Ue={onError:function(e){Oe=!0,Me=e}};function Be(e,t,n,r,i,a,s,o,l){Oe=!1,Me=null,Te.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(ze(e)!==e)throw Error(a(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ve(i),e;if(s===r)return Ve(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,Ze=i.unstable_UserBlockingPriority,et=i.unstable_NormalPriority,tt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,rt=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ot|0)|0},st=Math.log,ot=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=dt(o):0!==(a&=s)&&(r=dt(a))}else 0!==(s=n&~i)?r=dt(s):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,_t,Nt,St,kt=!1,At=[],jt=null,Pt=null,It=null,Ct=new Map,Et=new Map,Lt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tt(e,t){switch(e){case"focusin":case"focusout":jt=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Et.delete(t.pointerId)}}function Ot(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ve=r,n.target.dispatchEvent(r),ve=null,t.shift()}return!0}function Ft(e,t,n){Rt(e)&&n.delete(t)}function Ut(){kt=!1,null!==jt&&Rt(jt)&&(jt=null),null!==Pt&&Rt(Pt)&&(Pt=null),null!==It&&Rt(It)&&(It=null),Ct.forEach(Ft),Et.forEach(Ft)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Bt(t,e)}if(0<At.length){Bt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==jt&&Bt(jt,e),null!==Pt&&Bt(Pt,e),null!==It&&Bt(It,e),Ct.forEach(t),Et.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Lt.shift()}var qt=x.ReactCurrentBatchConfig,Vt=!0;function Ht(e,t,n,r){var i=bt,a=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,qt.transition=a}}function Wt(e,t,n,r){var i=bt,a=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,qt.transition=a}}function Gt(e,t,n,r){if(Vt){var i=Kt(e,t,n,r);if(null===i)Vr(e,t,r,Yt,n),Tt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return jt=Ot(jt,e,t,n,r,i),!0;case"dragenter":return Pt=Ot(Pt,e,t,n,r,i),!0;case"mouseover":return It=Ot(It,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ct.set(a,Ot(Ct.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Et.set(a,Ot(Et.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Tt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&xt(a),null===(a=Kt(e,t,n,r))&&Vr(e,t,r,Yt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Yt=null;function Kt(e,t,n,r){if(Yt=null,null!==(e=yi(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Qe:return 1;case Ze:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Qt=null;function Zt(){if(Qt)return Qt;var e,t,n=Xt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var an,sn,on,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=rn(ln),dn=R({},ln,{view:0,detail:0}),un=rn(dn),hn=R({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(an=e.screenX-on.screenX,sn=e.screenY-on.screenY):sn=an=0,on=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),fn=rn(hn),pn=rn(R({},hn,{dataTransfer:0})),mn=rn(R({},dn,{relatedTarget:0})),gn=rn(R({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=R({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=rn(yn),vn=rn(R({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return Nn}var kn=R({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=rn(kn),jn=rn(R({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=rn(R({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),In=rn(R({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=R({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),En=rn(Cn),Ln=[9,13,27,32],Dn=d&&"CompositionEvent"in window,Tn=null;d&&"documentMode"in document&&(Tn=document.documentMode);var On=d&&"TextEvent"in window&&!Tn,Mn=d&&(!Dn||Tn&&8<Tn&&11>=Tn),Rn=String.fromCharCode(32),Fn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,r){ke(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Yn(e){Rr(e,0)}function Kn(e){if(Y(vi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(d){var Xn;if(d){var Qn="oninput"in document;if(!Qn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Qn="function"===typeof Zn.oninput}Xn=Qn}else Xn=!1;$n=Xn&&(!document.documentMode||9<document.documentMode)}function er(){Wn&&(Wn.detachEvent("onpropertychange",tr),Gn=Wn=null)}function tr(e){if("value"===e.propertyName&&Kn(Gn)){var t=[];Hn(t,Gn,e,xe(e)),Ce(Yn,t)}}function nr(e,t,n){"focusin"===e?(er(),Gn=n,(Wn=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Gn)}function ir(e,t){if("click"===e)return Kn(t)}function ar(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ur(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(Kp){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=ur(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var s=cr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=d&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function vr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Wr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},_r={},Nr={};function Sr(e){if(_r[e])return _r[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Nr)return _r[e]=n[t];return e}d&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var kr=Sr("animationend"),Ar=Sr("animationiteration"),jr=Sr("animationstart"),Pr=Sr("transitionend"),Ir=new Map,Cr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Ir.set(e,t),l(t,[e])}for(var Lr=0;Lr<Cr.length;Lr++){var Dr=Cr[Lr];Er(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Er(kr,"onAnimationEnd"),Er(Ar,"onAnimationIteration"),Er(jr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,l,c){if(Be.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var d=Me;Oe=!1,Me=null,Re||(Re=!0,Fe=d)}}(r,t,void 0,e),e.currentTarget=null}function Rr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,o,c),a=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;Mr(i,o,c),a=l}}}if(Re)throw e=Fe,Re=!1,Fe=null,e}function Fr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,s.forEach(function(t){"selectionchange"!==t&&(Or.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Ur("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Jt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=yi(o)))return;if(5===(l=s.tag)||6===l){r=a=s;continue e}o=o.parentNode}}r=r.return}Ce(function(){var r=a,i=xe(n),s=[];e:{var o=Ir.get(e);if(void 0!==o){var l=cn,c=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case kr:case Ar:case jr:l=gn;break;case Pr:l=In;break;case"scroll":l=un;break;case"wheel":l=En;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ee(p,h))&&d.push(Hr(p,m,f)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,n,i),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ve||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(u=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=fn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=jn,m="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:vi(l),f=null==c?o:vi(c),(o=new d(m,p+"leave",l,n,i)).target=u,o.relatedTarget=f,m=null,yi(i)===r&&((d=new d(h,p+"enter",c,n,i)).target=f,d.relatedTarget=u,m=d),u=m,l&&c)e:{for(h=c,p=0,f=d=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)d=Gr(d),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gr(d),h=Gr(h)}d=null}else d=null;null!==l&&Yr(s,o,l,d,!1),null!==c&&null!==u&&Yr(s,u,c,d,!0)}if("select"===(l=(o=r?vi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jn;else if(Vn(o))if($n)g=ar;else{g=rr;var y=nr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(s,g,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?vi(r):window,e){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(mr=y,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,vr(s,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":vr(s,n,i)}var b;if(Dn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else zn?Un(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Mn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==v?"onCompositionEnd"===v&&zn&&(b=Zt()):(Xt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Wr(r,v)).length&&(v=new vn(v,e,null,n,i),s.push({event:v,listeners:y}),b?v.data=b:null!==(b=Bn(n))&&(v.data=b))),(b=On?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Rn);case"textInput":return(e=t.data)===Rn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Dn&&Un(e,t)?(e=Zt(),Qt=Xt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new vn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=b))}Rr(s,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ee(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Ee(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Ee(n,a))&&s.unshift(Hr(n,l,o)):i||null!=(l=Ee(n,a))&&s.push(Hr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Kr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Qr(){}var Zr=null,ei=null;function ti(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ri="function"===typeof clearTimeout?clearTimeout:void 0,ii="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ii?function(e){return ii.resolve(null).then(e).catch(si)}:ni;function si(e){setTimeout(function(){throw e})}function oi(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),ui="__reactFiber$"+di,hi="__reactProps$"+di,fi="__reactContainer$"+di,pi="__reactEvents$"+di,mi="__reactListeners$"+di,gi="__reactHandles$"+di;function yi(e){var t=e[ui];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[ui]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[ui])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[ui]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xi(e){return e[hi]||null}var wi=[],_i=-1;function Ni(e){return{current:e}}function Si(e){0>_i||(e.current=wi[_i],wi[_i]=null,_i--)}function ki(e,t){_i++,wi[_i]=e.current,e.current=t}var Ai={},ji=Ni(Ai),Pi=Ni(!1),Ii=Ai;function Ci(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ei(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){Si(Pi),Si(ji)}function Di(e,t,n){if(ji.current!==Ai)throw Error(a(168));ki(ji,t),ki(Pi,n)}function Ti(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return R({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ii=ji.current,ki(ji,e),ki(Pi,Pi.current),!0}function Mi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ti(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Si(Pi),Si(ji),ki(ji,e)):Si(Pi),ki(Pi,n)}var Ri=null,Fi=!1,Ui=!1;function Bi(e){null===Ri?Ri=[e]:Ri.push(e)}function zi(){if(!Ui&&null!==Ri){Ui=!0;var e=0,t=bt;try{var n=Ri;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ri=null,Fi=!1}catch(i){throw null!==Ri&&(Ri=Ri.slice(e+1)),Ge(Qe,zi),i}finally{bt=t,Ui=!1}}return null}var qi=[],Vi=0,Hi=null,Wi=0,Gi=[],Yi=0,Ki=null,Ji=1,$i="";function Xi(e,t){qi[Vi++]=Wi,qi[Vi++]=Hi,Hi=e,Wi=t}function Qi(e,t,n){Gi[Yi++]=Ji,Gi[Yi++]=$i,Gi[Yi++]=Ki,Ki=e;var r=Ji;e=$i;var i=32-at(r)-1;r&=~(1<<i),n+=1;var a=32-at(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ji=1<<32-at(t)+i|n<<i|r,$i=a+e}else Ji=1<<a|n<<i|r,$i=e}function Zi(e){null!==e.return&&(Xi(e,1),Qi(e,1,0))}function ea(e){for(;e===Hi;)Hi=qi[--Vi],qi[Vi]=null,Wi=qi[--Vi],qi[Vi]=null;for(;e===Ki;)Ki=Gi[--Yi],Gi[Yi]=null,$i=Gi[--Yi],Gi[Yi]=null,Ji=Gi[--Yi],Gi[Yi]=null}var ta=null,na=null,ra=!1,ia=null;function aa(e,t){var n=Cc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ta=e,na=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ta=e,na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Cc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ta=e,na=null,!0);default:return!1}}function oa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function la(e){if(ra){var t=na;if(t){var n=t;if(!sa(e,t)){if(oa(e))throw Error(a(418));t=li(n.nextSibling);var r=ta;t&&sa(e,t)?aa(r,n):(e.flags=-4097&e.flags|2,ra=!1,ta=e)}}else{if(oa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ra=!1,ta=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ta=e}function da(e){if(e!==ta)return!1;if(!ra)return ca(e),ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ti(e.type,e.memoizedProps)),t&&(t=na)){if(oa(e))throw ua(),Error(a(418));for(;t;)aa(e,t),t=li(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){na=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}na=null}}else na=ta?li(e.stateNode.nextSibling):null;return!0}function ua(){for(var e=na;e;)e=li(e.nextSibling)}function ha(){na=ta=null,ra=!1}function fa(e){null===ia?ia=[e]:ia.push(e)}var pa=x.ReactCurrentBatchConfig;function ma(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ya(e){return(0,e._init)(e._payload)}function ba(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Lc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===N?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===L&&ya(a)===t.type)?((r=i(t,n.props)).ref=ma(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=ma(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Rc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,a){return null===t||7!==t.tag?((t=Tc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ma(e,null,t),n.return=e,n;case _:return(t=Rc(t,e.mode,n)).return=e,t;case L:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Tc(t,e.mode,n,null)).return=e,t;ga(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?d(e,t,n,r):null;case L:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||O(n))return null!==i?null:u(e,t,n,r,null);ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case L:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||O(r))return u(t,e=e.get(n)||null,r,i,null);ga(t,r)}return null}function m(i,a,o,l){for(var c=null,d=null,u=a,m=a=0,g=null;null!==u&&m<o.length;m++){u.index>m?(g=u,u=null):g=u.sibling;var y=f(i,u,o[m],l);if(null===y){null===u&&(u=g);break}e&&u&&null===y.alternate&&t(i,u),a=s(y,a,m),null===d?c=y:d.sibling=y,d=y,u=g}if(m===o.length)return n(i,u),ra&&Xi(i,m),c;if(null===u){for(;m<o.length;m++)null!==(u=h(i,o[m],l))&&(a=s(u,a,m),null===d?c=u:d.sibling=u,d=u);return ra&&Xi(i,m),c}for(u=r(i,u);m<o.length;m++)null!==(g=p(u,i,m,o[m],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?m:g.key),a=s(g,a,m),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(i,e)}),ra&&Xi(i,m),c}function g(i,o,l,c){var d=O(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,m=o,g=o=0,y=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=f(i,m,b.value,c);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&t(i,m),o=s(v,o,g),null===u?d=v:u.sibling=v,u=v,m=y}if(b.done)return n(i,m),ra&&Xi(i,g),d;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=h(i,b.value,c))&&(o=s(b,o,g),null===u?d=b:u.sibling=b,u=b);return ra&&Xi(i,g),d}for(m=r(i,m);!b.done;g++,b=l.next())null!==(b=p(m,i,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),o=s(b,o,g),null===u?d=b:u.sibling=b,u=b);return e&&m.forEach(function(e){return t(i,e)}),ra&&Xi(i,g),d}return function e(r,a,s,l){if("object"===typeof s&&null!==s&&s.type===N&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,d=a;null!==d;){if(d.key===c){if((c=s.type)===N){if(7===d.tag){n(r,d.sibling),(a=i(d,s.props.children)).return=r,r=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&ya(c)===d.type){n(r,d.sibling),(a=i(d,s.props)).ref=ma(r,d,s),a.return=r,r=a;break e}n(r,d);break}t(r,d),d=d.sibling}s.type===N?((a=Tc(s.props.children,r.mode,l,s.key)).return=r,r=a):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=ma(r,a,s),l.return=r,r=l)}return o(r);case _:e:{for(d=s.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Rc(s,r.mode,l)).return=r,r=a}return o(r);case L:return e(r,a,(d=s._init)(s._payload),l)}if(te(s))return m(r,a,s,l);if(O(s))return g(r,a,s,l);ga(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=Mc(s,r.mode,l)).return=r,r=a),o(r)):n(r,a)}}var va=ba(!0),xa=ba(!1),wa=Ni(null),_a=null,Na=null,Sa=null;function ka(){Sa=Na=_a=null}function Aa(e){var t=wa.current;Si(wa),e._currentValue=t}function ja(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pa(e,t){_a=e,Sa=Na=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ia(e){var t=e._currentValue;if(Sa!==e)if(e={context:e,memoizedValue:t,next:null},null===Na){if(null===_a)throw Error(a(308));Na=e,_a.dependencies={lanes:0,firstContext:e}}else Na=Na.next=e;return t}var Ca=null;function Ea(e){null===Ca?Ca=[e]:Ca.push(e)}function La(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ea(t)):(n.next=i.next,i.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ta=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Da(e,n)}return null===(i=r.interleaved)?(t.next=t,Ea(r)):(t.next=i.next,i.next=t),r.interleaved=t,Da(e,n)}function Ua(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ba(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function za(e,t,n,r){var i=e.updateQueue;Ta=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==s&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=i.baseState;for(s=0,d=c=l=null,o=a;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){u=p.call(f,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,u,h):p)||void 0===h)break e;u=R({},u,h);break e;case 2:Ta=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=f,l=u):d=d.next=f,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ol|=s,e.lanes=s,e.memoizedState=u}}function qa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va={},Ha=Ni(Va),Wa=Ni(Va),Ga=Ni(Va);function Ya(e){if(e===Va)throw Error(a(174));return e}function Ka(e,t){switch(ki(Ga,t),ki(Wa,e),ki(Ha,Va),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Ha),ki(Ha,t)}function Ja(){Si(Ha),Si(Wa),Si(Ga)}function $a(e){Ya(Ga.current);var t=Ya(Ha.current),n=le(t,e.type);t!==n&&(ki(Wa,e),ki(Ha,n))}function Xa(e){Wa.current===e&&(Si(Ha),Si(Wa))}var Qa=Ni(0);function Za(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var es=[];function ts(){for(var e=0;e<es.length;e++)es[e]._workInProgressVersionPrimary=null;es.length=0}var ns=x.ReactCurrentDispatcher,rs=x.ReactCurrentBatchConfig,is=0,as=null,ss=null,os=null,ls=!1,cs=!1,ds=0,us=0;function hs(){throw Error(a(321))}function fs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ps(e,t,n,r,i,s){if(is=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ns.current=null===e||null===e.memoizedState?Xs:Qs,e=n(r,i),cs){s=0;do{if(cs=!1,ds=0,25<=s)throw Error(a(301));s+=1,os=ss=null,t.updateQueue=null,ns.current=Zs,e=n(r,i)}while(cs)}if(ns.current=$s,t=null!==ss&&null!==ss.next,is=0,os=ss=as=null,ls=!1,t)throw Error(a(300));return e}function ms(){var e=0!==ds;return ds=0,e}function gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===os?as.memoizedState=os=e:os=os.next=e,os}function ys(){if(null===ss){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ss.next;var t=null===os?as.memoizedState:os.next;if(null!==t)os=t,ss=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ss=e).memoizedState,baseState:ss.baseState,baseQueue:ss.baseQueue,queue:ss.queue,next:null},null===os?as.memoizedState=os=e:os=os.next=e}return os}function bs(e,t){return"function"===typeof t?t(e):t}function vs(e){var t=ys(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ss,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=o=null,c=null,d=s;do{var u=d.lane;if((is&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,as.lanes|=u,Ol|=u}d=d.next}while(null!==d&&d!==s);null===c?o=r:c.next=l,sr(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Ol|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xs(e){var t=ys(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);sr(s,t.memoizedState)||(bo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ws(){}function _s(e,t){var n=as,r=ys(),i=t(),s=!sr(r.memoizedState,i);if(s&&(r.memoizedState=i,bo=!0),r=r.queue,Ts(ks.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==os&&1&os.memoizedState.tag){if(n.flags|=2048,Is(9,Ss.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&is)||Ns(n,t,i)}return i}function Ns(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ss(e,t,n,r){t.value=n,t.getSnapshot=r,As(t)&&js(e)}function ks(e,t,n){return n(function(){As(t)&&js(e)})}function As(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(Kp){return!0}}function js(e){var t=Da(e,1);null!==t&&tc(t,e,1,-1)}function Ps(e){var t=gs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Gs.bind(null,as,e),[t.memoizedState,e]}function Is(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Cs(){return ys().memoizedState}function Es(e,t,n,r){var i=gs();as.flags|=e,i.memoizedState=Is(1|t,n,void 0,void 0===r?null:r)}function Ls(e,t,n,r){var i=ys();r=void 0===r?null:r;var a=void 0;if(null!==ss){var s=ss.memoizedState;if(a=s.destroy,null!==r&&fs(r,s.deps))return void(i.memoizedState=Is(t,n,a,r))}as.flags|=e,i.memoizedState=Is(1|t,n,a,r)}function Ds(e,t){return Es(8390656,8,e,t)}function Ts(e,t){return Ls(2048,8,e,t)}function Os(e,t){return Ls(4,2,e,t)}function Ms(e,t){return Ls(4,4,e,t)}function Rs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ls(4,4,Rs.bind(null,t,e),n)}function Us(){}function Bs(e,t){var n=ys();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zs(e,t){var n=ys();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qs(e,t,n){return 0===(21&is)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(sr(n,t)||(n=pt(),as.lanes|=n,Ol|=n,e.baseState=!0),t)}function Vs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=rs.transition;rs.transition={};try{e(!1),t()}finally{bt=n,rs.transition=r}}function Hs(){return ys().memoizedState}function Ws(e,t,n){var r=ec(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))Ks(t,n);else if(null!==(n=La(e,t,n,r))){tc(n,e,r,Zl()),Js(n,t,r)}}function Gs(e,t,n){var r=ec(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Ks(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,sr(o,s)){var l=t.interleaved;return null===l?(i.next=i,Ea(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(Wp){}null!==(n=La(e,t,i,r))&&(tc(n,e,r,i=Zl()),Js(n,t,r))}}function Ys(e){var t=e.alternate;return e===as||null!==t&&t===as}function Ks(e,t){cs=ls=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Js(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $s={readContext:Ia,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useInsertionEffect:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useMutableSource:hs,useSyncExternalStore:hs,useId:hs,unstable_isNewReconciler:!1},Xs={readContext:Ia,useCallback:function(e,t){return gs().memoizedState=[e,void 0===t?null:t],e},useContext:Ia,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Es(4194308,4,Rs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Es(4194308,4,e,t)},useInsertionEffect:function(e,t){return Es(4,2,e,t)},useMemo:function(e,t){var n=gs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ws.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gs().memoizedState=e},useState:Ps,useDebugValue:Us,useDeferredValue:function(e){return gs().memoizedState=e},useTransition:function(){var e=Ps(!1),t=e[0];return e=Vs.bind(null,e[1]),gs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=gs();if(ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&is)||Ns(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ds(ks.bind(null,r,s,e),[e]),r.flags|=2048,Is(9,Ss.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=gs(),t=Pl.identifierPrefix;if(ra){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=us++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qs={readContext:Ia,useCallback:Bs,useContext:Ia,useEffect:Ts,useImperativeHandle:Fs,useInsertionEffect:Os,useLayoutEffect:Ms,useMemo:zs,useReducer:vs,useRef:Cs,useState:function(){return vs(bs)},useDebugValue:Us,useDeferredValue:function(e){return qs(ys(),ss.memoizedState,e)},useTransition:function(){return[vs(bs)[0],ys().memoizedState]},useMutableSource:ws,useSyncExternalStore:_s,useId:Hs,unstable_isNewReconciler:!1},Zs={readContext:Ia,useCallback:Bs,useContext:Ia,useEffect:Ts,useImperativeHandle:Fs,useInsertionEffect:Os,useLayoutEffect:Ms,useMemo:zs,useReducer:xs,useRef:Cs,useState:function(){return xs(bs)},useDebugValue:Us,useDeferredValue:function(e){var t=ys();return null===ss?t.memoizedState=e:qs(t,ss.memoizedState,e)},useTransition:function(){return[xs(bs)[0],ys().memoizedState]},useMutableSource:ws,useSyncExternalStore:_s,useId:Hs,unstable_isNewReconciler:!1};function eo(e,t){if(e&&e.defaultProps){for(var n in t=R({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function to(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:R({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var no={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,i))&&(tc(t,e,i,r),Ua(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zl(),i=ec(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Fa(e,a,i))&&(tc(t,e,i,r),Ua(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zl(),r=ec(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fa(e,i,r))&&(tc(t,e,r,n),Ua(t,e,r))}};function ro(e,t,n,r,i,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function io(e,t,n){var r=!1,i=Ai,a=t.contextType;return"object"===typeof a&&null!==a?a=Ia(a):(i=Ei(t)?Ii:ji.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ci(e,i):Ai),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=no,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&no.enqueueReplaceState(t,t.state,null)}function so(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ia(a):(a=Ei(t)?Ii:ji.current,i.context=Ci(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(to(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&no.enqueueReplaceState(i,i.state,null),za(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function oo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(Yp){i="\nError generating stack: "+Yp.message+"\n"+Yp.stack}return{value:e,source:t,stack:i,digest:null}}function lo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function co(e,t){try{console.error(t.value)}catch(Hp){setTimeout(function(){throw Hp})}}var uo="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Hl=r),co(0,t)},n}function fo(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){co(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){co(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uo;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Fa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=x.ReactCurrentOwner,bo=!1;function vo(e,t,n,r){t.child=null===e?xa(t,null,n,r):va(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var a=t.ref;return Pa(t,i),r=ps(e,t,n,r,a,i),n=ms(),null===e||bo?(ra&&n&&Zi(t),t.flags|=1,vo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vo(e,t,i))}function wo(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ec(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_o(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(s,r)&&e.ref===t.ref)return Vo(e,t,i)}return t.flags|=1,(e=Lc(a,r)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(or(a,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Vo(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return ko(e,t,n,r,i)}function No(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ll,El),El|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Ll,El),El|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,ki(Ll,El),El|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,ki(Ll,El),El|=r;return vo(e,t,i,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ko(e,t,n,r,i){var a=Ei(n)?Ii:ji.current;return a=Ci(t,a),Pa(t,i),n=ps(e,t,n,r,a,i),r=ms(),null===e||bo?(ra&&r&&Zi(t),t.flags|=1,vo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vo(e,t,i))}function Ao(e,t,n,r,i){if(Ei(n)){var a=!0;Oi(t)}else a=!1;if(Pa(t,i),null===t.stateNode)qo(e,t),io(t,n,r),so(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ia(c):c=Ci(t,c=Ei(n)?Ii:ji.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,s,r,c),Ta=!1;var h=t.memoizedState;s.state=h,za(t,r,s,i),l=t.memoizedState,o!==r||h!==l||Pi.current||Ta?("function"===typeof d&&(to(t,n,d,r),l=t.memoizedState),(o=Ta||ro(t,n,o,r,h,l,c))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ma(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:eo(t.type,o),s.props=c,u=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ia(l):l=Ci(t,l=Ei(n)?Ii:ji.current);var f=n.getDerivedStateFromProps;(d="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,s,r,l),Ta=!1,h=t.memoizedState,s.state=h,za(t,r,s,i);var p=t.memoizedState;o!==u||h!==p||Pi.current||Ta?("function"===typeof f&&(to(t,n,f,r),p=t.memoizedState),(c=Ta||ro(t,n,c,r,h,p,l)||!1)?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return jo(e,t,n,r,a,i)}function jo(e,t,n,r,i,a){So(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Mi(t,n,!1),Vo(e,t,a);r=t.stateNode,yo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=va(t,e.child,null,a),t.child=va(t,null,o,a)):vo(e,t,o,a),t.memoizedState=r.state,i&&Mi(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ka(e,t.containerInfo)}function Io(e,t,n,r,i){return ha(),fa(i),t.flags|=256,vo(e,t,n,r),t.child}var Co,Eo,Lo,Do,To={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,n){var r,i=t.pendingProps,s=Qa.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),ki(Qa,1&s),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,i,0,null),e=Tc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=To,e):Ro(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,Fo(e,t,o,r=lo(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(s=Tc(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&va(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=To,s);if(0===(1&t.mode))return Fo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fo(e,t,o,r=lo(s=Error(a(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Pl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Da(e,i),tc(r,e,i,-1))}return pc(),Fo(e,t,o,r=lo(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,na=li(i.nextSibling),ta=t,ra=!0,ia=null,null!==e&&(Gi[Yi++]=Ji,Gi[Yi++]=$i,Gi[Yi++]=Ki,Ji=e.id,$i=e.overflow,Ki=t),t=Ro(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(o){o=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Lc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Lc(r,o):(o=Tc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=To,i}return e=(o=e.child).sibling,i=Lc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ro(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fo(e,t,n,r){return null!==r&&fa(r),va(t,e.child,null,n),(e=Ro(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ja(e.return,t,n)}function Bo(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(vo(e,t,r.children,n),0!==(2&(r=Qa.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(Qa,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Za(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bo(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Za(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bo(t,!0,n,null,a);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Lc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ea(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Ei(t.type)&&Li(),Wo(t),null;case 3:return r=t.stateNode,Ja(),Si(Pi),Si(ji),ts(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ia&&(ac(ia),ia=null))),Eo(e,t),Wo(t),null;case 5:Xa(t);var i=Ya(Ga.current);if(n=t.type,null!==e&&null!=t.stateNode)Lo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wo(t),null}if(e=Ya(Ha.current),da(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ui]=t,r[hi]=s,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Tr.length;i++)Fr(Tr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":$(r,s),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Fr("invalid",r);break;case"textarea":ie(r,s),Fr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":G(r),Z(r,s,!0);break;case"textarea":G(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ui]=t,e[hi]=r,Co(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Tr.length;i++)Fr(Tr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":$(e,r),i=J(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=R({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var d=c[s];"style"===s?me(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&de(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&ue(e,d):"number"===typeof d&&ue(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Fr("scroll",e):null!=d&&v(e,s,d,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ya(Ga.current),Ya(Ha.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[ui]=t,(s=r.nodeValue!==n)&&null!==(e=ta))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ui]=t,t.stateNode=r}return Wo(t),null;case 13:if(Si(Qa),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ra&&null!==na&&0!==(1&t.mode)&&0===(128&t.flags))ua(),ha(),t.flags|=98560,s=!1;else if(s=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[ui]=t}else ha(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),s=!1}else null!==ia&&(ac(ia),ia=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Qa.current)?0===Dl&&(Dl=3):pc())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Ja(),Eo(e,t),null===e&&zr(t.stateNode.containerInfo),Wo(t),null;case 10:return Aa(t.type._context),Wo(t),null;case 19:if(Si(Qa),null===(s=t.memoizedState))return Wo(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ho(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=Za(e))){for(t.flags|=128,Ho(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(Qa,1&Qa.current|2),t.child}e=e.sibling}null!==s.tail&&$e()>zl&&(t.flags|=128,r=!0,Ho(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=Za(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ra)return Wo(t),null}else 2*$e()-s.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=$e(),t.sibling=null,n=Qa.current,ki(Qa,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&El)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yo(e,t){switch(ea(t),t.tag){case 1:return Ei(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),Si(Pi),Si(ji),ts(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xa(t),null;case 13:if(Si(Qa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(Qa),null;case 4:return Ja(),null;case 10:return Aa(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Co=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Eo=function(){},Lo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ya(Ha.current);var a,s=null;switch(n){case"input":i=J(e,i),r=J(e,r),s=[];break;case"select":i=R({},i,{value:void 0}),r=R({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(d in ye(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ko=!1,Jo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Qo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(Kp){Nc(e,t,Kp)}else n.current=null}function Zo(e,t,n){try{n()}catch(Kp){Nc(e,t,Kp)}}var el=!1;function tl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Zo(t,n,a)}i=i.next}while(i!==r)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function il(e){var t=e.alternate;null!==t&&(e.alternate=null,il(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ui],delete t[hi],delete t[pi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ol(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ol(e,t,n),e=e.sibling;null!==e;)ol(e,t,n),e=e.sibling}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}var cl=null,dl=!1;function ul(e,t,n){for(n=n.child;null!==n;)hl(e,t,n),n=n.sibling}function hl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(rt,n)}catch(Gp){}switch(n.tag){case 5:Jo||Qo(n,t);case 6:var r=cl,i=dl;cl=null,ul(e,t,n),dl=i,null!==(cl=r)&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(dl?(e=cl,n=n.stateNode,8===e.nodeType?oi(e.parentNode,n):1===e.nodeType&&oi(e,n),zt(e)):oi(cl,n.stateNode));break;case 4:r=cl,i=dl,cl=n.stateNode.containerInfo,dl=!0,ul(e,t,n),cl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!==(2&a)||0!==(4&a))&&Zo(n,t,s),i=i.next}while(i!==r)}ul(e,t,n);break;case 1:if(!Jo&&(Qo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(Gp){Nc(n,t,Gp)}ul(e,t,n);break;case 21:ul(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,ul(e,t,n),Jo=r):ul(e,t,n);break;default:ul(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));hl(s,o,i),cl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(Wp){Nc(i,t,Wp)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),gl(e),4&r){try{tl(3,e,e.return),nl(3,e)}catch(jg){Nc(e,e.return,jg)}try{tl(5,e,e.return)}catch(jg){Nc(e,e.return,jg)}}break;case 1:pl(t,e),gl(e),512&r&&null!==n&&Qo(n,n.return);break;case 5:if(pl(t,e),gl(e),512&r&&null!==n&&Qo(n,n.return),32&e.flags){var i=e.stateNode;try{ue(i,"")}catch(jg){Nc(e,e.return,jg)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),be(l,o);var d=be(l,s);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?me(i,h):"dangerouslySetInnerHTML"===u?de(i,h):"children"===u?ue(i,h):v(i,u,h,d)}switch(l){case"input":Q(i,s);break;case"textarea":ae(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[hi]=s}catch(jg){Nc(e,e.return,jg)}}break;case 6:if(pl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(jg){Nc(e,e.return,jg)}}break;case 3:if(pl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(jg){Nc(e,e.return,jg)}break;case 4:default:pl(t,e),gl(e);break;case 13:pl(t,e),gl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=$e())),4&r&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(d=Jo)||u,pl(t,e),Jo=d):pl(t,e),gl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(h=Xo=u;null!==Xo;){switch(p=(f=Xo).child,f.tag){case 0:case 11:case 14:case 15:tl(4,f,f.return);break;case 1:Qo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(jg){Nc(r,n,jg)}}break;case 5:Qo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(h);continue}}null!==p?(p.return=f,Xo=p):xl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(jg){Nc(e,e.return,jg)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(jg){Nc(e,e.return,jg)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),gl(e),4&r&&fl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ue(i,""),r.flags&=-33),ll(e,sl(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ol(e,sl(e),s);break;default:throw Error(a(161))}}catch(cm){Nc(e,e.return,cm)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Xo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xo;){var i=Xo,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ko;if(!s){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Ko;var c=Jo;if(Ko=s,(Jo=l)&&!c)for(Xo=i;null!==Xo;)l=(s=Xo).child,22===s.tag&&null!==s.memoizedState?wl(i):null!==l?(l.return=s,Xo=l):wl(i);for(;null!==a;)Xo=a,bl(a,t,n),a=a.sibling;Xo=i,Ko=o,Jo=c}vl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xo=a):vl(e)}}function vl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||nl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:eo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&qa(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qa(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Jo||512&t.flags&&rl(t)}catch(f){Nc(t,t.return,f)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function xl(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function wl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nl(4,t)}catch(cm){Nc(t,n,cm)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(cm){Nc(t,i,cm)}}var a=t.return;try{rl(t)}catch(cm){Nc(t,a,cm)}break;case 5:var s=t.return;try{rl(t)}catch(cm){Nc(t,s,cm)}}}catch(cm){Nc(t,t.return,cm)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var _l,Nl=Math.ceil,Sl=x.ReactCurrentDispatcher,kl=x.ReactCurrentOwner,Al=x.ReactCurrentBatchConfig,jl=0,Pl=null,Il=null,Cl=0,El=0,Ll=Ni(0),Dl=0,Tl=null,Ol=0,Ml=0,Rl=0,Fl=null,Ul=null,Bl=0,zl=1/0,ql=null,Vl=!1,Hl=null,Wl=null,Gl=!1,Yl=null,Kl=0,Jl=0,$l=null,Xl=-1,Ql=0;function Zl(){return 0!==(6&jl)?$e():-1!==Xl?Xl:Xl=$e()}function ec(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Cl?Cl&-Cl:null!==pa.transition?(0===Ql&&(Ql=pt()),Ql):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function tc(e,t,n,r){if(50<Jl)throw Jl=0,$l=null,Error(a(185));gt(e,n,r),0!==(2&jl)&&e===Pl||(e===Pl&&(0===(2&jl)&&(Ml|=n),4===Dl&&sc(e,Cl)),nc(e,r),1===n&&0===jl&&0===(1&t.mode)&&(zl=$e()+500,Fi&&zi()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-at(a),o=1<<s,l=i[s];-1===l?0!==(o&n)&&0===(o&r)||(i[s]=ht(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ut(e,e===Pl?Cl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Fi=!0,Bi(e)}(oc.bind(null,e)):Bi(oc.bind(null,e)),ai(function(){0===(6&jl)&&zi()}),n=null;else{switch(vt(r)){case 1:n=Qe;break;case 4:n=Ze;break;case 16:default:n=et;break;case 536870912:n=nt}n=Pc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Xl=-1,Ql=0,0!==(6&jl))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ut(e,e===Pl?Cl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=jl;jl|=2;var s=fc();for(Pl===e&&Cl===t||(ql=null,zl=$e()+500,uc(e,t));;)try{yc();break}catch(Gp){hc(e,Gp)}ka(),Sl.current=s,jl=i,null!==Il?t=0:(Pl=null,Cl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=ic(e,i))),1===t)throw n=Tl,uc(e,0),sc(e,r),nc(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(s=ft(e))&&(r=s,t=ic(e,s))),1===t))throw n=Tl,uc(e,0),sc(e,r),nc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,Ul,ql);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=Bl+500-$e())){if(0!==ut(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(xc.bind(null,e,Ul,ql),t);break}xc(e,Ul,ql);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=ni(xc.bind(null,e,Ul,ql),r);break}xc(e,Ul,ql);break;default:throw Error(a(329))}}}return nc(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(uc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function sc(e,t){for(t&=~Rl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function oc(e){if(0!==(6&jl))throw Error(a(327));wc();var t=ut(e,0);if(0===(1&t))return nc(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Tl,uc(e,0),sc(e,t),nc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,ql),nc(e,$e()),null}function lc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&(zl=$e()+500,Fi&&zi())}}function cc(e){null!==Yl&&0===Yl.tag&&0===(6&jl)&&wc();var t=jl;jl|=1;var n=Al.transition,r=bt;try{if(Al.transition=null,bt=1,e)return e()}finally{bt=r,Al.transition=n,0===(6&(jl=t))&&zi()}}function dc(){El=Ll.current,Si(Ll)}function uc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ri(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ea(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:Ja(),Si(Pi),Si(ji),ts();break;case 5:Xa(r);break;case 4:Ja();break;case 13:case 19:Si(Qa);break;case 10:Aa(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Il=e=Lc(e.current,null),Cl=El=t,Dl=0,Tl=null,Rl=Ml=Ol=0,Ul=Fl=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}Ca=null}return e}function hc(e,t){for(;;){var n=Il;try{if(ka(),ns.current=$s,ls){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ls=!1}if(is=0,os=ss=as=null,cs=!1,ds=0,kl.current=null,null===n||null===n.return){Dl=1,Tl=t,Il=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Cl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=mo(o);if(null!==p){p.flags&=-257,go(p,o,l,0,t),1&p.mode&&po(s,d,t),c=d;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){po(s,d,t),pc();break e}c=Error(a(426))}else if(ra&&1&l.mode){var y=mo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),go(y,o,l,0,t),fa(oo(c,l));break e}}s=c=oo(c,l),4!==Dl&&(Dl=2),null===Fl?Fl=[s]:Fl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ba(s,ho(0,c,t));break e;case 1:l=c;var b=s.type,v=s.stateNode;if(0===(128&s.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Wl||!Wl.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Ba(s,fo(s,l,t));break e}}s=s.return}while(null!==s)}vc(n)}catch(x){t=x,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=$s,null===e?$s:e}function pc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Pl||0===(268435455&Ol)&&0===(268435455&Ml)||sc(Pl,Cl)}function mc(e,t){var n=jl;jl|=2;var r=fc();for(Pl===e&&Cl===t||(ql=null,uc(e,t));;)try{gc();break}catch(i){hc(e,i)}if(ka(),jl=n,Sl.current=r,null!==Il)throw Error(a(261));return Pl=null,Cl=0,Dl}function gc(){for(;null!==Il;)bc(Il)}function yc(){for(;null!==Il&&!Ke();)bc(Il)}function bc(e){var t=_l(e.alternate,e,El);e.memoizedProps=e.pendingProps,null===t?vc(e):Il=t,kl.current=null}function vc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,El)))return void(Il=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Dl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Dl&&(Dl=5)}function xc(e,t,n){var r=bt,i=Al.transition;try{Al.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==Yl);if(0!==(6&jl))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===Pl&&(Il=Pl=null,Cl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Pc(et,function(){return wc(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Al.transition,Al.transition=null;var o=bt;bt=1;var l=jl;jl|=4,kl.current=null,function(e,t){if(Zr=Vt,hr(e=ur())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(dm){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++d===i&&(l=o),f===s&&++u===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:e,selectionRange:n},Vt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:eo(t.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(dm){Nc(t,t.return,dm)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=el,el=!1}(e,n),ml(n,e),fr(ei),Vt=!!Zr,ei=Zr=null,e.current=n,yl(n,e,i),Je(),jl=l,bt=o,Al.transition=s}else e.current=n;if(Gl&&(Gl=!1,Yl=e,Kl=i),s=e.pendingLanes,0===s&&(Wl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=Hl,Hl=null,e;0!==(1&Kl)&&0!==e.tag&&wc(),s=e.pendingLanes,0!==(1&s)?e===$l?Jl++:(Jl=0,$l=e):Jl=0,zi()}(e,t,n,r)}finally{Al.transition=i,bt=r}return null}function wc(){if(null!==Yl){var e=vt(Kl),t=Al.transition,n=bt;try{if(Al.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Kl=0,0!==(6&jl))throw Error(a(331));var i=jl;for(jl|=4,Xo=e.current;null!==Xo;){var s=Xo,o=s.child;if(0!==(16&Xo.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xo=d;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:tl(8,u,s)}var h=u.child;if(null!==h)h.return=u,Xo=h;else for(;null!==Xo;){var f=(u=Xo).sibling,p=u.return;if(il(u),u===d){Xo=null;break}if(null!==f){f.return=p,Xo=f;break}Xo=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(s=Xo).flags))switch(s.tag){case 0:case 11:case 15:tl(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,Xo=b;break e}Xo=s.return}}var v=e.current;for(Xo=v;null!==Xo;){var x=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,Xo=x;else e:for(o=v;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(_){Nc(l,l.return,_)}if(l===o){Xo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Xo=w;break e}Xo=l.return}}if(jl=i,zi(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(rt,e)}catch(_){}r=!0}return r}finally{bt=n,Al.transition=t}}return!1}function _c(e,t,n){e=Fa(e,t=ho(0,t=oo(n,t),1),1),t=Zl(),null!==e&&(gt(e,1,t),nc(e,t))}function Nc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=Fa(t,e=fo(t,e=oo(n,e),1),1),e=Zl(),null!==t&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zl(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Cl&n)===n&&(4===Dl||3===Dl&&(130023424&Cl)===Cl&&500>$e()-Bl?uc(e,0):Rl|=n),nc(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=Zl();null!==(e=Da(e,t))&&(gt(e,t,n),nc(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),kc(e,n)}function Pc(e,t){return Ge(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cc(e,t,n,r){return new Ic(e,t,n,r)}function Ec(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lc(e,t){var n=e.alternate;return null===n?((n=Cc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,s){var o=2;if(r=e,"function"===typeof e)Ec(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Tc(n.children,i,s,t);case S:o=8,i|=8;break;case k:return(e=Cc(12,n,t,2|i)).elementType=k,e.lanes=s,e;case I:return(e=Cc(13,n,t,i)).elementType=I,e.lanes=s,e;case C:return(e=Cc(19,n,t,i)).elementType=C,e.lanes=s,e;case D:return Oc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:o=10;break e;case j:o=9;break e;case P:o=11;break e;case E:o=14;break e;case L:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Cc(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Tc(e,t,n,r){return(e=Cc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Cc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Cc(6,e,null,t)).lanes=n,e}function Rc(e,t,n){return(t=Cc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,a,s,o,l){return e=new Fc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Cc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function Bc(e){if(!e)return Ai;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ei(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ei(n))return Ti(e,n,t)}return t}function zc(e,t,n,r,i,a,s,o,l){return(e=Uc(n,r,!0,e,0,a,0,o,l)).context=Bc(null),n=e.current,(a=Ra(r=Zl(),i=ec(n))).callback=void 0!==t&&null!==t?t:null,Fa(n,a,i),e.current.lanes=i,gt(e,i,r),nc(e,r),e}function qc(e,t,n,r){var i=t.current,a=Zl(),s=ec(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fa(i,t,s))&&(tc(e,i,s,a),Ua(e,i,s)),s}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pi.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ha();break;case 5:$a(t);break;case 1:Ei(t.type)&&Oi(t);break;case 4:Ka(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(wa,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(Qa,1&Qa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Mo(e,t,n):(ki(Qa,1&Qa.current),null!==(e=Vo(e,t,n))?e.sibling:null);ki(Qa,1&Qa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(Qa,Qa.current),r)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return Vo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,ra&&0!==(1048576&t.flags)&&Qi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qo(e,t),e=t.pendingProps;var i=Ci(t,ji.current);Pa(t,n),i=ps(null,t,r,e,i,n);var s=ms();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ei(r)?(s=!0,Oi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Oa(t),i.updater=no,t.stateNode=i,i._reactInternals=t,so(t,r,e,n),t=jo(null,t,r,!0,s,n)):(t.tag=0,ra&&s&&Zi(t),vo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ec(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===E)return 14}return 2}(r),e=eo(r,e),i){case 0:t=ko(null,t,r,e,n);break e;case 1:t=Ao(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=wo(null,t,r,eo(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ko(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ao(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 3:e:{if(Po(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,Ma(e,t),za(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Io(e,t,r,n,i=oo(Error(a(423)),t));break e}if(r!==i){t=Io(e,t,r,n,i=oo(Error(a(424)),t));break e}for(na=li(t.stateNode.containerInfo.firstChild),ta=t,ra=!0,ia=null,n=xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ha(),r===i){t=Vo(e,t,n);break e}vo(e,t,r,n)}t=t.child}return t;case 5:return $a(t),null===e&&la(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ti(r,i)?o=null:null!==s&&ti(r,s)&&(t.flags|=32),So(e,t),vo(e,t,o,n),t.child;case 6:return null===e&&la(t),null;case 13:return Mo(e,t,n);case 4:return Ka(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=va(t,null,r,n):vo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 7:return vo(e,t,t.pendingProps,n),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ki(wa,r._currentValue),r._currentValue=o,null!==s)if(sr(s.value,o)){if(s.children===i.children&&!Pi.current){t=Vo(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Ra(-1,n&-n)).tag=2;var d=s.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ja(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ja(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}vo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Pa(t,n),r=r(i=Ia(i)),t.flags|=1,vo(e,t,r,n),t.child;case 14:return i=eo(r=t.type,t.pendingProps),wo(e,t,r,i=eo(r.type,i),n);case 15:return _o(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),qo(e,t),t.tag=1,Ei(r)?(e=!0,Oi(t)):e=!1,Pa(t,n),io(t,r,i),so(t,r,i,n),jo(null,t,r,!0,e,n);case 19:return zo(e,t,n);case 22:return No(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Qc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"===typeof i){var o=i;i=function(){var e=Vc(s);o.call(e)}}qc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Vc(s);a.call(e)}}var s=zc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=s,e[fi]=s.current,zr(8===e.nodeType?e.parentNode:e),cc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Vc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[fi]=l.current,zr(8===e.nodeType?e.parentNode:e),cc(function(){qc(t,l,n,r)}),l}(n,t,e,i,r);return Vc(s)}Kc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));qc(e,t,null,null)},Kc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc(function(){qc(null,e,null,null)}),t[fi]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&Mt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,$e()),0===(6&jl)&&(zl=$e()+500,zi()))}break;case 13:cc(function(){var t=Da(e,1);if(null!==t){var n=Zl();tc(t,e,1,n)}}),Wc(e,1)}},wt=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)tc(t,e,134217728,Zl());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=ec(e),n=Da(e,t);if(null!==n)tc(n,e,t,Zl());Wc(e,t)}},Nt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(a(90));Y(r),Q(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},je=lc,Pe=cc;var Zc={usingClientEntryPoint:!1,Events:[bi,vi,xi,ke,Ae,lc]},ed={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},td={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{rt=nd.inject(td),it=nd}catch(Bp){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return Qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,s,o),e[fi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Kc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return Qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(cc(function(){Qc(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Qc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var x=v.prototype=new b;x.constructor=v,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,N={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:N.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var j=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===a?"."+P(l,0):a,w(s)?(i="",null!=e&&(i=e.replace(j,"$&/")+"/"),I(s,t,i,"",function(e){return e})):null!=s&&(A(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(j,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+P(o=e[c],c);l+=I(o,t,i,d,s)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,i,d=a+P(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function E(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},D={transition:null},T={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:D,ReactCurrentOwner:N};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:C,forEach:function(e,t,n){C(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C(e,function(){t++}),t},toArray:function(e){return C(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=v,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=N.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.3.1"},4391:(e,t,n)=>{var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4980:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(2284);function i(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=(0,r.A)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}function a(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5043:(e,t,n)=>{e.exports=n(4202)},7234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<i&&0>a(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>a(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,D(_);else{var t=r(d);null!==t&&T(w,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,b(A),A=-1),p=!0;var a=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),x(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&T(w,u.startTime-n),l=!1}return l}finally{h=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,S=!1,k=null,A=-1,j=5,P=-1;function I(){return!(t.unstable_now()-P<j)}function C(){if(null!==k){var e=t.unstable_now();P=e;var n=!0;try{n=k(!0,e)}finally{n?N():(S=!1,k=null)}}else S=!1}if("function"===typeof v)N=function(){v(C)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,L=E.port2;E.port1.onmessage=C,N=function(){L.postMessage(null)}}else N=function(){y(C,0)};function D(e){k=e,S||(S=!0,N())}function T(e,n){A=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(g?(b(A),A=-1):g=!0,T(w,a-s))):(e.sortIndex=o,n(c,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},7950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8853:(e,t,n)=>{e.exports=n(7234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var s={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>s[e]=()=>r[e]);return s.default=()=>r,n.d(a,s),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{239:"afcaabc9",455:"e4160cdd",977:"dbff986b"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="grocery-erp-react:";n.l=(r,i,a,s)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+a){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=r),e[r]=[i];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=a);var s=n.p+n.u(t),o=new Error;n.l(s,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",o.name="ChunkLoadError",o.type=a,o.request=s,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,a,[s,o,l]=r,c=0;if(s.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)a=s[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkgrocery_erp_react=self.webpackChunkgrocery_erp_react||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(5043),i=n(4391),a=n(4980);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,a.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const l="ERP_DB",c="customers",d="products",u="orders",h="transactions",f="purchaseOrders",p="categories",m="plans",g="planOrders",y="activities",b=()=>new Promise((e,t)=>{const n=indexedDB.open(l,12);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=e=>{const t=e.target.result,n=e.target.transaction,r=e.oldVersion;if(t.objectStoreNames.contains(c)){const e=n.objectStore(c);r<7&&e.indexNames.contains("phone")&&e.deleteIndex("phone"),r<9&&(e.indexNames.contains("sellerId")||e.createIndex("sellerId","sellerId",{unique:!1})),r<6&&(e.indexNames.contains("mobileNumber")||e.createIndex("mobileNumber","mobileNumber",{unique:!1}),e.indexNames.contains("dueAmount")||e.createIndex("dueAmount","dueAmount",{unique:!1}),e.indexNames.contains("isSynced")||e.createIndex("isSynced","isSynced",{unique:!1})),e.indexNames.contains("isDeleted")||e.createIndex("isDeleted","isDeleted",{unique:!1})}else{const e=t.createObjectStore(c,{keyPath:"id",autoIncrement:!1});e.createIndex("sellerId","sellerId",{unique:!1}),e.createIndex("name","name",{unique:!1}),e.createIndex("mobileNumber","mobileNumber",{unique:!1}),e.createIndex("email","email",{unique:!1}),e.createIndex("dueAmount","dueAmount",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1}),e.createIndex("isSynced","isSynced",{unique:!1}),e.createIndex("isDeleted","isDeleted",{unique:!1})}if(t.objectStoreNames.contains(d)){const e=n.objectStore(d);if(r<9&&(e.indexNames.contains("sellerId")||e.createIndex("sellerId","sellerId",{unique:!1})),r<8&&(e.indexNames.contains("stock")||e.createIndex("stock","stock",{unique:!1}),e.indexNames.contains("costPrice")||e.createIndex("costPrice","costPrice",{unique:!1}),e.indexNames.contains("sellingUnitPrice")||e.createIndex("sellingUnitPrice","sellingUnitPrice",{unique:!1}),e.indexNames.contains("mfg")||e.createIndex("mfg","mfg",{unique:!1})),r<6){e.indexNames.contains("quantity")||e.createIndex("quantity","quantity",{unique:!1}),e.indexNames.contains("isSynced")||e.createIndex("isSynced","isSynced",{unique:!1});[{name:"categoryId",keyPath:"categoryId",unique:!1},{name:"unit",keyPath:"unit",unique:!1},{name:"lowStockLevel",keyPath:"lowStockLevel",unique:!1},{name:"sellingUnitPrice",keyPath:"sellingUnitPrice",unique:!1},{name:"isActive",keyPath:"isActive",unique:!1}].forEach(t=>{e.indexNames.contains(t.name)||e.createIndex(t.name,t.keyPath,{unique:t.unique})})}e.indexNames.contains("isDeleted")||e.createIndex("isDeleted","isDeleted",{unique:!1})}else{const e=t.createObjectStore(d,{keyPath:"id",autoIncrement:!1});e.createIndex("sellerId","sellerId",{unique:!1}),e.createIndex("name","name",{unique:!1}),e.createIndex("barcode","barcode",{unique:!1}),e.createIndex("categoryId","categoryId",{unique:!1}),e.createIndex("stock","stock",{unique:!1}),e.createIndex("quantity","quantity",{unique:!1}),e.createIndex("unit","unit",{unique:!1}),e.createIndex("lowStockLevel","lowStockLevel",{unique:!1}),e.createIndex("costPrice","costPrice",{unique:!1}),e.createIndex("sellingUnitPrice","sellingUnitPrice",{unique:!1}),e.createIndex("mfg","mfg",{unique:!1}),e.createIndex("expiryDate","expiryDate",{unique:!1}),e.createIndex("description","description",{unique:!1}),e.createIndex("isActive","isActive",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1}),e.createIndex("isSynced","isSynced",{unique:!1}),e.createIndex("isDeleted","isDeleted",{unique:!1})}if(t.objectStoreNames.contains(h)){const e=n.objectStore(h);if(r<9&&(e.indexNames.contains("sellerId")||e.createIndex("sellerId","sellerId",{unique:!1})),r<8){[{name:"type",keyPath:"type",unique:!1},{name:"amount",keyPath:"amount",unique:!1},{name:"paymentMethod",keyPath:"paymentMethod",unique:!1},{name:"description",keyPath:"description",unique:!1},{name:"date",keyPath:"date",unique:!1},{name:"razorpayOrderId",keyPath:"razorpayOrderId",unique:!1},{name:"razorpayPaymentId",keyPath:"razorpayPaymentId",unique:!1},{name:"planOrderId",keyPath:"planOrderId",unique:!1},{name:"planId",keyPath:"planId",unique:!1}].forEach(t=>{e.indexNames.contains(t.name)||e.createIndex(t.name,t.keyPath,{unique:t.unique})})}r<6&&(e.indexNames.contains("isSynced")||e.createIndex("isSynced","isSynced",{unique:!1})),e.indexNames.contains("isDeleted")||e.createIndex("isDeleted","isDeleted",{unique:!1})}else{const e=t.createObjectStore(h,{keyPath:"id",autoIncrement:!1});e.createIndex("sellerId","sellerId",{unique:!1}),e.createIndex("type","type",{unique:!1}),e.createIndex("amount","amount",{unique:!1}),e.createIndex("paymentMethod","paymentMethod",{unique:!1}),e.createIndex("description","description",{unique:!1}),e.createIndex("date","date",{unique:!1}),e.createIndex("razorpayOrderId","razorpayOrderId",{unique:!1}),e.createIndex("razorpayPaymentId","razorpayPaymentId",{unique:!1}),e.createIndex("planOrderId","planOrderId",{unique:!1}),e.createIndex("planId","planId",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1}),e.createIndex("isSynced","isSynced",{unique:!1}),e.createIndex("isDeleted","isDeleted",{unique:!1}),e.createIndex("customerId","customerId",{unique:!1}),e.createIndex("customerName","customerName",{unique:!1}),e.createIndex("total","total",{unique:!1})}if(t.objectStoreNames.contains(f)){const e=n.objectStore(f);if(r<9&&(e.indexNames.contains("sellerId")||e.createIndex("sellerId","sellerId",{unique:!1}),e.indexNames.contains("notes")||e.createIndex("notes","notes",{unique:!1}),e.indexNames.contains("cancelledReason")||e.createIndex("cancelledReason","cancelledReason",{unique:!1})),r<6){[{name:"expectedDeliveryDate",keyPath:"expectedDeliveryDate",unique:!1},{name:"actualDeliveryDate",keyPath:"actualDeliveryDate",unique:!1},{name:"cancelledAt",keyPath:"cancelledAt",unique:!1},{name:"isSynced",keyPath:"isSynced",unique:!1}].forEach(t=>{e.indexNames.contains(t.name)||e.createIndex(t.name,t.keyPath,{unique:t.unique})})}e.indexNames.contains("isDeleted")||e.createIndex("isDeleted","isDeleted",{unique:!1})}else{const e=t.createObjectStore(f,{keyPath:"id",autoIncrement:!1});e.createIndex("sellerId","sellerId",{unique:!1}),e.createIndex("supplierName","supplierName",{unique:!1}),e.createIndex("status","status",{unique:!1}),e.createIndex("total","total",{unique:!1}),e.createIndex("notes","notes",{unique:!1}),e.createIndex("expectedDeliveryDate","expectedDeliveryDate",{unique:!1}),e.createIndex("actualDeliveryDate","actualDeliveryDate",{unique:!1}),e.createIndex("cancelledAt","cancelledAt",{unique:!1}),e.createIndex("cancelledReason","cancelledReason",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1}),e.createIndex("isSynced","isSynced",{unique:!1}),e.createIndex("isDeleted","isDeleted",{unique:!1})}if(!t.objectStoreNames.contains(y)){const e=t.createObjectStore(y,{keyPath:"id",autoIncrement:!1});e.createIndex("type","type",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1})}if(r<9&&(t.objectStoreNames.contains("invoices")&&t.deleteObjectStore("invoices"),t.objectStoreNames.contains("settings")&&t.deleteObjectStore("settings")),t.objectStoreNames.contains(u)){const e=n.objectStore(u);if(r<11){[{name:"sellerId",keyPath:"sellerId"},{name:"customerId",keyPath:"customerId"},{name:"paymentMethod",keyPath:"paymentMethod"},{name:"totalAmount",keyPath:"totalAmount"},{name:"createdAt",keyPath:"createdAt"},{name:"updatedAt",keyPath:"updatedAt"},{name:"isSynced",keyPath:"isSynced"},{name:"syncedAt",keyPath:"syncedAt"},{name:"_id",keyPath:"_id"},{name:"isDeleted",keyPath:"isDeleted"}].forEach(t=>{e.indexNames.contains(t.name)||(console.log("[IndexedDB Migration] Adding index ".concat(t.name," to orders store")),e.createIndex(t.name,t.keyPath,{unique:!1}))})}}else{const e=t.createObjectStore(u,{keyPath:"id",autoIncrement:!1});e.createIndex("sellerId","sellerId",{unique:!1}),e.createIndex("customerId","customerId",{unique:!1}),e.createIndex("paymentMethod","paymentMethod",{unique:!1}),e.createIndex("totalAmount","totalAmount",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1}),e.createIndex("updatedAt","updatedAt",{unique:!1}),e.createIndex("isSynced","isSynced",{unique:!1}),e.createIndex("syncedAt","syncedAt",{unique:!1}),e.createIndex("_id","_id",{unique:!1}),e.createIndex("isDeleted","isDeleted",{unique:!1})}if(t.objectStoreNames.contains(m)){const e=n.objectStore(m);r<10&&(e.indexNames.contains("name")||e.createIndex("name","name",{unique:!1}),e.indexNames.contains("price")||e.createIndex("price","price",{unique:!1}),e.indexNames.contains("durationDays")||e.createIndex("durationDays","durationDays",{unique:!1}),e.indexNames.contains("isActive")||e.createIndex("isActive","isActive",{unique:!1}))}else{const e=t.createObjectStore(m,{keyPath:"id",autoIncrement:!1});e.createIndex("name","name",{unique:!1}),e.createIndex("price","price",{unique:!1}),e.createIndex("durationDays","durationDays",{unique:!1}),e.createIndex("isActive","isActive",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1})}if(t.objectStoreNames.contains(g)){const e=n.objectStore(g);r<10&&(e.indexNames.contains("sellerId")||e.createIndex("sellerId","sellerId",{unique:!1}),e.indexNames.contains("planId")||e.createIndex("planId","planId",{unique:!1}),e.indexNames.contains("expiryDate")||e.createIndex("expiryDate","expiryDate",{unique:!1}),e.indexNames.contains("paymentStatus")||e.createIndex("paymentStatus","paymentStatus",{unique:!1}),e.indexNames.contains("isSynced")||e.createIndex("isSynced","isSynced",{unique:!1}))}else{const e=t.createObjectStore(g,{keyPath:"id",autoIncrement:!1});e.createIndex("sellerId","sellerId",{unique:!1}),e.createIndex("planId","planId",{unique:!1}),e.createIndex("expiryDate","expiryDate",{unique:!1}),e.createIndex("paymentStatus","paymentStatus",{unique:!1}),e.createIndex("razorpayOrderId","razorpayOrderId",{unique:!1}),e.createIndex("razorpayPaymentId","razorpayPaymentId",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1}),e.createIndex("isSynced","isSynced",{unique:!1})}if(t.objectStoreNames.contains(p)){const e=n.objectStore(p);if(r<9&&(e.indexNames.contains("sellerId")||e.createIndex("sellerId","sellerId",{unique:!1}),e.indexNames.contains("image")&&e.deleteIndex("image"),e.indexNames.contains("description")||e.createIndex("description","description",{unique:!1}),e.indexNames.contains("name")))try{e.deleteIndex("name"),e.createIndex("name","name",{unique:!1})}catch(i){}r<6&&(e.indexNames.contains("isActive")||e.createIndex("isActive","isActive",{unique:!1}),e.indexNames.contains("isSynced")||e.createIndex("isSynced","isSynced",{unique:!1})),e.indexNames.contains("isDeleted")||e.createIndex("isDeleted","isDeleted",{unique:!1})}else{const e=t.createObjectStore(p,{keyPath:"id",autoIncrement:!1});e.createIndex("sellerId","sellerId",{unique:!1}),e.createIndex("name","name",{unique:!1}),e.createIndex("isActive","isActive",{unique:!1}),e.createIndex("description","description",{unique:!1}),e.createIndex("createdAt","createdAt",{unique:!1}),e.createIndex("isSynced","isSynced",{unique:!1}),e.createIndex("isDeleted","isDeleted",{unique:!1})}}}),v=e=>{const t=[];return e.name&&"string"===typeof e.name&&""!==e.name.trim()||t.push("Customer name is required"),void 0!==e.dueAmount&&null!==e.dueAmount&&("number"!==typeof e.dueAmount||e.dueAmount<0)&&t.push("Due amount must be a non-negative number"),{valid:0===t.length,errors:t}},x=e=>{const t=[];e.name&&"string"===typeof e.name&&""!==e.name.trim()||t.push("Product name is required");const n=void 0!==e.stock?e.stock:e.quantity;void 0!==n&&null!==n&&("number"!==typeof n||n<0)&&t.push("Product stock/quantity must be a non-negative number"),e.unit&&"string"!==typeof e.unit&&t.push("Product unit must be a string");const r=void 0!==e.costPrice?e.costPrice:e.unitPrice;return void 0!==r&&null!==r&&("number"!==typeof r||r<0)&&t.push("Cost price/unit price must be a non-negative number"),void 0!==e.sellingUnitPrice&&null!==e.sellingUnitPrice&&("number"!==typeof e.sellingUnitPrice||e.sellingUnitPrice<0)&&t.push("Selling unit price must be a non-negative number"),void 0!==e.sellingPrice&&null!==e.sellingPrice&&("number"!==typeof e.sellingPrice||e.sellingPrice<0)&&t.push("Selling price must be a non-negative number"),void 0!==e.lowStockLevel&&null!==e.lowStockLevel&&("number"!==typeof e.lowStockLevel||e.lowStockLevel<0)&&t.push("Low stock level must be a non-negative number"),!e.expiryDate||e.expiryDate instanceof Date||"string"===typeof e.expiryDate||t.push("Expiry date must be a valid date"),void 0!==e.description&&null!==e.description&&"string"!==typeof e.description&&t.push("Description must be a string"),void 0!==e.isActive&&"boolean"!==typeof e.isActive&&t.push("isActive must be a boolean"),{valid:0===t.length,errors:t}},w=e=>{const t=[];e.sellerId||t.push("Seller ID is required");const n=["cash","card","upi","due","credit"];return e.paymentMethod&&n.includes(e.paymentMethod)||t.push("Payment method must be one of: ".concat(n.join(", "))),Array.isArray(e.items)&&0!==e.items.length?e.items.forEach((e,n)=>{e.name&&"string"===typeof e.name&&""!==e.name.trim()||t.push("Item ".concat(n+1,": Name is required")),(void 0===e.sellingPrice||null===e.sellingPrice||"number"!==typeof e.sellingPrice||e.sellingPrice<0)&&t.push("Item ".concat(n+1,": Selling price must be a non-negative number")),(void 0===e.costPrice||null===e.costPrice||"number"!==typeof e.costPrice||e.costPrice<0)&&t.push("Item ".concat(n+1,": Cost price must be a non-negative number")),(void 0===e.quantity||null===e.quantity||"number"!==typeof e.quantity||e.quantity<1)&&t.push("Item ".concat(n+1,": Quantity must be at least 1")),e.unit&&"string"===typeof e.unit||t.push("Item ".concat(n+1,": Unit is required"))}):t.push("Order must have at least one item"),(void 0===e.totalAmount||null===e.totalAmount||"number"!==typeof e.totalAmount||e.totalAmount<0)&&t.push("Total amount must be a non-negative number"),{valid:0===t.length,errors:t}},_=e=>{const t=[];e.type&&["plan_purchase"].includes(e.type)||t.push("Transaction type must be 'plan_purchase' (use Order model for sales)"),(void 0===e.amount||null===e.amount||"number"!==typeof e.amount||e.amount<0)&&t.push("Transaction amount must be a non-negative number");const n=["cash","card","upi","bank","credit","razorpay"];return e.paymentMethod&&!n.includes(e.paymentMethod)&&t.push("Payment method must be one of: ".concat(n.join(", "))),!e.date||e.date instanceof Date||"string"===typeof e.date||t.push("Transaction date must be a valid date"),{valid:0===t.length,errors:t}},N=e=>{const t=[];e.supplierName&&"string"===typeof e.supplierName&&""!==e.supplierName.trim()||t.push("Supplier name is required"),Array.isArray(e.items)&&0!==e.items.length?e.items.forEach((e,n)=>{e.productName&&"string"===typeof e.productName&&""!==e.productName.trim()||t.push("Item ".concat(n+1,": Product name is required")),(void 0===e.quantity||null===e.quantity||"number"!==typeof e.quantity||e.quantity<1)&&t.push("Item ".concat(n+1,": Quantity must be at least 1")),(void 0===e.price||null===e.price||"number"!==typeof e.price||e.price<0)&&t.push("Item ".concat(n+1,": Price must be a non-negative number"));const r=["pcs","kg","g","mg","l","ml","box","packet","bottle","dozen"];e.unit&&r.includes(e.unit)||t.push("Item ".concat(n+1,": Unit must be one of: ").concat(r.join(", "))),void 0!==e.subtotal&&null!==e.subtotal&&("number"!==typeof e.subtotal||e.subtotal<0)&&t.push("Item ".concat(n+1,": Subtotal must be a non-negative number"))}):t.push("Purchase order must have at least one item"),void 0!==e.total&&null!==e.total&&("number"!==typeof e.total||e.total<0)&&t.push("Total must be a non-negative number");const n=["pending","completed","cancelled"];return e.status&&!n.includes(e.status)&&t.push("Status must be one of: ".concat(n.join(", "))),!e.expectedDeliveryDate||e.expectedDeliveryDate instanceof Date||"string"===typeof e.expectedDeliveryDate||t.push("Expected delivery date must be a valid date"),!e.actualDeliveryDate||e.actualDeliveryDate instanceof Date||"string"===typeof e.actualDeliveryDate||t.push("Actual delivery date must be a valid date"),!e.cancelledAt||e.cancelledAt instanceof Date||"string"===typeof e.cancelledAt||t.push("Cancelled date must be a valid date"),{valid:0===t.length,errors:t}},S=e=>{const t=[];return e.name&&"string"===typeof e.name&&""!==e.name.trim()||t.push("Category name is required"),void 0!==e.isActive&&"boolean"!==typeof e.isActive&&t.push("isActive must be a boolean"),void 0!==e.description&&null!==e.description&&"string"!==typeof e.description&&t.push("Description must be a string"),{valid:0===t.length,errors:t}},k=e=>{const t=[];return e.name&&"string"===typeof e.name&&""!==e.name.trim()||t.push("Plan name is required"),(void 0===e.price||null===e.price||"number"!==typeof e.price||e.price<0)&&t.push("Plan price must be a non-negative number"),(void 0===e.durationDays||null===e.durationDays||"number"!==typeof e.durationDays||e.durationDays<1)&&t.push("Duration days must be at least 1"),void 0!==e.isActive&&"boolean"!==typeof e.isActive&&t.push("isActive must be a boolean"),{valid:0===t.length,errors:t}},A=e=>{const t=[];e.planId&&"string"===typeof e.planId||t.push("Plan ID is required"),(void 0===e.price||null===e.price||"number"!==typeof e.price||e.price<0)&&t.push("Plan order price must be a non-negative number"),(void 0===e.durationDays||null===e.durationDays||"number"!==typeof e.durationDays||e.durationDays<1)&&t.push("Duration days must be at least 1"),!e.expiryDate||e.expiryDate instanceof Date||"string"===typeof e.expiryDate||t.push("Expiry date must be a valid date");const n=["pending","completed","failed"];return e.paymentStatus&&!n.includes(e.paymentStatus)&&t.push("Payment status must be one of: ".concat(n.join(", "))),{valid:0===t.length,errors:t}},j=e=>({[c]:v,[d]:x,[u]:w,[h]:_,[f]:N,[p]:S,[m]:k,[g]:A}[e]||null),P=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(e)&&0!==e.length?t?JSON.stringify(e.map(e=>({productName:e.productName||e.name,quantity:e.quantity,price:e.price})).sort((e,t)=>(e.productName||e.name||"").localeCompare(t.productName||t.name||""))):JSON.stringify(e.map(e=>({name:e.name,quantity:e.quantity,sellingPrice:e.sellingPrice,costPrice:e.costPrice})).sort((e,t)=>(e.name||"").localeCompare(t.name||""))):""},I=(e,t)=>{if(!e||!t)return!1;const n=new Date(e),r=new Date(t);return Math.abs(n.getTime()-r.getTime())<=5e3},C=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{const n=await E(e);if(e===d){const e=(t.name||"").trim().toLowerCase(),r=(t.description||"").trim().toLowerCase(),i=n.find(t=>{const n=(t.name||"").trim().toLowerCase(),i=(t.description||"").trim().toLowerCase();return n===e&&(i===r||""===i&&""===r||null===i&&null===r||void 0===i&&void 0===r)});if(i)return console.warn("\u26a0\ufe0f Duplicate product detected in IndexedDB (skipping add):",{name:t.name,description:t.description||"No description",existingId:i.id,newId:t.id}),Promise.resolve(i.id||i._id)}else if(e===c){const e=(t.name||"").trim().toLowerCase(),r=(t.mobileNumber||t.phone||"").trim(),i=(t.email||"").trim().toLowerCase(),a=n.find(t=>{const n=(t.name||"").trim().toLowerCase(),a=(t.mobileNumber||t.phone||"").trim(),s=(t.email||"").trim().toLowerCase();return r&&a?n===e&&a===r:i&&s?n===e&&s===i:n===e&&!a&&!s&&!r&&!i});if(a)return console.warn("\u26a0\ufe0f Duplicate customer detected in IndexedDB (skipping add):",{name:t.name,mobileNumber:r||"N/A",email:i||"N/A",existingId:a.id,newId:t.id}),Promise.resolve(a.id||a._id)}else if(e===u){const e=P(t.items,!1),r=t.createdAt||t.date,i=n.find(n=>{if(n.sellerId!==t.sellerId)return!1;if((n.customerId||null)!==(t.customerId||null))return!1;if(Math.abs((n.totalAmount||0)-(t.totalAmount||0))>.01)return!1;return P(n.items,!1)===e&&(r&&n.createdAt?I(n.createdAt,r):n.id===t.id||n._id===t.id||n.id===t._id)});if(i)return console.warn("\u26a0\ufe0f Duplicate order detected in IndexedDB (skipping add):",{sellerId:t.sellerId,customerId:t.customerId||"Walk-in",totalAmount:t.totalAmount,createdAt:r,existingId:i.id,newId:t.id}),Promise.resolve(i.id||i._id)}else if(e===f){const e=P(t.items,!0),r=t.createdAt||t.date,i=n.find(n=>{if(n.sellerId!==t.sellerId)return!1;if((n.supplierName||"").trim().toLowerCase()!==(t.supplierName||"").trim().toLowerCase())return!1;if(Math.abs((n.total||0)-(t.total||0))>.01)return!1;return P(n.items,!0)===e&&(r&&n.createdAt?I(n.createdAt,r):n.id===t.id||n._id===t.id||n.id===t._id)});if(i)return console.warn("\u26a0\ufe0f Duplicate vendor order detected in IndexedDB (skipping add):",{sellerId:t.sellerId,supplierName:t.supplierName,total:t.total,createdAt:r,existingId:i.id,newId:t.id}),Promise.resolve(i.id||i._id)}}catch(a){console.error("Error checking for duplicate ".concat(e,":"),a)}if(!n){const n=j(e);if(n){const r=n(t);if(!r.valid)return console.error("Validation failed for ".concat(e,":"),r.errors),console.error("Item data:",JSON.stringify(t,null,2)),Promise.reject(new Error("Validation failed: ".concat(r.errors.join(", "))))}}const r=o(o({},t),{},{isSynced:void 0!==t.isSynced&&t.isSynced}),i=await b();return new Promise((t,n)=>{if(!i.objectStoreNames.contains(e)){const t=new Error('Object store "'.concat(e,'" does not exist. Database may need to be upgraded.'));return console.error("IndexedDB error:",t),console.error("Available stores:",Array.from(i.objectStoreNames)),n(t)}const a=i.transaction([e],"readwrite").objectStore(e),s=a.add(r);s.onsuccess=()=>{console.log("Successfully added item to ".concat(e,":"),r.id||r._id),t(s.result)},s.onerror=()=>{if(s.error&&"ConstraintError"===s.error.name){console.warn("\u26a0\ufe0f Item with ID ".concat(r.id||r._id," already exists in ").concat(e,", treating as update"));const i=a.put(r);i.onsuccess=()=>{console.log("Updated existing item in ".concat(e,":"),r.id||r._id),t(i.result)},i.onerror=()=>{console.error("Error updating item in ".concat(e,":"),i.error),n(i.error)}}else console.error("Error adding to ".concat(e,":"),s.error),n(s.error)}})},E=async e=>{const t=await b();return new Promise((n,r)=>{const i=t.transaction([e],"readonly").objectStore(e).getAll();i.onsuccess=()=>n(i.result),i.onerror=()=>r(i.error)})},L=async function(e,t){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])){const n=j(e);if(n){const r=n(t);if(!r.valid)return console.error("Validation failed for ".concat(e,":"),r.errors),console.error("Item data:",JSON.stringify(t,null,2)),Promise.reject(new Error("Validation failed: ".concat(r.errors.join(", "))))}}const n=o(o({},t),{},{isSynced:void 0!==t.isSynced&&t.isSynced}),r=await b();return new Promise((t,i)=>{if(!r.objectStoreNames.contains(e)){const t=new Error('Object store "'.concat(e,'" does not exist. Database may need to be upgraded.'));return console.error("IndexedDB error:",t),console.error("Available stores:",Array.from(r.objectStoreNames)),i(t)}const a=r.transaction([e],"readwrite").objectStore(e).put(n);a.onsuccess=()=>{console.log("Successfully saved item to ".concat(e,":"),n.id||n._id),t(a.result)},a.onerror=()=>{console.error("Error saving to ".concat(e,":"),a.error),i(a.error)}})},D=async(e,t)=>{const n=await b();return new Promise((r,i)=>{const a=n.transaction([e],"readwrite").objectStore(e).delete(t);a.onsuccess=()=>r(),a.onerror=()=>i(a.error)})},T=async function(e,t){if(!(arguments.length>2&&void 0!==arguments[2]&&arguments[2])){const n=j(e);if(n){const e=[];if(t.forEach((t,r)=>{const i=n(t);i.valid||e.push("Item ".concat(r+1,": ").concat(i.errors.join(", ")))}),e.length>0)return Promise.reject(new Error("Validation failed: ".concat(e.join("; "))))}}const n=await b();return new Promise((r,i)=>{const a=n.transaction([e],"readwrite"),s=a.objectStore(e),o=t.map(e=>new Promise((t,n)=>{const r=s.add(e);r.onsuccess=()=>t(),r.onerror=()=>n(r.error)}));a.oncomplete=()=>r(),a.onerror=()=>i(a.error),Promise.all(o).catch(i)})},O=async e=>{const t=await b();return new Promise((n,r)=>{const i=t.transaction([e],"readwrite").objectStore(e).clear();i.onsuccess=()=>n(),i.onerror=()=>r(i.error)})},M=async()=>{try{const[e,t,n,r,i,a,s,o,l]=await Promise.all([E(c),E(d),E(u),E(h),E(f),E(p),E(m),E(g),E(y)]);return{version:12,exportedAt:(new Date).toISOString(),customers:e,products:t,orders:n,transactions:r,purchaseOrders:i,categories:a,plans:s,planOrders:o,activities:l}}catch(e){throw console.error("Error exporting data:",e),e}},R=async function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{t&&await Promise.all([O(c),O(d),O(u),O(h),O(f),O(p),O(m),O(g),O(y)]);const n={customers:0,products:0,orders:0,transactions:0,purchaseOrders:0,categories:0,plans:0,planOrders:0,activities:0};return e.customers&&e.customers.length>0&&(await T(c,e.customers),n.customers=e.customers.length),e.products&&e.products.length>0&&(await T(d,e.products),n.products=e.products.length),e.orders&&e.orders.length>0&&(await T(u,e.orders),n.orders=e.orders.length),e.transactions&&e.transactions.length>0&&(await T(h,e.transactions),n.transactions=e.transactions.length),e.purchaseOrders&&e.purchaseOrders.length>0&&(await T(f,e.purchaseOrders),n.purchaseOrders=e.purchaseOrders.length),e.categories&&e.categories.length>0&&(await T(p,e.categories),n.categories=e.categories.length),e.plans&&e.plans.length>0&&(await T(m,e.plans),n.plans=e.plans.length),e.planOrders&&e.planOrders.length>0&&(await T(g,e.planOrders),n.planOrders=e.planOrders.length),e.activities&&e.activities.length>0&&(await T(y,e.activities),n.activities=e.activities.length),{success:!0,message:"Data imported successfully",imported:n}}catch(n){return console.error("Error importing data:",n),{success:!1,message:n.message,imported:{}}}},F="http://localhost:5000/api",U=async()=>{try{const e=F.replace("/api","")||"http://localhost:5000",t=new Promise((e,t)=>setTimeout(()=>t(new Error("Health check timeout")),5e3)),n=fetch("".concat(e,"/api/health"),{method:"GET",headers:{"Content-Type":"application/json"}}),r=await Promise.race([n,t]);if(r&&r.ok){return{available:!0,data:await r.json()}}return{available:!1,error:"Backend health check failed"}}catch(e){return"Health check timeout"===e.message?{available:!1,error:"Backend connection timeout"}:(console.error("Backend health check error:",e),{available:!1,error:e.message||"Backend not reachable"})}},B=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const i=localStorage.getItem("auth");let a=null;if(i)try{var n;const e=JSON.parse(i);a=e.sellerId||(null===(n=e.currentUser)||void 0===n?void 0:n.sellerId)}catch(r){console.error("Error parsing auth data:",r)}const s=o({"Content-Type":"application/json"},a&&{"x-seller-id":a}),l=await fetch("".concat(F).concat(e),o(o({},t),{},{headers:o(o({},s),t.headers),body:t.body?JSON.stringify(t.body):void 0})),c=await l.json().catch(()=>({}));if(!l.ok)throw new Error(c.message||"HTTP ".concat(l.status,": ").concat(l.statusText));return{success:!0,data:c}}catch(i){return console.error("API request error (".concat(e,"):"),i),{success:!1,error:i.message}}},z=()=>{try{var e;const t=localStorage.getItem("auth");if(!t)return null;const n=JSON.parse(t);return n.sellerId||(null===(e=n.currentUser)||void 0===e?void 0:e.sellerId)||null}catch(t){return console.error("Error extracting sellerId from auth:",t),null}},q=async(e,t,n,r)=>{try{const i=await fetch("".concat(F,"/auth/seller"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,uid:t,displayName:n,photoURL:r})});if(i.ok){const e=await i.json();if(e.success&&e.seller)return{success:!0,sellerId:e.seller._id,seller:e.seller}}return{success:!1,error:(await i.json().catch(()=>({}))).message||"Failed to get seller ID",status:i.status}}catch(i){return console.error("Get seller ID error:",i),{success:!1,error:i.message}}},V=async(e,t,n)=>{const r={customers:"/sync/customers",products:"/sync/products",orders:"/sync/orders",transactions:"/sync/transactions",purchaseOrders:"/sync/vendor-orders",categories:"/sync/categories"}[e];if(!r)return console.error("[syncData] Unknown store: ".concat(e)),{success:!1,error:"Unknown store: ".concat(e)};console.log("[syncData] Syncing ".concat(e," to endpoint: ").concat(r)),console.log("[syncData] Items count: ".concat(Array.isArray(t)?t.length:1)),console.log("[syncData] SellerId: ".concat(n||"from header"));const i={items:Array.isArray(t)?t:[t]};n&&(i.sellerId=n),console.log("[syncData] Request body:",JSON.stringify(i,null,2)),console.log("[syncData] Making API request to: ".concat(F).concat(r));const a=await B(r,{method:"POST",body:i});return console.log("[syncData] API response for ".concat(e,":"),a),a},H=async e=>{try{console.log("\ud83d\udce4 [createOrder] Starting order creation API call...",e.id),console.log("\ud83d\udce4 [createOrder] Order data:",JSON.stringify(e,null,2));const n=z();if(console.log("\ud83d\udce4 [createOrder] SellerId from auth:",n),!n)return console.error("\u274c [createOrder] No sellerId found in auth!"),{success:!1,error:"No sellerId found. Please login again."};console.log("\ud83d\udce4 [createOrder] Calling syncData with storeName: orders");const r=await V("orders",e,n);if(console.log("\ud83d\udce5 [createOrder] Backend response:",r),console.log("\ud83d\udce5 [createOrder] Response success:",r.success),console.log("\ud83d\udce5 [createOrder] Response data:",r.data),r.success&&r.data){const t=r.data.results||r.data,n=t.success||[];if(console.log("\ud83d\udce5 [createOrder] Success items:",n),n.length>0){const t=n.find(t=>t.id===e.id)||n[0];return console.log("\u2705 [createOrder] Order created on backend:",t),{success:!0,_id:t._id,order:t,action:t.action||"created"}}return console.error("\u274c [createOrder] Order creation failed - no success items:",r),console.error("\u274c [createOrder] Failed items:",t.failed||[]),{success:!1,error:r.data.message||"Order creation failed - no success response"}}var t;return console.error("\u274c [createOrder] Order creation failed:",r),{success:!1,error:r.error||(null===(t=r.data)||void 0===t?void 0:t.message)||"Order creation failed"}}catch(n){return console.error("\u274c [createOrder] Exception creating order:",n),console.error("\u274c [createOrder] Error stack:",n.stack),{success:!1,error:n.message||"Failed to create order"}}};let W=null,G=null;let Y=null;const K=new class{constructor(){this.isSyncing=!1,this.syncQueue=[],this.retryAttempts=new Map,this.maxRetries=3}isOnline(){return navigator.onLine}getSellerId(){try{const e=localStorage.getItem("auth");if(e){const t=JSON.parse(e);return t.sellerId||t.uid}return null}catch(e){return console.error("Error getting seller ID:",e),null}}getSellerIdFromCache(){try{var e;const t=localStorage.getItem("auth");if(!t)return null;const n=JSON.parse(t);return n.sellerId||(null===(e=n.currentUser)||void 0===e?void 0:e.sellerId)||null}catch(t){return console.error("Error getting sellerId from cache:",t),null}}async getSellerIdFromBackend(){try{const e=this.getSellerIdFromCache();if(e)return e;const t=localStorage.getItem("auth");if(!t)return null;const n=JSON.parse(t),r=n.currentUser;if(!r||!r.email)return null;const i=await q(r.email,r.uid,r.displayName,r.photoURL);if(i.success&&i.sellerId){const e=o(o({},n),{},{sellerId:i.sellerId});return localStorage.setItem("auth",JSON.stringify(e)),i.sellerId}return null}catch(e){return console.error("Error getting seller from backend:",e),null}}async syncItem(e,t,n){try{var r,i,a,s,o,l,c,d,u,h,f;const p=this.getEndpointForStore(e);if(!p)throw new Error("No endpoint for store: ".concat(e));console.log("[SYNC] \ud83d\udce4 Sending ".concat(e," item to /sync/").concat(p),{itemId:t.id,sellerId:n,endpoint:"/sync/".concat(p)});const m=await B("/sync/".concat(p),{method:"POST",body:{sellerId:n,items:[t]}});if(console.log("[SYNC] \ud83d\udce5 API response for ".concat(e," item ").concat(t.id,":"),m),!m.success)throw console.error("[SYNC] \u274c API request failed for ".concat(e," item ").concat(t.id,":"),m),new Error(m.error||m.message||"Sync failed");const g=m.data||m;return console.log("[SYNC] \ud83d\udce6 Response data structure for ".concat(e,":"),{hasData:!!m.data,hasResults:!!(null!==(r=m.data)&&void 0!==r&&r.results||m.results),successItems:(null===(i=m.data)||void 0===i||null===(a=i.results)||void 0===a||null===(s=a.success)||void 0===s?void 0:s.length)||(null===(o=m.results)||void 0===o||null===(l=o.success)||void 0===l?void 0:l.length)||0,failedItems:(null===(c=m.data)||void 0===c||null===(d=c.results)||void 0===d||null===(u=d.failed)||void 0===u?void 0:u.length)||(null===(h=m.results)||void 0===h||null===(f=h.failed)||void 0===f?void 0:f.length)||0}),g}catch(p){throw console.error("[SYNC] \u274c Error syncing item ".concat(t.id," from ").concat(e,":"),p),console.error("[SYNC] Error details:",{message:p.message,stack:p.stack,storeName:e,itemId:t.id}),p}}getEndpointForStore(e){return{customers:"customers",products:"products",orders:"orders",transactions:"transactions",purchaseOrders:"vendor-orders",categories:"categories"}[e]}async syncStore(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{const s=await t(),l=s.filter(t=>{const n=t.isSynced,r=!0!==n&&"true"!==n;if("orders"===e&&r&&G){const n=Math.round(100*(t.totalAmount||0))/100,r=JSON.stringify((t.items||[]).map(e=>({name:(e.name||"").trim(),quantity:"number"===typeof e.quantity?e.quantity:parseFloat(e.quantity)||0,sellingPrice:Math.round(100*("number"===typeof e.sellingPrice?e.sellingPrice:parseFloat(e.sellingPrice)||0))/100,costPrice:Math.round(100*("number"===typeof e.costPrice?e.costPrice:parseFloat(e.costPrice)||0))/100})).sort((e,t)=>(e.name||"").localeCompare(t.name||""))),i="".concat(t.sellerId||"","_").concat(t.customerId||"null","_").concat(n,"_").concat(r);if(G(i))return console.log("[SYNC] \u23f8\ufe0f ".concat(e,": Skipping order ").concat(t.id," - currently being processed via direct API call")),!1}return r}),c=l.filter(e=>!0===e.isDeleted);if(c.length>0&&(console.log("[SYNC] \ud83d\uddd1\ufe0f ".concat(e,": Found ").concat(c.length," deleted items to sync")),c.forEach(e=>{console.log("[SYNC] \ud83d\uddd1\ufe0f Deleted item: ".concat(e.id,", _id: ").concat(e._id||"none",", will be deleted on backend"))})),console.log("[SYNC] ".concat(e,": Found ").concat(l.length," unsynced items out of ").concat(s.length," total")),"purchaseOrders"===e&&(console.log("[SYNC] \ud83d\udd0d PURCHASE ORDERS DEBUG: Total items: ".concat(s.length)),console.log("[SYNC] \ud83d\udd0d PURCHASE ORDERS DEBUG: Unsynced items: ".concat(l.length)),console.log("[SYNC] \ud83d\udd0d PURCHASE ORDERS DEBUG: All items details:",s.map(e=>({id:e.id,supplierName:e.supplierName||e.id,isSynced:e.isSynced,isSyncedType:typeof e.isSynced,isSyncedValue:e.isSynced}))),l.length>0&&console.log("[SYNC] \ud83d\udd0d PURCHASE ORDERS DEBUG: Unsynced items details:",l.map(e=>({id:e.id,supplierName:e.supplierName||e.id,isSynced:e.isSynced,isSyncedType:typeof e.isSynced})))),console.log("[SYNC] ".concat(e,": All items isSynced status:"),s.map(e=>({id:e.id,name:e.name||e.supplierName||e.id,isSynced:e.isSynced}))),l.length>0?console.log("[SYNC] ".concat(e," unsynced items details:"),l.map(e=>({id:e.id,name:e.name||e.id,isSynced:e.isSynced,isSyncedType:typeof e.isSynced}))):console.log("[SYNC] ".concat(e,": All items are synced (isSynced === true)")),0===l.length)return{success:!0,synced:0,failed:0};let d=this.getSellerIdFromCache();if(d||(d=await this.getSellerIdFromBackend()),!d)return console.warn("No seller ID available, skipping sync"),{success:!1,error:"No seller ID"};const u={success:[],failed:[]};for(const t of l)try{console.log("[SYNC] \ud83d\udd04 Syncing ".concat(e," item:"),t.id,"isSynced:",t.isSynced),"purchaseOrders"===e?(console.log("[SYNC] \ud83d\udd0d PURCHASE ORDER SYNC: Item ID: ".concat(t.id,", Supplier: ").concat(t.supplierName,", isSynced: ").concat(t.isSynced)),console.log("[SYNC] \ud83d\udd0d PURCHASE ORDER SYNC: Full item data:",JSON.stringify(t,null,2))):console.log("[SYNC] Item data:",JSON.stringify(t,null,2));const a=await this.syncItem(e,t,d);if(console.log("[SYNC] Sync response for ".concat(e," item ").concat(t.id,":"),a),"purchaseOrders"===e&&console.log("[SYNC] \ud83d\udd0d PURCHASE ORDER SYNC RESPONSE:",JSON.stringify(a,null,2)),!a||!1===a.success){const n=(null===a||void 0===a?void 0:a.message)||(null===a||void 0===a?void 0:a.error)||"Sync failed";throw console.error("[SYNC] \u274c Sync failed for ".concat(e," item ").concat(t.id,":"),n),new Error(n)}{const s=a.results||a,l=s.success||[];if(!(l.length>0)){var i;const n=(null===(i=(s.failed||[]).find(e=>e.id===t.id))||void 0===i?void 0:i.error)||a.message||a.error||"Sync failed - no success items";throw console.error("[SYNC] \u274c Sync failed for ".concat(e," item ").concat(t.id,":"),n),new Error(n)}{const i=l.find(e=>e.id===t.id)||l[0];if(!0===t.isDeleted&&"deleted"===i.action)console.log("[SYNC] \ud83d\uddd1\ufe0f Item ".concat(t.id," was deleted on backend, removing from IndexedDB")),r&&(await r(t.id),console.log("[SYNC] \u2705 Deleted item ".concat(t.id," from IndexedDB after successful backend deletion"))),u.success.push(t.id),this.retryAttempts.delete(t.id),console.log("[SYNC] \u2705 Successfully deleted ".concat(e," item:"),t.id);else{const r=o(o({},t),{},{isSynced:!0,syncedAt:(new Date).toISOString(),_id:i._id});r.isDeleted&&(delete r.isDeleted,delete r.deletedAt),console.log("[SYNC] Updating item ".concat(t.id," in IndexedDB with isSynced: true, _id: ").concat(i._id)),await n(r),console.log("[SYNC] \u2705 Item ".concat(t.id," marked as synced in IndexedDB")),Y&&Y(e,r),u.success.push(t.id),this.retryAttempts.delete(t.id),console.log("[SYNC] \u2705 Successfully synced ".concat(e," item:"),t.id)}}}}catch(a){console.error("[SYNC] \u274c Failed to sync ".concat(e," item ").concat(t.id,":"),a.message);const r=this.retryAttempts.get(t.id)||0,i=o(o({},t),{},{isSynced:!1,syncError:a.message,syncAttempts:r+1});await n(i),r<this.maxRetries?(this.retryAttempts.set(t.id,r+1),u.failed.push({id:t.id,error:a.message,retry:!0})):(this.retryAttempts.set(t.id,r+1),u.failed.push({id:t.id,error:a.message,retry:!1}))}return{success:0===u.failed.length,synced:u.success.length,failed:u.failed.length,failedItems:u.failed}}catch(a){return console.error("Error syncing store ".concat(e,":"),a),{success:!1,error:a.message}}}async syncAll(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||W;if(!e)return console.error("[SYNC] Store functions provider not set"),{success:!1,error:"Store functions provider not set"};if(this.isSyncing)return console.log("[SYNC] Sync already in progress, skipping..."),{success:!1,error:"Sync in progress"};if(!this.isOnline())return console.log("[SYNC] Offline, cannot sync"),{success:!1,error:"Offline"};console.log("[SYNC] ========== Starting sync to MongoDB =========="),this.isSyncing=!0;try{let t=this.getSellerIdFromCache();if(t||(console.log("[SYNC] SellerId not in cache, fetching from backend..."),t=await this.getSellerIdFromBackend()),!t)return console.error("[SYNC] No seller ID available"),{success:!1,error:"No seller ID"};console.log("[SYNC] Using sellerId:",t);const n={};let r=0,i=0;const a=["categories","products","customers","orders","transactions","purchaseOrders"];for(const s of a){const t=e(s);if(t){console.log("[SYNC] \ud83d\udd04 Syncing ".concat(s,"...")),console.log("[SYNC] Store functions available:",{getAllItems:typeof t.getAllItems,updateItem:typeof t.updateItem,deleteItem:typeof t.deleteItem});const e=await this.syncStore(s,t.getAllItems,t.updateItem,t.deleteItem);n[s]=e,r+=e.synced||0,i+=e.failed||0,e.synced>0&&console.log("[SYNC] \u2705 ".concat(s,": ").concat(e.synced," items synced successfully")),e.failed>0&&(console.log("[SYNC] \u26a0\ufe0f ".concat(s,": ").concat(e.failed," items failed to sync")),e.failedItems&&console.log("[SYNC] Failed items:",e.failedItems)),0===e.synced&&0===e.failed&&(console.log("[SYNC] \u2139\ufe0f ".concat(s,": No items to sync")),"purchaseOrders"===s&&console.log("[SYNC] \u26a0\ufe0f PURCHASE ORDERS: No items synced - check if items have isSynced: false"))}else console.warn("[SYNC] \u26a0\ufe0f No store functions found for ".concat(s)),"purchaseOrders"===s&&console.error("[SYNC] \u274c PURCHASE ORDERS: Store functions not found! Check getStoreFunctions implementation.")}return console.log("[SYNC] ========== Sync Complete =========="),console.log("[SYNC] Total synced: ".concat(r,", Total failed: ").concat(i)),{success:0===i,results:n,summary:{totalSynced:r,totalFailed:i}}}catch(t){return console.error("[SYNC] \u274c Error in batch sync:",t),{success:!1,error:t.message}}finally{this.isSyncing=!1}}async retryFailedSyncs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!(e||W))return console.error("Store functions provider not set"),{success:!1,error:"Store functions provider not set"};if(!this.isOnline())return{success:!1,error:"Offline"};let t=this.getSellerIdFromCache();if(t||(t=await this.getSellerIdFromBackend()),!t)return{success:!1,error:"No seller ID"};const n={},r=["categories","products","customers","orders","transactions","purchaseOrders"];for(const a of r){const t=e(a);if(t)try{const e=(await t.getAllItems()).filter(e=>!1===e.isSynced&&e.syncError&&(this.retryAttempts.get(e.id)||0)<this.maxRetries);e.length>0&&(console.log("Retrying ".concat(e.length," failed items in ").concat(a,"...")),n[a]=await this.syncStore(a,t.getAllItems,t.updateItem))}catch(i){console.error("Error retrying ".concat(a,":"),i)}}return{success:!0,results:n}}startAutoSync(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;const t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||W;t?(this.syncAll(t),this.syncInterval=setInterval(()=>{this.isOnline()&&!this.isSyncing&&this.syncAll(t)},e),window.addEventListener("online",()=>{console.log("\ud83c\udf10 Back online event detected, triggering sync..."),setTimeout(()=>{this.isOnline()&&this.syncAll(t).catch(e=>{console.error("Error syncing after coming online:",e)})},1e3)})):console.error("Store functions provider not set")}stopAutoSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null)}},J=K,$=e=>{if(!e)return e;let t=0;void 0!==e.dueAmount&&null!==e.dueAmount?t="number"===typeof e.dueAmount?e.dueAmount:parseFloat(e.dueAmount)||0:void 0!==e.balanceDue&&null!==e.balanceDue&&(t="number"===typeof e.balanceDue?e.balanceDue:parseFloat(e.balanceDue)||0);const n=e.mobileNumber||e.phone||"",r=o(o({},e),{},{dueAmount:t,balanceDue:t,mobileNumber:n});return(void 0!==e.dueAmount&&void 0===e.balanceDue||void 0!==e.balanceDue&&void 0===e.dueAmount)&&console.log("Normalized customer (fixed missing field):",{id:r.id,name:r.name,dueAmount:r.dueAmount,balanceDue:r.balanceDue}),r},X=e=>{if(!e)return e;const t=void 0!==e.stock?e.stock:void 0!==e.quantity?e.quantity:0,n=void 0!==e.costPrice?e.costPrice:void 0!==e.unitPrice?e.unitPrice:0;return o(o({},e),{},{stock:t,quantity:t,costPrice:n,unitPrice:n,sellingUnitPrice:e.sellingUnitPrice||e.sellingPrice||0,sellingPrice:e.sellingUnitPrice||e.sellingPrice||0})},Q=async()=>{if(!navigator.onLine)return!1;try{return(await U()).available}catch(e){return console.error("Backend health check failed:",e),!1}},Z=async()=>{if(await Q())try{var e;const t=await B("/data/all",{method:"GET"});if(t.success&&null!==(e=t.data)&&void 0!==e&&e.data){const{customers:e,products:n,orders:r,transactions:i,purchaseOrders:a,categories:s}=t.data.data,o=(e||[]).map(e=>$(e)),l=(n||[]).map(e=>X(e));return await Promise.all([re(c,o),re(d,l),re(u,r||[]),re(h,i||[]),re(f,a||[]),re(p,s||[])]),{customers:o,products:l,orders:r||[],transactions:i||[],purchaseOrders:a||[],categories:s||[]}}}catch(o){console.error("Error fetching all data from backend:",o)}const[t,n,r,i,a,s]=await Promise.all([E(c).catch(()=>[]),E(d).catch(()=>[]),E(u).catch(()=>[]),E(h).catch(()=>[]),E(f).catch(()=>[]),E(p).catch(()=>[])]);return{customers:(t||[]).map(e=>$(e)),products:(n||[]).map(e=>X(e)),orders:r||[],transactions:i||[],purchaseOrders:a||[],categories:s||[]}},ee=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(e)&&0!==e.length?t?JSON.stringify(e.map(e=>({productName:e.productName||e.name,quantity:e.quantity,price:e.price})).sort((e,t)=>(e.productName||e.name||"").localeCompare(t.productName||t.name||""))):JSON.stringify(e.map(e=>({name:e.name,quantity:e.quantity,sellingPrice:e.sellingPrice,costPrice:e.costPrice})).sort((e,t)=>(e.name||"").localeCompare(t.name||""))):""},te=(e,t)=>{if(!e||!t)return!1;const n=new Date(e),r=new Date(t);return Math.abs(n.getTime()-r.getTime())<=5e3},ne=(e,t,n)=>{if(e===d){const e=(t.name||"").trim().toLowerCase(),r=(t.description||"").trim().toLowerCase();return n.some(t=>{const n=(t.name||"").trim().toLowerCase(),i=(t.description||"").trim().toLowerCase();return n===e&&(i===r||""===i&&""===r||null===i&&null===r||void 0===i&&void 0===r)})}if(e===c){const e=(t.name||"").trim().toLowerCase(),r=(t.mobileNumber||t.phone||"").trim(),i=(t.email||"").trim().toLowerCase();return n.some(t=>{const n=(t.name||"").trim().toLowerCase(),a=(t.mobileNumber||t.phone||"").trim(),s=(t.email||"").trim().toLowerCase();return r&&a?n===e&&a===r:i&&s?n===e&&s===i:n===e&&!a&&!s&&!r&&!i})}if(e===u){const e=ee(t.items,!1),r=t.createdAt||t.date;return n.some(n=>{if(n.sellerId!==t.sellerId)return!1;if((n.customerId||null)!==(t.customerId||null))return!1;if(Math.abs((n.totalAmount||0)-(t.totalAmount||0))>.01)return!1;return ee(n.items,!1)===e&&(r&&n.createdAt?te(n.createdAt,r):n.id===t.id||n._id===t.id||n.id===t._id)})}if(e===f){const e=ee(t.items,!0),r=t.createdAt||t.date;return n.some(n=>{if(n.sellerId!==t.sellerId)return!1;if((n.supplierName||"").trim().toLowerCase()!==(t.supplierName||"").trim().toLowerCase())return!1;if(Math.abs((n.total||0)-(t.total||0))>.01)return!1;return ee(n.items,!0)===e&&(r&&n.createdAt?te(n.createdAt,r):n.id===t.id||n._id===t.id||n.id===t._id)})}return!1},re=async(e,t)=>{try{console.log("\ud83d\udd04 [syncToIndexedDB] Syncing ".concat(e," with ").concat(t.length," items from MongoDB"));const r=(await E(e)).filter(e=>!1===e.isSynced);r.length>0&&console.log("\u26a0\ufe0f [syncToIndexedDB] Preserving ".concat(r.length," unsynced local ").concat(e," items")),console.log("\ud83d\uddd1\ufe0f [syncToIndexedDB] Clearing all existing ".concat(e," data from IndexedDB...")),await O(e),console.log("\u2705 [syncToIndexedDB] Cleared ".concat(e," store"));const i=[];let a=0;for(const n of t){let t=n;e===c?t=$(n):e===d&&(t=X(n));const r=t._id||t.id,s=o(o({},t),{},{id:r,isSynced:!0});ne(e,s,i)?(a++,console.warn("\u26a0\ufe0f Duplicate ".concat(e," in MongoDB batch (skipping):"),{id:s.id,name:s.name||s.supplierName||"N/A"})):i.push(s)}if(a>0&&console.log("\u26a0\ufe0f [syncToIndexedDB] Skipped ".concat(a," duplicate items from MongoDB batch")),i.length>0&&(console.log("\ud83d\udce5 [syncToIndexedDB] Inserting ".concat(i.length," items from MongoDB into ").concat(e,"...")),await T(e,i,!0),console.log("\u2705 [syncToIndexedDB] Successfully inserted ".concat(i.length," items into ").concat(e))),r.length>0){console.log("\ud83d\udce5 [syncToIndexedDB] Re-inserting ".concat(r.length," unsynced local items into ").concat(e,"..."));for(const t of r)try{await L(e,t,!0)}catch(n){console.error("Error re-inserting unsynced item ".concat(t.id," in ").concat(e,":"),n)}console.log("\u2705 [syncToIndexedDB] Successfully re-inserted ".concat(r.length," unsynced items into ").concat(e))}console.log("\u2705 [syncToIndexedDB] Completed sync for ".concat(e,": ").concat(i.length," MongoDB items + ").concat(r.length," unsynced local items"))}catch(n){throw console.error("\u274c [syncToIndexedDB] Error syncing ".concat(e," to IndexedDB:"),n),n}};var ie=n(579);const ae=new Map;let se=null;const oe=e=>ae.has(e),le=e=>{try{const t=e.orders||[],n=e.products||[],r=new Date,i=new Date(r);i.setDate(i.getDate()-29);const a=e=>"".concat(e.getFullYear(),"-").concat((e.getMonth()+1).toString().padStart(2,"0"),"-").concat(e.getDate().toString().padStart(2,"0")),s=[],o=new Map;for(let e=0;e<30;e++){const t=new Date(i);t.setDate(i.getDate()+e);const n=a(t);s.push(n),o.set(n,{sales:0,profit:0})}let l=0,c=0,d=0,u=0;const h=a(r);for(const e of t){const t=a(new Date(e.createdAt||e.date||r)),n=Number(e.totalAmount||0),i=(e.items||[]).reduce((e,t)=>e+(Number(t.sellingPrice||0)-Number(t.costPrice||0))*Number(t.quantity||0),0);if(l+=n,c+=i,t===h&&(d+=n,u+=i),o.has(t)){const e=o.get(t);e.sales+=n,e.profit+=i}}const f=s.map(e=>{var t;return(null===(t=o.get(e))||void 0===t?void 0:t.sales)||0}),p=s.map(e=>{var t;return(null===(t=o.get(e))||void 0===t?void 0:t.profit)||0}),m={labels:s,datasets:[{label:"Sales",data:f}]},g={labels:s,datasets:[{label:"Profit",data:p}]},y={labels:n.slice(0,10).map(e=>e.name||""),datasets:[{label:"Stock",data:n.slice(0,10).map(e=>Number(e.quantity||e.stock||0))}]};return{salesChartData:m,profitChartData:g,inventoryChartData:y,totals:{totalSales:l,totalProfit:c,salesToday:d,profitToday:u}}}catch(t){return console.error("Error recomputing derived data:",t),{}}},ce=e=>{const t=Math.round(100*(e.totalAmount||0))/100,n=JSON.stringify((e.items||[]).map(e=>({name:(e.name||"").trim(),quantity:"number"===typeof e.quantity?e.quantity:parseFloat(e.quantity)||0,sellingPrice:Math.round(100*("number"===typeof e.sellingPrice?e.sellingPrice:parseFloat(e.sellingPrice)||0))/100,costPrice:Math.round(100*("number"===typeof e.costPrice?e.costPrice:parseFloat(e.costPrice)||0))/100})).sort((e,t)=>(e.name||"").localeCompare(t.name||"")));return"".concat(e.sellerId||"","_").concat(e.customerId||"null","_").concat(t,"_").concat(n)},de=(e,t)=>t?"".concat(e,"_").concat(t):e,ue=(()=>{const e=localStorage.getItem("auth"),t=localStorage.getItem("settings");let n={isAuthenticated:!1,currentUser:null};if(e)try{n=JSON.parse(e)}catch(i){console.error("Error parsing saved auth:",i)}let r={currentLanguage:"en",voiceAssistantLanguage:"en-US",voiceAssistantEnabled:!0,expiryDaysThreshold:3,lowStockThreshold:10,subscriptionDays:30,isSubscriptionActive:!0,currentPlan:"basic",gstNumber:"",storeName:"Grocery Store"};if(t)try{const e=JSON.parse(t);r=o(o({},r),e)}catch(i){console.error("Error parsing saved settings:",i)}return{isAuthenticated:n.isAuthenticated,currentUser:n.currentUser||null,currentLanguage:r.currentLanguage,voiceAssistantLanguage:r.voiceAssistantLanguage,voiceAssistantEnabled:r.voiceAssistantEnabled,customers:[],products:[],purchaseOrders:[],orders:[],transactions:[],activities:[],categories:[],currentView:"dashboard",isListening:!1,isLoading:!1,refreshTrigger:0,customerCurrentPage:1,productCurrentPage:1,itemsPerPage:50,currentBillItems:[],currentPOItems:[],expiryDaysThreshold:r.expiryDaysThreshold,lowStockThreshold:r.lowStockThreshold,subscriptionDays:r.subscriptionDays,isSubscriptionActive:r.isSubscriptionActive,currentPlan:r.currentPlan,currentPlanDetails:null,gstNumber:r.gstNumber,storeName:r.storeName,isScannerActive:!1,scannerType:"html5-qrcode",salesChartData:null,profitChartData:null,inventoryChartData:null,customerChartData:null,currentTime:(new Date).toLocaleTimeString(),systemStatus:"online"}})(),he="LOGIN",fe="LOGOUT",pe="SET_LANGUAGE",me="SET_VOICE_LANGUAGE",ge="SET_CURRENT_PLAN",ye="SET_CURRENT_PLAN_DETAILS",be="SET_CUSTOMERS",ve="ADD_CUSTOMER",xe="UPDATE_CUSTOMER",we="DELETE_CUSTOMER",_e="SET_PRODUCTS",Ne="ADD_PRODUCT",Se="UPDATE_PRODUCT",ke="DELETE_PRODUCT",Ae="SET_PURCHASE_ORDERS",je="ADD_PURCHASE_ORDER",Pe="UPDATE_PURCHASE_ORDER",Ie="DELETE_PURCHASE_ORDER",Ce="SET_ORDERS",Ee="ADD_ORDER",Le="UPDATE_ORDER",De="DELETE_ORDER",Te="SET_TRANSACTIONS",Oe="ADD_TRANSACTION",Me="UPDATE_TRANSACTION",Re="SET_ACTIVITIES",Fe="ADD_ACTIVITY",Ue="SET_CATEGORIES",Be="ADD_CATEGORY",ze="DELETE_CATEGORY",qe="SET_CURRENT_VIEW",Ve="SET_LISTENING",He="SET_LOADING",We="FORCE_REFRESH",Ge="SET_CUSTOMER_PAGE",Ye="SET_PRODUCT_PAGE",Ke="SET_BILL_ITEMS",Je="ADD_BILL_ITEM",$e="REMOVE_BILL_ITEM",Xe="CLEAR_BILL_ITEMS",Qe="SET_PO_ITEMS",Ze="ADD_PO_ITEM",et="REMOVE_PO_ITEM",tt="CLEAR_PO_ITEMS",nt="SET_LOW_STOCK_THRESHOLD",rt="SET_EXPIRY_DAYS_THRESHOLD",it="SET_SUBSCRIPTION_DAYS",at="SET_SUBSCRIPTION_ACTIVE",st="SET_GST_NUMBER",ot="SET_STORE_NAME",lt="UPDATE_USER",ct="SET_VOICE_ASSISTANT_LANGUAGE",dt="SET_VOICE_ASSISTANT_ENABLED",ut="SET_SCANNER_ACTIVE",ht="SET_SCANNER_TYPE",ft="SET_SALES_CHART_DATA",pt="SET_PROFIT_CHART_DATA",mt="SET_INVENTORY_CHART_DATA",gt="SET_CUSTOMER_CHART_DATA",yt="UPDATE_CURRENT_TIME",bt="SET_SYSTEM_STATUS",vt=e=>({customers:{getAllItems:()=>E(c),updateItem:e=>L(c,e),deleteItem:e=>D(c,e)},products:{getAllItems:()=>E(d),updateItem:e=>L(d,e),deleteItem:e=>D(d,e)},orders:{getAllItems:()=>E(u),updateItem:e=>L(u,e),deleteItem:e=>D(u,e)},transactions:{getAllItems:()=>E(h),updateItem:e=>L(h,e),deleteItem:e=>D(h,e)},purchaseOrders:{getAllItems:()=>E(f),updateItem:e=>L(f,e),deleteItem:e=>D(f,e)},categories:{getAllItems:()=>E(p),updateItem:e=>L(p,e),deleteItem:e=>D(p,e)}}[e]),xt=(e,t)=>{switch("ADD_ORDER"===t.type&&console.log("\ud83c\udfaf REDUCER: ADD_ORDER action received!",t),t.type){case he:const n={isAuthenticated:!0,currentUser:t.payload,sellerId:t.payload.sellerId||null};return localStorage.setItem("auth",JSON.stringify(n)),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"AUTHENTICATED",user:t.payload}),setTimeout(()=>{J.isOnline()&&(J.startAutoSync(vt,3e4),J.syncAll(vt).catch(e=>console.error("Initial sync error:",e)))},2e3),o(o({},e),{},{isAuthenticated:!0,currentUser:t.payload});case fe:return localStorage.removeItem("auth"),J.stopAutoSync(),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"LOGGED_OUT"}),o(o({},e),{},{isAuthenticated:!1,currentUser:null});case pe:return o(o({},e),{},{currentLanguage:t.payload});case ge:return o(o({},e),{},{currentPlan:t.payload});case ye:return o(o({},e),{},{currentPlanDetails:t.payload});case me:return o(o({},e),{},{voiceAssistantLanguage:t.payload});case be:const r=(t.payload||[]).map(e=>{const t=void 0!==e.dueAmount?e.dueAmount:void 0!==e.balanceDue?e.balanceDue:0;return o(o({},e),{},{dueAmount:"number"===typeof t?t:parseFloat(t)||0,balanceDue:"number"===typeof t?t:parseFloat(t)||0})});return e.customers.length===r.length&&e.customers.every((e,t)=>{const n=r[t];return n&&e.id===n.id&&JSON.stringify(e)===JSON.stringify(n)})?e:o(o({},e),{},{customers:r});case ve:const i=o(o({},t.payload),{},{isSynced:!1});return C(c,i).then(()=>{J.isOnline()&&J.syncAll(vt).catch(e=>console.error("MongoDB sync error:",e))}).catch(e=>console.error("IndexedDB save error:",e)),o(o({},e),{},{customers:[i,...e.customers]});case xe:const a=o(o({},t.payload),{},{isSynced:!1});L(c,a).then(()=>{J.isOnline()&&J.syncAll(vt).catch(()=>{window.showToast&&window.showToast("Customer updated locally but sync failed. Will retry automatically.","warning")})}).catch(e=>{console.error("IndexedDB save error:",e.message),window.showToast&&window.showToast("Failed to update customer: ".concat(e.message),"error")});const s=e.customers.find(e=>e.id===t.payload.id);return s&&JSON.stringify(s)===JSON.stringify(a)?e:o(o({},e),{},{customers:e.customers.map(e=>e.id===t.payload.id?a:e)});case we:const l=e.customers.find(e=>e.id===t.payload);if(l){const n=o(o({},l),{},{isDeleted:!0,deletedAt:(new Date).toISOString(),isSynced:!1});return L(c,n).then(()=>{J.isOnline()&&J.syncAll(vt).catch(e=>console.error("Delete sync error:",e))}).catch(e=>console.error("IndexedDB update error:",e)),o(o({},e),{},{customers:e.customers.filter(e=>e.id!==t.payload)})}return e;case _e:return e.products.length===t.payload.length&&e.products.every((e,n)=>{const r=t.payload[n];return r&&e.id===r.id&&JSON.stringify(e)===JSON.stringify(r)})?e:o(o({},e),{},{products:t.payload});case Ne:const m=(t.payload.name||"").trim().toLowerCase(),g=(t.payload.description||"").trim().toLowerCase(),b=e.products.find(e=>{const t=(e.name||"").trim().toLowerCase(),n=(e.description||"").trim().toLowerCase();return t===m&&(n===g||""===n&&""===g||null===n&&null===g||void 0===n&&void 0===g)});if(b)return console.warn("\u26a0\ufe0f Duplicate product detected:",{name:t.payload.name,description:t.payload.description||"No description",existingId:b.id}),window.showToast&&window.showToast('Product "'.concat(t.payload.name,'" with the same description already exists. Use edit to update it.'),"warning"),e;const v=o(o({},t.payload),{},{isSynced:!1});return C(d,v).then(()=>{J.isOnline()&&J.syncAll(vt).catch(e=>console.error("MongoDB sync error:",e))}).catch(e=>{console.error("IndexedDB save error:",e),window.showToast&&window.showToast("Failed to save product: ".concat(e.message),"error")}),o(o({},e),{},{products:[v,...e.products]});case Se:const x=o(o({},t.payload),{},{isSynced:void 0!==t.payload.isSynced&&t.payload.isSynced});L(d,x).then(()=>{J.isOnline()&&J.syncAll(vt).catch(()=>{window.showToast&&window.showToast("Product updated locally but sync failed. Will retry automatically.","warning")})}).catch(e=>{console.error("IndexedDB save error:",e.message),window.showToast&&window.showToast("Failed to update product: ".concat(e.message),"error")});const w=e.products.find(e=>e.id===t.payload.id);if(w&&JSON.stringify(w)===JSON.stringify(x))return e;{const n=e.products.map(e=>e.id===t.payload.id?x:e),r=le(o(o({},e),{},{products:n}));return o(o({},e),{},{products:n,inventoryChartData:r.inventoryChartData||e.inventoryChartData})}case ke:const _=e.products.find(e=>e.id===t.payload);if(_){const n=o(o({},_),{},{isDeleted:!0,deletedAt:(new Date).toISOString(),isSynced:!1});return L(d,n).then(()=>{J.isOnline()&&J.syncAll(vt).catch(e=>console.error("Delete sync error:",e))}).catch(e=>console.error("IndexedDB update error:",e)),o(o({},e),{},{products:e.products.filter(e=>e.id!==t.payload)})}return e;case Ae:return e.purchaseOrders.length===t.payload.length&&e.purchaseOrders.every((e,n)=>{const r=t.payload[n];return r&&e.id===r.id&&JSON.stringify(e)===JSON.stringify(r)})?e:o(o({},e),{},{purchaseOrders:t.payload});case Ce:if(e.orders.length===t.payload.length&&e.orders.every((e,n)=>{const r=t.payload[n];return r&&e.id===r.id&&JSON.stringify(e)===JSON.stringify(r)}))return e;{const n=le(o(o({},e),{},{orders:t.payload}));return o(o({},e),{},{orders:t.payload,salesChartData:n.salesChartData||e.salesChartData,profitChartData:n.profitChartData||e.profitChartData,inventoryChartData:n.inventoryChartData||e.inventoryChartData})}case Ee:console.log("\ud83c\udfaf ADD_ORDER: Order ID:",t.payload.id,"Total:",t.payload.totalAmount);const N=o(o({},t.payload),{},{isSynced:!1});if(!N.id)return console.error("\u274c Order validation failed: id is missing"),window.showToast&&window.showToast("Order creation failed: Missing order ID","error"),e;if(!N.sellerId)return console.error("\u274c Order validation failed: sellerId is missing"),window.showToast&&window.showToast("Order creation failed: User not authenticated","error"),e;if(!N.items||0===N.items.length)return console.error("\u274c Order validation failed: items array is empty"),window.showToast&&window.showToast("Order creation failed: No items in order","error"),e;if(!N.totalAmount||N.totalAmount<=0)return console.error("\u274c Order validation failed: totalAmount is invalid:",N.totalAmount),window.showToast&&window.showToast("Order creation failed: Invalid total amount","error"),e;const S=o(o({},N),{},{items:N.items.map(e=>o(o({},e),{},{costPrice:"number"===typeof e.costPrice?e.costPrice:0,sellingPrice:"number"===typeof e.sellingPrice?e.sellingPrice:0,quantity:"number"===typeof e.quantity?e.quantity:1}))}),k=ce(S);console.log("\ud83d\udd11 [ADD_ORDER] Order hash created:",k.substring(0,50)+"..."),console.log("\ud83d\udd11 [ADD_ORDER] Current pending calls:",Array.from(ae.keys()).map(e=>e.substring(0,30)+"..."));const A=J.isOnline();if(A){if(ae.has(k)){const t=ae.get(k);return console.warn("\ud83d\udeab [ADD_ORDER] BLOCKED - Duplicate order prevented (pending API call exists):",t),console.warn("\ud83d\udeab [ADD_ORDER] Current order ID:",S.id),console.warn("\ud83d\udeab [ADD_ORDER] Order hash:",k.substring(0,50)+"..."),e}ae.set(k,S.id),console.log("\u2705 [ADD_ORDER] ALLOWED - Marked order as pending API call:",S.id),console.log("\u2705 [ADD_ORDER] Order hash:",k.substring(0,50)+"...")}const j=e.orders.find(e=>{if(!e||!e.createdAt)return!1;const t=new Date(e.createdAt);if((new Date).getTime()-t.getTime()>5e3)return!1;return ce(e)===k});if(j)return console.warn("\ud83d\udeab [ADD_ORDER] BLOCKED - Duplicate order detected in state (created within 5s):",j.id),console.warn("\ud83d\udeab [ADD_ORDER] Current order ID:",S.id),console.warn("\ud83d\udeab [ADD_ORDER] Order hash:",k.substring(0,50)+"..."),A&&ae.has(k)&&ae.delete(k),e;console.log("\ud83d\udcbe Attempting to save order to IndexedDB...",S.id),console.log("\ud83d\udcbe Order data being saved:",JSON.stringify(S,null,2)),L(u,S,!0).then(e=>{console.log("\u2705 Order successfully saved to IndexedDB!",S.id,e),setTimeout(async()=>{try{const e=await E(u),t=e.find(e=>{var t,n;return e.id===S.id||(null===(t=e.id)||void 0===t?void 0:t.toString())===(null===(n=S.id)||void 0===n?void 0:n.toString())});t?console.log("\u2705 Verified: Order exists in IndexedDB",t.id):(console.error("\u274c WARNING: Order not found in IndexedDB after save!",S.id),console.error("\u274c All orders in IndexedDB:",e.map(e=>({id:e.id,_id:e._id}))))}catch(e){console.error("Error verifying order in IndexedDB:",e)}},100),A&&ae.has(ce(S))?(console.log("\ud83c\udf10 [ADD_ORDER] Online - scheduling ONE-TIME order creation API call..."),setTimeout(async()=>{const e=ce(S);if(ae.has(e)){console.log("\ud83c\udf10 [ADD_ORDER] \u23f0 Timeout executed - Creating order on backend via API (ONE ATTEMPT)...",S.id),console.log("\ud83c\udf10 [ADD_ORDER] Order to create:",JSON.stringify(S,null,2)),console.log("\ud83c\udf10 [ADD_ORDER] createOrder function available:",typeof H);try{console.log("\ud83c\udf10 [ADD_ORDER] Calling createOrder function (ONE TIME ONLY)...");const t=await H(S);if(ae.delete(e),console.log("\ud83c\udf10 [ADD_ORDER] Removed order from pending calls:",S.id),console.log("\ud83c\udf10 [ADD_ORDER] createOrder result:",t),t.success){console.log("\u2705 Order created on backend successfully!",t._id);const e=o(o({},S),{},{_id:t._id,isSynced:!0,syncedAt:(new Date).toISOString()});L(u,e,!0).then(()=>{console.log("\u2705 Order marked as synced in IndexedDB"),se&&se({type:Le,payload:e})}).catch(e=>console.error("Error updating synced order:",e)),window.showToast&&window.showToast("Order created and saved to server!","success")}else console.warn("\u26a0\ufe0f [ADD_ORDER] API call failed (ONE-TIME attempt):",t.error),console.warn("\u26a0\ufe0f [ADD_ORDER] Order saved to IndexedDB with isSynced: false. Will be synced by background sync service."),window.showToast&&window.showToast("Order saved locally. Will sync automatically in background.","info")}catch(t){console.error("\u274c [ADD_ORDER] Error creating order on backend (ONE-TIME attempt failed):",t),console.error("\u274c [ADD_ORDER] Order saved to IndexedDB with isSynced: false. Will be synced by background sync service."),ae.delete(e),console.log("\ud83c\udf10 [ADD_ORDER] Removed order from pending calls after error:",S.id),window.showToast&&window.showToast("Order saved locally. Will sync automatically in background.","info")}}else console.warn("\u26a0\ufe0f [ADD_ORDER] Order was removed from pending calls, skipping API call:",S.id)},200)):A||(console.log("\ud83d\udcf4 Offline - Order saved to IndexedDB, will sync when online"),window.showToast&&window.showToast("Order saved locally. Will sync when online.","success"))}).catch(e=>{var t;(console.error("\u274c IndexedDB save error:",e),console.error("Error message:",e.message),console.error("Error stack:",e.stack),console.error("Error name:",e.name),console.error("Order data that failed:",JSON.stringify(S,null,2)),e.message&&e.message.includes("Validation failed"))&&(console.error("\u274c VALIDATION ERROR - Order validation failed!"),console.error("Order details:",{id:N.id,sellerId:N.sellerId,itemsCount:null===(t=N.items)||void 0===t?void 0:t.length,totalAmount:N.totalAmount,paymentMethod:N.paymentMethod}));window.showToast&&window.showToast("Failed to save order: ".concat(e.message),"error")});{const t=[S,...e.orders],n=le(o(o({},e),{},{orders:t}));return o(o({},e),{},{orders:t,salesChartData:n.salesChartData||e.salesChartData,profitChartData:n.profitChartData||e.profitChartData,inventoryChartData:n.inventoryChartData||e.inventoryChartData})}case Le:const P=o(o({},t.payload),{},{isSynced:void 0!==t.payload.isSynced&&t.payload.isSynced});L(u,P).then(()=>{!P.isSynced&&J.isOnline()&&J.syncAll(vt).catch(()=>{window.showToast&&window.showToast("Order updated locally but sync failed. Will retry automatically.","warning")})}).catch(e=>{console.error("IndexedDB update error:",e.message),window.showToast&&window.showToast("Failed to update order: ".concat(e.message),"error")});const I=e.orders.find(e=>e.id===t.payload.id);if(I&&JSON.stringify(I)===JSON.stringify(P))return e;{const n=e.orders.map(e=>e.id===t.payload.id?P:e),r=le(o(o({},e),{},{orders:n}));return o(o({},e),{},{orders:n,salesChartData:r.salesChartData||e.salesChartData,profitChartData:r.profitChartData||e.profitChartData,inventoryChartData:r.inventoryChartData||e.inventoryChartData})}case De:const D=e.orders.find(e=>e.id===t.payload);if(D){const n=o(o({},D),{},{isDeleted:!0,deletedAt:(new Date).toISOString(),isSynced:!1});return L(u,n).then(()=>{J.isOnline()&&J.syncAll(vt).catch(e=>console.error("Delete sync error:",e))}).catch(e=>console.error("IndexedDB update error:",e)),o(o({},e),{},{orders:e.orders.filter(e=>e.id!==t.payload)})}return e;case je:const T=o(o({},t.payload),{},{isSynced:!1});return C(f,T).then(()=>{J.isOnline()&&J.syncAll(vt).catch(e=>console.error("MongoDB sync error:",e))}).catch(e=>console.error("IndexedDB save error:",e)),o(o({},e),{},{purchaseOrders:[T,...e.purchaseOrders]});case Pe:const O=o(o({},t.payload),{},{isSynced:!1});L(f,O).then(()=>{J.isOnline()&&J.syncAll(vt).catch(()=>{window.showToast&&window.showToast("Purchase order updated locally but sync failed. Will retry automatically.","warning")})}).catch(e=>{console.error("IndexedDB save error:",e.message),window.showToast&&window.showToast("Failed to update purchase order: ".concat(e.message),"error")});const M=e.purchaseOrders.find(e=>e.id===t.payload.id);return M&&JSON.stringify(M)===JSON.stringify(O)?e:o(o({},e),{},{purchaseOrders:e.purchaseOrders.map(e=>e.id===t.payload.id?O:e)});case Ie:const R=e.purchaseOrders.find(e=>e.id===t.payload);if(R){const n=o(o({},R),{},{isDeleted:!0,deletedAt:(new Date).toISOString(),isSynced:!1});return console.log("\ud83d\uddd1\ufe0f [DELETE_PURCHASE_ORDER] Marking purchase order as deleted:",n.id),console.log("\ud83d\uddd1\ufe0f [DELETE_PURCHASE_ORDER] Deleted PO data:",JSON.stringify(n,null,2)),L(f,n).then(()=>{console.log("\u2705 [DELETE_PURCHASE_ORDER] Purchase order marked as deleted in IndexedDB"),J.isOnline()?(console.log("\ud83c\udf10 [DELETE_PURCHASE_ORDER] Online - syncing deletion to backend..."),J.syncAll(vt).catch(e=>console.error("Delete sync error:",e))):console.log("\ud83d\udcf4 [DELETE_PURCHASE_ORDER] Offline - deletion will sync when online")}).catch(e=>{console.error("\u274c [DELETE_PURCHASE_ORDER] IndexedDB update error:",e)}),o(o({},e),{},{purchaseOrders:e.purchaseOrders.filter(e=>e.id!==t.payload)})}return e;case Te:return e.transactions.length===t.payload.length&&e.transactions.every((e,n)=>{const r=t.payload[n];return r&&e.id===r.id&&JSON.stringify(e)===JSON.stringify(r)})?e:o(o({},e),{},{transactions:t.payload});case Oe:const F=o(o({},t.payload),{},{isSynced:!1});return C(h,F).then(()=>{J.isOnline()&&J.syncAll(vt).catch(e=>console.error("MongoDB sync error:",e))}).catch(e=>console.error("IndexedDB save error:",e)),o(o({},e),{},{transactions:[F,...e.transactions]});case Me:const U=o(o({},t.payload),{},{isSynced:!1});L(h,U).then(()=>{J.isOnline()&&J.syncAll(vt).catch(()=>{window.showToast&&window.showToast("Transaction updated locally but sync failed. Will retry automatically.","warning")})}).catch(e=>{console.error("IndexedDB save error:",e.message),window.showToast&&window.showToast("Failed to update transaction: ".concat(e.message),"error")});const B=e.transactions.find(e=>e.id===t.payload.id);return B&&JSON.stringify(B)===JSON.stringify(U)?e:o(o({},e),{},{transactions:e.transactions.map(e=>e.id===t.payload.id?U:e)});case Re:return o(o({},e),{},{activities:t.payload});case Fe:return C(y,t.payload).catch(e=>console.error("IndexedDB sync error:",e)),o(o({},e),{},{activities:[t.payload,...e.activities]});case Ue:return o(o({},e),{},{categories:t.payload});case Be:const z=o(o({},t.payload),{},{isSynced:!1});return C(p,z).then(()=>{J.isOnline()&&J.syncAll(vt).catch(e=>console.error("MongoDB sync error:",e))}).catch(e=>console.error("IndexedDB save error:",e)),o(o({},e),{},{categories:[z,...e.categories]});case ze:const q=e.categories.find(e=>e.id===t.payload);if(q){const n=o(o({},q),{},{isDeleted:!0,deletedAt:(new Date).toISOString(),isSynced:!1});return L(p,n).then(()=>{J.isOnline()&&J.syncAll(vt).catch(e=>console.error("Delete sync error:",e))}).catch(e=>console.error("IndexedDB update error:",e)),o(o({},e),{},{categories:e.categories.filter(e=>e.id!==t.payload)})}return e;case qe:return o(o({},e),{},{currentView:t.payload});case Ve:return o(o({},e),{},{isListening:t.payload});case He:return o(o({},e),{},{isLoading:t.payload});case We:return o(o({},e),{},{refreshTrigger:Date.now()});case Ge:return o(o({},e),{},{customerCurrentPage:t.payload});case Ye:return o(o({},e),{},{productCurrentPage:t.payload});case Ke:return o(o({},e),{},{currentBillItems:t.payload});case Je:return o(o({},e),{},{currentBillItems:[...e.currentBillItems,t.payload]});case $e:return o(o({},e),{},{currentBillItems:e.currentBillItems.filter((e,n)=>n!==t.payload)});case Xe:return o(o({},e),{},{currentBillItems:[]});case Qe:return o(o({},e),{},{currentPOItems:t.payload});case Ze:return o(o({},e),{},{currentPOItems:[...e.currentPOItems,t.payload]});case et:return o(o({},e),{},{currentPOItems:e.currentPOItems.filter((e,n)=>n!==t.payload)});case tt:return o(o({},e),{},{currentPOItems:[]});case nt:return o(o({},e),{},{lowStockThreshold:t.payload});case rt:return o(o({},e),{},{expiryDaysThreshold:t.payload});case it:return o(o({},e),{},{subscriptionDays:t.payload});case at:return o(o({},e),{},{isSubscriptionActive:t.payload});case ut:return o(o({},e),{},{isScannerActive:t.payload});case ht:return o(o({},e),{},{scannerType:t.payload});case ft:return o(o({},e),{},{salesChartData:t.payload});case pt:return o(o({},e),{},{profitChartData:t.payload});case mt:return o(o({},e),{},{inventoryChartData:t.payload});case gt:return o(o({},e),{},{customerChartData:t.payload});case yt:return e.currentTime===t.payload?e:o(o({},e),{},{currentTime:t.payload});case bt:return e.systemStatus===t.payload?e:o(o({},e),{},{systemStatus:t.payload});case st:return o(o({},e),{},{gstNumber:t.payload});case ot:return o(o({},e),{},{storeName:t.payload});case lt:return o(o({},e),{},{currentUser:t.payload});case ct:return o(o({},e),{},{voiceAssistantLanguage:t.payload});case dt:return o(o({},e),{},{voiceAssistantEnabled:t.payload});default:return"ADD_ORDER"!==t.type&&"FORCE_REFRESH"!==t.type||"ADD_ORDER"===t.type&&(console.error("\u274c ADD_ORDER action reached default case! This means the case is not matching!"),console.error("ActionTypes.ADD_ORDER:",Ee),console.error("action.type:",t.type),console.error("Are they equal?",t.type===Ee)),e}},wt=(0,r.createContext)(),_t=e=>{let{children:t}=e;const[n,i]=(0,r.useReducer)(xt,ue);(0,r.useEffect)(()=>{(e=>{se=e})(i)},[i]),(0,r.useEffect)(()=>{W=vt,G=oe,(e=>{Y=e})((e,t)=>{if(se)switch(e){case"orders":se({type:Le,payload:t});break;case"customers":se({type:xe,payload:t});break;case"products":se({type:Se,payload:t});break;case"purchaseOrders":se({type:Pe,payload:t});break;case"transactions":se({type:Me,payload:t});break;case"categories":break;default:console.warn("[SYNC] Unknown store type for state update: ".concat(e))}})},[]),(0,r.useEffect)(()=>{(async()=>{try{const[t,n,r,l,m,g,b]=await Promise.all([E(c).catch(()=>[]),E(d).catch(()=>[]),E(u).catch(()=>[]),E(h).catch(()=>[]),E(f).catch(()=>[]),E(p).catch(()=>[]),E(y).catch(()=>[])]),v=(t||[]).map(e=>o(o({},e),{},{dueAmount:void 0!==e.dueAmount?e.dueAmount:void 0!==e.balanceDue?e.balanceDue:0,balanceDue:void 0!==e.dueAmount?e.dueAmount:void 0!==e.balanceDue?e.balanceDue:0,mobileNumber:e.mobileNumber||e.phone||""})),x=(n||[]).map(e=>{const t=void 0!==e.stock?e.stock:void 0!==e.quantity?e.quantity:0,n=void 0!==e.costPrice?e.costPrice:void 0!==e.unitPrice?e.unitPrice:0;return o(o({},e),{},{stock:t,quantity:t,costPrice:n,unitPrice:n})});i({type:be,payload:(v||[]).filter(e=>!0!==e.isDeleted)}),i({type:_e,payload:(x||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ce,payload:(r||[]).filter(e=>!0!==e.isDeleted)}),i({type:Te,payload:(l||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ae,payload:(m||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ue,payload:(g||[]).filter(e=>!0!==e.isDeleted)}),i({type:Re,payload:b||[]});const w=await Q();if(i({type:bt,payload:w?"online":"offline"}),w)try{var e;try{await J.syncAll(vt)}catch(a){console.error("Initial online sync failed, proceeding to fetch backend:",a)}const t=await B("/data/all",{method:"GET"});if(t.success&&null!==(e=t.data)&&void 0!==e&&e.data){const{customers:e,products:n,orders:r,transactions:a,purchaseOrders:s,categories:l}=t.data.data,m=(e||[]).map(e=>o(o({},e),{},{dueAmount:e.dueAmount||0,balanceDue:e.dueAmount||0,mobileNumber:e.mobileNumber||e.phone||""})),g=(n||[]).map(e=>{const t=void 0!==e.stock?e.stock:void 0!==e.quantity?e.quantity:0,n=void 0!==e.costPrice?e.costPrice:void 0!==e.unitPrice?e.unitPrice:0;return o(o({},e),{},{stock:t,quantity:t,costPrice:n,unitPrice:n})});await Promise.all([re(c,m),re(d,g),re(u,r||[]),re(h,a||[]),re(f,s||[]),re(p,l||[])]),i({type:be,payload:(m||[]).filter(e=>!0!==e.isDeleted)}),i({type:_e,payload:(g||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ce,payload:(r||[]).filter(e=>!0!==e.isDeleted)}),i({type:Te,payload:(a||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ae,payload:(s||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ue,payload:(l||[]).filter(e=>!0!==e.isDeleted)})}}catch(s){console.error("\u274c Error fetching from backend:",s.message)}}catch(l){var t,r;console.error("Error loading data:",l);const e=(null===(t=n.currentUser)||void 0===t?void 0:t.email)||(null===(r=n.currentUser)||void 0===r?void 0:r.uid);if(e){const t=localStorage.getItem(de("customers",e)),n=localStorage.getItem(de("products",e)),r=localStorage.getItem(de("transactions",e)),a=localStorage.getItem(de("purchaseOrders",e)),s=localStorage.getItem(de("activities",e));t&&i({type:be,payload:JSON.parse(t)}),n&&i({type:_e,payload:JSON.parse(n)}),r&&i({type:Te,payload:JSON.parse(r)}),a&&i({type:Ae,payload:JSON.parse(a)}),s&&i({type:Re,payload:JSON.parse(s)})}i({type:bt,payload:"offline"})}})()},[]),(0,r.useEffect)(()=>{var e,t;const r=(null===(e=n.currentUser)||void 0===e?void 0:e.email)||(null===(t=n.currentUser)||void 0===t?void 0:t.uid);if(!r)return i({type:be,payload:[]}),i({type:_e,payload:[]}),i({type:Te,payload:[]}),i({type:Ae,payload:[]}),i({type:Re,payload:[]}),void i({type:Ue,payload:[]});(async()=>{try{const[a,s,l,m,g,b,v]=await Promise.all([E(c).catch(()=>[]),E(d).catch(()=>[]),E(u).catch(()=>[]),E(h).catch(()=>[]),E(f).catch(()=>[]),E(p).catch(()=>[]),E(y).catch(()=>[])]),x=(a||[]).map(e=>o(o({},e),{},{dueAmount:void 0!==e.dueAmount?e.dueAmount:void 0!==e.balanceDue?e.balanceDue:0,balanceDue:void 0!==e.dueAmount?e.dueAmount:void 0!==e.balanceDue?e.balanceDue:0,mobileNumber:e.mobileNumber||e.phone||""})),w=(s||[]).map(e=>{const t=void 0!==e.stock?e.stock:void 0!==e.quantity?e.quantity:0,n=void 0!==e.costPrice?e.costPrice:void 0!==e.unitPrice?e.unitPrice:0;return o(o({},e),{},{stock:t,quantity:t,costPrice:n,unitPrice:n})});i({type:be,payload:(x||[]).filter(e=>!0!==e.isDeleted)}),i({type:_e,payload:(w||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ce,payload:(l||[]).filter(e=>!0!==e.isDeleted)}),i({type:Te,payload:(m||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ae,payload:(g||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ue,payload:(b||[]).filter(e=>!0!==e.isDeleted)}),i({type:Re,payload:v||[]});const _=await Q();if(i({type:bt,payload:_?"online":"offline"}),_){try{var e;try{await J.syncAll(vt)}catch(t){console.error("User-change online sync failed, proceeding to fetch backend:",t)}const n=await B("/data/all",{method:"GET"});if(n.success&&null!==(e=n.data)&&void 0!==e&&e.data){const{customers:e,products:t,orders:r,transactions:a,purchaseOrders:s,categories:l}=n.data.data,m=(e||[]).map(e=>o(o({},e),{},{dueAmount:e.dueAmount||0,balanceDue:e.dueAmount||0,mobileNumber:e.mobileNumber||e.phone||""})),g=(t||[]).map(e=>{const t=void 0!==e.stock?e.stock:void 0!==e.quantity?e.quantity:0,n=void 0!==e.costPrice?e.costPrice:void 0!==e.unitPrice?e.unitPrice:0;return o(o({},e),{},{stock:t,quantity:t,costPrice:n,unitPrice:n})});await Promise.all([re(c,m),re(d,g),re(u,r||[]),re(h,a||[]),re(f,s||[]),re(p,l||[])]),i({type:be,payload:(m||[]).filter(e=>!0!==e.isDeleted)}),i({type:_e,payload:(g||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ce,payload:(r||[]).filter(e=>!0!==e.isDeleted)}),i({type:Te,payload:(a||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ae,payload:(s||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ue,payload:(l||[]).filter(e=>!0!==e.isDeleted)})}}catch(n){console.error("\u274c Error fetching user data from backend:",n.message)}try{const e=await B("/data/current-plan");if(e.success&&e.data){const t=Array.isArray(e.data)?e.data:e.data.data||e.data;t&&(i({type:ye,payload:t}),t.planId&&i({type:ge,payload:t.planId}))}}catch(r){console.error("Error fetching current plan details:",r)}}}catch(a){console.error("Error loading user data:",a),i({type:bt,payload:"offline"})}})();const a=localStorage.getItem(de("settings",r));if(a)try{const e=JSON.parse(a);i({type:nt,payload:e.lowStockThreshold}),i({type:rt,payload:e.expiryDaysThreshold}),i({type:it,payload:e.subscriptionDays}),i({type:at,payload:e.isSubscriptionActive}),i({type:ge,payload:e.currentPlan}),e.gstNumber&&i({type:st,payload:e.gstNumber}),e.storeName&&i({type:ot,payload:e.storeName}),void 0!==e.voiceAssistantEnabled&&i({type:dt,payload:e.voiceAssistantEnabled}),e.voiceAssistantLanguage&&i({type:ct,payload:e.voiceAssistantLanguage})}catch(s){console.error("Error parsing settings:",s)}},[n.currentUser]),(0,r.useEffect)(()=>{var e,t;const r=(null===(e=n.currentUser)||void 0===e?void 0:e.email)||(null===(t=n.currentUser)||void 0===t?void 0:t.uid);if(!r)return;const i=setTimeout(()=>{localStorage.setItem(de("customers",r),JSON.stringify(n.customers)),localStorage.setItem(de("products",r),JSON.stringify(n.products)),localStorage.setItem(de("transactions",r),JSON.stringify(n.transactions)),localStorage.setItem(de("purchaseOrders",r),JSON.stringify(n.purchaseOrders)),localStorage.setItem(de("activities",r),JSON.stringify(n.activities))},300);return()=>clearTimeout(i)},[n.customers,n.products,n.transactions,n.purchaseOrders,n.activities,n.currentUser]),(0,r.useEffect)(()=>{var e,t;const r=(null===(e=n.currentUser)||void 0===e?void 0:e.email)||(null===(t=n.currentUser)||void 0===t?void 0:t.uid);if(!r)return;const i={lowStockThreshold:n.lowStockThreshold,expiryDaysThreshold:n.expiryDaysThreshold,subscriptionDays:n.subscriptionDays,isSubscriptionActive:n.isSubscriptionActive,currentPlan:n.currentPlan,gstNumber:n.gstNumber,storeName:n.storeName,voiceAssistantEnabled:n.voiceAssistantEnabled,voiceAssistantLanguage:n.voiceAssistantLanguage};localStorage.setItem(de("settings",r),JSON.stringify(i))},[n.lowStockThreshold,n.expiryDaysThreshold,n.subscriptionDays,n.isSubscriptionActive,n.currentPlan,n.gstNumber,n.storeName,n.voiceAssistantEnabled,n.voiceAssistantLanguage,n.currentUser]);const a=(0,r.useCallback)(()=>{const e=(new Date).toLocaleTimeString();i({type:yt,payload:e})},[i]);(0,r.useEffect)(()=>{let e=null;return e=setInterval(a,1e3),a(),()=>{e&&(clearInterval(e),e=null)}},[a]),(0,r.useEffect)(()=>{let e=!0;const t=async()=>{if(await new Promise(e=>setTimeout(e,500)),navigator.onLine&&e){try{const n=await E(c),r=await E(d),i=await E(u),a=async(e,t)=>{const n=t=>L(e,o(o({},t),{},{isSynced:!1}),!0),r=t.filter(e=>!0===e.isDeleted&&(!0===e.isSynced||"true"===e.isSynced));r.length>0&&await Promise.all(r.map(n).map(e=>e))};await a(c,n),await a(d,r),await a(u,i);const s=n.filter(e=>!e.isSynced),l=r.filter(e=>!e.isSynced),h=i.filter(e=>!e.isSynced);if(s.length>0||l.length>0||h.length>0){const n=await J.syncAll(vt);var t;if(n.success&&e){if(window.showToast)window.showToast("All offline changes synced! (".concat((null===(t=n.summary)||void 0===t?void 0:t.totalSynced)||0," items)"),"success")}else e&&window.showToast&&window.showToast("Some changes could not be synced. Will retry automatically.","warning")}}catch(n){console.error("\u274c Error syncing unsynced changes:",n.message),e&&window.showToast&&window.showToast("Error syncing offline changes. Will retry automatically.","error")}if(e)try{const t=await Z(),n=await E(y).catch(()=>[]),r=(t.customers||[]).map(e=>e.phone&&!e.mobileNumber||!e.mobileNumber&&e.phone?o(o({},e),{},{mobileNumber:e.phone}):e);e&&(i({type:be,payload:(r||[]).filter(e=>!0!==e.isDeleted)}),i({type:_e,payload:(t.products||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ce,payload:(t.orders||[]).filter(e=>!0!==e.isDeleted)}),i({type:Te,payload:(t.transactions||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ae,payload:(t.purchaseOrders||[]).filter(e=>!0!==e.isDeleted)}),i({type:Ue,payload:(t.categories||[]).filter(e=>!0!==e.isDeleted)}),i({type:Re,payload:(n||[]).filter(e=>!0!==e.isDeleted)}),i({type:bt,payload:"online"}))}catch(r){console.error("Error refreshing data after coming online:",r.message),e&&i({type:bt,payload:"online"})}}},n=()=>{e&&i({type:bt,payload:"offline"})};return navigator.onLine&&t(),window.addEventListener("online",t),window.addEventListener("offline",n),()=>{e=!1,window.removeEventListener("online",t),window.removeEventListener("offline",n)}},[]);const s=(0,r.useMemo)(()=>({state:n,dispatch:i}),[n,i]);return(0,ie.jsx)(wt.Provider,{value:s,children:t})},Nt=()=>{const e=(0,r.useContext)(wt);if(!e)throw new Error("useApp must be used within an AppProvider");return e};function St(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var kt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const At=["color","size","strokeWidth","absoluteStrokeWidth","children"];var jt=(e,t)=>{const n=(0,r.forwardRef)((n,i)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:c,children:d}=n,u=St(n,At);return(0,r.createElement)("svg",o(o({ref:i},kt),{},{width:s,height:s,stroke:a,strokeWidth:c?24*Number(l)/Number(s):l,className:"lucide lucide-".concat((h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},u),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(d)?d:[d])||[]]);var h});return n.displayName="".concat(e),n};const Pt=jt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),It=jt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ct=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Et={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],a=i+1<e.length,s=a?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,d=(3&t)<<4|s>>4;let u=(15&s)<<2|l>>6,h=63&l;o||(h=64,a||(u=64)),r.push(n[c],n[d],n[u],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ct(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){const a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{const a=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==s||null==o)throw new Lt;const l=t<<2|a>>4;if(r.push(l),64!==s){const e=a<<4&240|s>>2;if(r.push(e),64!==o){const e=s<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Lt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dt=function(e){return function(e){const t=Ct(e);return Et.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Tt=function(e){try{return Et.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const Ot=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Mt=()=>{try{return Ot()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5000"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Tt(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Rt=e=>{var t;return null===(t=Mt())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Ft=()=>{var e;return null===(e=Mt())||void 0===e?void 0:e.config},Ut=e=>{var t;return null===(t=Mt())||void 0===t?void 0:t["_".concat(e)]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function zt(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}const qt={};let Vt=!1;function Ht(e,t){if("undefined"===typeof window||"undefined"===typeof document||!zt(window.location.host)||qt[e]===t||qt[e]||Vt)return;function n(e){return"__firebase__banner__".concat(e)}qt[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(qt))qt[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function a(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Vt=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),d=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=a();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(d,c),t.append(d,s,l,n),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",d.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(d.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function Wt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Gt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Yt(){try{return"object"===typeof indexedDB}catch(e){return!1}}function Kt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class Jt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Jt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}}class $t{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Xt,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Jt(n,a,t)}}const Xt=/\{\$([^}]+)}/g;function Qt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],a=t[i];if(Zt(n)&&Zt(a)){if(!Qt(n,a))return!1}else if(n!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Zt(e){return null!==e&&"object"===typeof e}function en(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function tn(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function nn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class rn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=an),void 0===r.error&&(r.error=an),void 0===r.complete&&(r.complete=an);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function an(){}function sn(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function on(e){return e&&e._delegate?e._delegate:e}class ln{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const cn="[DEFAULT]";class dn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Bt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:cn})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&a.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===cn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn;return this.component?this.component.multipleInstances?e:cn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class un{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new dn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const hn=[];var fn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(fn||(fn={}));const pn={debug:fn.DEBUG,verbose:fn.VERBOSE,info:fn.INFO,warn:fn.WARN,error:fn.ERROR,silent:fn.SILENT},mn=fn.INFO,gn={[fn.DEBUG]:"log",[fn.VERBOSE]:"log",[fn.INFO]:"info",[fn.WARN]:"warn",[fn.ERROR]:"error"},yn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=gn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,a=new Array(i>2?i-2:0),s=2;s<i;s++)a[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...a)};class bn{constructor(e){this.name=e,this._logLevel=mn,this._logHandler=yn,this._userLogHandler=null,hn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in fn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?pn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,fn.DEBUG,...t),this._logHandler(this,fn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,fn.VERBOSE,...t),this._logHandler(this,fn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,fn.INFO,...t),this._logHandler(this,fn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,fn.WARN,...t),this._logHandler(this,fn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,fn.ERROR,...t),this._logHandler(this,fn.ERROR,...t)}}let vn,xn;const wn=new WeakMap,_n=new WeakMap,Nn=new WeakMap,Sn=new WeakMap,kn=new WeakMap;let An={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return _n.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Nn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return In(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function jn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xn||(xn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Cn(this),n),In(wn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return In(e.apply(Cn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const a=e.call(Cn(this),t,...r);return Nn.set(a,t.sort?t.sort():[t]),In(a)}}function Pn(e){return"function"===typeof e?jn(e):(e instanceof IDBTransaction&&function(e){if(_n.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});_n.set(e,t)}(e),t=e,(vn||(vn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,An):e);var t}function In(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(In(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&wn.set(t,e)}).catch(()=>{}),kn.set(t,e),t}(e);if(Sn.has(e))return Sn.get(e);const t=Pn(e);return t!==e&&(Sn.set(e,t),kn.set(t,e)),t}const Cn=e=>kn.get(e);function En(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),o=In(s);return r&&s.addEventListener("upgradeneeded",e=>{r(In(s.result),e.oldVersion,e.newVersion,In(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{a&&e.addEventListener("close",()=>a()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const Ln=["get","getKey","getAll","getAllKeys","count"],Dn=["put","add","delete","clear"],Tn=new Map;function On(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Tn.get(t))return Tn.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Dn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ln.includes(n))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return r&&(a=a.index(o.shift())),(await Promise.all([a[n](...o),i&&t.done]))[0]};return Tn.set(t,a),a}!function(e){An=e(An)}(e=>o(o({},e),{},{get:(t,n,r)=>On(t,n)||e.get(t,n,r),has:(t,n)=>!!On(t,n)||e.has(t,n)}));class Mn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Rn="@firebase/app",Fn="0.14.5",Un=new bn("@firebase/app"),Bn="@firebase/app-compat",zn="@firebase/analytics-compat",qn="@firebase/analytics",Vn="@firebase/app-check-compat",Hn="@firebase/app-check",Wn="@firebase/auth",Gn="@firebase/auth-compat",Yn="@firebase/database",Kn="@firebase/data-connect",Jn="@firebase/database-compat",$n="@firebase/functions",Xn="@firebase/functions-compat",Qn="@firebase/installations",Zn="@firebase/installations-compat",er="@firebase/messaging",tr="@firebase/messaging-compat",nr="@firebase/performance",rr="@firebase/performance-compat",ir="@firebase/remote-config",ar="@firebase/remote-config-compat",sr="@firebase/storage",or="@firebase/storage-compat",lr="@firebase/firestore",cr="@firebase/ai",dr="@firebase/firestore-compat",ur="firebase",hr="[DEFAULT]",fr={[Rn]:"fire-core",[Bn]:"fire-core-compat",[qn]:"fire-analytics",[zn]:"fire-analytics-compat",[Hn]:"fire-app-check",[Vn]:"fire-app-check-compat",[Wn]:"fire-auth",[Gn]:"fire-auth-compat",[Yn]:"fire-rtdb",[Kn]:"fire-data-connect",[Jn]:"fire-rtdb-compat",[$n]:"fire-fn",[Xn]:"fire-fn-compat",[Qn]:"fire-iid",[Zn]:"fire-iid-compat",[er]:"fire-fcm",[tr]:"fire-fcm-compat",[nr]:"fire-perf",[rr]:"fire-perf-compat",[ir]:"fire-rc",[ar]:"fire-rc-compat",[sr]:"fire-gcs",[or]:"fire-gcs-compat",[lr]:"fire-fst",[dr]:"fire-fst-compat",[cr]:"fire-vertex","fire-js":"fire-js",[ur]:"fire-js-all"},pr=new Map,mr=new Map,gr=new Map;function yr(e,t){try{e.container.addComponent(t)}catch(n){Un.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function br(e){const t=e.name;if(gr.has(t))return Un.debug("There were multiple attempts to register component ".concat(t,".")),!1;gr.set(t,e);for(const n of pr.values())yr(n,e);for(const n of mr.values())yr(n,e);return!0}function vr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const wr=new $t("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class _r{constructor(e,t,n){this._isDeleted=!1,this._options=o({},e),this._config=o({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}const Nr="12.5.0";function Sr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=o({name:hr,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw wr.create("bad-app-name",{appName:String(i)});if(n||(n=Ft()),!n)throw wr.create("no-options");const a=pr.get(i);if(a){if(Qt(n,a.options)&&Qt(r,a.config))return a;throw wr.create("duplicate-app",{appName:i})}const s=new un(i);for(const o of gr.values())s.addComponent(o);const l=new _r(n,r,s);return pr.set(i,l),l}function kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hr;const t=pr.get(e);if(!t&&e===hr&&Ft())return Sr();if(!t)throw wr.create("no-app",{appName:e});return t}function Ar(e,t,n){var r;let i=null!==(r=fr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const a=i.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Un.warn(e.join(" "))}br(new ln("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const jr="firebase-heartbeat-store";let Pr=null;function Ir(){return Pr||(Pr=En("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(jr)}catch(n){console.warn(n)}}}).catch(e=>{throw wr.create("idb-open",{originalErrorMessage:e.message})})),Pr}async function Cr(e,t){try{const n=(await Ir()).transaction(jr,"readwrite"),r=n.objectStore(jr);await r.put(t,Er(e)),await n.done}catch(n){if(n instanceof Jt)Un.warn(n.message);else{const e=wr.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Un.warn(e.message)}}}function Er(e){return"".concat(e.name,"!").concat(e.options.appId)}class Lr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Dr();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Un.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Dr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Or(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Or(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Dt(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Un.warn(t),""}}}function Dr(){return(new Date).toISOString().substring(0,10)}class Tr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Yt()&&Kt().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ir()).transaction(jr),n=await t.objectStore(jr).get(Er(e));return await t.done,n}catch(t){if(t instanceof Jt)Un.warn(t.message);else{const e=wr.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Un.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Cr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Cr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Or(e){return Dt(JSON.stringify({version:2,heartbeats:e})).length}var Mr;Mr="",br(new ln("platform-logger",e=>new Mn(e),"PRIVATE")),br(new ln("heartbeat",e=>new Lr(e),"PRIVATE")),Ar(Rn,Fn,Mr),Ar(Rn,Fn,"esm2020"),Ar("fire-js","");const Rr=["providerId"],Fr=["uid","auth","stsTokenManager"],Ur=["providerId","signInMethod"];function Br(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zr=Br,qr=new $t("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Vr=new bn("@firebase/auth");function Hr(e){if(Vr.logLevel<=fn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Vr.error("Auth (".concat(Nr,"): ").concat(e),...n)}}function Wr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw $r(e,...n)}function Gr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $r(e,...n)}function Yr(e,t,n){const r=o(o({},zr()),{},{[t]:n});return new $t("auth","Firebase",r).create(t,{appName:e.name})}function Kr(e){return Yr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Wr(e,"argument-error"),Yr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function $r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return qr.create(e,...n)}function Xr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw $r(t,...r)}}function Qr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hr(t),new Error(t)}function Zr(e,t){e||Qr(t)}function ei(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ti(){return"http:"===ni()||"https:"===ni()}function ni(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class ri{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ti()||Gt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function ii(e,t){Zr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ai{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const si={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},oi=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],li=new ri(3e4,6e4);function ci(e,t){return e.tenantId&&!t.tenantId?o(o({},t),{},{tenantId:e.tenantId}):t}async function di(e,t,n,r){return ui(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},a={};r&&("GET"===t?a=r:i={body:JSON.stringify(r)});const s=en(o({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=o({method:t,headers:l},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&zt(e.emulatorConfig.host)&&(c.credentials="include"),ai.fetch()(await fi(e,e.config.apiHost,n,s),c)})}async function ui(e,t,n){e._canInitEmulator=!1;const r=o(o({},si),t);try{const t=new mi(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw gi(e,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const t=i.ok?a.errorMessage:a.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw gi(e,"credential-already-in-use",a);if("EMAIL_EXISTS"===n)throw gi(e,"email-already-in-use",a);if("USER_DISABLED"===n)throw gi(e,"user-disabled",a);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Yr(e,o,s);Wr(e,o)}}catch(i){if(i instanceof Jt)throw i;Wr(e,"network-request-failed",{message:String(i)})}}async function hi(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const a=await di(e,t,n,r,i);return"mfaPendingCredential"in a&&Wr(e,"multi-factor-auth-required",{_serverResponse:a}),a}async function fi(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),a=e,s=a.config.emulator?ii(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(oi.includes(n)&&(await a._persistenceManagerAvailable,"COOKIE"===a._getPersistenceType())){return a._getPersistence()._getFinalTarget(s).toString()}return s}function pi(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mi{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Gr(this.auth,"network-request-failed")),li.get())})}}function gi(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gr(e,t,r);return i.customData._tokenResponse=n,i}function yi(e){return void 0!==e&&void 0!==e.enterprise}class bi{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pi(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vi(e,t){return di(e,"GET","/v2/recaptchaConfig",ci(e,t))}async function xi(e,t){return di(e,"POST","/v1/accounts:lookup",t)}function wi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function _i(e){return 1e3*Number(e)}function Ni(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Hr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Tt(n);return e?JSON.parse(e):(Hr("Failed to decode base64 JWT payload"),null)}catch(i){return Hr("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function Si(e){const t=Ni(e);return Xr(t,"internal-error"),Xr("undefined"!==typeof t.exp,"internal-error"),Xr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function ki(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof Jt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Ai{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ji{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wi(this.lastLoginAt),this.creationTime=wi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Pi(e){var t;const n=e.auth,r=await e.getIdToken(),i=await ki(e,xi(n,{idToken:r}));Xr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const a=i.users[0];e._notifyReloadListener(a);const s=null!==(t=a.providerUserInfo)&&void 0!==t&&t.length?Ii(a.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,s),l=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(null!==o&&void 0!==o&&o.length),d=!!l&&c,u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new ji(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(e,u)}function Ii(e){return e.map(e=>{let{providerId:t}=e,n=St(e,Rr);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Ci{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xr(e.idToken,"internal-error"),Xr("undefined"!==typeof e.idToken,"internal-error"),Xr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Si(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Xr(0!==e.length,"internal-error");const t=Si(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Xr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ui(e,{},async()=>{const n=en({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,a=await fi(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:s,body:n};return e.emulatorConfig&&zt(e.emulatorConfig.host)&&(o.credentials="include"),ai.fetch()(a,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,a=new Ci;return n&&(Xr("string"===typeof n,"internal-error",{appName:e}),a.refreshToken=n),r&&(Xr("string"===typeof r,"internal-error",{appName:e}),a.accessToken=r),i&&(Xr("number"===typeof i,"internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ci,this.toJSON())}_performRefresh(){return Qr("not implemented")}}function Ei(e,t){Xr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Li{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=St(e,Fr);this.providerId="firebase",this.proactiveRefresh=new Ai(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ji(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ki(this,this.stsTokenManager.getToken(this.auth,e));return Xr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=on(e),r=await n.getIdToken(t),i=Ni(r);Xr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a="object"===typeof i.firebase?i.firebase:void 0,s=null===a||void 0===a?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:wi(_i(i.auth_time)),issuedAtTime:wi(_i(i.iat)),expirationTime:wi(_i(i.exp)),signInProvider:s||null,signInSecondFactor:(null===a||void 0===a?void 0:a.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=on(e);await Pi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Xr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>o({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Li(o(o({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Xr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Pi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await ki(this,async function(e,t){return di(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return o(o({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>o({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,a,s,l,c,d;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(a=t.photoURL)&&void 0!==a?a:void 0,m=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,b=null!==(d=t.lastLoginAt)&&void 0!==d?d:void 0,{uid:v,emailVerified:x,isAnonymous:w,providerData:_,stsTokenManager:N}=t;Xr(v&&N,e,"internal-error");const S=Ci.fromJSON(this.name,N);Xr("string"===typeof v,e,"internal-error"),Ei(u,e.name),Ei(h,e.name),Xr("boolean"===typeof x,e,"internal-error"),Xr("boolean"===typeof w,e,"internal-error"),Ei(f,e.name),Ei(p,e.name),Ei(m,e.name),Ei(g,e.name),Ei(y,e.name),Ei(b,e.name);const k=new Li({uid:v,auth:e,email:h,emailVerified:x,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:S,createdAt:y,lastLoginAt:b});return _&&Array.isArray(_)&&(k.providerData=_.map(e=>o({},e))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ci;r.updateFromServerResponse(t);const i=new Li({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Pi(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Xr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Ii(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),s=new Ci;s.updateFromIdToken(n);const o=new Li({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:a}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new ji(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const Di=new Map;function Ti(e){Zr(e instanceof Function,"Expected a class definition");let t=Di.get(e);return t?(Zr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Di.set(e,t),t)}class Oi{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Oi.type="NONE";const Mi=Oi;function Ri(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Fi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ri(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ri("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await xi(this.auth,{idToken:e}).catch(()=>{});return t?Li._fromGetAccountInfoResponse(this.auth,t,e):null}return Li._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Fi(Ti(Mi),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Ti(Mi);const a=Ri(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(a);if(t){let n;if("string"===typeof t){const r=await xi(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Li._fromGetAccountInfoResponse(e,r,t)}else n=Li._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],s&&await i._set(a,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(a)}catch(t){}})),new Fi(i,e,n)):new Fi(i,e,n)}}function Ui(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Vi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Bi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Wi(t))return"Blackberry";if(Gi(t))return"Webos";if(zi(t))return"Safari";if((t.includes("chrome/")||qi(t))&&!t.includes("edge/"))return"Chrome";if(Hi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Bi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/firefox\//i.test(e)}function zi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/crios\//i.test(e)}function Vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/iemobile/i.test(e)}function Hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/android/i.test(e)}function Wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/blackberry/i.test(e)}function Gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/webos/i.test(e)}function Yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ki(){return function(){const e=Wt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ji(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt();return Yi(e)||Hi(e)||Gi(e)||Wi(e)||/windows phone/i.test(e)||Vi(e)}function $i(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ui(Wt());break;case"Worker":t="".concat(Ui(Wt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Nr,"/").concat(r)}class Xi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(om){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Qi{constructor(e){var t,n,r,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=a.minPasswordLength)&&void 0!==t?t:6,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),void 0!==a.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),void 0!==a.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),void 0!==a.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),void 0!==a.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,a,s;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNumericCharacter)||void 0===a||a),o.isValid&&(o.isValid=null===(s=o.containsNonAlphanumericCharacter)||void 0===s||s),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Zi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ta(this),this.idTokenSubscription=new ta(this),this.beforeStateQueue=new Xi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ti(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Fi.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(a){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await xi(this,{idToken:e}),n=await Li._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(xr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,a;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,s=null===(a=n)||void 0===a?void 0:a._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==s||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Xr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Pi(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(Kr(this));const t=e?on(e):null;return t&&Xr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Xr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ti(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return di(e,"GET","/v2/passwordPolicy",ci(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Qi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $t("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return di(e,"POST","/v2/accounts:revokeToken",ci(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ti(e)||this._popupRedirectResolver;Xr(t,this,"argument-error"),this.redirectPersistenceManager=await Fi.create(this,[Ti(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let a=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xr(s,this,"internal-error"),s.then(()=>{a||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{a=!0,i()}}{const n=e.addObserver(t);return()=>{a=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$i(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Vr.logLevel<=fn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Vr.warn("Auth (".concat(Nr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function ea(e){return on(e)}class ta{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new rn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Xr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let na={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ra(e){return na.loadJS(e)}function ia(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class aa{constructor(){this.enterprise=new sa}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class sa{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const oa="NO_RECAPTCHA";class la{constructor(e){this.type="recaptcha-enterprise",this.auth=ea(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;yi(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(oa)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new aa).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{vi(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new bi(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&yi(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=na.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ra(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ca(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new la(e);let s;if(i)s=oa;else try{s=await a.verify(n)}catch(c){s=await a.verify(n,!0)}const l=o({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:s}):Object.assign(l,{captchaResponse:s}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function da(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ca(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ca(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("PHONE_PROVIDER")){const i=await ca(e,t,n);return r(e,i).catch(async i=>{var a;if("AUDIT"===(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await ca(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await ca(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function ua(e){const t=ea(e),n=await vi(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new bi(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new la(t).verify()}}function ha(e,t,n){const r=ea(e);Xr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),a=fa(t),{host:s,port:o}=function(e){const t=fa(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:pa(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:pa(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(a,"//").concat(s).concat(l,"/")},d=Object.freeze({host:s,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Xr(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Xr(Qt(c,r.config.emulator)&&Qt(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,zt(s)?(!async function(e){(await fetch(e,{credentials:"include"})).ok}("".concat(a,"//").concat(s).concat(l)),Ht("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fa(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pa(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ma{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,t){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}async function ga(e,t){return di(e,"POST","/v1/accounts:signUp",t)}async function ya(e,t){return hi(e,"POST","/v1/accounts:signInWithPassword",ci(e,t))}class ba extends ma{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ba(e,t,"password")}static _fromEmailAndCode(e,t){return new ba(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return da(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ya,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return hi(e,"POST","/v1/accounts:signInWithEmailLink",ci(e,t))}(e,{email:this._email,oobCode:this._password});default:Wr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return da(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ga,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return hi(e,"POST","/v1/accounts:signInWithEmailLink",ci(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function va(e,t){return hi(e,"POST","/v1/accounts:signInWithIdp",ci(e,t))}class xa extends ma{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=St(t,Ur);if(!n||!r)return null;const a=new xa(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return va(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,va(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,va(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=en(t)}return e}}async function wa(e,t){return di(e,"POST","/v1/accounts:sendVerificationCode",ci(e,t))}const _a={USER_NOT_FOUND:"user-not-found"};class Na extends ma{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Na({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Na({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return hi(e,"POST","/v1/accounts:signInWithPhoneNumber",ci(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await hi(e,"POST","/v1/accounts:signInWithPhoneNumber",ci(e,t));if(n.temporaryProof)throw gi(e,"account-exists-with-different-credential",n);return n}(e,o({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return hi(e,"POST","/v1/accounts:signInWithPhoneNumber",ci(e,o(o({},t),{},{operation:"REAUTH"})),_a)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Na({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Sa{constructor(e){var t,n,r,i,a,s;const o=tn(nn(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Xr(l&&c&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(a=o.lang)&&void 0!==a?a:null,this.tenantId=null!==(s=o.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=tn(nn(e)).link,n=t?tn(nn(t)).deep_link_id:null,r=tn(nn(e)).deep_link_id;return(r?tn(nn(r)).link:null)||r||n||t||e}(e);try{return new Sa(t)}catch(n){return null}}}class ka{constructor(){this.providerId=ka.PROVIDER_ID}static credential(e,t){return ba._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Sa.parseLink(t);return Xr(n,"argument-error"),ba._fromEmailAndCode(e,n.code,n.tenantId)}}ka.PROVIDER_ID="password",ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Aa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ja extends Aa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Pa extends ja{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:Pa.PROVIDER_ID,signInMethod:Pa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pa.credentialFromTaggedObject(e)}static credentialFromError(e){return Pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Pa.credential(t.oauthAccessToken)}catch(n){return null}}}Pa.FACEBOOK_SIGN_IN_METHOD="facebook.com",Pa.PROVIDER_ID="facebook.com";class Ia extends ja{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:Ia.PROVIDER_ID,signInMethod:Ia.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ia.credentialFromTaggedObject(e)}static credentialFromError(e){return Ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ia.credential(n,r)}catch(i){return null}}}Ia.GOOGLE_SIGN_IN_METHOD="google.com",Ia.PROVIDER_ID="google.com";class Ca extends ja{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:Ca.PROVIDER_ID,signInMethod:Ca.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ca.credentialFromTaggedObject(e)}static credentialFromError(e){return Ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ca.credential(t.oauthAccessToken)}catch(n){return null}}}Ca.GITHUB_SIGN_IN_METHOD="github.com",Ca.PROVIDER_ID="github.com";class Ea extends ja{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ea.credential(n,r)}catch(i){return null}}}Ea.TWITTER_SIGN_IN_METHOD="twitter.com",Ea.PROVIDER_ID="twitter.com";class La{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Li._fromIdTokenResponse(e,n,r),a=Da(n);return new La({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Da(n);return new La({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Da(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ta extends Jt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ta.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ta(e,t,n,r)}}function Oa(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ta._fromErrorAndOperation(e,n,t,r);throw n})}async function Ma(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await ki(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return La._forOperation(e,"link",r)}async function Ra(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(xr(r.app))return Promise.reject(Kr(r));const i="reauthenticate";try{const a=await ki(e,Oa(r,i,t,e),n);Xr(a.idToken,r,"internal-error");const s=Ni(a.idToken);Xr(s,r,"internal-error");const{sub:o}=s;return Xr(e.uid===o,r,"user-mismatch"),La._forOperation(e,i,a)}catch(a){throw(null===a||void 0===a?void 0:a.code)==="auth/".concat("user-not-found")&&Wr(r,"user-mismatch"),a}}async function Fa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(xr(e.app))return Promise.reject(Kr(e));const r="signIn",i=await Oa(e,r,t),a=await La._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(a.user),a}function Ua(e,t){return di(e,"POST","/v2/accounts/mfaEnrollment:start",ci(e,t))}new WeakMap;const Ba="__sak";class za{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ba,"1"),this.storage.removeItem(Ba),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class qa extends za{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ji(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ki()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}qa.type="LOCAL";const Va=qa;function Ha(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Wa(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Ga{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Wa(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Ha(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Wa(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Wa(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Ha(n);const i=setInterval(()=>{const e=Ha(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Ga.type="COOKIE";class Ya extends za{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ya.type="SESSION";const Ka=Ya;class Ja{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ja(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,a=this.handlersMap[r];if(null===a||void 0===a||!a.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(a).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function $a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ja.receivers=[];class Xa{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,a;return new Promise((s,o)=>{const l=$a("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);a={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Qa(){return window}function Za(){return"undefined"!==typeof Qa().WorkerGlobalScope&&"function"===typeof Qa().importScripts}const es="firebaseLocalStorageDb",ts="firebaseLocalStorage",ns="fbase_key";class rs{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function is(e,t){return e.transaction([ts],t?"readwrite":"readonly").objectStore(ts)}function as(){const e=indexedDB.open(es,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ts,{keyPath:ns})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ts)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(es);return new rs(e).toPromise()}(),t(await as()))})})}async function ss(e,t,n){const r=is(e,!0).put({[ns]:t,value:n});return new rs(r).toPromise()}function os(e,t){const n=is(e,!0).delete(t);return new rs(n).toPromise()}class ls{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await as()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Za()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ja._getInstance(Za()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Xa(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await as();return await ss(e,Ba,"1"),await os(e,Ba),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ss(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=is(e,!1).get(t),r=await new rs(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>os(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=is(e,!1).getAll();return new rs(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ls.type="LOCAL";const cs=ls;function ds(e,t){return di(e,"POST","/v2/accounts/mfaSignIn:start",ci(e,t))}ia("rcb"),new ri(3e4,6e4);const us="recaptcha";async function hs(e,t,n){if(!e._getRecaptchaConfig())try{await ua(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Xr("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},a=da(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===oa){Xr((null===n||void 0===n?void 0:n.type)===us,e,"argument-error");return Ua(e,await fs(e,t,n))}return Ua(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Xr("signin"===t.type,e,"internal-error");const a=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Xr(a,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=da(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===oa){Xr((null===n||void 0===n?void 0:n.type)===us,e,"argument-error");return ds(e,await fs(e,t,n))}return ds(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=da(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===oa){Xr((null===n||void 0===n?void 0:n.type)===us,e,"argument-error");return wa(e,await fs(e,t,n))}return wa(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function fs(e,t,n){Xr(n.type===us,e,"argument-error");const r=await n.verify();Xr("string"===typeof r,e,"argument-error");const i=o({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,a=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:a}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ps{constructor(e){this.providerId=ps.PROVIDER_ID,this.auth=ea(e)}verifyPhoneNumber(e,t){return hs(this.auth,e,on(t))}static credential(e,t){return Na._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ps.credentialFromTaggedObject(t)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Na._fromTokenResponse(n,r):null}}function ms(e,t){return t?Ti(t):(Xr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ps.PROVIDER_ID="phone",ps.PHONE_SIGN_IN_METHOD="phone";class gs extends ma{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return va(e,this._buildIdpRequest())}_linkToIdToken(e,t){return va(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return va(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ys(e){return Fa(e.auth,new gs(e),e.bypassAuthState)}function bs(e){const{auth:t,user:n}=e;return Xr(n,t,"internal-error"),Ra(n,new gs(e),e.bypassAuthState)}async function vs(e){const{auth:t,user:n}=e;return Xr(n,t,"internal-error"),Ma(n,new gs(e),e.bypassAuthState)}class xs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:a,type:s}=e;if(a)return void this.reject(a);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ys;case"linkViaPopup":case"linkViaRedirect":return vs;case"reauthViaPopup":case"reauthViaRedirect":return bs;default:Wr(this.auth,"internal-error")}}resolve(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ws=new ri(2e3,1e4);class _s extends xs{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,_s.currentPopupAction&&_s.currentPopupAction.cancel(),_s.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xr(e,this.auth,"internal-error"),e}async onExecution(){Zr(1===this.filter.length,"Popup operations only handle one event");const e=$a();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_s.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,ws.get())};e()}}_s.currentPopupAction=null;const Ns=new Map;class Ss extends xs{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ns.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ps(t),r=js(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ns.set(this.auth._key(),e)}return this.bypassAuthState||Ns.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ks(e,t){return js(e)._set(Ps(t),"true")}function As(e,t){Ns.set(e._key(),t)}function js(e){return Ti(e._redirectPersistence)}function Ps(e){return Ri("pendingRedirect",e.config.apiKey,e.name)}function Is(e,t,n){return async function(e,t,n){if(xr(e.app))return Promise.reject(Kr(e));const r=ea(e);Jr(e,t,Aa),await r._initializationPromise;const i=ms(r,n);return await ks(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}async function Cs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(xr(e.app))return Promise.reject(Kr(e));const r=ea(e),i=ms(r,t),a=new Ss(r,i,n),s=await a.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Es{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ds(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ds(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Gr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ls(e))}saveEventToCache(e){this.cachedEventUids.add(Ls(e)),this.lastProcessedEventTime=Date.now()}}function Ls(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ds(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ts=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Os=/^https?/;async function Ms(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return di(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Rs(r))return}catch(n){}Wr(e,"unauthorized-domain")}function Rs(e){const t=ei(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Os.test(n))return!1;if(Ts.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Fs=new ri(3e4,6e4);function Us(){const e=Qa().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Bs(e){return new Promise((t,n)=>{var r,i;function a(){Us(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Us(),n(Gr(e,"network-request-failed"))},timeout:Fs.get()})}if(null!==(r=Qa().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Qa().gapi)||void 0===i||!i.load){const t=ia("iframefcb");return Qa()[t]=()=>{gapi.load?a():n(Gr(e,"network-request-failed"))},ra("".concat(na.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw zs=null,e})}let zs=null;const qs=new ri(5e3,15e3),Vs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Hs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ws(e){const t=e.config;Xr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ii(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Nr},i=Hs.get(e.config.apiHost);i&&(r.eid=i);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(en(r).slice(1))}async function Gs(e){const t=await function(e){return zs=zs||Bs(e),zs}(e),n=Qa().gapi;return Xr(n,e,"internal-error"),t.open({where:document.body,url:Ws(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vs,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Gr(e,"network-request-failed"),a=Qa().setTimeout(()=>{r(i)},qs.get());function s(){Qa().clearTimeout(a),n(t)}t.ping(s).then(s,()=>{r(i)})}))}const Ys={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ks{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Js(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=o(o({},Ys),{},{width:r.toString(),height:i.toString(),top:a,left:s}),d=Wt().toLowerCase();n&&(l=qi(d)?"_blank":n),Bi(d)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Yi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(d)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new Ks(null);const h=window.open(t||"",l,u);Xr(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Ks(h)}const $s="__/auth/handler",Xs="emulator/auth/handler",Qs=encodeURIComponent("fac");async function Zs(e,t,n,r,i,a){Xr(e.config.authDomain,e,"auth-domain-config-required"),Xr(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Nr,eventId:i};if(t instanceof Aa){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))s[e]=t}if(t instanceof ja){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const o=s;for(const d of Object.keys(o))void 0===o[d]&&delete o[d];const l=await e._getAppCheckToken(),c=l?"#".concat(Qs,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat($s);return ii(t,Xs)}(e),"?").concat(en(o).slice(1)).concat(c)}const eo="webStorageSupport";const to=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ka,this._completeRedirectFn=Cs,this._overrideRedirectResult=As}async _openPopup(e,t,n,r){var i;Zr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Js(e,await Zs(e,t,n,ei(),r),$a())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Qa().location.href=e}(await Zs(e,t,n,ei(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Zr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Gs(e),n=new Es(e);return t.register("authEvent",t=>{Xr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(eo,{type:eo},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[eo];void 0!==i&&t(!!i),Wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ms(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ji()||zi()||Yi()}};var no="@firebase/auth",ro="1.11.1";class io{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Xr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ao=Ut("authIdTokenMaxAge")||300;let so=null;var oo;!function(e){na=e}({loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Gr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),oo="Browser",br(new ln("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;Xr(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:oo,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$i(oo)},c=new Zi(r,i,a,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ti);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),br(new ln("auth-internal",e=>(e=>new io(e))(ea(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Ar(no,ro,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(oo)),Ar(no,ro,"esm2020");Ar("firebase","12.5.0","app");const lo="@firebase/installations",co="0.6.19",uo=1e4,ho="w:".concat(co),fo="FIS_v2",po=36e5,mo=new $t("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function go(e){return e instanceof Jt&&e.code.includes("request-failed")}function yo(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function bo(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function vo(e,t){const n=(await t.json()).error;return mo.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function xo(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function wo(e,t){let{refreshToken:n}=t;const r=xo(e);return r.append("Authorization",function(e){return"".concat(fo," ").concat(e)}(n)),r}async function _o(e){const t=await e();return t.status>=500&&t.status<600?e():t}function No(e){return new Promise(t=>{setTimeout(t,e)})}const So=/^[cdef][\w-]{21}$/;function ko(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return So.test(t)?t:""}catch(e){return""}}function Ao(e){return"".concat(e.appName,"!").concat(e.appId)}const jo=new Map;function Po(e,t){const n=Ao(e);Io(n,t),function(e,t){const n=Eo();n&&n.postMessage({key:e,fid:t});Lo()}(n,t)}function Io(e,t){const n=jo.get(e);if(n)for(const r of n)r(t)}let Co=null;function Eo(){return!Co&&"BroadcastChannel"in self&&(Co=new BroadcastChannel("[Firebase] FID Change"),Co.onmessage=e=>{Io(e.data.key,e.data.fid)}),Co}function Lo(){0===jo.size&&Co&&(Co.close(),Co=null)}const Do="firebase-installations-store";let To=null;function Oo(){return To||(To=En("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Do)}})),To}async function Mo(e,t){const n=Ao(e),r=(await Oo()).transaction(Do,"readwrite"),i=r.objectStore(Do),a=await i.get(n);return await i.put(t,n),await r.done,a&&a.fid===t.fid||Po(e,t.fid),t}async function Ro(e){const t=Ao(e),n=(await Oo()).transaction(Do,"readwrite");await n.objectStore(Do).delete(t),await n.done}async function Fo(e,t){const n=Ao(e),r=(await Oo()).transaction(Do,"readwrite"),i=r.objectStore(Do),a=await i.get(n),s=t(a);return void 0===s?await i.delete(n):await i.put(s,n),await r.done,!s||a&&a.fid===s.fid||Po(e,s.fid),s}async function Uo(e){let t;const n=await Fo(e.appConfig,n=>{const r=function(e){const t=e||{fid:ko(),registrationStatus:0};return qo(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(mo.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const a=yo(n),s=xo(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const l={fid:i,authVersion:fo,appId:n.appId,sdkVersion:ho},c={method:"POST",headers:s,body:JSON.stringify(l)},d=await _o(()=>fetch(a,c));if(d.ok){const e=await d.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:bo(e.authToken)}}throw await vo("Create Installation",d)}(e,t);return Mo(e.appConfig,n)}catch(n){throw go(n)&&409===n.customData.serverCode?await Ro(e.appConfig):await Mo(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Bo(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Bo(e){let t=await zo(e.appConfig);for(;1===t.registrationStatus;)await No(100),t=await zo(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Uo(e);return n||t}return t}function zo(e){return Fo(e,e=>{if(!e)throw mo.create("installation-not-found");return qo(e)})}function qo(e){return 1===(t=e).registrationStatus&&t.registrationTime+uo<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Vo(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return"".concat(yo(e),"/").concat(n,"/authTokens:generate")}(n,t),a=wo(n,t),s=r.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const o={installation:{sdkVersion:ho,appId:n.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},c=await _o(()=>fetch(i,l));if(c.ok){return bo(await c.json())}throw await vo("Generate Auth Token",c)}async function Ho(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Fo(e.appConfig,r=>{if(!Go(r))throw mo.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+po}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await Wo(e.appConfig);for(;1===n.authToken.requestStatus;)await No(100),n=await Wo(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Ho(e,t):r}(e,n),r;{if(!navigator.onLine)throw mo.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return o(o({},e),{},{authToken:t})}(r);return t=async function(e,t){try{const n=await Vo(e,t),r=o(o({},t),{},{authToken:n});return await Mo(e.appConfig,r),n}catch(n){if(!go(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=o(o({},t),{},{authToken:{requestStatus:0}});await Mo(e.appConfig,n)}else await Ro(e.appConfig);throw n}}(e,n),n}});return t?await t:r.authToken}function Wo(e){return Fo(e,e=>{if(!Go(e))throw mo.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+uo<Date.now()?o(o({},e),{},{authToken:{requestStatus:0}}):e;var n})}function Go(e){return void 0!==e&&2===e.registrationStatus}async function Yo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Uo(e);t&&await t}(n);return(await Ho(n,t)).token}function Ko(e){return mo.create("missing-app-config-values",{valueName:e})}const Jo="installations",$o=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Ko("App Configuration");if(!e.name)throw Ko("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Ko(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:vr(t,"heartbeat"),_delete:()=>Promise.resolve()}},Xo=e=>{const t=vr(e.getProvider("app").getImmediate(),Jo).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Uo(t);return r?r.catch(console.error):Ho(t).catch(console.error),n.fid}(t),getToken:e=>Yo(t,e)}};br(new ln(Jo,$o,"PUBLIC")),br(new ln("installations-internal",Xo,"PRIVATE")),Ar(lo,co),Ar(lo,co,"esm2020");const Qo="analytics",Zo="https://www.googletagmanager.com/gtag/js",el=new bn("@firebase/analytics"),tl=new $t("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function nl(e){if(!e.startsWith(Zo)){const t=tl.create("invalid-gtag-resource",{gtagURL:e});return el.warn(t.message),""}return e}function rl(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function il(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:nl}),r=document.createElement("script"),i="".concat(Zo,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function al(e,t,n,r){return async function(i){try{for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];if("event"===i){const[r,i]=s;await async function(e,t,n,r,i){try{let a=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await rl(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){a=[];break}a.push(i)}}0===a.length&&(a=Object.values(t)),await Promise.all(a),e("event",r,i||{})}catch(a){el.error(a)}}(e,t,n,r,i)}else if("config"===i){const[i,a]=s;await async function(e,t,n,r,i,a){const s=r[i];try{if(s)await t[s];else{const e=(await rl(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(o){el.error(o)}e("config",i,a)}(e,t,n,r,i,a)}else if("consent"===i){const[t,n]=s;e("consent",t,n)}else if("get"===i){const[t,n,r]=s;e("get",t,n,r)}else if("set"===i){const[t]=s;e("set",t)}else e(i,...s)}catch(l){el.error(l)}}}const sl=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ol(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function ll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sl,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:a}=e.options;if(!r)throw tl.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw tl.create("no-api-key")}const s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new dl;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),cl({appId:r,apiKey:i,measurementId:a},s,o,t)}async function cl(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:sl;const{appId:s,measurementId:o}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(a),r(tl.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(c){if(o)return el.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(o)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===c||void 0===c?void 0:c.message,"]")),{appId:s,measurementId:o};throw c}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:ol(n)},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),a=await fetch(i,r);if(200!==a.status&&304!==a.status){let e="";try{var s;const t=await a.json();null!==(s=t.error)&&void 0!==s&&s.message&&(e=t.error.message)}catch(o){}throw tl.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return a.deleteThrottleMetadata(s),t}catch(c){var l;const t=c;if(!function(e){if(!(e instanceof Jt)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(a.deleteThrottleMetadata(s),o)return el.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(o)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:s,measurementId:o};throw c}const r=503===Number(null===t||void 0===t||null===(l=t.customData)||void 0===l?void 0:l.httpStatus)?sn(i,a.intervalMillis,30):sn(i,a.intervalMillis),d={throttleEndTimeMillis:Date.now()+r,backoffCount:i+1};return a.setThrottleMetadata(s,d),el.debug("Calling attemptFetch again in ".concat(r," millis")),cl(e,d,n,a)}}class dl{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let ul,hl;function fl(e){hl=e}function pl(e){ul=e}async function ml(e,t,n,r,i,a,s){var o;const l=ll(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&el.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>el.error(e)),t.push(l);const c=async function(){if(!Yt())return el.warn(tl.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await Kt()}catch(e){return el.warn(tl.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[d,u]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Zo)&&n.src.includes(e))return n;return null})(a)||il(a,d.measurementId),hl&&(i("consent","default",hl),fl(void 0)),i("js",new Date);const h=null!==(o=null===s||void 0===s?void 0:s.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=u&&(h.firebase_id=u),i("config",d.measurementId,h),ul&&(i("set",ul),pl(void 0)),d.measurementId}class gl{constructor(e){this.app=e}_delete(){return delete yl[this.app.options.appId],Promise.resolve()}}let yl={},bl=[];const vl={};let xl,wl,_l="dataLayer",Nl="gtag",Sl=!1;function kl(){const e=[];if(Gt()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=tl.create("invalid-analytics-context",{errorInfo:t});el.warn(n.message)}}function Al(e,t,n){kl();const r=e.options.appId;if(!r)throw tl.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw tl.create("no-api-key");el.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=yl[r])throw tl.create("already-exists",{id:r});if(!Sl){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(_l);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=al(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}(yl,bl,vl,_l,Nl);wl=e,xl=t,Sl=!0}yl[r]=ml(e,bl,vl,t,xl,_l,n);return new gl(e)}function jl(e,t,n){e=on(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t["user_properties.".concat(e)]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(wl,yl[e.app.options.appId],t,n).catch(e=>el.error(e))}function Pl(e,t,n,r){e=on(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,o(o({},r),{},{send_to:i}))}}(wl,yl[e.app.options.appId],t,n,r).catch(e=>el.error(e))}const Il="@firebase/analytics",Cl="0.10.19";br(new ln(Qo,(e,t)=>{let{options:n}=t;return Al(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),br(new ln("analytics-internal",function(e){try{const t=e.getProvider(Qo).getImmediate();return{logEvent:(e,n,r)=>Pl(t,e,n,r),setUserProperties:(e,n)=>jl(t,e,n)}}catch(t){throw tl.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),Ar(Il,Cl),Ar(Il,Cl,"esm2020");const El=Sr({apiKey:"AIzaSyDCYsrrPg3VllgwR1K02jmvOo7bbgjtR3A",authDomain:"dragdrop-2a9a4.firebaseapp.com",projectId:"dragdrop-2a9a4",storageBucket:"dragdrop-2a9a4.firebasestorage.app",messagingSenderId:"1016804641337",appId:"1:1016804641337:web:306c4fa562b86f2cd61be8",measurementId:"G-GKV9HX0ZL8"}),Ll=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();const t=vr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=vr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Qt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Wr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:to,persistence:[cs,Va,Ka]}),r=Ut("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ao)return;const r=null===t||void 0===t?void 0:t.token;so!==r&&(so=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){on(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){on(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const a=Rt("auth");return a&&ha(n,"http://".concat(a)),n}(El),Dl=new Ia;let Tl;Dl.addScope("profile"),Dl.addScope("email"),Dl.setCustomParameters({prompt:"select_account"}),"undefined"!==typeof window&&Ll.authStateReady().catch(()=>{}),"undefined"!==typeof window&&(Tl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr();e=on(e);const t=vr(e,Qo);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=vr(e,Qo);if(n.isInitialized()){const e=n.getImmediate();if(Qt(t,n.getOptions()))return e;throw tl.create("already-initialized")}return n.initialize({options:t})}(e)}(El));const Ol=()=>{const{dispatch:e}=Nt(),[t,n]=(0,r.useState)(""),[i,a]=(0,r.useState)(!1),s=(0,r.useRef)(!1);(0,r.useEffect)(()=>{(async()=>{try{const t=await async function(e,t){return await ea(e)._initializationPromise,Cs(e,t,!1)}(Ll);if(t&&t.user){const r=t.user;try{const t=await q(r.email,r.uid,r.displayName,r.photoURL);t.success&&t.sellerId?(console.log("\u2705 Seller created/verified in backend:",t.seller),e({type:"LOGIN",payload:{username:r.displayName||r.email||"User",email:r.email,photoURL:r.photoURL,uid:r.uid,sellerId:t.sellerId}})):403===t.status?(console.warn("Access denied: Seller account is inactive"),Ll.signOut().catch(console.error)):(console.error("Backend verification failed:",t.error),Ll.signOut().catch(console.error))}catch(n){console.error("Backend auth error:",n),Ll.signOut().catch(console.error)}}}catch(t){console.error("Error checking redirect result:",t)}})()},[e]);return(0,r.useEffect)(()=>{let n=null,r=!0;return(async()=>{try{if(await Ll.authStateReady(),!r)return;const t=async t=>{if(t)try{const n=await q(t.email,t.uid,t.displayName,t.photoURL);n.success&&n.sellerId?(console.log("\u2705 Seller created/verified in backend:",n.seller),e({type:"LOGIN",payload:{username:t.displayName||t.email||"User",email:t.email,photoURL:t.photoURL,uid:t.uid,sellerId:n.sellerId}})):403===n.status?(console.warn("Access denied: Seller account is inactive"),Ll.signOut().catch(console.error)):(console.error("Backend verification failed:",n.error),Ll.signOut().catch(console.error))}catch(n){console.error("Backend auth error:",n),Ll.signOut().catch(console.error)}};Ll.currentUser&&await t(Ll.currentUser),n=Ll.onAuthStateChanged(async e=>{r&&e&&await t(e)})}catch(t){console.error("Error setting up auth state listener:",t)}})(),()=>{r=!1,n&&n()}},[e]),(0,ie.jsx)("div",{className:"flex items-center justify-center h-screen bg-[#1b1b1b]",children:(0,ie.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-2xl shadow-2xl mx-4",children:[(0,ie.jsx)("div",{className:"flex justify-center",children:(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsxs)("div",{className:"relative w-28 h-28 mx-auto mb-4",children:[(0,ie.jsxs)("div",{className:"absolute left-0 w-14 h-28 bg-white rounded-l-full shadow-xl",children:[(0,ie.jsx)("div",{className:"absolute top-2 left-2 w-7 h-7 bg-black rounded-full flex items-center justify-center shadow-md",children:(0,ie.jsx)(Pt,{className:"w-4 h-4 text-white"})}),(0,ie.jsx)("div",{className:"absolute top-1 left-1 w-3 h-3 bg-gray-400 rounded-full shadow-lg"})]}),(0,ie.jsxs)("div",{className:"absolute right-0 w-14 h-28 bg-black rounded-r-full shadow-xl",children:[(0,ie.jsx)("div",{className:"absolute top-2 right-2 w-7 h-7 bg-white rounded-full flex items-center justify-center shadow-md",children:(0,ie.jsx)(It,{className:"w-5 h-5 text-black"})}),(0,ie.jsx)("div",{className:"absolute top-1 right-1 w-3 h-3 bg-white rounded-full shadow-lg"})]})]}),(0,ie.jsx)("h1",{className:"text-3xl font-bold text-black mb-1",children:"DRAG & DROP"}),(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Inventory Management"})]})}),(0,ie.jsxs)("div",{className:"space-y-4",children:[(0,ie.jsx)("button",{onClick:async()=>{if(!i&&!s.current)try{if(s.current=!0,a(!0),n(""),!Ll||!Dl)throw new Error("Firebase authentication is not properly initialized");try{await Ll.authStateReady()}catch(r){console.warn("Auth state ready warning:",r)}const t=async function(e,t,n){if(xr(e.app))return Promise.reject(Gr(e,"operation-not-supported-in-this-environment"));const r=ea(e);Jr(e,t,Aa);const i=ms(r,n);return new _s(r,"signInViaPopup",t,i).executeNotNull()}(Ll,Dl),i=new Promise((e,t)=>setTimeout(()=>t(new Error("Sign-in timeout")),3e4)),l=(await Promise.race([t,i])).user;try{const t=await q(l.email,l.uid,l.displayName,l.photoURL);if(!t.success||!t.sellerId)return 403===t.status?(n(t.error||"Your account has been deactivated. Please contact administrator."),void Ll.signOut().catch(console.error)):(n(t.error||"Unable to verify your account. Please try again or contact support."),void Ll.signOut().catch(console.error));console.log("\u2705 Seller created/verified in backend:",t.seller),e({type:"LOGIN",payload:{username:l.displayName||l.email||"User",email:l.email,photoURL:l.photoURL,uid:l.uid,sellerId:t.sellerId}})}catch(o){return console.error("Backend auth error:",o),n("Unable to connect to server. Please check your connection and try again."),void Ll.signOut().catch(console.error)}}catch(t){console.error("Google sign in error:",t);let r="Failed to sign in with Google";if("auth/popup-closed-by-user"===t.code)r="Sign-in popup was closed. Please try again.";else if("auth/popup-blocked"===t.code){r="Popup was blocked. Using redirect method instead...";try{return void await Is(Ll,Dl)}catch(l){r="Failed to sign in. Please allow popups or try again."}}else"auth/cancelled-popup-request"===t.code?r="Only one popup request is allowed at a time. Please wait and try again.":"auth/account-exists-with-different-credential"===t.code?r="An account with this email already exists.":"Sign-in timeout"===t.message?r="Sign-in took too long. Please try again.":t.message&&(r=t.message);n(r)}finally{a(!1),setTimeout(()=>{s.current=!1},1e3)}},disabled:i,className:"w-full bg-white border-2 border-gray-300 text-gray-700 font-semibold py-3 px-4 rounded-lg hover:bg-gray-50 transition-all duration-300 shadow-lg flex items-center justify-center space-x-3 disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-600"}),(0,ie.jsx)("span",{children:"Signing in..."})]}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,ie.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,ie.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,ie.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,ie.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,ie.jsx)("span",{children:"Sign in with Google"})]})}),t&&(0,ie.jsx)("p",{className:"text-sm text-red-600 text-center bg-red-50 p-3 rounded-lg",children:t})]})]})})},Ml=jt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),Rl=jt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Fl=jt("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Ul=jt("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]),Bl=jt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),zl=jt("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),ql=jt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Vl=jt("BrainCircuit",[["path",{d:"M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08 2.5 2.5 0 0 0 4.91.05L12 20V4.5Z",key:"ixwj2a"}],["path",{d:"M16 8V5c0-1.1.9-2 2-2",key:"13dx7u"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M20.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1s25gz"}],["path",{d:"M16.5 13a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"127460"}],["path",{d:"M20.5 21a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"fys062"}],["path",{d:"M18.5 3a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1vib61"}]]),Hl=jt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Wl=jt("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),Gl=jt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Yl=jt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Kl=jt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Jl={en:{dashboard:"Dashboard",customers:"Customers",products:"Products",inventory:"Inventory",billing:"Billing",purchaseOrders:"Purchase Orders",financial:"Financial",aiAssistant:"AI Assistant",reports:"Reports",upgradePlan:"Upgrade Plan",settings:"Settings",add:"Add",edit:"Edit",delete:"Delete",save:"Save",cancel:"Cancel",search:"Search",total:"Total",quantity:"Quantity",price:"Price",name:"Name",phone:"Phone",email:"Email",address:"Address",stock:"Stock",lowStock:"Low Stock",expiringSoon:"Expiring Soon",notifications:"Notifications",noNotifications:"No notifications",billingSystem:"Billing System",createAndManageBills:"Create and manage customer bills",customerInformation:"Customer Information",selectCustomer:"Select Customer",useCustomCustomerName:"Use custom customer name",enterCustomerName:"Enter customer name",chooseCustomer:"Choose a customer",paymentMethod:"Payment Method",cash:"Cash",card:"Card",upi:"UPI",due:"Due (Credit)",addProducts:"Add Products",searchProducts:"Search products...",scanBarcode:"Scan Barcode",enterBarcodeManually:"Or enter barcode manually and press Enter...",billItems:"Bill Items",noItemsAdded:"No items added to bill yet",billSummary:"Bill Summary",subtotal:"Subtotal",discount:"Discount",tax:"Tax",generateBill:"Generate Bill",addToBill:"Add to Bill",addQuantity:"Add Quantity",product:"Product",unit:"Unit",pieces:"Pieces (pcs)",grams:"Grams (gm)",kilograms:"Kilograms (kg)",milliliters:"Milliliters (mL)",liters:"Liters (L)",boxes:"Boxes",packets:"Packets",bottles:"Bottles",lowStockAlert:"Low Stock Alert",expiringSoon:"Expiring Soon",isRunningLow:"is running low",unitsRemaining:"units remaining",expiresIn:"expires in",days:"days",billGeneratedSuccessfully:"Bill generated successfully!",pleaseAddItems:"Please add items to the bill",pleaseEnterCustomerName:"Please enter or select a customer name",lowStockWarning:"Low Stock Warning!",available:"Available",requested:"Requested",pleaseReduceQuantity:"Please reduce quantity to",orLess:"or less",stockError:"Stock Error!",cannotGenerateBill:"Cannot generate bill with insufficient stock",thankYouForBusiness:"Thank you for your business!",productNotFound:"Product not found with barcode",pleaseAddProductFirst:"Please add the product first or try again",lowStock:"Low Stock!",youCannotAddMore:"You cannot add more than"},hi:{dashboard:"\u0921\u0948\u0936\u092c\u094b\u0930\u094d\u0921",customers:"\u0917\u094d\u0930\u093e\u0939\u0915",products:"\u0909\u0924\u094d\u092a\u093e\u0926",inventory:"\u0907\u0928\u094d\u0935\u0947\u0902\u091f\u0930\u0940",billing:"\u092c\u093f\u0932\u093f\u0902\u0917",purchaseOrders:"\u0916\u0930\u0940\u0926 \u0906\u0926\u0947\u0936",financial:"\u0935\u093f\u0924\u094d\u0924\u0940\u092f",aiAssistant:"AI \u0938\u0939\u093e\u092f\u0915",reports:"\u0930\u093f\u092a\u094b\u0930\u094d\u091f\u094d\u0938",upgradePlan:"\u0905\u092a\u0917\u094d\u0930\u0947\u0921 \u092a\u094d\u0932\u093e\u0928",settings:"\u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938",add:"\u091c\u094b\u0921\u093c\u0947\u0902",edit:"\u0938\u0902\u092a\u093e\u0926\u093f\u0924 \u0915\u0930\u0947\u0902",delete:"\u0939\u091f\u093e\u090f\u0902",save:"\u0938\u0939\u0947\u091c\u0947\u0902",cancel:"\u0930\u0926\u094d\u0926 \u0915\u0930\u0947\u0902",search:"\u0916\u094b\u091c\u0947\u0902",total:"\u0915\u0941\u0932",quantity:"\u092e\u093e\u0924\u094d\u0930\u093e",price:"\u092e\u0942\u0932\u094d\u092f",name:"\u0928\u093e\u092e",phone:"\u092b\u094b\u0928",email:"\u0908\u092e\u0947\u0932",address:"\u092a\u0924\u093e",stock:"\u0938\u094d\u091f\u0949\u0915",lowStock:"\u0915\u092e \u0938\u094d\u091f\u0949\u0915",expiringSoon:"\u091c\u0932\u094d\u0926\u0940 \u0938\u092e\u093e\u092a\u094d\u0924 \u0939\u094b \u0930\u0939\u093e",notifications:"\u0938\u0942\u091a\u0928\u093e\u090f\u0902",noNotifications:"\u0915\u094b\u0908 \u0938\u0942\u091a\u0928\u093e \u0928\u0939\u0940\u0902",billingSystem:"\u092c\u093f\u0932\u093f\u0902\u0917 \u0938\u093f\u0938\u094d\u091f\u092e",createAndManageBills:"\u0917\u094d\u0930\u093e\u0939\u0915 \u092c\u093f\u0932 \u092c\u0928\u093e\u090f\u0902 \u0914\u0930 \u092a\u094d\u0930\u092c\u0902\u0927\u093f\u0924 \u0915\u0930\u0947\u0902",customerInformation:"\u0917\u094d\u0930\u093e\u0939\u0915 \u091c\u093e\u0928\u0915\u093e\u0930\u0940",selectCustomer:"\u0917\u094d\u0930\u093e\u0939\u0915 \u091a\u0941\u0928\u0947\u0902",useCustomCustomerName:"\u0915\u0938\u094d\u091f\u092e \u0917\u094d\u0930\u093e\u0939\u0915 \u0928\u093e\u092e \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0947\u0902",enterCustomerName:"\u0917\u094d\u0930\u093e\u0939\u0915 \u0915\u093e \u0928\u093e\u092e \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902",chooseCustomer:"\u090f\u0915 \u0917\u094d\u0930\u093e\u0939\u0915 \u091a\u0941\u0928\u0947\u0902",paymentMethod:"\u092d\u0941\u0917\u0924\u093e\u0928 \u0935\u093f\u0927\u093f",cash:"\u0928\u0915\u0926",card:"\u0915\u093e\u0930\u094d\u0921",upi:"UPI",due:"\u092c\u0915\u093e\u092f\u093e (\u0915\u094d\u0930\u0947\u0921\u093f\u091f)",addProducts:"\u0909\u0924\u094d\u092a\u093e\u0926 \u091c\u094b\u0921\u093c\u0947\u0902",searchProducts:"\u0909\u0924\u094d\u092a\u093e\u0926 \u0916\u094b\u091c\u0947\u0902...",scanBarcode:"\u092c\u093e\u0930\u0915\u094b\u0921 \u0938\u094d\u0915\u0948\u0928 \u0915\u0930\u0947\u0902",enterBarcodeManually:"\u092f\u093e \u092c\u093e\u0930\u0915\u094b\u0921 \u092e\u0948\u0928\u094d\u092f\u0941\u0905\u0932 \u0930\u0942\u092a \u0938\u0947 \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902 \u0914\u0930 Enter \u0926\u092c\u093e\u090f\u0902...",billItems:"\u092c\u093f\u0932 \u0906\u0907\u091f\u092e",noItemsAdded:"\u0905\u092d\u0940 \u0924\u0915 \u0915\u094b\u0908 \u0906\u0907\u091f\u092e \u0928\u0939\u0940\u0902 \u091c\u094b\u0921\u093c\u093e \u0917\u092f\u093e",billSummary:"\u092c\u093f\u0932 \u0938\u093e\u0930\u093e\u0902\u0936",subtotal:"\u0909\u092a-\u092f\u094b\u0917",discount:"\u091b\u0942\u091f",tax:"\u0915\u0930",generateBill:"\u092c\u093f\u0932 \u092c\u0928\u093e\u090f\u0902",addToBill:"\u092c\u093f\u0932 \u092e\u0947\u0902 \u091c\u094b\u0921\u093c\u0947\u0902",addQuantity:"\u092e\u093e\u0924\u094d\u0930\u093e \u091c\u094b\u0921\u093c\u0947\u0902",product:"\u0909\u0924\u094d\u092a\u093e\u0926",unit:"\u0907\u0915\u093e\u0908",pieces:"\u091f\u0941\u0915\u0921\u093c\u0947 (pcs)",grams:"\u0917\u094d\u0930\u093e\u092e (gm)",kilograms:"\u0915\u093f\u0932\u094b\u0917\u094d\u0930\u093e\u092e (kg)",milliliters:"\u092e\u093f\u0932\u0940\u0932\u0940\u091f\u0930 (mL)",liters:"\u0932\u0940\u091f\u0930 (L)",boxes:"\u092c\u0949\u0915\u094d\u0938",packets:"\u092a\u0948\u0915\u0947\u091f",bottles:"\u092c\u094b\u0924\u0932\u0947\u0902",lowStockAlert:"\u0915\u092e \u0938\u094d\u091f\u0949\u0915 \u091a\u0947\u0924\u093e\u0935\u0928\u0940",expiringSoon:"\u091c\u0932\u094d\u0926\u0940 \u0938\u092e\u093e\u092a\u094d\u0924 \u0939\u094b \u0930\u0939\u093e",isRunningLow:"\u0915\u092e \u0939\u094b \u0930\u0939\u093e \u0939\u0948",unitsRemaining:"\u0907\u0915\u093e\u0907\u092f\u093e\u0902 \u0936\u0947\u0937",expiresIn:"\u0938\u092e\u093e\u092a\u094d\u0924 \u0939\u094b\u0924\u093e \u0939\u0948",days:"\u0926\u093f\u0928\u094b\u0902 \u092e\u0947\u0902",billGeneratedSuccessfully:"\u092c\u093f\u0932 \u0938\u092b\u0932\u0924\u093e\u092a\u0942\u0930\u094d\u0935\u0915 \u092c\u0928\u093e\u092f\u093e \u0917\u092f\u093e!",pleaseAddItems:"\u0915\u0943\u092a\u092f\u093e \u092c\u093f\u0932 \u092e\u0947\u0902 \u0906\u0907\u091f\u092e \u091c\u094b\u0921\u093c\u0947\u0902",pleaseEnterCustomerName:"\u0915\u0943\u092a\u092f\u093e \u0917\u094d\u0930\u093e\u0939\u0915 \u0915\u093e \u0928\u093e\u092e \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902 \u092f\u093e \u091a\u0941\u0928\u0947\u0902",lowStockWarning:"\u0915\u092e \u0938\u094d\u091f\u0949\u0915 \u091a\u0947\u0924\u093e\u0935\u0928\u0940!",available:"\u0909\u092a\u0932\u092c\u094d\u0927",requested:"\u0905\u0928\u0941\u0930\u094b\u0927\u093f\u0924",pleaseReduceQuantity:"\u0915\u0943\u092a\u092f\u093e \u092e\u093e\u0924\u094d\u0930\u093e \u0915\u092e \u0915\u0930\u0947\u0902",orLess:"\u092f\u093e \u0909\u0938\u0938\u0947 \u0915\u092e",stockError:"\u0938\u094d\u091f\u0949\u0915 \u0924\u094d\u0930\u0941\u091f\u093f!",cannotGenerateBill:"\u0905\u092a\u0930\u094d\u092f\u093e\u092a\u094d\u0924 \u0938\u094d\u091f\u0949\u0915 \u0915\u0947 \u0938\u093e\u0925 \u092c\u093f\u0932 \u0928\u0939\u0940\u0902 \u092c\u0928\u093e \u0938\u0915\u0924\u0947",thankYouForBusiness:"\u0906\u092a\u0915\u0947 \u0935\u094d\u092f\u0935\u0938\u093e\u092f \u0915\u0947 \u0932\u093f\u090f \u0927\u0928\u094d\u092f\u0935\u093e\u0926!",productNotFound:"\u092c\u093e\u0930\u0915\u094b\u0921 \u0915\u0947 \u0938\u093e\u0925 \u0909\u0924\u094d\u092a\u093e\u0926 \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e",pleaseAddProductFirst:"\u0915\u0943\u092a\u092f\u093e \u092a\u0939\u0932\u0947 \u0909\u0924\u094d\u092a\u093e\u0926 \u091c\u094b\u0921\u093c\u0947\u0902 \u092f\u093e \u092b\u093f\u0930 \u0938\u0947 \u0915\u094b\u0936\u093f\u0936 \u0915\u0930\u0947\u0902",lowStock:"\u0915\u092e \u0938\u094d\u091f\u0949\u0915!",youCannotAddMore:"\u0906\u092a \u0907\u0938\u0938\u0947 \u0905\u0927\u093f\u0915 \u0928\u0939\u0940\u0902 \u091c\u094b\u0921\u093c \u0938\u0915\u0924\u0947"}},$l=function(e){var t;return(null===(t=Jl[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en"])||void 0===t?void 0:t[e])||Jl.en[e]||e},Xl={basic:{unlockedModules:["dashboard","customers","products","inventory","billing","settings"],lockedModules:["purchase","financial","assistant","reports"],maxCustomers:149,maxProducts:499,voiceAssistant:!1,advancedReports:!1,userManagement:!1},standard:{unlockedModules:["dashboard","customers","products","inventory","billing","purchase","reports","settings"],lockedModules:["financial","assistant"],maxCustomers:299,maxProducts:899,voiceAssistant:!1,advancedReports:!1,userManagement:!1},premium:{unlockedModules:["dashboard","customers","products","inventory","billing","purchase","financial","assistant","reports","settings"],lockedModules:[],maxCustomers:1/0,maxProducts:1/0,voiceAssistant:!0,advancedReports:!0,userManagement:!0}},Ql=e=>e?e.toLowerCase().replace(/\s+/g,"").replace(/orders?/g,"").replace(/ai/g,"").replace(/voice/g,"").replace(/assistant/g,"assistant"):"",Zl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("upgrade"===e||"dashboard"===e)return!0;if(n&&n.unlockedModules){const t=n.unlockedModules.map(Ql),r=Ql(e);if(t.includes(r))return!0;const i=e.toLowerCase();for(const e of n.unlockedModules)if(e.toLowerCase()===i)return!0;const a={purchase:["purchase","purchaseorders","purchase orders"],purchaseOrders:["purchase","purchaseorders","purchase orders"],financial:["financial","finance","financial management"],assistant:["assistant","aiassistant","ai assistant","voiceassistant","voice assistant"],reports:["reports","reporting"],settings:["settings","setting"],dashboard:["dashboard"],customers:["customers","customer"],products:["products","product"],inventory:["inventory","stock"],billing:["billing","bill"]}[e]||[e];for(const e of a){const r=Ql(e);if(t.includes(r))return!0;for(const t of n.unlockedModules)if(t.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(t.toLowerCase()))return!0}return!1}const r=Xl[t];return!!r&&r.unlockedModules.includes(e)},ec=e=>{const t=Xl[e];return t?{maxCustomers:t.maxCustomers,maxProducts:t.maxProducts}:{maxCustomers:0,maxProducts:0}},tc=(e,t)=>{if("upgrade"===e)return"";return{purchase:"Upgrade to Standard Plan to manage purchase orders",financial:"Upgrade to Premium Plan to access financial management",assistant:"basic"===t?"Upgrade to Premium Plan for voice assistant":"Upgrade to Premium Plan for full voice features",reports:"basic"===t?"Upgrade to Standard Plan for basic reports":"Upgrade to Premium Plan for advanced reports",settings:"Upgrade to Premium Plan for full settings control"}[e]||"Upgrade your plan to access this feature"},nc=e=>{let{onClose:t}=e;const{state:n,dispatch:r}=Nt(),i=[{name:"dashboard",href:"dashboard",icon:Ml},{name:"customers",href:"customers",icon:Rl},{name:"products",href:"products",icon:Fl},{name:"inventory",href:"inventory",icon:Ul},{name:"billing",href:"billing",icon:Bl},{name:"purchaseOrders",href:"purchase",icon:zl},{name:"financial",href:"financial",icon:ql},{name:"aiAssistant",href:"assistant",icon:Vl},{name:"reports",href:"reports",icon:Hl},{name:"upgradePlan",href:"upgrade",icon:Wl}],a=e=>{"dashboard"===e||Zl(e,n.currentPlan,n.currentPlanDetails)?(r({type:"SET_CURRENT_VIEW",payload:e}),t&&t()):window.showToast(tc(e,n.currentPlan),"warning")};return(0,ie.jsxs)("div",{className:"flex flex-col h-full",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between p-4 h-16 border-b border-gray-800 bg-[#1b1b1b]",children:[(0,ie.jsxs)("div",{className:"flex items-center min-w-0",children:[(0,ie.jsx)("div",{className:"p-2 bg-white rounded-lg flex-shrink-0 shadow-lg",children:(0,ie.jsx)(Pt,{className:"w-8 h-8 text-black"})}),(0,ie.jsx)("h1",{className:"text-lg sm:text-xl font-bold text-white ml-3 truncate",children:"DRAG & DROP"})]}),t&&(0,ie.jsx)("button",{onClick:t,className:"lg:hidden p-2 rounded-md text-white hover:text-gray-400 hover:bg-gray-900 flex-shrink-0 transition-colors",children:(0,ie.jsx)(Gl,{className:"h-5 w-5"})})]}),(0,ie.jsxs)("ul",{className:"flex-1 flex flex-col py-4 space-y-2 overflow-y-auto",children:[i.map(e=>{const t=e.icon,r=n.currentView===e.href,i="dashboard"===e.href||Zl(e.href,n.currentPlan,n.currentPlanDetails),s="upgrade"===e.href;return(0,ie.jsx)("li",{children:(0,ie.jsxs)("button",{onClick:()=>a(e.href),className:"flex items-center px-4 py-3 mx-3 w-full text-left rounded-lg transition-all duration-200 ".concat(r?"bg-white text-black shadow-lg font-semibold":i?s?"text-white hover:bg-gray-900 border border-gray-700":"text-gray-300 hover:bg-gray-900 hover:text-white":"text-gray-700 cursor-not-allowed"),disabled:!i,children:[(0,ie.jsx)(t,{className:"w-6 h-6 ".concat(r?"text-black":i?s?"text-white":"text-gray-300":"text-gray-700")}),(0,ie.jsx)("span",{className:"ml-3 font-medium",children:$l(e.name,n.currentLanguage)}),!i&&(0,ie.jsx)(Yl,{className:"w-4 h-4 ml-auto text-gray-700"}),s&&(0,ie.jsx)(Wl,{className:"w-4 h-4 ml-auto text-yellow-400"})]})},e.name)}),(0,ie.jsx)("li",{className:"flex-1"}),(0,ie.jsx)("li",{children:(0,ie.jsxs)("button",{onClick:()=>a("settings"),className:"flex items-center px-4 py-3 mx-3 w-full text-left rounded-lg transition-all duration-200 ".concat("settings"===n.currentView?"bg-white text-black shadow-lg font-semibold":Zl("settings",n.currentPlan,n.currentPlanDetails)?"text-gray-300 hover:bg-gray-900 hover:text-white":"text-gray-700 cursor-not-allowed"),disabled:!Zl("settings",n.currentPlan,n.currentPlanDetails),children:[(0,ie.jsx)(Kl,{className:"w-6 h-6 ".concat("settings"===n.currentView?"text-black":Zl("settings",n.currentPlan,n.currentPlanDetails)?"text-gray-300":"text-gray-700")}),(0,ie.jsx)("span",{className:"ml-3 font-medium",children:$l("settings",n.currentLanguage)}),!Zl("settings",n.currentPlan,n.currentPlanDetails)&&(0,ie.jsx)(Yl,{className:"w-4 h-4 ml-auto text-gray-400"})]})})]})]})},rc=jt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ic=jt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ac=jt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),sc=jt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),oc=jt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),lc=jt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),cc=e=>{let{onClose:t}=e;const{state:n}=Nt(),r=n.products.filter(e=>(e.quantity||e.stock||0)<=n.lowStockThreshold),i=n.products.filter(e=>{if(!e.expiryDate)return!1;const t=new Date(e.expiryDate)-new Date,r=Math.ceil(t/864e5);return r>=0&&r<=n.expiryDaysThreshold}),a=[...r.map(e=>({type:"low_stock",title:$l("lowStockAlert",n.currentLanguage),message:"".concat(e.name," ").concat($l("isRunningLow",n.currentLanguage)," (").concat(e.quantity||e.stock||0," ").concat($l("unitsRemaining",n.currentLanguage),")"),icon:Fl,color:"yellow"})),...i.map(e=>({type:"expiring",title:$l("expiringSoon",n.currentLanguage),message:"".concat(e.name," ").concat($l("expiresIn",n.currentLanguage)," ").concat(Math.ceil((new Date(e.expiryDate)-new Date)/864e5)," ").concat($l("days",n.currentLanguage)),icon:ic,color:"red"}))];return(0,ie.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50",children:(0,ie.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 mx-4",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ie.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:$l("notifications",n.currentLanguage)}),(0,ie.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,ie.jsx)(Gl,{className:"h-5 w-5"})})]}),(0,ie.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===a.length?(0,ie.jsxs)("div",{className:"text-center py-8",children:[(0,ie.jsx)(lc,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),(0,ie.jsx)("p",{className:"text-gray-500",children:$l("noNotifications",n.currentLanguage)})]}):(0,ie.jsx)("div",{className:"space-y-3",children:a.map((e,t)=>{const n=e.icon;return(0,ie.jsx)("div",{className:"p-4 rounded-xl border-l-4 ".concat("yellow"===e.color?"bg-yellow-50 border-yellow-400":"bg-red-50 border-red-400"),children:(0,ie.jsxs)("div",{className:"flex items-start",children:[(0,ie.jsx)("div",{className:"p-2 bg-".concat(e.color,"-100 rounded-lg mr-3 flex-shrink-0"),children:(0,ie.jsx)(n,{className:"h-5 w-5 text-".concat(e.color,"-600")})}),(0,ie.jsxs)("div",{className:"flex-1",children:[(0,ie.jsx)("h3",{className:"font-semibold text-gray-900",children:e.title}),(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:e.message})]})]})},t)})})})]})})},dc=e=>{var t,n,i,a;let{onMenuClick:s}=e;const{state:o,dispatch:l}=Nt(),[c,d]=(0,r.useState)(!1),{isInstallable:u,isInstalled:h,install:f}=(()=>{const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return void i(!0);if(!0===window.navigator.standalone)return void i(!0);const e=e=>{e.preventDefault(),t(e),console.log("PWA install prompt available")},n=()=>{i(!0),t(null),console.log("PWA installed")};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",n),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",n)}},[]),{prompt:e,isInstallable:!!e&&!n,isInstalled:n,install:async()=>{if(e)try{await e.prompt();const{outcome:n}=await e.userChoice;"accepted"===n?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),t(null)}catch(n){console.error("Error showing install prompt:",n)}else console.warn("Install prompt not available")}}})();return(0,ie.jsxs)("header",{className:"bg-[#1b1b1b] shadow-lg border-b border-gray-900 px-6 py-5 flex justify-between items-center flex-shrink-0 z-10",children:[(0,ie.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,ie.jsx)("button",{onClick:s,className:"lg:hidden p-2 rounded-lg text-white hover:text-gray-200 hover:bg-gray-900 transition-all",children:(0,ie.jsx)(rc,{className:"h-6 w-6"})}),(0,ie.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-extrabold text-white",children:(p=o.currentView,$l(p,o.currentLanguage))}),(0,ie.jsxs)("div",{className:"hidden sm:flex items-center space-x-2 text-gray-200",children:[(0,ie.jsx)(ic,{className:"w-5 h-5"}),(0,ie.jsx)("span",{className:"font-mono text-lg font-semibold tracking-wide",children:o.currentTime})]})]}),(0,ie.jsxs)("div",{className:"flex items-center space-x-4",children:[u&&!h&&(0,ie.jsxs)("button",{onClick:f,className:"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-lg font-semibold transition-all flex items-center space-x-2 shadow-lg",title:"Install App",children:[(0,ie.jsx)(ac,{className:"h-4 w-4"}),(0,ie.jsx)("span",{className:"text-sm",children:"Install App"})]}),(0,ie.jsxs)("button",{onClick:()=>{const e="en"===o.currentLanguage?"hi":"en";l({type:"SET_LANGUAGE",payload:e})},className:"p-2 rounded-lg text-white hover:text-gray-200 hover:bg-gray-900 transition-all flex items-center space-x-2",title:"Switch to ".concat("en"===o.currentLanguage?"Hindi":"English"),children:[(0,ie.jsx)(sc,{className:"h-5 w-5"}),(0,ie.jsx)("span",{className:"text-sm font-medium",children:"en"===o.currentLanguage?"\u0939\u093f\u0902":"EN"})]}),(0,ie.jsx)("div",{className:"relative",children:(0,ie.jsxs)("button",{onClick:()=>d(!0),className:"p-2 rounded-lg text-white hover:text-gray-200 hover:bg-gray-900 transition-all relative",children:[(0,ie.jsx)(oc,{className:"h-5 w-5"}),(()=>{const e=o.products.filter(e=>(e.quantity||e.stock||0)<=o.lowStockThreshold).length,t=o.products.filter(e=>{if(!e.expiryDate)return!1;const t=new Date(e.expiryDate)-new Date,n=Math.ceil(t/864e5);return n>=0&&n<=o.expiryDaysThreshold}).length,n=e+t;return n>0?(0,ie.jsx)("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center shadow-lg",children:n}):null})()]})}),(0,ie.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ie.jsxs)("div",{className:"hidden sm:block text-right",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-white",children:(null===(t=o.currentUser)||void 0===t?void 0:t.username)||"User"}),(0,ie.jsx)("p",{className:"text-xs text-gray-300",children:"Admin"})]}),(0,ie.jsx)("div",{className:"flex-shrink-0",children:(0,ie.jsx)("img",{className:"h-8 w-8 rounded-full ring-2 ring-white shadow-lg",src:(null===(n=o.currentUser)||void 0===n?void 0:n.photoURL)||"https://placehold.co/40x40/1b1b1b/ffffff?text=".concat(null===(i=o.currentUser)||void 0===i||null===(a=i.username)||void 0===a?void 0:a.charAt(0).toUpperCase()),alt:"User avatar",onError:e=>{var t,n;e.currentTarget.src="https://placehold.co/40x40/1b1b1b/ffffff?text=".concat(null===(t=o.currentUser)||void 0===t||null===(n=t.username)||void 0===n?void 0:n.charAt(0).toUpperCase())}})})]})]}),c&&(0,ie.jsx)(cc,{onClose:()=>d(!1)})]});var p},uc=jt("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),hc=()=>{const{state:e,dispatch:t}=Nt(),n=[{name:"Dashboard",href:"dashboard",icon:Ml},{name:"Customers",href:"customers",icon:Rl},{name:"Products",href:"products",icon:Fl},{name:"Inventory",href:"inventory",icon:Ul},{name:"Billing",href:"billing",icon:Bl},{name:"Purchase",href:"purchase",icon:zl},{name:"Financial",href:"financial",icon:ql},{name:"Assistant",href:"assistant",icon:uc},{name:"Reports",href:"reports",icon:Hl},{name:"Upgrade",href:"upgrade",icon:Wl}];return(0,ie.jsx)("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200",children:(0,ie.jsx)("div",{className:"flex justify-around py-2",children:n.map(n=>{const r=n.icon,i=e.currentView===n.href,a="dashboard"===n.href||Zl(n.href,e.currentPlan,e.currentPlanDetails);return(0,ie.jsxs)("button",{onClick:()=>{var r;"dashboard"===(r=n.href)||Zl(r,e.currentPlan,e.currentPlanDetails)?t({type:"SET_CURRENT_VIEW",payload:r}):window.showToast&&window.showToast(tc(r,e.currentPlan),"warning")},className:"flex flex-col items-center p-2 text-xs font-medium transition-colors ".concat(i?"text-green-600":a?"text-gray-500 hover:text-gray-700":"text-gray-400"),disabled:!a,children:[(0,ie.jsx)(r,{className:"h-5 w-5 mb-1"}),(0,ie.jsx)("span",{className:"truncate",children:n.name})]},n.name)})})})},fc=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(!1),[a,s]=(0,r.useState)([]),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;const r=Date.now(),i={id:r,message:e,type:t,duration:n};s(e=>[...e,i]),setTimeout(()=>{s(e=>e.filter(e=>e.id!==r))},n)};r.useEffect(()=>{window.showToast=o},[]);return(0,ie.jsxs)("div",{className:"flex h-screen bg-white text-gray-900",children:[(0,ie.jsx)("nav",{className:"w-64 bg-[#1b1b1b] shadow-2xl flex-shrink-0 hidden lg:flex lg:flex-col lg:sticky lg:top-0 lg:h-screen border-r border-gray-800",children:(0,ie.jsx)(nc,{})}),n&&(0,ie.jsxs)("div",{className:"fixed inset-0 z-40 lg:hidden",children:[(0,ie.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80",onClick:()=>i(!1)}),(0,ie.jsx)("div",{className:"relative flex w-full max-w-xs flex-1 flex-col bg-[#1b1b1b] shadow-2xl border-r border-gray-800",children:(0,ie.jsx)(nc,{onClose:()=>i(!1)})})]}),(0,ie.jsxs)("div",{className:"flex-1 flex flex-col min-w-0 bg-white",children:[(0,ie.jsx)(dc,{onMenuClick:()=>i(!0)}),(0,ie.jsx)("main",{className:"flex-1 overflow-y-auto overflow-x-hidden scroll-smooth no-scrollbar",children:(0,ie.jsx)("div",{className:"p-2 sm:p-3 lg:p-4 xl:p-6 pb-20 sm:pb-6",children:t})})]}),(0,ie.jsx)(hc,{}),(0,ie.jsx)("div",{className:"fixed top-20 right-4 z-50 flex flex-col-reverse",children:a.map(e=>(0,ie.jsxs)("div",{className:"flex items-start p-4 rounded-lg border-l-4 shadow-xl backdrop-blur-sm min-w-[300px] max-w-[500px] mb-2 ".concat("success"===e.type?"bg-gradient-to-r from-green-50 to-green-100 border-green-500 text-green-800":"error"===e.type?"bg-gradient-to-r from-red-50 to-red-100 border-red-500 text-red-800":"warning"===e.type?"bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-500 text-yellow-800":"bg-gradient-to-r from-orange-50 to-orange-100 border-orange-500 text-orange-800"),children:[(0,ie.jsx)("div",{className:"flex-1 pr-2",children:(0,ie.jsx)("p",{className:"text-sm font-medium whitespace-pre-wrap break-words",children:e.message})}),(0,ie.jsx)("button",{onClick:()=>{return t=e.id,void s(e=>e.filter(e=>e.id!==t));var t},className:"flex-shrink-0 text-current opacity-50 hover:opacity-100 transition-opacity",children:"\xd7"})]},e.id))})]})},pc=jt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),mc=jt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),gc=jt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),yc=jt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),bc=jt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),vc=jt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),xc=()=>{var e;const{state:t,dispatch:n}=Nt(),[i,a]=(0,r.useState)("7d"),s=e=>e>=1e8?"\u20b9".concat((e/1e8).toFixed(2),"Cr"):e>=1e7?"\u20b9".concat((e/1e7).toFixed(2),"Cr"):e>=1e5?"\u20b9".concat((e/1e5).toFixed(2),"L"):e>=1e3?"\u20b9".concat((e/1e3).toFixed(2),"K"):"\u20b9".concat(e.toFixed(2)),o=(()=>{if(!t.subscription||!t.subscription.expiresAt)return 0;const e=new Date(t.subscription.expiresAt)-new Date,n=Math.ceil(e/864e5);return n>0?n:0})(),l=e=>e.createdAt||e.date||(new Date).toISOString(),c=e=>e.date||e.createdAt||(new Date).toISOString(),{startDate:d,endDate:u}=(()=>{const e=new Date;e.setHours(0,0,0,0);let t=new Date(e);switch(i){case"7d":t.setDate(e.getDate()-7);break;case"30d":default:t.setDate(e.getDate()-30);break;case"90d":t.setDate(e.getDate()-90);break;case"1y":t.setFullYear(e.getFullYear()-1)}const n=new Date(e);return n.setHours(23,59,59,999),{startDate:t,endDate:n}})(),h=z(),f=h?t.orders.filter(e=>e.sellerId===h):t.orders,p=f.filter(e=>{const t=new Date(l(e));return t>=d&&t<=u}),m=h?t.purchaseOrders.filter(e=>e.sellerId===h):t.purchaseOrders,g=m.filter(e=>{const t=new Date(c(e));return t>=d&&t<=u}),y=t.customers.length,b=t.products.length,v=f.length,x=m.length,w=t.customers.reduce((e,t)=>e+(t.dueAmount||t.balanceDue||0),0),_=f.reduce((e,t)=>e+(t.totalAmount||0),0),N=p.reduce((e,t)=>e+(t.totalAmount||0),0),S=(m.reduce((e,t)=>e+(t.total||0),0),g.reduce((e,t)=>e+(t.total||0),0),e=>e.reduce((e,t)=>{if(!t.items||!Array.isArray(t.items))return e;return e+t.items.reduce((e,t)=>e+(("number"===typeof t.sellingPrice?t.sellingPrice:parseFloat(t.sellingPrice)||0)-("number"===typeof t.costPrice?t.costPrice:parseFloat(t.costPrice)||0))*("number"===typeof t.quantity?t.quantity:parseFloat(t.quantity)||0),0)},0)),k=t.products.filter(e=>(e.quantity||e.stock||0)<=t.lowStockThreshold),A=t.products.filter(e=>{if(!e.expiryDate)return!1;const n=new Date(e.expiryDate),r=new Date;r.setHours(0,0,0,0);const i=n-r,a=Math.ceil(i/864e5);return a<=t.expiryDaysThreshold&&a>=0}),j=t.customers.filter(e=>(e.dueAmount||e.balanceDue||0)>0).length,P=S(f)-m.reduce((e,t)=>e+(t.total||0),0),I=_>0?P/_*100:0,C=new Date,E=new Date(C.getFullYear(),C.getMonth(),C.getDate());E.setHours(0,0,0,0);const L=new Date(E);L.setDate(L.getDate()+1);const D=f.filter(e=>{const t=new Date(l(e));return t>=E&&t<L}),T=m.filter(e=>{const t=new Date(c(e));return t>=E&&t<L}),O=D.reduce((e,t)=>e+(t.totalAmount||0),0),M=S(D)-T.reduce((e,t)=>e+(t.total||0),0),R=new Date(C.getFullYear(),C.getMonth(),1);R.setHours(0,0,0,0);const F=new Date(C.getFullYear(),C.getMonth()+1,1);F.setHours(0,0,0,0);const U=f.filter(e=>{const t=new Date(l(e));return t>=R&&t<F}),B=m.filter(e=>{const t=new Date(c(e));return t>=R&&t<F}),q=U.reduce((e,t)=>e+(t.totalAmount||0),0),V=S(U)-B.reduce((e,t)=>e+(t.total||0),0),H=((e,t,n,r)=>{const i=e.filter(e=>{const t=new Date(l(e));return t>=n&&t<=r}),a=t.filter(e=>{const t=new Date(c(e));return t>=n&&t<=r});return S(i)-a.reduce((e,t)=>e+(t.total||0),0)})(f,m,d,u),W=[...f||[]].sort((e,t)=>{const n=new Date(l(e));return new Date(l(t))-n}).slice(0,5),G=[...t.activities||[]].sort((e,t)=>{const n=new Date(e.timestamp||e.createdAt||0);return new Date(t.timestamp||t.createdAt||0)-n}).slice(0,5),Y=[{name:"Total Customers",value:y,icon:Rl,color:"bg-blue-500",description:"Active customers"},{name:"Total Products",value:b,icon:Fl,color:"bg-green-500",description:"Items in inventory"},{name:"Today's Sales",value:s(O),icon:ql,color:"bg-blue-500",description:"Sales today from orders"},{name:"Today's Profit",value:s(M),icon:pc,color:"bg-green-500",description:"Profit today (Sales - Purchases)"},{name:"Monthly Sales",value:s(q),icon:ql,color:"bg-purple-500",description:"Sales this month from orders"},{name:"Monthly Profit",value:s(V),icon:pc,color:"bg-pink-500",description:"Profit this month (Sales - Purchases)"},{name:"1y"===i?"Total Sales":"Sales (".concat(i,")"),value:s("1y"===i?_:N),icon:ql,color:"bg-indigo-500",description:"1y"===i?"All time sales from orders":"Sales in selected period"},{name:"Balance Due",value:s(w),icon:mc,color:"bg-orange-500",description:"Outstanding payments"},{name:"Purchase Orders",value:x,icon:zl,color:"bg-indigo-500",description:"Orders placed"},{name:"Total Profit",value:s(P),icon:pc,color:"bg-emerald-500",description:"All time profit (Sales - Purchases)"},{name:"Profit Margin",value:"".concat(I.toFixed(1),"%"),icon:pc,color:"bg-teal-500",description:"Net profit ratio"},{name:"Profit (".concat(i,")"),value:s(H),icon:pc,color:"bg-cyan-500",description:"Profit in selected period"}];return(0,ie.jsxs)("div",{className:"space-y-8 fade-in-up",children:[(0,ie.jsxs)("div",{className:"hidden lg:block relative overflow-hidden bg-[#1b1b1b] rounded-xl shadow-xl p-8 text-white",children:[(0,ie.jsx)("div",{className:"absolute top-10 left-20 w-4 h-4 bg-white opacity-20 rounded floating-animation-1"}),(0,ie.jsx)("div",{className:"absolute top-20 right-30 w-6 h-6 bg-white opacity-15 rounded floating-animation-2"}),(0,ie.jsx)("div",{className:"absolute bottom-10 left-10 w-5 h-5 bg-white opacity-25 rounded floating-animation-3"}),(0,ie.jsx)("div",{className:"absolute bottom-20 right-20 w-3 h-3 bg-white opacity-30 rounded floating-animation-4"}),(0,ie.jsx)("div",{className:"absolute top-1/2 right-10 w-4 h-4 bg-white opacity-20 rounded floating-animation-5"}),(0,ie.jsx)("div",{className:"absolute top-1/3 left-1/3 w-7 h-7 bg-white opacity-10 rounded floating-animation-6"}),(0,ie.jsxs)("div",{className:"relative z-10 flex items-center justify-between",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h1",{className:"text-4xl font-bold mb-2",children:"Dashboard"}),(0,ie.jsxs)("p",{className:"text-gray-300 text-lg",children:["Welcome back, ",(null===(e=t.currentUser)||void 0===e?void 0:e.username)||"User","! \ud83d\udc4b"]}),(0,ie.jsxs)("div",{className:"mt-3 flex items-center space-x-4",children:[(0,ie.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ie.jsx)("div",{className:"w-3 h-3 rounded-full animate-pulse ".concat("online"===t.systemStatus?"bg-green-400":"bg-red-400")}),(0,ie.jsx)("span",{className:"text-sm text-gray-300",children:"online"===t.systemStatus?"System Online":"System Offline"})]}),"online"===t.systemStatus&&(0,ie.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ie.jsx)("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),(0,ie.jsx)("span",{className:"text-sm text-gray-300",children:"All Systems Operational"})]})]})]}),(0,ie.jsxs)("div",{className:"text-right",children:[(0,ie.jsx)("div",{className:"text-gray-300 text-sm mb-1",children:"Current Time"}),(0,ie.jsx)("div",{className:"text-xl font-semibold",children:(new Date).toLocaleDateString()}),(0,ie.jsx)("div",{className:"text-lg font-medium",children:(new Date).toLocaleTimeString()})]})]})]}),o>0&&(0,ie.jsx)("div",{className:"rounded-xl border-2 p-4 ".concat((K=o,K>=30?"text-green-600 bg-green-50 border-green-200":K>=20?"text-orange-600 bg-orange-50 border-orange-200":K>=10?"text-red-600 bg-red-50 border-red-200":"text-red-700 bg-red-100 border-red-300")),children:(0,ie.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ie.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ie.jsx)(ic,{className:"h-6 w-6"}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-semibold text-lg",children:(e=>0===e?"Subscription Expired":e<=3?"Recharge Now!":"".concat(e,e<=10?" Days Left - Recharge Soon!":" Days Remaining"))(o)}),(0,ie.jsx)("p",{className:"text-sm opacity-80",children:"Your subscription will expire soon. Please recharge to continue using all features."})]})]}),o<=3&&(0,ie.jsx)("button",{onClick:()=>n({type:"SET_CURRENT_VIEW",payload:"upgrade"}),className:"px-4 py-2 bg-[#1b1b1b] text-white rounded-lg hover:bg-[#252525] transition-colors",children:"Recharge Now"})]})}),(0,ie.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ie.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Business Overview"}),(0,ie.jsxs)("select",{value:i,onChange:e=>a(e.target.value),className:"input-field w-40",children:[(0,ie.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,ie.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,ie.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,ie.jsx)("option",{value:"1y",children:"Last year"})]})]}),(0,ie.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5 gap-6",children:Y.map((e,t)=>{const n=e.icon;return(0,ie.jsx)("div",{className:"stat-card animate-float-up hover:scale-105 hover:shadow-xl transition-all duration-300 cursor-pointer",style:{animationDelay:"".concat(.1*t,"s"),animationFillMode:"both"},children:(0,ie.jsxs)("div",{className:"flex items-center w-full h-full",children:[(0,ie.jsx)("div",{className:"p-4 rounded-xl ".concat(e.color," mr-4 flex-shrink-0 shadow-lg"),children:(0,ie.jsx)(n,{className:"h-8 w-8 text-white"})}),(0,ie.jsxs)("div",{className:"min-w-0 flex-1 overflow-hidden",children:[(0,ie.jsx)("p",{className:"text-base font-medium text-gray-600 mb-2",children:e.name}),(0,ie.jsx)("p",{className:"text-2xl font-bold text-gray-900",title:e.value,children:e.value})]})]})},e.name)})}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[(0,ie.jsx)(lc,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Important Alerts"]}),(0,ie.jsxs)("div",{className:"space-y-4",children:[k.length>0&&(0,ie.jsxs)("div",{className:"flex items-center p-4 bg-yellow-50 rounded-xl border-l-4 border-yellow-400",children:[(0,ie.jsx)(lc,{className:"h-6 w-6 text-yellow-600 mr-4 flex-shrink-0"}),(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("p",{className:"font-semibold text-yellow-800",children:[k.length," products low in stock"]}),(0,ie.jsxs)("p",{className:"text-sm text-yellow-600",children:[k.slice(0,3).map(e=>e.name).join(", "),k.length>3&&" and ".concat(k.length-3," more")]})]})]}),A.length>0&&(0,ie.jsxs)("div",{className:"flex items-center p-4 bg-red-50 rounded-xl border-l-4 border-red-400",children:[(0,ie.jsx)(ic,{className:"h-6 w-6 text-red-600 mr-4 flex-shrink-0"}),(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("p",{className:"font-semibold text-red-800",children:[A.length," products expiring soon"]}),(0,ie.jsxs)("p",{className:"text-sm text-red-600",children:[A.slice(0,3).map(e=>e.name).join(", "),A.length>3&&" and ".concat(A.length-3," more")]})]})]}),j>0&&(0,ie.jsxs)("div",{className:"flex items-center p-4 bg-blue-50 rounded-xl border-l-4 border-blue-400",children:[(0,ie.jsx)(mc,{className:"h-6 w-6 text-blue-600 mr-4 flex-shrink-0"}),(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("p",{className:"font-semibold text-blue-800",children:[j," customers have pending payments"]}),(0,ie.jsxs)("p",{className:"text-sm text-blue-600",children:["Total outstanding: ",s(w)]})]})]}),0===k.length&&0===A.length&&0===j&&(0,ie.jsxs)("div",{className:"text-center py-8",children:[(0,ie.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ie.jsx)(gc,{className:"h-8 w-8 text-green-600"})}),(0,ie.jsx)("p",{className:"text-green-600 font-semibold",children:"All good! No alerts at this time"})]})]})]}),(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[(0,ie.jsx)(Bl,{className:"h-5 w-5 mr-2 text-green-600"}),"Recent Transactions"]}),(0,ie.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:W.length>0?W.map((e,n)=>{const r=e.customerId?t.customers.find(t=>{var n;return t.id===e.customerId||t._id===e.customerId||t._id===(null===(n=e.customerId)||void 0===n?void 0:n.toString())}):null,i=(null===r||void 0===r?void 0:r.name)||"Walk-in Customer",a=e.paymentMethod||"cash",s=a.charAt(0).toUpperCase()+a.slice(1),o=new Date(l(e));return(0,ie.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:(0,ie.jsx)(Bl,{className:"h-4 w-4 text-green-600"})}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-medium text-gray-900",children:i}),(0,ie.jsxs)("p",{className:"text-xs text-gray-500",children:[s," \u2022 ",o.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.items&&e.items.length>0&&(0,ie.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:[e.items.length," item",e.items.length>1?"s":""]})]})]}),(0,ie.jsxs)("div",{className:"text-right",children:[(0,ie.jsxs)("p",{className:"font-semibold text-gray-900",children:["\u20b9",(e.totalAmount||0).toFixed(2)]}),(0,ie.jsx)("p",{className:"text-xs text-green-600",children:"Sale"})]})]},e.id||e._id||n)}):G.length>0?G.map((e,t)=>{const n=new Date(e.timestamp||e.createdAt||Date.now()),{icon:r,color:i}=(e=>{switch(e){case"bill_generated":return{icon:Bl,color:"bg-green-100 text-green-600"};case"po_status_changed":return{icon:zl,color:"bg-blue-100 text-blue-600"};case"product_added":return{icon:Fl,color:"bg-purple-100 text-purple-600"};case"customer_added":return{icon:Rl,color:"bg-indigo-100 text-indigo-600"};default:return{icon:yc,color:"bg-gray-100 text-gray-600"}}})(e.type);return(0,ie.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-2 ".concat(i," rounded-lg mr-3"),children:(0,ie.jsx)(r,{className:"h-4 w-4"})}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-medium text-gray-900",children:e.message||"Activity"}),(0,ie.jsx)("p",{className:"text-xs text-gray-500",children:n.toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,ie.jsx)("div",{className:"text-right",children:(0,ie.jsx)("p",{className:"text-xs text-gray-400",children:e.type||"activity"})})]},e.id||t)}):(0,ie.jsxs)("div",{className:"text-center py-8",children:[(0,ie.jsx)(Bl,{className:"h-12 w-12 mx-auto text-gray-300 mb-4"}),(0,ie.jsx)("p",{className:"text-gray-500",children:"No recent transactions"}),(0,ie.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Transactions will appear here after you make sales"})]})})]})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[(0,ie.jsx)(bc,{className:"h-5 w-5 mr-2 text-black"}),"Quick Actions"]}),(0,ie.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ie.jsxs)("button",{onClick:()=>n({type:"SET_CURRENT_VIEW",payload:"billing"}),className:"p-4 bg-[#1b1b1b] text-white rounded-xl hover:bg-[#252525] transition-colors text-center",children:[(0,ie.jsx)(Pt,{className:"h-8 w-8 mx-auto mb-2"}),(0,ie.jsx)("p",{className:"font-semibold",children:"New Bill"})]}),(0,ie.jsxs)("button",{onClick:()=>n({type:"SET_CURRENT_VIEW",payload:"products"}),className:"p-4 bg-[#1b1b1b] text-white rounded-xl hover:bg-[#252525] transition-colors text-center",children:[(0,ie.jsx)(Fl,{className:"h-8 w-8 mx-auto mb-2"}),(0,ie.jsx)("p",{className:"font-semibold",children:"Add Product"})]}),(0,ie.jsxs)("button",{onClick:()=>n({type:"SET_CURRENT_VIEW",payload:"customers"}),className:"p-4 bg-[#1b1b1b] text-white rounded-xl hover:bg-[#252525] transition-colors text-center",children:[(0,ie.jsx)(Rl,{className:"h-8 w-8 mx-auto mb-2"}),(0,ie.jsx)("p",{className:"font-semibold",children:"Add Customer"})]}),(0,ie.jsxs)("button",{onClick:()=>{Zl("purchase",t.currentPlan,t.currentPlanDetails)?n({type:"SET_CURRENT_VIEW",payload:"purchase"}):window.showToast&&window.showToast(tc("purchase",t.currentPlan),"warning")},className:"p-4 bg-[#1b1b1b] text-white rounded-xl hover:bg-[#252525] transition-colors text-center",children:[(0,ie.jsx)(zl,{className:"h-8 w-8 mx-auto mb-2"}),(0,ie.jsx)("p",{className:"font-semibold",children:"Purchase Order"})]})]})]}),(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-6 flex items-center",children:[(0,ie.jsx)(yc,{className:"h-5 w-5 mr-2 text-black"}),"Performance Metrics"]}),(0,ie.jsxs)("div",{className:"space-y-4",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)(vc,{className:"h-5 w-5 text-black mr-3"}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-semibold text-gray-900",children:"Sales Efficiency"}),(0,ie.jsx)("p",{className:"text-xs text-gray-600",children:"Transactions per day"})]})]}),(0,ie.jsx)("div",{className:"text-right",children:(0,ie.jsx)("p",{className:"text-xl font-bold text-black",children:Math.round(U.length/30)||0})})]}),(0,ie.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)(Hl,{className:"h-5 w-5 text-black mr-3"}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-semibold text-gray-900",children:"Inventory Value"}),(0,ie.jsx)("p",{className:"text-xs text-gray-600",children:"Total stock value"})]})]}),(0,ie.jsx)("div",{className:"text-right",children:(0,ie.jsx)("p",{className:"text-xl font-bold text-black",children:s(t.products.reduce((e,t)=>e+(t.quantity||t.stock||0)*(t.costPrice||t.unitPrice||0),0))})})]}),(0,ie.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)(pc,{className:"h-5 w-5 text-black mr-3"}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-semibold text-gray-900",children:"Avg Transaction"}),(0,ie.jsx)("p",{className:"text-xs text-gray-600",children:"Per transaction"})]})]}),(0,ie.jsx)("div",{className:"text-right",children:(0,ie.jsxs)("p",{className:"text-xl font-bold text-black",children:["\u20b9",_>0&&v>0?(_/v).toFixed(2):"0.00"]})})]})]})]})]})]});var K},wc=jt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),_c=jt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Nc=jt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Sc=jt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),kc=jt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ac=jt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var jc=n(2284),Pc=Uint8Array,Ic=Uint16Array,Cc=Int32Array,Ec=new Pc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Lc=new Pc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Dc=new Pc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tc=function(e,t){for(var n=new Ic(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Cc(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},Oc=Tc(Ec,2),Mc=Oc.b,Rc=Oc.r;Mc[28]=258,Rc[258]=28;for(var Fc=Tc(Lc,0),Uc=(Fc.b,Fc.r),Bc=new Ic(32768),zc=0;zc<32768;++zc){var qc=(43690&zc)>>1|(21845&zc)<<1;qc=(61680&(qc=(52428&qc)>>2|(13107&qc)<<2))>>4|(3855&qc)<<4,Bc[zc]=((65280&qc)>>8|(255&qc)<<8)>>1}var Vc=function(e,t,n){for(var r=e.length,i=0,a=new Ic(t);i<r;++i)e[i]&&++a[e[i]-1];var s,o=new Ic(t);for(i=1;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;if(n){s=new Ic(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],d=t-e[i],u=o[e[i]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)s[Bc[u]>>l]=c}else for(s=new Ic(r),i=0;i<r;++i)e[i]&&(s[i]=Bc[o[e[i]-1]++]>>15-e[i]);return s},Hc=new Pc(288);for(zc=0;zc<144;++zc)Hc[zc]=8;for(zc=144;zc<256;++zc)Hc[zc]=9;for(zc=256;zc<280;++zc)Hc[zc]=7;for(zc=280;zc<288;++zc)Hc[zc]=8;var Wc=new Pc(32);for(zc=0;zc<32;++zc)Wc[zc]=5;var Gc=Vc(Hc,9,0),Yc=Vc(Wc,5,0),Kc=function(e){return(e+7)/8|0},Jc=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new Pc(e.subarray(t,n))},$c=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},Xc=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Qc=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,a=n.slice();if(!i)return{t:ad,l:0};if(1==i){var s=new Pc(n[0].s+1);return s[n[0].s]=1,{t:s,l:1}}n.sort(function(e,t){return e.f-t.f}),n.push({s:-1,f:25001});var o=n[0],l=n[1],c=0,d=1,u=2;for(n[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=i-1;)o=n[n[c].f<n[u].f?c++:u++],l=n[c!=d&&n[c].f<n[u].f?c++:u++],n[d++]={s:-1,f:o.f+l.f,l:o,r:l};var h=a[0].s;for(r=1;r<i;++r)a[r].s>h&&(h=a[r].s);var f=new Ic(h+1),p=Zc(n[d-1],f,0);if(p>t){r=0;var m=0,g=p-t,y=1<<g;for(a.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});r<i;++r){var b=a[r].s;if(!(f[b]>t))break;m+=y-(1<<p-f[b]),f[b]=t}for(m>>=g;m>0;){var v=a[r].s;f[v]<t?m-=1<<t-f[v]++-1:++r}for(;r>=0&&m;--r){var x=a[r].s;f[x]==t&&(--f[x],++m)}p=t}return{t:new Pc(f),l:p}},Zc=function(e,t,n){return-1==e.s?Math.max(Zc(e.l,t,n+1),Zc(e.r,t,n+1)):t[e.s]=n},ed=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Ic(++t),r=0,i=e[0],a=1,s=function(e){n[r++]=e},o=1;o<=t;++o)if(e[o]==i&&o!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(i),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(i);a=1,i=e[o]}return{c:n.subarray(0,r),n:t}},td=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},nd=function(e,t,n){var r=n.length,i=Kc(t+2);e[i]=255&r,e[i+1]=r>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var a=0;a<r;++a)e[i+a+4]=n[a];return 8*(i+4+r)},rd=function(e,t,n,r,i,a,s,o,l,c,d){$c(t,d++,n),++i[256];for(var u=Qc(i,15),h=u.t,f=u.l,p=Qc(a,15),m=p.t,g=p.l,y=ed(h),b=y.c,v=y.n,x=ed(m),w=x.c,_=x.n,N=new Ic(19),S=0;S<b.length;++S)++N[31&b[S]];for(S=0;S<w.length;++S)++N[31&w[S]];for(var k=Qc(N,7),A=k.t,j=k.l,P=19;P>4&&!A[Dc[P-1]];--P);var I,C,E,L,D=c+5<<3,T=td(i,Hc)+td(a,Wc)+s,O=td(i,h)+td(a,m)+s+14+3*P+td(N,A)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&D<=T&&D<=O)return nd(t,d,e.subarray(l,l+c));if($c(t,d,1+(O<T)),d+=2,O<T){I=Vc(h,f,0),C=h,E=Vc(m,g,0),L=m;var M=Vc(A,j,0);$c(t,d,v-257),$c(t,d+5,_-1),$c(t,d+10,P-4),d+=14;for(S=0;S<P;++S)$c(t,d+3*S,A[Dc[S]]);d+=3*P;for(var R=[b,w],F=0;F<2;++F){var U=R[F];for(S=0;S<U.length;++S){var B=31&U[S];$c(t,d,M[B]),d+=A[B],B>15&&($c(t,d,U[S]>>5&127),d+=U[S]>>12)}}}else I=Gc,C=Hc,E=Yc,L=Wc;for(S=0;S<o;++S){var z=r[S];if(z>255){Xc(t,d,I[(B=z>>18&31)+257]),d+=C[B+257],B>7&&($c(t,d,z>>23&31),d+=Ec[B]);var q=31&z;Xc(t,d,E[q]),d+=L[q],q>3&&(Xc(t,d,z>>5&8191),d+=Lc[q])}else Xc(t,d,I[z]),d+=C[z]}return Xc(t,d,I[256]),d+C[256]},id=new Cc([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),ad=new Pc(0),sd=function(e,t,n,r,i,a){var s=a.z||e.length,o=new Pc(r+s+5*(1+Math.ceil(s/7e3))+i),l=o.subarray(r,o.length-i),c=a.l,d=7&(a.r||0);if(t){d&&(l[0]=a.r>>3);for(var u=id[t-1],h=u>>13,f=8191&u,p=(1<<n)-1,m=a.p||new Ic(32768),g=a.h||new Ic(p+1),y=Math.ceil(n/3),b=2*y,v=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<b)&p},x=new Cc(25e3),w=new Ic(288),_=new Ic(32),N=0,S=0,k=a.i||0,A=0,j=a.w||0,P=0;k+2<s;++k){var I=v(k),C=32767&k,E=g[I];if(m[C]=E,g[I]=C,j<=k){var L=s-k;if((N>7e3||A>24576)&&(L>423||!c)){d=rd(e,l,0,x,w,_,S,A,P,k-P,d),A=N=S=0,P=k;for(var D=0;D<286;++D)w[D]=0;for(D=0;D<30;++D)_[D]=0}var T=2,O=0,M=f,R=C-E&32767;if(L>2&&I==v(k-R))for(var F=Math.min(h,L)-1,U=Math.min(32767,k),B=Math.min(258,L);R<=U&&--M&&C!=E;){if(e[k+T]==e[k+T-R]){for(var z=0;z<B&&e[k+z]==e[k+z-R];++z);if(z>T){if(T=z,O=R,z>F)break;var q=Math.min(R,z-2),V=0;for(D=0;D<q;++D){var H=k-R+D&32767,W=H-m[H]&32767;W>V&&(V=W,E=H)}}}R+=(C=E)-(E=m[C])&32767}if(O){x[A++]=268435456|Rc[T]<<18|Uc[O];var G=31&Rc[T],Y=31&Uc[O];S+=Ec[G]+Lc[Y],++w[257+G],++_[Y],j=k+T,++N}else x[A++]=e[k],++w[e[k]]}}for(k=Math.max(k,j);k<s;++k)x[A++]=e[k],++w[e[k]];d=rd(e,l,c,x,w,_,S,A,P,k-P,d),c||(a.r=7&d|l[d/8|0]<<3,d-=7,a.h=g,a.p=m,a.i=k,a.w=j)}else{for(k=a.w||0;k<s+c;k+=65535){var K=k+65535;K>=s&&(l[d/8|0]=c,K=s),d=nd(l,d+1,e.subarray(k,K))}a.i=s}return Jc(o,0,r+Kc(d)+i)},od=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,a=0|n.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=r+=n[s];r=(65535&r)+15*(r>>16),i=(65535&i)+15*(i>>16)}e=r,t=i},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},ld=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),s=new Pc(a.length+e.length);s.set(a),s.set(e,a.length),e=s,i.w=a.length}return sd(e,null==t.level?6:t.level,null==t.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,r,i)},cd=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},dd=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=od();i.p(t.dictionary),cd(e,2,i.d())}};function ud(e,t){t||(t={});var n=od();n.p(e);var r=ld(e,t,t.dictionary?6:2,4);return dd(r,t),cd(r,r.length-4,n.d()),r}var hd="undefined"!=typeof TextDecoder&&new TextDecoder;try{hd.decode(ad,{stream:!0})}catch(vk){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function pd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],l=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fd(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function md(e){return new TextDecoder(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8").decode(e)}const gd=new TextEncoder;const yd=(()=>{const e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])})(),bd={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class vd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8192,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.A)(this,"buffer",void 0),(0,a.A)(this,"byteLength",void 0),(0,a.A)(this,"byteOffset",void 0),(0,a.A)(this,"length",void 0),(0,a.A)(this,"offset",void 0),(0,a.A)(this,"lastWrittenByte",void 0),(0,a.A)(this,"littleEndian",void 0),(0,a.A)(this,"_data",void 0),(0,a.A)(this,"_mark",void 0),(0,a.A)(this,"_marks",void 0);let n=!1;"number"===typeof e?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const r=t.offset?t.offset>>>0:0,i=e.byteLength-r;let s=r;(ArrayBuffer.isView(e)||e instanceof vd)&&(e.byteLength!==e.buffer.byteLength&&(s=e.byteOffset+r),e=e.buffer),this.lastWrittenByte=n?i:0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=s,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,s,i),this._mark=0,this._marks=[]}available(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset+=e,this}back(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(void 0===e)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(e)){const t=2*(this.offset+e),n=new Uint8Array(t);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=t,this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.readArray(e,"uint8")}readArray(e,t){const n=bd[t].BYTES_PER_ELEMENT*e,r=this.byteOffset+this.offset,i=this.buffer.slice(r,r+n);if(this.littleEndian===yd&&"uint8"!==t&&"int8"!==t){const e=new Uint8Array(this.buffer.slice(r,r+n));e.reverse();const i=new bd[t](e.buffer);return this.offset+=n,i.reverse(),i}const a=new bd[t](i);return this.offset+=n,a}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="";for(let n=0;n<e;n++)t+=this.readChar();return t}readUtf8(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return md(this.readBytes(e))}decodeText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";return md(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(function(e){return gd.encode(e)}(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function xd(e){let t=e.length;for(;--t>=0;)e[t]=0}const wd=256,_d=286,Nd=30,Sd=15,kd=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Ad=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),jd=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Pd=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Id=new Array(576);xd(Id);const Cd=new Array(60);xd(Cd);const Ed=new Array(512);xd(Ed);const Ld=new Array(256);xd(Ld);const Dd=new Array(29);xd(Dd);const Td=new Array(Nd);function Od(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let Md,Rd,Fd;function Ud(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}xd(Td);const Bd=e=>e<256?Ed[e]:Ed[256+(e>>>7)],zd=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},qd=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,zd(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Vd=(e,t,n)=>{qd(e,n[2*t],n[2*t+1])},Hd=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},Wd=(e,t,n)=>{const r=new Array(16);let i,a,s=0;for(i=1;i<=Sd;i++)s=s+n[i-1]<<1,r[i]=s;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=Hd(r[t]++,t))}},Gd=e=>{let t;for(t=0;t<_d;t++)e.dyn_ltree[2*t]=0;for(t=0;t<Nd;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Yd=e=>{e.bi_valid>8?zd(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Kd=(e,t,n,r)=>{const i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},Jd=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Kd(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Kd(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},$d=(e,t,n)=>{let r,i,a,s,o=0;if(0!==e.sym_next)do{r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,i=e.pending_buf[e.sym_buf+o++],0===r?Vd(e,i,t):(a=Ld[i],Vd(e,a+wd+1,t),s=kd[a],0!==s&&(i-=Dd[a],qd(e,i,s)),r--,a=Bd(r),Vd(e,a,n),s=Ad[a],0!==s&&(r-=Td[a],qd(e,r,s)))}while(o<e.sym_next);Vd(e,256,t)},Xd=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems;let s,o,l,c=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<a;s++)0!==n[2*s]?(e.heap[++e.heap_len]=c=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(t.max_code=c,s=e.heap_len>>1;s>=1;s--)Jd(e,n,s);l=a;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Jd(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,n[2*l]=n[2*s]+n[2*o],e.depth[l]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,n[2*s+1]=n[2*o+1]=l,e.heap[1]=l++,Jd(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,d,u,h,f,p,m=0;for(h=0;h<=Sd;h++)e.bl_count[h]=0;for(n[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)d=e.heap[c],h=n[2*n[2*d+1]+1]+1,h>l&&(h=l,m++),n[2*d+1]=h,d>r||(e.bl_count[h]++,f=0,d>=o&&(f=s[d-o]),p=n[2*d],e.opt_len+=p*(h+f),a&&(e.static_len+=p*(i[2*d+1]+f)));if(0!==m){do{for(h=l-1;0===e.bl_count[h];)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[l]--,m-=2}while(m>0);for(h=l;0!==h;h--)for(d=e.bl_count[h];0!==d;)u=e.heap[--c],u>r||(n[2*u+1]!==h&&(e.opt_len+=(h-n[2*u+1])*n[2*u],n[2*u+1]=h),d--)}})(e,t),Wd(n,c,e.bl_count)},Qd=(e,t,n)=>{let r,i,a=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=s,s=t[2*(r+1)+1],++o<l&&i===s||(o<c?e.bl_tree[2*i]+=o:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=i,0===s?(l=138,c=3):i===s?(l=6,c=3):(l=7,c=4))},Zd=(e,t,n)=>{let r,i,a=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=n;r++)if(i=s,s=t[2*(r+1)+1],!(++o<l&&i===s)){if(o<c)do{Vd(e,i,e.bl_tree)}while(0!==--o);else 0!==i?(i!==a&&(Vd(e,i,e.bl_tree),o--),Vd(e,16,e.bl_tree),qd(e,o-3,2)):o<=10?(Vd(e,17,e.bl_tree),qd(e,o-3,3)):(Vd(e,18,e.bl_tree),qd(e,o-11,7));o=0,a=i,0===s?(l=138,c=3):i===s?(l=6,c=3):(l=7,c=4)}};let eu=!1;const tu=(e,t,n,r)=>{qd(e,0+(r?1:0),3),Yd(e),zd(e,n),zd(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var nu=e=>{eu||((()=>{let e,t,n,r,i;const a=new Array(16);for(n=0,r=0;r<28;r++)for(Dd[r]=n,e=0;e<1<<kd[r];e++)Ld[n++]=r;for(Ld[n-1]=r,i=0,r=0;r<16;r++)for(Td[r]=i,e=0;e<1<<Ad[r];e++)Ed[i++]=r;for(i>>=7;r<Nd;r++)for(Td[r]=i<<7,e=0;e<1<<Ad[r]-7;e++)Ed[256+i++]=r;for(t=0;t<=Sd;t++)a[t]=0;for(e=0;e<=143;)Id[2*e+1]=8,e++,a[8]++;for(;e<=255;)Id[2*e+1]=9,e++,a[9]++;for(;e<=279;)Id[2*e+1]=7,e++,a[7]++;for(;e<=287;)Id[2*e+1]=8,e++,a[8]++;for(Wd(Id,287,a),e=0;e<Nd;e++)Cd[2*e+1]=5,Cd[2*e]=Hd(e,5);Md=new Od(Id,kd,257,_d,Sd),Rd=new Od(Cd,Ad,0,Nd,Sd),Fd=new Od(new Array(0),jd,0,19,7)})(),eu=!0),e.l_desc=new Ud(e.dyn_ltree,Md),e.d_desc=new Ud(e.dyn_dtree,Rd),e.bl_desc=new Ud(e.bl_tree,Fd),e.bi_buf=0,e.bi_valid=0,Gd(e)},ru=(e,t,n,r)=>{let i,a,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<wd;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),Xd(e,e.l_desc),Xd(e,e.d_desc),s=(e=>{let t;for(Qd(e,e.dyn_ltree,e.l_desc.max_code),Qd(e,e.dyn_dtree,e.d_desc.max_code),Xd(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*Pd[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==t?tu(e,t,n,r):4===e.strategy||a===i?(qd(e,2+(r?1:0),3),$d(e,Id,Cd)):(qd(e,4+(r?1:0),3),((e,t,n,r)=>{let i;for(qd(e,t-257,5),qd(e,n-1,5),qd(e,r-4,4),i=0;i<r;i++)qd(e,e.bl_tree[2*Pd[i]+1],3);Zd(e,e.dyn_ltree,t-1),Zd(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),$d(e,e.dyn_ltree,e.dyn_dtree)),Gd(e),r&&Yd(e)},iu=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(Ld[n]+wd+1)]++,e.dyn_dtree[2*Bd(t)]++),e.sym_next===e.sym_end),au=e=>{qd(e,2,3),Vd(e,256,Id),(e=>{16===e.bi_valid?(zd(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},su={_tr_init:nu,_tr_stored_block:tu,_tr_flush_block:ru,_tr_tally:iu,_tr_align:au};var ou=(e,t,n,r)=>{let i=65535&e,a=e>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{i=i+t[r++]|0,a=a+i|0}while(--s);i%=65521,a%=65521}return i|a<<16};const lu=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var cu=(e,t,n,r)=>{const i=lu,a=r+n;e^=-1;for(let s=r;s<a;s++)e=e>>>8^i[255&(e^t[s])];return-1^e},du={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},uu={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:hu,_tr_stored_block:fu,_tr_flush_block:pu,_tr_tally:mu,_tr_align:gu}=su,{Z_NO_FLUSH:yu,Z_PARTIAL_FLUSH:bu,Z_FULL_FLUSH:vu,Z_FINISH:xu,Z_BLOCK:wu,Z_OK:_u,Z_STREAM_END:Nu,Z_STREAM_ERROR:Su,Z_DATA_ERROR:ku,Z_BUF_ERROR:Au,Z_DEFAULT_COMPRESSION:ju,Z_FILTERED:Pu,Z_HUFFMAN_ONLY:Iu,Z_RLE:Cu,Z_FIXED:Eu,Z_DEFAULT_STRATEGY:Lu,Z_UNKNOWN:Du,Z_DEFLATED:Tu}=uu,Ou=258,Mu=262,Ru=42,Fu=113,Uu=666,Bu=(e,t)=>(e.msg=du[t],t),zu=e=>2*e-(e>4?9:0),qu=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Vu=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do{n=e.head[--r],e.head[r]=n>=i?n-i:0}while(--t);t=i,r=t;do{n=e.prev[--r],e.prev[r]=n>=i?n-i:0}while(--t)};let Hu=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const Wu=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},Gu=(e,t)=>{pu(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Wu(e.strm)},Yu=(e,t)=>{e.pending_buf[e.pending++]=t},Ku=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Ju=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=ou(e.adler,t,i,n):2===e.state.wrap&&(e.adler=cu(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},$u=(e,t)=>{let n,r,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-Mu?e.strstart-(e.w_size-Mu):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+Ou;let f=c[a+s-1],p=c[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,c[n+s]===p&&c[n+s-1]===f&&c[n]===c[a]&&c[++n]===c[a+1]){a+=2,n++;do{}while(c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&c[++a]===c[++n]&&a<h);if(r=Ou-(h-a),a=h-Ou,r>s){if(e.match_start=t,s=r,r>=o)break;f=c[a+s-1],p=c[a+s]}}}while((t=u[t&d])>l&&0!==--i);return s<=e.lookahead?s:e.lookahead},Xu=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Mu)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Vu(e),r+=t),0===e.strm.avail_in)break;if(n=Ju(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=Hu(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=Hu(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Mu&&0!==e.strm.avail_in)},Qu=(e,t)=>{let n,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,o=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,r=e.strstart-e.block_start,n>r+e.strm.avail_in&&(n=r+e.strm.avail_in),n>i&&(n=i),n<a&&(0===n&&t!==xu||t===yu||n!==r+e.strm.avail_in))break;s=t===xu&&n===r+e.strm.avail_in?1:0,fu(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Wu(e.strm),r&&(r>n&&(r=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,n-=r),n&&(Ju(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==yu&&t!==xu&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(Ju(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=a||(r||t===xu)&&t!==yu&&0===e.strm.avail_in&&r<=i)&&(n=r>i?i:r,s=t===xu&&0===e.strm.avail_in&&n===r?1:0,fu(e,e.block_start,n,s),e.block_start+=n,Wu(e.strm)),s?3:1)},Zu=(e,t)=>{let n,r;for(;;){if(e.lookahead<Mu){if(Xu(e),e.lookahead<Mu&&t===yu)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Hu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-Mu&&(e.match_length=$u(e,n)),e.match_length>=3)if(r=mu(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Hu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Hu(e,e.ins_h,e.window[e.strstart+1]);else r=mu(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Gu(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===xu?(Gu(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Gu(e,!1),0===e.strm.avail_out)?1:2},eh=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Mu){if(Xu(e),e.lookahead<Mu&&t===yu)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=Hu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Mu&&(e.match_length=$u(e,n),e.match_length<=5&&(e.strategy===Pu||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=mu(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=Hu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(Gu(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(r=mu(e,0,e.window[e.strstart-1]),r&&Gu(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=mu(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===xu?(Gu(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Gu(e,!1),0===e.strm.avail_out)?1:2};function th(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const nh=[new th(0,0,0,0,Qu),new th(4,4,8,4,Zu),new th(4,5,16,8,Zu),new th(4,6,32,32,Zu),new th(4,4,16,16,eh),new th(8,16,32,32,eh),new th(8,16,128,128,eh),new th(8,32,128,256,eh),new th(32,128,258,1024,eh),new th(32,258,258,4096,eh)];function rh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Tu,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),qu(this.dyn_ltree),qu(this.dyn_dtree),qu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),qu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),qu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ih=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Ru&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==Fu&&t.status!==Uu?1:0},ah=e=>{if(ih(e))return Bu(e,Su);e.total_in=e.total_out=0,e.data_type=Du;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Ru:Fu,e.adler=2===t.wrap?0:1,t.last_flush=-2,hu(t),_u},sh=e=>{const t=ah(e);return t===_u&&(e=>{e.window_size=2*e.w_size,qu(e.head),e.max_lazy_match=nh[e.level].max_lazy,e.good_match=nh[e.level].good_length,e.nice_match=nh[e.level].nice_length,e.max_chain_length=nh[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},oh=(e,t,n,r,i,a)=>{if(!e)return Su;let s=1;if(t===ju&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||n!==Tu||r<8||r>15||t<0||t>9||a<0||a>Eu||8===r&&1!==s)return Bu(e,Su);8===r&&(r=9);const o=new rh;return e.state=o,o.strm=e,o.status=Ru,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=a,o.method=n,sh(e)};var lh=(e,t)=>{if(ih(e)||t>wu||t<0)return e?Bu(e,Su):Su;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||n.status===Uu&&t!==xu)return Bu(e,0===e.avail_out?Au:Su);const r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(Wu(e),0===e.avail_out)return n.last_flush=-1,_u}else if(0===e.avail_in&&zu(t)<=zu(r)&&t!==xu)return Bu(e,Au);if(n.status===Uu&&0!==e.avail_in)return Bu(e,Au);if(n.status===Ru&&0===n.wrap&&(n.status=Fu),n.status===Ru){let t=Tu+(n.w_bits-8<<4)<<8,r=-1;if(r=n.strategy>=Iu||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=r<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Ku(n,t),0!==n.strstart&&(Ku(n,e.adler>>>16),Ku(n,65535&e.adler)),e.adler=1,n.status=Fu,Wu(e),0!==n.pending)return n.last_flush=-1,_u}if(57===n.status)if(e.adler=0,Yu(n,31),Yu(n,139),Yu(n,8),n.gzhead)Yu(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Yu(n,255&n.gzhead.time),Yu(n,n.gzhead.time>>8&255),Yu(n,n.gzhead.time>>16&255),Yu(n,n.gzhead.time>>24&255),Yu(n,9===n.level?2:n.strategy>=Iu||n.level<2?4:0),Yu(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Yu(n,255&n.gzhead.extra.length),Yu(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=cu(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Yu(n,0),Yu(n,0),Yu(n,0),Yu(n,0),Yu(n,0),Yu(n,9===n.level?2:n.strategy>=Iu||n.level<2?4:0),Yu(n,3),n.status=Fu,Wu(e),0!==n.pending)return n.last_flush=-1,_u;if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=cu(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,Wu(e),0!==n.pending)return n.last_flush=-1,_u;t=0,r-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=cu(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=cu(e.adler,n.pending_buf,n.pending-r,r)),Wu(e),0!==n.pending)return n.last_flush=-1,_u;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Yu(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=cu(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=cu(e.adler,n.pending_buf,n.pending-r,r)),Wu(e),0!==n.pending)return n.last_flush=-1,_u;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Yu(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>r&&(e.adler=cu(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Wu(e),0!==n.pending))return n.last_flush=-1,_u;Yu(n,255&e.adler),Yu(n,e.adler>>8&255),e.adler=0}if(n.status=Fu,Wu(e),0!==n.pending)return n.last_flush=-1,_u}if(0!==e.avail_in||0!==n.lookahead||t!==yu&&n.status!==Uu){let r=0===n.level?Qu(n,t):n.strategy===Iu?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Xu(e),0===e.lookahead)){if(t===yu)return 1;break}if(e.match_length=0,n=mu(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Gu(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===xu?(Gu(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Gu(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===Cu?((e,t)=>{let n,r,i,a;const s=e.window;for(;;){if(e.lookahead<=Ou){if(Xu(e),e.lookahead<=Ou&&t===yu)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){a=e.strstart+Ou;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=Ou-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=mu(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=mu(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Gu(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===xu?(Gu(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Gu(e,!1),0===e.strm.avail_out)?1:2})(n,t):nh[n.level].func(n,t);if(3!==r&&4!==r||(n.status=Uu),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),_u;if(2===r&&(t===bu?gu(n):t!==wu&&(fu(n,0,0,!1),t===vu&&(qu(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),Wu(e),0===e.avail_out))return n.last_flush=-1,_u}return t!==xu?_u:n.wrap<=0?Nu:(2===n.wrap?(Yu(n,255&e.adler),Yu(n,e.adler>>8&255),Yu(n,e.adler>>16&255),Yu(n,e.adler>>24&255),Yu(n,255&e.total_in),Yu(n,e.total_in>>8&255),Yu(n,e.total_in>>16&255),Yu(n,e.total_in>>24&255)):(Ku(n,e.adler>>>16),Ku(n,65535&e.adler)),Wu(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?_u:Nu)},ch=(e,t)=>{let n=t.length;if(ih(e))return Su;const r=e.state,i=r.wrap;if(2===i||1===i&&r.status!==Ru||r.lookahead)return Su;if(1===i&&(e.adler=ou(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===i&&(qu(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}const a=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Xu(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do{r.ins_h=Hu(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++}while(--t);r.strstart=e,r.lookahead=2,Xu(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=o,e.avail_in=a,r.wrap=i,_u},dh={deflateInit:(e,t)=>oh(e,t,Tu,15,8,Lu),deflateInit2:oh,deflateReset:sh,deflateResetKeep:ah,deflateSetHeader:(e,t)=>ih(e)||2!==e.state.wrap?Su:(e.state.gzhead=t,_u),deflate:lh,deflateEnd:e=>{if(ih(e))return Su;const t=e.state.status;return e.state=null,t===Fu?Bu(e,ku):_u},deflateSetDictionary:ch,deflateInfo:"pako deflate (from Nodeca project)"};const uh=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var hh=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!==typeof n)throw new TypeError(n+"must be non-object");for(const t in n)uh(n,t)&&(e[t]=n[t])}}return e},fh=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,a=e.length;r<a;r++){let t=e[r];n.set(t,i),i+=t.length}return n};let ph=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(xk){ph=!1}const mh=new Uint8Array(256);for(let wk=0;wk<256;wk++)mh[wk]=wk>=252?6:wk>=248?5:wk>=240?4:wk>=224?3:wk>=192?2:1;mh[254]=mh[254]=1;var gh=e=>{if("function"===typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,r,i,a,s=e.length,o=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296===(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),a=0,i=0;a<o;i++)n=e.charCodeAt(i),55296===(64512&n)&&i+1<s&&(r=e.charCodeAt(i+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},yh=(e,t)=>{const n=t||e.length;if("function"===typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let r,i;const a=new Array(2*n);for(i=0,r=0;r<n;){let t=e[r++];if(t<128){a[i++]=t;continue}let s=mh[t];if(s>4)a[i++]=65533,r+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&r<n;)t=t<<6|63&e[r++],s--;s>1?a[i++]=65533:t<65536?a[i++]=t:(t-=65536,a[i++]=55296|t>>10&1023,a[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&ph)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(a,i)},bh=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128===(192&e[n]);)n--;return n<0||0===n?t:n+mh[e[n]]>t?n:t};var vh=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const xh=Object.prototype.toString,{Z_NO_FLUSH:wh,Z_SYNC_FLUSH:_h,Z_FULL_FLUSH:Nh,Z_FINISH:Sh,Z_OK:kh,Z_STREAM_END:Ah,Z_DEFAULT_COMPRESSION:jh,Z_DEFAULT_STRATEGY:Ph,Z_DEFLATED:Ih}=uu;function Ch(e){this.options=hh({level:jh,method:Ih,chunkSize:16384,windowBits:15,memLevel:8,strategy:Ph},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vh,this.strm.avail_out=0;let n=dh.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==kh)throw new Error(du[n]);if(t.header&&dh.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"===typeof t.dictionary?gh(t.dictionary):"[object ArrayBuffer]"===xh.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=dh.deflateSetDictionary(this.strm,e),n!==kh)throw new Error(du[n]);this._dict_set=!0}}function Eh(e,t){const n=new Ch(t);if(n.push(e,!0),n.err)throw n.msg||du[n.err];return n.result}Ch.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?Sh:wh,"string"===typeof e?n.input=gh(e):"[object ArrayBuffer]"===xh.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===_h||a===Nh)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=dh.deflate(n,a),i===Ah)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=dh.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===kh;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},Ch.prototype.onData=function(e){this.chunks.push(e)},Ch.prototype.onEnd=function(e){e===kh&&(this.result=fh(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Lh={Deflate:Ch,deflate:Eh,deflateRaw:function(e,t){return(t=t||{}).raw=!0,Eh(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,Eh(e,t)},constants:uu};const Dh=16209;var Th=function(e,t){let n,r,i,a,s,o,l,c,d,u,h,f,p,m,g,y,b,v,x,w,_,N,S,k;const A=e.state;n=e.next_in,S=e.input,r=n+(e.avail_in-5),i=e.next_out,k=e.output,a=i-(t-e.avail_out),s=i+(e.avail_out-257),o=A.dmax,l=A.wsize,c=A.whave,d=A.wnext,u=A.window,h=A.hold,f=A.bits,p=A.lencode,m=A.distcode,g=(1<<A.lenbits)-1,y=(1<<A.distbits)-1;e:do{f<15&&(h+=S[n++]<<f,f+=8,h+=S[n++]<<f,f+=8),b=p[h&g];t:for(;;){if(v=b>>>24,h>>>=v,f-=v,v=b>>>16&255,0===v)k[i++]=65535&b;else{if(!(16&v)){if(0===(64&v)){b=p[(65535&b)+(h&(1<<v)-1)];continue t}if(32&v){A.mode=16191;break e}e.msg="invalid literal/length code",A.mode=Dh;break e}x=65535&b,v&=15,v&&(f<v&&(h+=S[n++]<<f,f+=8),x+=h&(1<<v)-1,h>>>=v,f-=v),f<15&&(h+=S[n++]<<f,f+=8,h+=S[n++]<<f,f+=8),b=m[h&y];n:for(;;){if(v=b>>>24,h>>>=v,f-=v,v=b>>>16&255,!(16&v)){if(0===(64&v)){b=m[(65535&b)+(h&(1<<v)-1)];continue n}e.msg="invalid distance code",A.mode=Dh;break e}if(w=65535&b,v&=15,f<v&&(h+=S[n++]<<f,f+=8,f<v&&(h+=S[n++]<<f,f+=8)),w+=h&(1<<v)-1,w>o){e.msg="invalid distance too far back",A.mode=Dh;break e}if(h>>>=v,f-=v,v=i-a,w>v){if(v=w-v,v>c&&A.sane){e.msg="invalid distance too far back",A.mode=Dh;break e}if(_=0,N=u,0===d){if(_+=l-v,v<x){x-=v;do{k[i++]=u[_++]}while(--v);_=i-w,N=k}}else if(d<v){if(_+=l+d-v,v-=d,v<x){x-=v;do{k[i++]=u[_++]}while(--v);if(_=0,d<x){v=d,x-=v;do{k[i++]=u[_++]}while(--v);_=i-w,N=k}}}else if(_+=d-v,v<x){x-=v;do{k[i++]=u[_++]}while(--v);_=i-w,N=k}for(;x>2;)k[i++]=N[_++],k[i++]=N[_++],k[i++]=N[_++],x-=3;x&&(k[i++]=N[_++],x>1&&(k[i++]=N[_++]))}else{_=i-w;do{k[i++]=k[_++],k[i++]=k[_++],k[i++]=k[_++],x-=3}while(x>2);x&&(k[i++]=k[_++],x>1&&(k[i++]=k[_++]))}break}}break}}while(n<r&&i<s);x=f>>3,n-=x,f-=x<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=i,e.avail_in=n<r?r-n+5:5-(n-r),e.avail_out=i<s?s-i+257:257-(i-s),A.hold=h,A.bits=f};const Oh=15,Mh=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Rh=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Fh=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Uh=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Bh=(e,t,n,r,i,a,s,o)=>{const l=o.bits;let c,d,u,h,f,p,m=0,g=0,y=0,b=0,v=0,x=0,w=0,_=0,N=0,S=0,k=null;const A=new Uint16Array(16),j=new Uint16Array(16);let P,I,C,E=null;for(m=0;m<=Oh;m++)A[m]=0;for(g=0;g<r;g++)A[t[n+g]]++;for(v=l,b=Oh;b>=1&&0===A[b];b--);if(v>b&&(v=b),0===b)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(y=1;y<b&&0===A[y];y++);for(v<y&&(v=y),_=1,m=1;m<=Oh;m++)if(_<<=1,_-=A[m],_<0)return-1;if(_>0&&(0===e||1!==b))return-1;for(j[1]=0,m=1;m<Oh;m++)j[m+1]=j[m]+A[m];for(g=0;g<r;g++)0!==t[n+g]&&(s[j[t[n+g]]++]=g);if(0===e?(k=E=s,p=20):1===e?(k=Mh,E=Rh,p=257):(k=Fh,E=Uh,p=0),S=0,g=0,m=y,f=a,x=v,w=0,u=-1,N=1<<v,h=N-1,1===e&&N>852||2===e&&N>592)return 1;for(;;){P=m-w,s[g]+1<p?(I=0,C=s[g]):s[g]>=p?(I=E[s[g]-p],C=k[s[g]-p]):(I=96,C=0),c=1<<m-w,d=1<<x,y=d;do{d-=c,i[f+(S>>w)+d]=P<<24|I<<16|C}while(0!==d);for(c=1<<m-1;S&c;)c>>=1;if(0!==c?(S&=c-1,S+=c):S=0,g++,0===--A[m]){if(m===b)break;m=t[n+s[g]]}if(m>v&&(S&h)!==u){for(0===w&&(w=v),f+=y,x=m-w,_=1<<x;x+w<b&&(_-=A[x+w],!(_<=0));)x++,_<<=1;if(N+=1<<x,1===e&&N>852||2===e&&N>592)return 1;u=S&h,i[u]=v<<24|x<<16|f-a}}return 0!==S&&(i[f+S]=m-w<<24|64<<16),o.bits=v,0};const{Z_FINISH:zh,Z_BLOCK:qh,Z_TREES:Vh,Z_OK:Hh,Z_STREAM_END:Wh,Z_NEED_DICT:Gh,Z_STREAM_ERROR:Yh,Z_DATA_ERROR:Kh,Z_MEM_ERROR:Jh,Z_BUF_ERROR:$h,Z_DEFLATED:Xh}=uu,Qh=16180,Zh=16190,ef=16191,tf=16192,nf=16194,rf=16199,af=16200,sf=16206,of=16209,lf=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function cf(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const df=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Qh||t.mode>16211?1:0},uf=e=>{if(df(e))return Yh;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Qh,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,Hh},hf=e=>{if(df(e))return Yh;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,uf(e)},ff=(e,t)=>{let n;if(df(e))return Yh;const r=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Yh:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,hf(e))},pf=(e,t)=>{if(!e)return Yh;const n=new cf;e.state=n,n.strm=e,n.window=null,n.mode=Qh;const r=ff(e,t);return r!==Hh&&(e.state=null),r};let mf,gf,yf=!0;const bf=e=>{if(yf){mf=new Int32Array(512),gf=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Bh(1,e.lens,0,288,mf,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Bh(2,e.lens,0,32,gf,0,e.work,{bits:5}),yf=!1}e.lencode=mf,e.lenbits=9,e.distcode=gf,e.distbits=5},vf=(e,t,n,r)=>{let i;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),(r-=i)?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var xf=(e,t)=>{let n,r,i,a,s,o,l,c,d,u,h,f,p,m,g,y,b,v,x,w,_,N,S=0;const k=new Uint8Array(4);let A,j;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(df(e)||!e.output||!e.input&&0!==e.avail_in)return Yh;n=e.state,n.mode===ef&&(n.mode=tf),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,u=o,h=l,N=Hh;e:for(;;)switch(n.mode){case Qh:if(0===n.wrap){n.mode=tf;break}for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,k[0]=255&c,k[1]=c>>>8&255,n.check=cu(n.check,k,2,0),c=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=of;break}if((15&c)!==Xh){e.msg="unknown compression method",n.mode=of;break}if(c>>>=4,d-=4,_=8+(15&c),0===n.wbits&&(n.wbits=_),_>15||_>n.wbits){e.msg="invalid window size",n.mode=of;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:ef,c=0,d=0;break;case 16181:for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==Xh){e.msg="unknown compression method",n.mode=of;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=of;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(k[0]=255&c,k[1]=c>>>8&255,n.check=cu(n.check,k,2,0)),c=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(k[0]=255&c,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,n.check=cu(n.check,k,4,0)),c=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(k[0]=255&c,k[1]=c>>>8&255,n.check=cu(n.check,k,2,0)),c=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(k[0]=255&c,k[1]=c>>>8&255,n.check=cu(n.check,k,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>o&&(f=o),f&&(n.head&&(_=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+f),_)),512&n.flags&&4&n.wrap&&(n.check=cu(n.check,r,f,a)),o-=f,a+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;f=0;do{_=r[a+f++],n.head&&_&&n.length<65536&&(n.head.name+=String.fromCharCode(_))}while(_&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=cu(n.check,r,f,a)),o-=f,a+=f,_)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;f=0;do{_=r[a+f++],n.head&&_&&n.length<65536&&(n.head.comment+=String.fromCharCode(_))}while(_&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=cu(n.check,r,f,a)),o-=f,a+=f,_)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=of;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=ef;break;case 16189:for(;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}e.adler=n.check=lf(c),c=0,d=0,n.mode=Zh;case Zh:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,Gh;e.adler=n.check=1,n.mode=ef;case ef:if(t===qh||t===Vh)break e;case tf:if(n.last){c>>>=7&d,d-=7&d,n.mode=sf;break}for(;d<3;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}switch(n.last=1&c,c>>>=1,d-=1,3&c){case 0:n.mode=16193;break;case 1:if(bf(n),n.mode=rf,t===Vh){c>>>=2,d-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=of}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if((65535&c)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=of;break}if(n.length=65535&c,c=0,d=0,n.mode=nf,t===Vh)break e;case nf:n.mode=16195;case 16195:if(f=n.length,f){if(f>o&&(f=o),f>l&&(f=l),0===f)break e;i.set(r.subarray(a,a+f),s),o-=f,a+=f,l-=f,s+=f,n.length-=f;break}n.mode=ef;break;case 16196:for(;d<14;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(n.nlen=257+(31&c),c>>>=5,d-=5,n.ndist=1+(31&c),c>>>=5,d-=5,n.ncode=4+(15&c),c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=of;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.lens[P[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},N=Bh(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,N){e.msg="invalid code lengths set",n.mode=of;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;S=n.lencode[c&(1<<n.lenbits)-1],g=S>>>24,y=S>>>16&255,b=65535&S,!(g<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(b<16)c>>>=g,d-=g,n.lens[n.have++]=b;else{if(16===b){for(j=g+2;d<j;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(c>>>=g,d-=g,0===n.have){e.msg="invalid bit length repeat",n.mode=of;break}_=n.lens[n.have-1],f=3+(3&c),c>>>=2,d-=2}else if(17===b){for(j=g+3;d<j;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=g,d-=g,_=0,f=3+(7&c),c>>>=3,d-=3}else{for(j=g+7;d<j;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=g,d-=g,_=0,f=11+(127&c),c>>>=7,d-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=of;break}for(;f--;)n.lens[n.have++]=_}}if(n.mode===of)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=of;break}if(n.lenbits=9,A={bits:n.lenbits},N=Bh(1,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,N){e.msg="invalid literal/lengths set",n.mode=of;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},N=Bh(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,N){e.msg="invalid distances set",n.mode=of;break}if(n.mode=rf,t===Vh)break e;case rf:n.mode=af;case af:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,Th(e,h),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,n.mode===ef&&(n.back=-1);break}for(n.back=0;S=n.lencode[c&(1<<n.lenbits)-1],g=S>>>24,y=S>>>16&255,b=65535&S,!(g<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(y&&0===(240&y)){for(v=g,x=y,w=b;S=n.lencode[w+((c&(1<<v+x)-1)>>v)],g=S>>>24,y=S>>>16&255,b=65535&S,!(v+g<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=v,d-=v,n.back+=v}if(c>>>=g,d-=g,n.back+=g,n.length=b,0===y){n.mode=16205;break}if(32&y){n.back=-1,n.mode=ef;break}if(64&y){e.msg="invalid literal/length code",n.mode=of;break}n.extra=15&y,n.mode=16201;case 16201:if(n.extra){for(j=n.extra;d<j;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;S=n.distcode[c&(1<<n.distbits)-1],g=S>>>24,y=S>>>16&255,b=65535&S,!(g<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(0===(240&y)){for(v=g,x=y,w=b;S=n.distcode[w+((c&(1<<v+x)-1)>>v)],g=S>>>24,y=S>>>16&255,b=65535&S,!(v+g<=d);){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}c>>>=v,d-=v,n.back+=v}if(c>>>=g,d-=g,n.back+=g,64&y){e.msg="invalid distance code",n.mode=of;break}n.offset=b,n.extra=15&y,n.mode=16203;case 16203:if(n.extra){for(j=n.extra;d<j;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=of;break}n.mode=16204;case 16204:if(0===l)break e;if(f=h-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=of;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),m=n.window}else m=i,p=s-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{i[s++]=m[p++]}while(--f);0===n.length&&(n.mode=af);break;case 16205:if(0===l)break e;i[s++]=n.length,l--,n.mode=af;break;case sf:if(n.wrap){for(;d<32;){if(0===o)break e;o--,c|=r[a++]<<d,d+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?cu(n.check,i,h,s-h):ou(n.check,i,h,s-h)),h=l,4&n.wrap&&(n.flags?c:lf(c))!==n.check){e.msg="incorrect data check",n.mode=of;break}c=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===o)break e;o--,c+=r[a++]<<d,d+=8}if(4&n.wrap&&c!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=of;break}c=0,d=0}n.mode=16208;case 16208:N=Wh;break e;case of:N=Kh;break e;case 16210:return Jh;default:return Yh}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=c,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<of&&(n.mode<sf||t!==zh))&&vf(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?cu(n.check,i,h,e.next_out-h):ou(n.check,i,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===ef?128:0)+(n.mode===rf||n.mode===nf?256:0),(0===u&&0===h||t===zh)&&N===Hh&&(N=$h),N},wf={inflateReset:hf,inflateReset2:ff,inflateResetKeep:uf,inflateInit:e=>pf(e,15),inflateInit2:pf,inflate:xf,inflateEnd:e=>{if(df(e))return Yh;let t=e.state;return t.window&&(t.window=null),e.state=null,Hh},inflateGetHeader:(e,t)=>{if(df(e))return Yh;const n=e.state;return 0===(2&n.wrap)?Yh:(n.head=t,t.done=!1,Hh)},inflateSetDictionary:(e,t)=>{const n=t.length;let r,i,a;return df(e)?Yh:(r=e.state,0!==r.wrap&&r.mode!==Zh?Yh:r.mode===Zh&&(i=1,i=ou(i,t,n,0),i!==r.check)?Kh:(a=vf(e,t,n,n),a?(r.mode=16210,Jh):(r.havedict=1,Hh)))},inflateInfo:"pako inflate (from Nodeca project)"};var _f=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Nf=Object.prototype.toString,{Z_NO_FLUSH:Sf,Z_FINISH:kf,Z_OK:Af,Z_STREAM_END:jf,Z_NEED_DICT:Pf,Z_STREAM_ERROR:If,Z_DATA_ERROR:Cf,Z_MEM_ERROR:Ef}=uu;function Lf(e){this.options=hh({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vh,this.strm.avail_out=0;let n=wf.inflateInit2(this.strm,t.windowBits);if(n!==Af)throw new Error(du[n]);if(this.header=new _f,wf.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"===typeof t.dictionary?t.dictionary=gh(t.dictionary):"[object ArrayBuffer]"===Nf.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=wf.inflateSetDictionary(this.strm,t.dictionary),n!==Af)))throw new Error(du[n])}function Df(e,t){const n=new Lf(t);if(n.push(e),n.err)throw n.msg||du[n.err];return n.result}Lf.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=t===~~t?t:!0===t?kf:Sf,"[object ArrayBuffer]"===Nf.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=wf.inflate(n,s),a===Pf&&i&&(a=wf.inflateSetDictionary(n,i),a===Af?a=wf.inflate(n,s):a===Cf&&(a=Pf));n.avail_in>0&&a===jf&&n.state.wrap>0&&0!==e[n.next_in];)wf.inflateReset(n),a=wf.inflate(n,s);switch(a){case If:case Cf:case Pf:case Ef:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||a===jf))if("string"===this.options.to){let e=bh(n.output,n.next_out),t=n.next_out-e,i=yh(n.output,e);n.next_out=t,n.avail_out=r-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==Af||0!==o){if(a===jf)return a=wf.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Lf.prototype.onData=function(e){this.chunks.push(e)},Lf.prototype.onEnd=function(e){e===Af&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=fh(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Tf={Inflate:Lf,inflate:Df,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Df(e,t)},ungzip:Df,constants:uu};const{Deflate:Of,deflate:Mf,deflateRaw:Rf,gzip:Ff}=Lh,{Inflate:Uf,inflate:Bf,inflateRaw:zf,ungzip:qf}=Tf;var Vf=Uf,Hf=Bf;const Wf=[];for(let wk=0;wk<256;wk++){let e=wk;for(let t=0;t<8;t++)1&e?e=3988292384^e>>>1:e>>>=1;Wf[wk]=e}const Gf=4294967295;function Yf(e,t){return(function(e,t,n){let r=e;for(let i=0;i<n;i++)r=Wf[255&(r^t[i])]^r>>>8;return r}(Gf,e,t)^Gf)>>>0}function Kf(e,t,n){const r=e.readUint32(),i=Yf(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==r)throw new Error("CRC mismatch for chunk ".concat(n,". Expected ").concat(r,", found ").concat(i))}function Jf(e,t,n){for(let r=0;r<n;r++)t[r]=e[r]}function $f(e,t,n,r){let i=0;for(;i<r;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-r]&255}function Xf(e,t,n,r){let i=0;if(0===n.length)for(;i<r;i++)t[i]=e[i];else for(;i<r;i++)t[i]=e[i]+n[i]&255}function Qf(e,t,n,r,i){let a=0;if(0===n.length){for(;a<i;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+(t[a-i]>>1)&255}else{for(;a<i;a++)t[a]=e[a]+(n[a]>>1)&255;for(;a<r;a++)t[a]=e[a]+(t[a-i]+n[a]>>1)&255}}function Zf(e,t,n,r,i){let a=0;if(0===n.length){for(;a<i;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-i]&255}else{for(;a<i;a++)t[a]=e[a]+n[a]&255;for(;a<r;a++)t[a]=e[a]+ep(t[a-i],n[a],n[a-i])&255}}function ep(e,t,n){const r=e+t-n,i=Math.abs(r-e),a=Math.abs(r-t),s=Math.abs(r-n);return i<=a&&i<=s?e:a<=s?t:n}function tp(e,t,n,r,i,a){switch(e){case 0:Jf(t,n,i);break;case 1:$f(t,n,i,a);break;case 2:Xf(t,n,r,i);break;case 3:Qf(t,n,r,i,a);break;case 4:Zf(t,n,r,i,a);break;default:throw new Error("Unsupported filter: ".concat(e))}}const np=new Uint16Array([255]),rp=255===new Uint8Array(np.buffer)[0];function ip(e){return(255&e)<<8|e>>8&255}const ap=new Uint16Array([255]),sp=255===new Uint8Array(ap.buffer)[0],op=new Uint8Array(0);function lp(e){const{data:t,width:n,height:r,channels:i,depth:a}=e,s=Math.ceil(a/8)*i,o=Math.ceil(a/8*i*n),l=new Uint8Array(r*o);let c,d,u=op,h=0;for(let f=0;f<r;f++){switch(c=t.subarray(h+1,h+1+o),d=l.subarray(f*o,(f+1)*o),t[h]){case 0:Jf(c,d,o);break;case 1:$f(c,d,o,s);break;case 2:Xf(c,d,u,o);break;case 3:Qf(c,d,u,o,s);break;case 4:Zf(c,d,u,o,s);break;default:throw new Error("Unsupported filter: ".concat(t[h]))}u=d,h+=o+1}if(16===a){const e=new Uint16Array(l.buffer);if(sp)for(let t=0;t<e.length;t++)e[t]=cp(e[t]);return e}return l}function cp(e){return(255&e)<<8|e>>8&255}const dp=Uint8Array.of(137,80,78,71,13,10,26,10);function up(e){if(!function(e){if(e.length<dp.length)return!1;for(let t=0;t<dp.length;t++)if(e[t]!==dp[t])return!1;return!0}(e.readBytes(dp.length)))throw new Error("wrong PNG signature")}const hp="tEXt",fp=new TextDecoder("latin1");function pp(e){if(gp(e),0===e.length||e.length>79)throw new Error("keyword length must be between 1 and 79")}const mp=/^[\u0000-\u00FF]*$/;function gp(e){if(!mp.test(e))throw new Error("invalid latin1 text")}function yp(e,t,n){const r=bp(t);e[r]=function(e,t){return fp.decode(e.readBytes(t))}(t,n-r.length-1)}function bp(e){for(e.mark();0!==e.readByte(););const t=e.offset;e.reset();const n=fp.decode(e.readBytes(t-e.offset-1));return e.skip(1),pp(n),n}const vp=-1,xp=0,wp=2,_p=3,Np=4,Sp=6,kp=-1,Ap=0,jp=-1,Pp=0,Ip=-1,Cp=0,Ep=1,Lp=0,Dp=1,Tp=2,Op=0,Mp=1;class Rp extends vd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),(0,a.A)(this,"_checkCrc",void 0),(0,a.A)(this,"_inflator",void 0),(0,a.A)(this,"_png",void 0),(0,a.A)(this,"_apng",void 0),(0,a.A)(this,"_end",void 0),(0,a.A)(this,"_hasPalette",void 0),(0,a.A)(this,"_palette",void 0),(0,a.A)(this,"_hasTransparency",void 0),(0,a.A)(this,"_transparency",void 0),(0,a.A)(this,"_compressionMethod",void 0),(0,a.A)(this,"_filterMethod",void 0),(0,a.A)(this,"_interlaceMethod",void 0),(0,a.A)(this,"_colorType",void 0),(0,a.A)(this,"_isAnimated",void 0),(0,a.A)(this,"_numberOfFrames",void 0),(0,a.A)(this,"_numberOfPlays",void 0),(0,a.A)(this,"_frames",void 0),(0,a.A)(this,"_writingDataChunks",void 0);const{checkCrc:n=!1}=t;this._checkCrc=n,this._inflator=new Vf,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=kp,this._filterMethod=jp,this._interlaceMethod=Ip,this._colorType=vp,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(up(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(up(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const n=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case hp:yp(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e)}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?Kf(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const n=this.offset;switch("fdAT"!==t&&"IDAT"!==t&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=n+e}if(this.offset-n!==e)throw new Error("Length mismatch while decoding chunk ".concat(t));this._checkCrc?Kf(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=function(e){if(1!==e&&2!==e&&4!==e&&8!==e&&16!==e)throw new Error("invalid bit depth: ".concat(e));return e}(this.readUint8());const t=this.readUint8();let n;switch(this._colorType=t,t){case xp:n=1;break;case wp:n=3;break;case _p:n=1;break;case Np:n=2;break;case Sp:n=4;break;default:throw new Error("Unknown color type: ".concat(t))}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==Ap)throw new Error("Unsupported compression method: ".concat(this._compressionMethod));this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError("PLTE field length must be a multiple of 3. Got ".concat(e));const t=e/3;this._hasPalette=!0;const n=[];this._palette=n;for(let r=0;r<t;r++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,n=this.offset+this.byteOffset;if(n+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,n,t)),this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));this.skip(e)}decodetRNS(e){switch(this._colorType){case xp:case wp:if(e%2!==0)throw new RangeError("tRNS chunk length must be a multiple of 2. Got ".concat(e));if(e/2>this._png.width*this._png.height)throw new Error("tRNS chunk contains more alpha values than there are pixels (".concat(e/2," vs ").concat(this._png.width*this._png.height,")"));this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break;case _p:{if(e>this._palette.length)throw new Error("tRNS chunk contains more alpha values than there are palette colors (".concat(e," vs ").concat(this._palette.length,")"));let t=0;for(;t<e;t++){const e=this.readByte();this._palette[t].push(e)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}default:throw new Error("tRNS chunk is not supported for color type ".concat(this._colorType))}}decodeiCCP(e){const t=bp(this),n=this.readUint8();if(n!==Ap)throw new Error("Unsupported iCCP compression method: ".concat(n));const r=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:Hf(r)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),n=this.readByte();this._png.resolution={x:e,y:t,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:8===this._apng.depth?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(e);if(n){if(n.data=lp({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),0===e||0===n.xOffset&&0===n.yOffset&&n.width===this._png.width&&n.height===this._png.height)t.data=n.data;else{const r=this._apng.frames.at(e-1);this.disposeFrame(n,r,t),this.addFrameDataToCanvas(t,n)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,n){switch(e.disposeOp){case Lp:break;case Dp:for(let t=0;t<this._png.height;t++)for(let r=0;r<this._png.width;r++){const i=(t*e.width+r)*this._png.channels;for(let e=0;e<this._png.channels;e++)n.data[i+e]=0}break;case Tp:n.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const n=1<<this._png.depth,r=(e,n)=>({index:((e+t.yOffset)*this._png.width+t.xOffset+n)*this._png.channels,frameIndex:(e*t.width+n)*this._png.channels});switch(t.blendOp){case Op:for(let n=0;n<t.height;n++)for(let i=0;i<t.width;i++){const{index:a,frameIndex:s}=r(n,i);for(let n=0;n<this._png.channels;n++)e.data[a+n]=t.data[s+n]}break;case Mp:for(let i=0;i<t.height;i++)for(let a=0;a<t.width;a++){const{index:s,frameIndex:o}=r(i,a);for(let r=0;r<this._png.channels;r++){const i=t.data[o+this._png.channels-1]/n,a=r%(this._png.channels-1)===0?1:t.data[o+r],l=Math.floor(i*a+(1-i)*e.data[s+r]);e.data[s+r]+=l}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var e;if(this._inflator.err)throw new Error("Error while decompressing the data: ".concat(this._inflator.err));const t=this._isAnimated?(null===(e=this._frames)||void 0===e?void 0:e.at(0)).data:this._inflator.result;if(this._filterMethod!==Pp)throw new Error("Filter method ".concat(this._filterMethod," not supported"));if(this._interlaceMethod===Cp)this._png.data=lp({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else{if(this._interlaceMethod!==Ep)throw new Error("Interlace method ".concat(this._interlaceMethod," not supported"));this._png.data=function(e){const{data:t,width:n,height:r,channels:i,depth:a}=e,s=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(a/8)*i,l=new Uint8Array(r*n*o);let c=0;for(let d=0;d<7;d++){const e=s[d],i=Math.ceil((n-e.x)/e.xStep),a=Math.ceil((r-e.y)/e.yStep);if(i<=0||a<=0)continue;const u=i*o,h=new Uint8Array(u);for(let s=0;s<a;s++){const a=t[c++],d=t.subarray(c,c+u);c+=u;const f=new Uint8Array(u);tp(a,d,f,h,u,o),h.set(f);for(let t=0;t<i;t++){const i=e.x+t*e.xStep,a=e.y+s*e.yStep;if(!(i>=n||a>=r))for(let e=0;e<o;e++)l[(a*n+i)*o+e]=f[t*o+e]}}}if(16===a){const e=new Uint16Array(l.buffer);if(rp)for(let t=0;t<e.length;t++)e[t]=ip(e[t]);return e}return l}({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth})}this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Lp,blendOp:Op,data:e}),this._inflator=new Vf,this._writingDataChunks=!1}}var Fp;!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"}(Fp||(Fp={}));var Up=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function Bp(){Up.console&&"function"==typeof Up.console.log&&Up.console.log.apply(Up.console,arguments)}var zp={log:Bp,warn:function(e){Up.console&&("function"==typeof Up.console.warn?Up.console.warn.apply(Up.console,arguments):Bp.call(null,arguments))},error:function(e){Up.console&&("function"==typeof Up.console.error?Up.console.error.apply(Up.console,arguments):Bp(e))}};function qp(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Wp(r.response,t,n)},r.onerror=function(){zp.error("could not download file")},r.send()}function Vp(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return t.status>=200&&t.status<=299}function Hp(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Wp=Up.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,jc.A)(window))||window!==Up?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Up.URL||Up.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?Vp(i.href)?qp(e,t,n):Hp(i,i.target="_blank"):Hp(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Hp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(Vp(e))qp(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Hp(r)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,jc.A)(t)&&(zp.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return qp(e,t,n);var i="application/octet-stream"===e.type,a=/constructor/i.test(Up.HTMLElement)||Up.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&a)&&"object"===("undefined"==typeof FileReader?"undefined":(0,jc.A)(FileReader))){var o=new FileReader;o.onloadend=function(){var e=o.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},o.readAsDataURL(e)}else{var l=Up.URL||Up.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function Gp(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,a=n[r].process,s=i.exec(e);s&&(t=a(s),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}var Yp=Up.atob.bind(Up),Kp=Up.btoa.bind(Up);function Jp(e,t){var n=e[0],r=e[1],i=e[2],a=e[3];n=Xp(n,r,i,a,t[0],7,-680876936),a=Xp(a,n,r,i,t[1],12,-389564586),i=Xp(i,a,n,r,t[2],17,606105819),r=Xp(r,i,a,n,t[3],22,-1044525330),n=Xp(n,r,i,a,t[4],7,-176418897),a=Xp(a,n,r,i,t[5],12,1200080426),i=Xp(i,a,n,r,t[6],17,-1473231341),r=Xp(r,i,a,n,t[7],22,-45705983),n=Xp(n,r,i,a,t[8],7,1770035416),a=Xp(a,n,r,i,t[9],12,-1958414417),i=Xp(i,a,n,r,t[10],17,-42063),r=Xp(r,i,a,n,t[11],22,-1990404162),n=Xp(n,r,i,a,t[12],7,1804603682),a=Xp(a,n,r,i,t[13],12,-40341101),i=Xp(i,a,n,r,t[14],17,-1502002290),n=Qp(n,r=Xp(r,i,a,n,t[15],22,1236535329),i,a,t[1],5,-165796510),a=Qp(a,n,r,i,t[6],9,-1069501632),i=Qp(i,a,n,r,t[11],14,643717713),r=Qp(r,i,a,n,t[0],20,-373897302),n=Qp(n,r,i,a,t[5],5,-701558691),a=Qp(a,n,r,i,t[10],9,38016083),i=Qp(i,a,n,r,t[15],14,-660478335),r=Qp(r,i,a,n,t[4],20,-405537848),n=Qp(n,r,i,a,t[9],5,568446438),a=Qp(a,n,r,i,t[14],9,-1019803690),i=Qp(i,a,n,r,t[3],14,-187363961),r=Qp(r,i,a,n,t[8],20,1163531501),n=Qp(n,r,i,a,t[13],5,-1444681467),a=Qp(a,n,r,i,t[2],9,-51403784),i=Qp(i,a,n,r,t[7],14,1735328473),n=Zp(n,r=Qp(r,i,a,n,t[12],20,-1926607734),i,a,t[5],4,-378558),a=Zp(a,n,r,i,t[8],11,-2022574463),i=Zp(i,a,n,r,t[11],16,1839030562),r=Zp(r,i,a,n,t[14],23,-35309556),n=Zp(n,r,i,a,t[1],4,-1530992060),a=Zp(a,n,r,i,t[4],11,1272893353),i=Zp(i,a,n,r,t[7],16,-155497632),r=Zp(r,i,a,n,t[10],23,-1094730640),n=Zp(n,r,i,a,t[13],4,681279174),a=Zp(a,n,r,i,t[0],11,-358537222),i=Zp(i,a,n,r,t[3],16,-722521979),r=Zp(r,i,a,n,t[6],23,76029189),n=Zp(n,r,i,a,t[9],4,-640364487),a=Zp(a,n,r,i,t[12],11,-421815835),i=Zp(i,a,n,r,t[15],16,530742520),n=em(n,r=Zp(r,i,a,n,t[2],23,-995338651),i,a,t[0],6,-198630844),a=em(a,n,r,i,t[7],10,1126891415),i=em(i,a,n,r,t[14],15,-1416354905),r=em(r,i,a,n,t[5],21,-57434055),n=em(n,r,i,a,t[12],6,1700485571),a=em(a,n,r,i,t[3],10,-1894986606),i=em(i,a,n,r,t[10],15,-1051523),r=em(r,i,a,n,t[1],21,-2054922799),n=em(n,r,i,a,t[8],6,1873313359),a=em(a,n,r,i,t[15],10,-30611744),i=em(i,a,n,r,t[6],15,-1560198380),r=em(r,i,a,n,t[13],21,1309151649),n=em(n,r,i,a,t[4],6,-145523070),a=em(a,n,r,i,t[11],10,-1120210379),i=em(i,a,n,r,t[2],15,718787259),r=em(r,i,a,n,t[9],21,-343485551),e[0]=lm(n,e[0]),e[1]=lm(r,e[1]),e[2]=lm(i,e[2]),e[3]=lm(a,e[3])}function $p(e,t,n,r,i,a){return t=lm(lm(t,e),lm(r,a)),lm(t<<i|t>>>32-i,n)}function Xp(e,t,n,r,i,a,s){return $p(t&n|~t&r,e,t,i,a,s)}function Qp(e,t,n,r,i,a,s){return $p(t&r|n&~r,e,t,i,a,s)}function Zp(e,t,n,r,i,a,s){return $p(t^n^r,e,t,i,a,s)}function em(e,t,n,r,i,a,s){return $p(n^(t|~r),e,t,i,a,s)}function tm(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Jp(r,nm(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(Jp(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,Jp(r,i),r}function nm(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var rm="0123456789abcdef".split("");function im(e){for(var t="",n=0;n<4;n++)t+=rm[e>>8*n+4&15]+rm[e>>8*n&15];return t}function am(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function sm(e){return tm(e).map(am).join("")}var om="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=im(e[t]);return e.join("")}(tm("hello"));function lm(e,t){if(om){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function cm(e,t){var n,r,i,a;if(e!==n){for(var s=(i=e,a=1+(256/e.length|0),new Array(a+1).join(i)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+s.charCodeAt(l))%256,o[l]=o[c],o[c]=d}n=e,r=o}else o=r;var u=t.length,h=0,f=0,p="";for(l=0;l<u;l++)f=(f+(d=o[h=(h+1)%256]))%256,o[h]=o[f],o[f]=d,s=o[(o[h]+o[f])%256],p+=String.fromCharCode(t.charCodeAt(l)^s);return p}var dm={print:4,modify:8,copy:16,"annot-forms":32};function um(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(e){if(void 0!==dm.perm)throw new Error("Invalid permission: "+e);i+=dm[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var a=(t+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,s),this.P=-(1+(255^i)),this.encryptionKey=sm(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=cm(this.encryptionKey,this.padding)}function hm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);t+=i<33||35===i||37===i||40===i||41===i||47===i||60===i||62===i||91===i||93===i||123===i||125===i||i>126?"#"+("0"+i.toString(16)).slice(-2):e[r]}return t}function fm(e){if("object"!==(0,jc.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var i=Math.random().toString(35);return t[e][i]=[n,!!r],i},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[n]){var s=t[n][a];try{s[0].apply(e,r)}catch(Hp){Up.console&&zp.error("jsPDF PubSub Error",Hp.message,Hp)}s[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function pm(e){if(!(this instanceof pm))return new pm(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function mm(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function gm(e,t,n,r,i){if(!(this instanceof gm))return new gm(e,t,n,r,i);this.type="axial"===e?2:3,this.coords=t,this.colors=n,mm.call(this,r,i)}function ym(e,t,n,r,i){if(!(this instanceof ym))return new ym(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,mm.call(this,r,i)}function bm(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],i=arguments[2],a=arguments[3],s=[],o=1,l=16,c="S",d=null;"object"===(0,jc.A)(e=e||{})&&(n=e.orientation,r=e.unit||r,i=e.format||i,a=e.compress||e.compressPdf||a,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),s=e.filters||(!0===a?["FlateEncode"]:s),r=r||"mm",n=(""+(n||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,h={},f={internal:{},__private__:{}};f.__private__.PubSub=fm;var p="1.3",m=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(e){p=e};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return g};var y=f.__private__.getPageFormat=function(e){return g[e]};i=i||"a4";var b="compat",v="advanced",x=b;function w(){this.saveGraphicsState(),X(new Ee(he,0,0,-he,0,fn()*he).toString()+" cm"),this.setFontSize(this.getFontSize()/he),c="n",x=v}function _(){this.restoreGraphicsState(),c="S",x=b}var N=f.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};f.advancedAPI=function(e){var t=x===b;return t&&w.call(this),"function"!=typeof e||(e(this),t&&_.call(this)),this},f.compatAPI=function(e){var t=x===v;return t&&_.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},f.isAdvancedAPI=function(){return x===v};var S,k=function(e){if(x!==v)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},A=f.roundToPrecision=f.__private__.roundToPrecision=function(e,n){var r=t||n;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};S=f.hpf=f.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return A(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return A(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return A(e,16)};var j=f.f2=f.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return A(e,2)},P=f.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return A(e,3)},I=f.scale=f.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return x===b?e*he:x===v?e:void 0},C=function(e){return I(function(e){return x===b?fn()-e:x===v?e:void 0}(e))};f.__private__.setPrecision=f.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var E,L="00000000000000000000000000000000",D=f.__private__.getFileId=function(){return L},T=f.__private__.setFileId=function(e){return L=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():L.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==d&&(bt=new um(d.userPermissions,d.userPassword,d.ownerPassword,L)),L};f.setFileId=function(e){return T(e),this},f.getFileId=function(){return D()};var O=f.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),i=Math.abs(t%60),a=[n,B(r),"'",B(i),"'"].join("");return["D:",e.getFullYear(),B(e.getMonth()+1),B(e.getDate()),B(e.getHours()),B(e.getMinutes()),B(e.getSeconds()),a].join("")},M=f.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),i=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),s=parseInt(e.substr(14,2),10);return new Date(t,n,r,i,a,s,0)},R=f.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=O(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return E=t},F=f.__private__.getCreationDate=function(e){var t=E;return"jsDate"===e&&(t=M(E)),t};f.setCreationDate=function(e){return R(e),this},f.getCreationDate=function(e){return F(e)};var U,B=f.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},z=f.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},q=0,V=[],H=[],W=0,G=[],Y=[],K=!1,J=H;f.__private__.setCustomOutputDestination=function(e){K=!0,J=e};var $=function(e){K||(J=e)};f.__private__.resetCustomOutputDestination=function(){K=!1,J=H};var X=f.__private__.out=function(e){return e=e.toString(),W+=e.length+1,J.push(e),J},Q=f.__private__.write=function(e){return X(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},Z=f.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n);t--;)r[t]=e.charCodeAt(t);return n},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(e){return te=x===v?e/he:e,this};var ne,re=f.__private__.getFontSize=f.getFontSize=function(){return x===b?te:te*he},ie=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(e){return ie=e,this},f.__private__.getR2L=f.getR2L=function(){return ie};var ae,se=f.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ne=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ne=e}else ne=parseInt(e,10)};f.__private__.getZoomMode=function(){return ne};var oe,le=f.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ae=e};f.__private__.getPageMode=function(){return ae};var ce=f.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');oe=e};f.__private__.getLayoutMode=function(){return oe},f.__private__.setDisplayMode=f.setDisplayMode=function(e,t,n){return se(e),ce(t),le(n),this};var de={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(e){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return de[e]},f.__private__.getDocumentProperties=function(){return de},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(e){for(var t in de)de.hasOwnProperty(t)&&e[t]&&(de[t]=e[t]);return this},f.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return de[e]=t};var ue,he,fe,pe,me,ge={},ye={},be=[],ve={},xe={},we={},_e={},Ne=null,Se=0,ke=[],Ae=new fm(f),je=e.hotfixes||[],Pe={},Ie={},Ce=[],Ee=function e(t,n,r,i,a,s){if(!(this instanceof e))return new e(t,n,r,i,a,s);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(r)&&(r=0),isNaN(i)&&(i=1),isNaN(a)&&(a=0),isNaN(s)&&(s=0),this._matrix=[t,n,r,i,a,s]};Object.defineProperty(Ee.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ee.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ee.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ee.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ee.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ee.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ee.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ee.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ee.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ee.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ee.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ee.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ee.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ee.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ee.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ee.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ee.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(e)},Ee.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,i=e.shx*this.shy+e.sy*this.sy,a=e.tx*this.sx+e.ty*this.shx+this.tx,s=e.tx*this.shy+e.ty*this.sy+this.ty;return new Ee(t,n,r,i,a,s)},Ee.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,a=this.ty,s=Math.sqrt(e*e+t*t),o=(e/=s)*n+(t/=s)*r;n-=e*o,r-=t*o;var l=Math.sqrt(n*n+r*r);return o/=l,e*(r/=l)<t*(n/=l)&&(e=-e,t=-t,o=-o,s=-s),{scale:new Ee(s,0,0,l,0,0),translate:new Ee(1,0,0,1,i,a),rotate:new Ee(e,t,-t,e,0,0),skew:new Ee(1,0,o,1,0,0)}},Ee.prototype.toString=function(e){return this.join(" ")},Ee.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,a=this.ty,s=1/(e*r-t*n),o=r*s,l=-t*s,c=-n*s,d=e*s;return new Ee(o,l,c,d,-o*i-c*a,-l*i-d*a)},Ee.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new tn(t,n)},Ee.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new tn(e.x+e.w,e.y+e.h));return new nn(t.x,t.y,n.x-t.x,n.y-t.y)},Ee.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,r=this.sy,i=this.tx,a=this.ty;return new Ee(e,t,n,r,i,a)},f.Matrix=Ee;var Le=f.matrixMult=function(e,t){return t.multiply(e)},De=new Ee(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=De;var Te=function(e,t){if(!xe[e]){var n=(t instanceof gm?"Sh":"P")+(Object.keys(ve).length+1).toString(10);t.id=n,xe[e]=n,ve[n]=t,Ae.publish("addPattern",t)}};f.ShadingPattern=gm,f.TilingPattern=ym,f.addShadingPattern=function(e,t){return k("addShadingPattern()"),Te(e,t),this},f.beginTilingPattern=function(e){k("beginTilingPattern()"),an(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},f.endTilingPattern=function(e,t){k("endTilingPattern()"),t.stream=Y[U].join("\n"),Te(e,t),Ae.publish("endTilingPattern",t),Ce.pop().restore()};var Oe,Me=f.__private__.newObject=function(){var e=Re();return Fe(e,!0),e},Re=f.__private__.newObjectDeferred=function(){return q++,V[q]=function(){return W},q},Fe=function(e,t){return t="boolean"==typeof t&&t,V[e]=W,t&&X(e+" 0 obj"),e},Ue=f.__private__.newAdditionalObject=function(){var e={objId:Re(),content:""};return G.push(e),e},Be=Re(),ze=Re(),qe=f.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var r="#",i=0;i<3;i++)r+=("0"+Math.floor(255*parseFloat(t[i])).toString(16)).slice(-2);return r},Ve=f.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,i=e.ch3,a=e.ch4,s="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var o=new Gp(n);if(o.ok)n=o.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,r=l>>8&255,i=255&l}if(void 0===r||void 0===a&&n===r&&r===i)t="string"==typeof n?n+" "+s[0]:2===e.precision?j(n/255)+" "+s[0]:P(n/255)+" "+s[0];else if(void 0===a||"object"===(0,jc.A)(a)){if(a&&!isNaN(a.a)&&0===a.a)return["1.","1.","1.",s[1]].join(" ");t="string"==typeof n?[n,r,i,s[1]].join(" "):2===e.precision?[j(n/255),j(r/255),j(i/255),s[1]].join(" "):[P(n/255),P(r/255),P(i/255),s[1]].join(" ")}else t="string"==typeof n?[n,r,i,a,s[2]].join(" "):2===e.precision?[j(n),j(r),j(i),j(a),s[2]].join(" "):[P(n),P(r),P(i),P(a),s[2]].join(" ");return t},He=f.__private__.getFilters=function(){return s},We=f.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||He(),r=e.alreadyAppliedFilters||[],i=e.addLength1||!1,a=t.length,s=e.objectId,o=function(e){return e};if(null!==d&&void 0===s)throw new Error("ObjectId must be passed to putStream for file encryption");null!==d&&(o=bt.encryptor(s,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],u=(l=void 0!==bm.API.processDataByFilters?bm.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===i&&c.push({key:"Length1",value:a})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var f=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)f.push("null");f.push(c[h].value),c[h].value="["+f.join(" ")+"]"}}X("<<");for(var m=0;m<c.length;m++)X("/"+c[m].key+" "+c[m].value);X(">>"),0!==l.data.length&&(X("stream"),X(o(l.data)),X("endstream"))},Ge=f.__private__.putPage=function(e){var t=e.number,n=e.data,r=e.objId,i=e.contentsObjId;Fe(r,!0),X("<</Type /Page"),X("/Parent "+e.rootDictionaryObjId+" 0 R"),X("/Resources "+e.resourceDictionaryObjId+" 0 R"),X("/MediaBox ["+parseFloat(S(e.mediaBox.bottomLeftX))+" "+parseFloat(S(e.mediaBox.bottomLeftY))+" "+S(e.mediaBox.topRightX)+" "+S(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&X("/CropBox ["+S(e.cropBox.bottomLeftX)+" "+S(e.cropBox.bottomLeftY)+" "+S(e.cropBox.topRightX)+" "+S(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&X("/BleedBox ["+S(e.bleedBox.bottomLeftX)+" "+S(e.bleedBox.bottomLeftY)+" "+S(e.bleedBox.topRightX)+" "+S(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&X("/TrimBox ["+S(e.trimBox.bottomLeftX)+" "+S(e.trimBox.bottomLeftY)+" "+S(e.trimBox.topRightX)+" "+S(e.trimBox.topRightY)+"]"),null!==e.artBox&&X("/ArtBox ["+S(e.artBox.bottomLeftX)+" "+S(e.artBox.bottomLeftY)+" "+S(e.artBox.topRightX)+" "+S(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&X("/UserUnit "+e.userUnit),Ae.publish("putPage",{objId:r,pageContext:ke[t],pageNumber:t,page:n}),X("/Contents "+i+" 0 R"),X(">>"),X("endobj");var a=n.join("\n");return x===v&&(a+="\nQ"),Fe(i,!0),We({data:a,filters:He(),objectId:i}),X("endobj"),r},Ye=f.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Se;e++)ke[e].objId=Re(),ke[e].contentsObjId=Re();for(e=1;e<=Se;e++)n.push(Ge({number:e,data:Y[e],objId:ke[e].objId,contentsObjId:ke[e].contentsObjId,mediaBox:ke[e].mediaBox,cropBox:ke[e].cropBox,bleedBox:ke[e].bleedBox,trimBox:ke[e].trimBox,artBox:ke[e].artBox,userUnit:ke[e].userUnit,rootDictionaryObjId:Be,resourceDictionaryObjId:ze}));Fe(Be,!0),X("<</Type /Pages");var r="/Kids [";for(t=0;t<Se;t++)r+=n[t]+" 0 R ";X(r+"]"),X("/Count "+Se),X(">>"),X("endobj"),Ae.publish("postPutPages")},Ke=function(e){Ae.publish("putFont",{font:e,out:X,newObject:Me,putStream:We}),!0!==e.isAlreadyPutted&&(e.objectNumber=Me(),X("<<"),X("/Type /Font"),X("/BaseFont /"+hm(e.postScriptName)),X("/Subtype /Type1"),"string"==typeof e.encoding&&X("/Encoding /"+e.encoding),X("/FirstChar 32"),X("/LastChar 255"),X(">>"),X("endobj"))},Je=function(e){e.objectNumber=Me();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[S(e.x),S(e.y),S(e.x+e.width),S(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");We({data:n,additionalKeyValues:t,objectId:e.objectNumber}),X("endobj")},$e=function(e,t){t||(t=21);var n=Me(),r=function(e,t){var n,r=[],i=1/(t-1);for(n=0;n<1;n+=i)r.push(n);if(r.push(1),0!=e[0].offset){var a={offset:0,color:e[0].color};e.unshift(a)}if(1!=e[e.length-1].offset){var s={offset:1,color:e[e.length-1].color};e.push(s)}for(var o="",l=0,c=0;c<r.length;c++){for(n=r[c];n>e[l+1].offset;)l++;var d=e[l].offset,u=(n-d)/(e[l+1].offset-d),h=e[l].color,f=e[l+1].color;o+=z(Math.round((1-u)*h[0]+u*f[0]).toString(16))+z(Math.round((1-u)*h[1]+u*f[1]).toString(16))+z(Math.round((1-u)*h[2]+u*f[2]).toString(16))}return o.trim()}(e.colors,t),i=[];i.push({key:"FunctionType",value:"0"}),i.push({key:"Domain",value:"[0.0 1.0]"}),i.push({key:"Size",value:"["+t+"]"}),i.push({key:"BitsPerSample",value:"8"}),i.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),i.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),We({data:r,additionalKeyValues:i,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),X("endobj"),e.objectNumber=Me(),X("<< /ShadingType "+e.type),X("/ColorSpace /DeviceRGB");var a="/Coords ["+S(parseFloat(e.coords[0]))+" "+S(parseFloat(e.coords[1]))+" ";2===e.type?a+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3])):a+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3]))+" "+S(parseFloat(e.coords[4]))+" "+S(parseFloat(e.coords[5])),X(a+="]"),e.matrix&&X("/Matrix ["+e.matrix.toString()+"]"),X("/Function "+n+" 0 R"),X("/Extend [true true]"),X(">>"),X("endobj")},Xe=function(e,t){var n=Re(),r=Me();t.push({resourcesOid:n,objectOid:r}),e.objectNumber=r;var i=[];i.push({key:"Type",value:"/Pattern"}),i.push({key:"PatternType",value:"1"}),i.push({key:"PaintType",value:"1"}),i.push({key:"TilingType",value:"1"}),i.push({key:"BBox",value:"["+e.boundingBox.map(S).join(" ")+"]"}),i.push({key:"XStep",value:S(e.xStep)}),i.push({key:"YStep",value:S(e.yStep)}),i.push({key:"Resources",value:n+" 0 R"}),e.matrix&&i.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),We({data:e.stream,additionalKeyValues:i,objectId:e.objectNumber}),X("endobj")},Qe=function(e){for(var t in e.objectNumber=Me(),X("<<"),e)switch(t){case"opacity":X("/ca "+j(e[t]));break;case"stroke-opacity":X("/CA "+j(e[t]))}X(">>"),X("endobj")},Ze=function(e){Fe(e.resourcesOid,!0),X("<<"),X("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in X("/Font <<"),ge)ge.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&X("/"+e+" "+ge[e].objectNumber+" 0 R");X(">>")}(),function(){if(Object.keys(ve).length>0){for(var e in X("/Shading <<"),ve)ve.hasOwnProperty(e)&&ve[e]instanceof gm&&ve[e].objectNumber>=0&&X("/"+e+" "+ve[e].objectNumber+" 0 R");Ae.publish("putShadingPatternDict"),X(">>")}}(),function(e){if(Object.keys(ve).length>0){for(var t in X("/Pattern <<"),ve)ve.hasOwnProperty(t)&&ve[t]instanceof f.TilingPattern&&ve[t].objectNumber>=0&&ve[t].objectNumber<e&&X("/"+t+" "+ve[t].objectNumber+" 0 R");Ae.publish("putTilingPatternDict"),X(">>")}}(e.objectOid),function(){if(Object.keys(we).length>0){var e;for(e in X("/ExtGState <<"),we)we.hasOwnProperty(e)&&we[e].objectNumber>=0&&X("/"+e+" "+we[e].objectNumber+" 0 R");Ae.publish("putGStateDict"),X(">>")}}(),function(){for(var e in X("/XObject <<"),Pe)Pe.hasOwnProperty(e)&&Pe[e].objectNumber>=0&&X("/"+e+" "+Pe[e].objectNumber+" 0 R");Ae.publish("putXobjectDict"),X(">>")}(),X(">>"),X("endobj")},et=function(e){ye[e.fontName]=ye[e.fontName]||{},ye[e.fontName][e.fontStyle]=e.id},tt=function(e,t,n,r,i){var a={id:"F"+(Object.keys(ge).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:r,isStandardFont:i||!1,metadata:{}};return Ae.publish("addFont",{font:a,instance:this}),ge[a.id]=a,et(a),a.id},nt=f.__private__.pdfEscape=f.pdfEscape=function(e,t){return function(e,t){var n,r,i,a,s,o,l,c,d;if(i=(t=t||{}).sourceEncoding||"Unicode",s=t.outputEncoding,(t.autoencode||s)&&ge[ue].metadata&&ge[ue].metadata[i]&&ge[ue].metadata[i].encoding&&(a=ge[ue].metadata[i].encoding,!s&&ge[ue].encoding&&(s=ge[ue].encoding),!s&&a.codePages&&(s=a.codePages[0]),"string"==typeof s&&(s=a[s]),s)){for(l=!1,o=[],n=0,r=e.length;n<r;n++)(c=s[e.charCodeAt(n)])?o.push(String.fromCharCode(c)):o.push(e[n]),o[n].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(o=t.noBOM?[]:[254,255],n=0,r=e.length;n<r;n++){if((d=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(d),o.push(c-(d<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rt=f.__private__.beginPage=function(e){Y[++Se]=[],ke[Se]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},st(Se),$(Y[U])},it=function(e,t){var r,a,s;switch(n=t||n,"string"==typeof e&&(r=y(e.toLowerCase()),Array.isArray(r)&&(a=r[0],s=r[1])),Array.isArray(e)&&(a=e[0]*he,s=e[1]*he),isNaN(a)&&(a=i[0],s=i[1]),(a>14400||s>14400)&&(zp.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),a=Math.min(14400,a),s=Math.min(14400,s)),i=[a,s],n.substr(0,1)){case"l":s>a&&(i=[s,a]);break;case"p":a>s&&(i=[s,a])}rt(i),Ft(Mt),X(Gt),0!==Qt&&X(Qt+" J"),0!==Zt&&X(Zt+" j"),Ae.publish("addPage",{pageNumber:Se})},at=function(e){e>0&&e<=Se&&(Y.splice(e,1),ke.splice(e,1),Se--,U>Se&&(U=Se),this.setPage(U))},st=function(e){e>0&&e<=Se&&(U=e)},ot=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Y.length-1},lt=function(e,t,n){var r,i=void 0;return n=n||{},e=void 0!==e?e:ge[ue].fontName,t=void 0!==t?t:ge[ue].fontStyle,r=e.toLowerCase(),void 0!==ye[r]&&void 0!==ye[r][t]?i=ye[r][t]:void 0!==ye[e]&&void 0!==ye[e][t]?i=ye[e][t]:!1===n.disableWarning&&zp.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),i||n.noFallback||null==(i=ye.times[t])&&(i=ye.times.normal),i},ct=f.__private__.putInfo=function(){var e=Me(),t=function(e){return e};for(var n in null!==d&&(t=bt.encryptor(e,0)),X("<<"),X("/Producer ("+nt(t("jsPDF "+bm.version))+")"),de)de.hasOwnProperty(n)&&de[n]&&X("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+nt(t(de[n]))+")");X("/CreationDate ("+nt(t(E))+")"),X(">>"),X("endobj")},dt=f.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Be;switch(Me(),X("<<"),X("/Type /Catalog"),X("/Pages "+t+" 0 R"),ne||(ne="fullwidth"),ne){case"fullwidth":X("/OpenAction [3 0 R /FitH null]");break;case"fullheight":X("/OpenAction [3 0 R /FitV null]");break;case"fullpage":X("/OpenAction [3 0 R /Fit]");break;case"original":X("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+ne;"%"===n.substr(n.length-1)&&(ne=parseInt(ne)/100),"number"==typeof ne&&X("/OpenAction [3 0 R /XYZ null null "+j(ne)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":X("/PageLayout /OneColumn");break;case"single":X("/PageLayout /SinglePage");break;case"two":case"twoleft":X("/PageLayout /TwoColumnLeft");break;case"tworight":X("/PageLayout /TwoColumnRight")}ae&&X("/PageMode /"+ae),Ae.publish("putCatalog"),X(">>"),X("endobj")},ut=f.__private__.putTrailer=function(){X("trailer"),X("<<"),X("/Size "+(q+1)),X("/Root "+q+" 0 R"),X("/Info "+(q-1)+" 0 R"),null!==d&&X("/Encrypt "+bt.oid+" 0 R"),X("/ID [ <"+L+"> <"+L+"> ]"),X(">>")},ht=f.__private__.putHeader=function(){X("%PDF-"+p),X("%\xba\xdf\xac\xe0")},ft=f.__private__.putXRef=function(){var e="0000000000";X("xref"),X("0 "+(q+1)),X("0000000000 65535 f ");for(var t=1;t<=q;t++)"function"==typeof V[t]?X((e+V[t]()).slice(-10)+" 00000 n "):void 0!==V[t]?X((e+V[t]).slice(-10)+" 00000 n "):X("0000000000 00000 n ")},pt=f.__private__.buildDocument=function(){var e;q=0,W=0,H=[],V=[],G=[],Be=Re(),ze=Re(),$(H),Ae.publish("buildDocument"),ht(),Ye(),function(){Ae.publish("putAdditionalObjects");for(var e=0;e<G.length;e++){var t=G[e];Fe(t.objId,!0),X(t.content),X("endobj")}Ae.publish("postPutAdditionalObjects")}(),e=[],function(){for(var e in ge)ge.hasOwnProperty(e)&&(!1===u||!0===u&&h.hasOwnProperty(e))&&Ke(ge[e])}(),function(){var e;for(e in we)we.hasOwnProperty(e)&&Qe(we[e])}(),function(){for(var e in Pe)Pe.hasOwnProperty(e)&&Je(Pe[e])}(),function(e){var t;for(t in ve)ve.hasOwnProperty(t)&&(ve[t]instanceof gm?$e(ve[t]):ve[t]instanceof ym&&Xe(ve[t],e))}(e),Ae.publish("putResources"),e.forEach(Ze),Ze({resourcesOid:ze,objectOid:Number.MAX_SAFE_INTEGER}),Ae.publish("postPutResources"),null!==d&&(bt.oid=Me(),X("<<"),X("/Filter /Standard"),X("/V "+bt.v),X("/R "+bt.r),X("/U <"+bt.toHexString(bt.U)+">"),X("/O <"+bt.toHexString(bt.O)+">"),X("/P "+bt.P),X(">>"),X("endobj")),ct(),dt();var t=W;return ft(),ut(),X("startxref"),X(""+t),X("%%EOF"),$(Y[U]),H.join("\n")},mt=f.__private__.getBlob=function(e){return new Blob([Z(e)],{type:"application/pdf"})},gt=f.output=f.__private__.output=(Oe=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return pt();case"save":f.save(t.filename);break;case"arraybuffer":return Z(pt());case"blob":return mt(pt());case"bloburi":case"bloburl":if(void 0!==Up.URL&&"function"==typeof Up.URL.createObjectURL)return Up.URL&&Up.URL.createObjectURL(mt(pt()))||void 0;zp.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",r=pt();try{n=Kp(r)}catch(d){n=Kp(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(Up)){var i="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",a=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(i=t.pdfObjectUrl,a="");var s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+i+'"'+a+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=Up.open();return null!==o&&o.document.write(s),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(Up)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=Up.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(Up))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',p=Up.open();if(null!==p&&(p.document.write(h),p.document.title=t.filename),p||"undefined"==typeof safari)return p;break;case"datauri":case"dataurl":return Up.document.location.href=this.output("datauristring",t);default:return null}},Oe.foo=function(){try{return Oe.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!Up.console)throw new Error(n);Up.console.error(n,t),Up.alert&&alert(n)}},Oe.foo.bar=Oe,Oe.foo),yt=function(e){return!0===Array.isArray(je)&&je.indexOf(e)>-1};switch(r){case"pt":he=1;break;case"mm":he=72/25.4;break;case"cm":he=72/2.54;break;case"in":he=72;break;case"px":he=1==yt("px_scaling")?.75:96/72;break;case"pc":case"em":he=12;break;case"ex":he=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);he=r}var bt=null;R(),T();var vt=f.__private__.getPageInfo=f.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ke[e].objId,pageNumber:e,pageContext:ke[e]}},xt=f.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in ke)if(ke[t].objId===e)break;return vt(t)},wt=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ke[U].objId,pageNumber:U,pageContext:ke[U]}};f.addPage=function(){return it.apply(this,arguments),this},f.setPage=function(){return st.apply(this,arguments),$.call(this,Y[U]),this},f.insertPage=function(e){return this.addPage(),this.movePage(U,e),this},f.movePage=function(e,t){var n,r;if(e>t){n=Y[e],r=ke[e];for(var i=e;i>t;i--)Y[i]=Y[i-1],ke[i]=ke[i-1];Y[t]=n,ke[t]=r,this.setPage(t)}else if(e<t){n=Y[e],r=ke[e];for(var a=e;a<t;a++)Y[a]=Y[a+1],ke[a]=ke[a+1];Y[t]=n,ke[t]=r,this.setPage(t)}return this},f.deletePage=function(){return at.apply(this,arguments),this},f.__private__.text=f.text=function(e,t,n,r,i){var a,s,o,l,c,d,u,f,p,m=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var g=n;n=t,t=e,e=g}if(arguments[3]instanceof Ee==0?(o=arguments[4],l=arguments[5],"object"===(0,jc.A)(u=arguments[3])&&null!==u||("string"==typeof o&&(l=o,o=null),"string"==typeof u&&(l=u,u=null),"number"==typeof u&&(o=u,u=null),r={flags:u,angle:o,align:l})):(k("The transform parameter of text() with a Matrix value"),p=i),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return m;var y,b="",w="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Ot,_=m.internal.scaleFactor;function N(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),nt(e,u)}function A(e){for(var t,n=e.concat(),r=[],i=n.length;i--;)"string"==typeof(t=n.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function j(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var r,i,a=e.concat(),s=[],o=a.length;o--;)"string"==typeof(r=a.shift())?s.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(i=t(r[0],r[1],r[2]),s.push([i[0],i[1],i[2]]));n=s}return n}var P=!1,C=!0;if("string"==typeof e)P=!0;else if(Array.isArray(e)){var E=e.concat();s=[];for(var L,D=E.length;D--;)("string"!=typeof(L=E.shift())||Array.isArray(L)&&"string"!=typeof L[0])&&(C=!1);P=C}if(!1===P)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var T=te/m.internal.scaleFactor,O=T*(w-1);switch(r.baseline){case"bottom":n-=O;break;case"top":n+=T-O;break;case"hanging":n+=T-2*O;break;case"middle":n+=T/2-O}if((d=r.maxWidth||0)>0&&("string"==typeof e?e=m.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(m.splitTextToSize(t,d))},[]))),a={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:ue,fonts:ge,activeFontSize:te}},Ae.publish("preProcessText",a),e=a.text,o=(r=a.options).angle,p instanceof Ee==0&&o&&"number"==typeof o){o*=Math.PI/180,0===r.rotationDirection&&(o=-o),x===v&&(o=-o);var M=Math.cos(o),R=Math.sin(o);p=new Ee(M,R,-R,M,0,0)}else o&&o instanceof Ee&&(p=o);x!==v||p||(p=De),void 0!==(c=r.charSpace||$t)&&(b+=S(I(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=r.horizontalScale)&&(b+=S(100*f)+" Tz\n"),r.lang;var F=-1,U=void 0!==r.renderingMode?r.renderingMode:r.stroke,B=m.internal.getCurrentPageInfo().pageContext;switch(U){case 0:case!1:case"fill":F=0;break;case 1:case!0:case"stroke":F=1;break;case 2:case"fillThenStroke":F=2;break;case 3:case"invisible":F=3;break;case 4:case"fillAndAddForClipping":F=4;break;case 5:case"strokeAndAddPathForClipping":F=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":F=6;break;case 7:case"addToPathForClipping":F=7}var z=void 0!==B.usedRenderingMode?B.usedRenderingMode:-1;-1!==F?b+=F+" Tr\n":-1!==z&&(b+="0 Tr\n"),-1!==F&&(B.usedRenderingMode=F),l=r.align||"left";var q,V=te*w,H=m.internal.pageSize.getWidth(),W=ge[ue];c=r.charSpace||$t,d=r.maxWidth||0,u=Object.assign({autoencode:!0,noBOM:!0},r.flags);var G=[],Y=function(e){return m.getStringUnitWidth(e,{font:W,charSpace:c,fontSize:te,doKerning:!1})*te/_};if("[object Array]"===Object.prototype.toString.call(e)){var K;s=A(e),"left"!==l&&(q=s.map(Y));var J,$=0;if("right"===l){t-=q[0],e=[],D=s.length;for(var Q=0;Q<D;Q++)0===Q?(J=qt(t),K=Vt(n)):(J=I($-q[Q]),K=-V),e.push([s[Q],J,K]),$=q[Q]}else if("center"===l){t-=q[0]/2,e=[],D=s.length;for(var Z=0;Z<D;Z++)0===Z?(J=qt(t),K=Vt(n)):(J=I(($-q[Z])/2),K=-V),e.push([s[Z],J,K]),$=q[Z]}else if("left"===l){e=[],D=s.length;for(var ee=0;ee<D;ee++)e.push(s[ee])}else if("justify"===l&&"Identity-H"===W.encoding){e=[],D=s.length,d=0!==d?d:H;for(var ne=0,re=0;re<D;re++)if(K=0===re?Vt(n):-V,J=0===re?qt(t):ne,re<D-1){var ae=I((d-q[re])/(s[re].split(" ").length-1)),se=s[re].split(" ");e.push([se[0]+" ",J,K]),ne=0;for(var oe=1;oe<se.length;oe++){var le=(Y(se[oe-1]+" "+se[oe])-Y(se[oe]))*_+ae;oe==se.length-1?e.push([se[oe],le,0]):e.push([se[oe]+" ",le,0]),ne-=le}}else e.push([s[re],J,K]);e.push(["",ne,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],D=s.length,d=0!==d?d:H,re=0;re<D;re++){K=0===re?Vt(n):-V,J=0===re?qt(t):0;var ce=s[re].split(" ").length-1,de=ce>0?(d-q[re])/ce:0;re<D-1?G.push(S(I(de))):G.push(0),e.push([s[re],J,K])}}}!0===("boolean"==typeof r.R2L?r.R2L:ie)&&(e=j(e,function(e,t,n){return[e.split("").reverse().join(""),t,n]})),a={text:e,x:t,y:n,options:r,mutex:{pdfEscape:nt,activeFontKey:ue,fonts:ge,activeFontSize:te}},Ae.publish("postProcessText",a),e=a.text,y=a.mutex.isHex||!1;var he=ge[ue].encoding;"WinAnsiEncoding"!==he&&"StandardEncoding"!==he||(e=j(e,function(e,t,n){return[N(e),t,n]})),s=A(e),e=[];for(var fe,pe,me,ye=Array.isArray(s[0])?1:0,be="",ve=function(e,t,n){var i="";return n instanceof Ee?(n="number"==typeof r.angle?Le(n,new Ee(1,0,0,1,e,t)):Le(new Ee(1,0,0,1,e,t),n),x===v&&(n=Le(new Ee(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=S(e)+" "+S(t)+" Td\n",i},xe=0;xe<s.length;xe++){switch(be="",ye){case 1:me=(y?"<":"(")+s[xe][0]+(y?">":")"),fe=parseFloat(s[xe][1]),pe=parseFloat(s[xe][2]);break;case 0:me=(y?"<":"(")+s[xe]+(y?">":")"),fe=qt(t),pe=Vt(n)}void 0!==G&&void 0!==G[xe]&&(be=G[xe]+" Tw\n"),0===xe?e.push(be+ve(fe,pe,p)+me):0===ye?e.push(be+me):1===ye&&e.push(be+ve(fe,pe,p)+me)}e=0===ye?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var we="BT\n/";return we+=ue+" "+te+" Tf\n",we+=S(te*w)+" TL\n",we+=Kt+"\n",we+=b,we+=e,X(we+="ET"),h[ue]=!0,m};var _t=f.__private__.clip=f.clip=function(e){return X("evenodd"===e?"W*":"W"),this};f.clipEvenOdd=function(){return _t("evenodd")},f.__private__.discardPath=f.discardPath=function(){return X("n"),this};var Nt=f.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(e){return Nt(e)&&(c=e),this};var St=f.__private__.getStyle=f.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},kt=f.close=function(){return X("h"),this};f.stroke=function(){return X("S"),this},f.fill=function(e){return At("f",e),this},f.fillEvenOdd=function(e){return At("f*",e),this},f.fillStroke=function(e){return At("B",e),this},f.fillStrokeEvenOdd=function(e){return At("B*",e),this};var At=function(e,t){"object"===(0,jc.A)(t)?It(t,e):X(e)},jt=function(e){null===e||x===v&&void 0===e||(e=St(e),X(e))};function Pt(e,t,n,r,i){var a=new ym(t||this.boundingBox,n||this.xStep,r||this.yStep,this.gState,i||this.matrix);a.stream=this.stream;var s=e+"$$"+this.cloneIndex+++"$$";return Te(s,a),a}var It=function(e,t){var n=xe[e.key],r=ve[n];if(r instanceof gm)X("q"),X(Ct(t)),r.gState&&f.setGState(r.gState),X(e.matrix.toString()+" cm"),X("/"+n+" sh"),X("Q");else if(r instanceof ym){var i=new Ee(1,0,0,-1,0,fn());e.matrix&&(i=i.multiply(e.matrix||De),n=Pt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,i).id),X("q"),X("/Pattern cs"),X("/"+n+" scn"),r.gState&&f.setGState(r.gState),X(t),X("Q")}},Ct=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Et=f.moveTo=function(e,t){return X(S(I(e))+" "+S(C(t))+" m"),this},Lt=f.lineTo=function(e,t){return X(S(I(e))+" "+S(C(t))+" l"),this},Dt=f.curveTo=function(e,t,n,r,i,a){return X([S(I(e)),S(C(t)),S(I(n)),S(C(r)),S(I(i)),S(C(a)),"c"].join(" ")),this};f.__private__.line=f.line=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Nt(i))throw new Error("Invalid arguments passed to jsPDF.line");return x===b?this.lines([[n-e,r-t]],e,t,[1,1],i||"S"):this.lines([[n-e,r-t]],e,t,[1,1]).stroke()},f.__private__.lines=f.lines=function(e,t,n,r,i,a){var s,o,l,c,d,u,h,f,p,m,g,y;if("number"==typeof e&&(y=n,n=t,t=e,e=y),r=r||[1,1],a=a||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(r)||!Nt(i)||"boolean"!=typeof a)throw new Error("Invalid arguments passed to jsPDF.lines");for(Et(t,n),s=r[0],o=r[1],c=e.length,m=t,g=n,l=0;l<c;l++)2===(d=e[l]).length?(m=d[0]*s+m,g=d[1]*o+g,Lt(m,g)):(u=d[0]*s+m,h=d[1]*o+g,f=d[2]*s+m,p=d[3]*o+g,m=d[4]*s+m,g=d[5]*o+g,Dt(u,h,f,p,m,g));return a&&kt(),jt(i),this},f.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.c;switch(n.op){case"m":Et(r[0],r[1]);break;case"l":Lt(r[0],r[1]);break;case"c":Dt.apply(this,r);break;case"h":kt()}}return this},f.__private__.rect=f.rect=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Nt(i))throw new Error("Invalid arguments passed to jsPDF.rect");return x===b&&(r=-r),X([S(I(e)),S(C(t)),S(I(n)),S(I(r)),"re"].join(" ")),jt(i),this},f.__private__.triangle=f.triangle=function(e,t,n,r,i,a,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(a)||!Nt(s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,r-t],[i-n,a-r],[e-i,t-a]],e,t,[1,1],s,!0),this},f.__private__.roundedRect=f.roundedRect=function(e,t,n,r,i,a,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(a)||!Nt(s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return i=Math.min(i,.5*n),a=Math.min(a,.5*r),this.lines([[n-2*i,0],[i*o,0,i,a-a*o,i,a],[0,r-2*a],[0,a*o,-i*o,a,-i,a],[2*i-n,0],[-i*o,0,-i,-a*o,-i,-a],[0,2*a-r],[0,-a*o,i*o,-a,i,-a]],e+i,t,[1,1],s,!0),this},f.__private__.ellipse=f.ellipse=function(e,t,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||!Nt(i))throw new Error("Invalid arguments passed to jsPDF.ellipse");var a=4/3*(Math.SQRT2-1)*n,s=4/3*(Math.SQRT2-1)*r;return Et(e+n,t),Dt(e+n,t-s,e+a,t-r,e,t-r),Dt(e-a,t-r,e-n,t-s,e-n,t),Dt(e-n,t+s,e-a,t+r,e,t+r),Dt(e+a,t+r,e+n,t+s,e+n,t),jt(i),this},f.__private__.circle=f.circle=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||!Nt(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,r)},f.setFont=function(e,t,n){return n&&(t=N(t,n)),ue=lt(e,t,{disableWarning:!1}),this};var Tt=f.__private__.getFont=f.getFont=function(){return ge[lt.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var e,t,n={};for(e in ye)if(ye.hasOwnProperty(e))for(t in n[e]=[],ye[e])ye[e].hasOwnProperty(t)&&n[e].push(t);return n},f.addFont=function(e,t,n,r,i){var a=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==a.indexOf(arguments[3])?i=arguments[3]:arguments[3]&&-1==a.indexOf(arguments[3])&&(n=N(n,r)),tt.call(this,e,t,n,i=i||"Identity-H")};var Ot,Mt=e.lineWidth||.200025,Rt=f.__private__.getLineWidth=f.getLineWidth=function(){return Mt},Ft=f.__private__.setLineWidth=f.setLineWidth=function(e){return Mt=e,X(S(I(e))+" w"),this};f.__private__.setLineDash=bm.API.setLineDash=bm.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return S(I(e))}).join(" "),t=S(I(t)),X("["+e+"] "+t+" d"),this};var Ut=f.__private__.getLineHeight=f.getLineHeight=function(){return te*Ot};f.__private__.getLineHeight=f.getLineHeight=function(){return te*Ot};var Bt=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Ot=e),this},zt=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Ot};Bt(e.lineHeight);var qt=f.__private__.getHorizontalCoordinate=function(e){return I(e)},Vt=f.__private__.getVerticalCoordinate=function(e){return x===v?e:ke[U].mediaBox.topRightY-ke[U].mediaBox.bottomLeftY-I(e)},Ht=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(e){return S(qt(e))},Wt=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(e){return S(Vt(e))},Gt=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return qe(Gt)},f.__private__.setStrokeColor=f.setDrawColor=function(e,t,n,r){return Gt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"draw",precision:2}),X(Gt),this};var Yt=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return qe(Yt)},f.__private__.setFillColor=f.setFillColor=function(e,t,n,r){return Yt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"fill",precision:2}),X(Yt),this};var Kt=e.textColor||"0 g",Jt=f.__private__.getTextColor=f.getTextColor=function(){return qe(Kt)};f.__private__.setTextColor=f.setTextColor=function(e,t,n,r){return Kt=Ve({ch1:e,ch2:t,ch3:n,ch4:r,pdfColorType:"text",precision:3}),this};var $t=e.charSpace,Xt=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat($t||0)};f.__private__.setCharSpace=f.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return $t=e,this};var Qt=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qt=t,X(t+" J"),this};var Zt=0;f.__private__.setLineJoin=f.setLineJoin=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zt=t,X(t+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return X(S(I(e))+" M"),this},f.GState=pm,f.setGState=function(e){(e="string"==typeof e?we[_e[e]]:en(null,e)).equals(Ne)||(X("/"+e.id+" gs"),Ne=e)};var en=function(e,t){if(!e||!_e[e]){var n=!1;for(var r in we)if(we.hasOwnProperty(r)&&we[r].equals(t)){n=!0;break}if(n)t=we[r];else{var i="GS"+(Object.keys(we).length+1).toString(10);we[i]=t,t.id=i}return e&&(_e[e]=t.id),Ae.publish("addGState",t),t}};f.addGState=function(e,t){return en(e,t),this},f.saveGraphicsState=function(){return X("q"),be.push({key:ue,size:te,color:Kt}),this},f.restoreGraphicsState=function(){X("Q");var e=be.pop();return ue=e.key,te=e.size,Kt=e.color,Ne=null,this},f.setCurrentTransformationMatrix=function(e){return X(e.toString()+" cm"),this},f.comment=function(e){return X("#"+e),this};var tn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var i="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return i},set:function(e){i=e.toString()}}),this},nn=function(e,t,n,r){tn.call(this,e,t),this.type="rect";var i=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return i},set:function(e){isNaN(e)||(i=parseFloat(e))}});var a=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}}),this},rn=function(){this.page=Se,this.currentPage=U,this.pages=Y.slice(0),this.pagesContext=ke.slice(0),this.x=fe,this.y=pe,this.matrix=me,this.width=on(U),this.height=cn(U),this.outputDestination=J,this.id="",this.objectNumber=-1};rn.prototype.restore=function(){Se=this.page,U=this.currentPage,ke=this.pagesContext,Y=this.pages,fe=this.x,pe=this.y,me=this.matrix,ln(U,this.width),dn(U,this.height),J=this.outputDestination};var an=function(e,t,n,r,i){Ce.push(new rn),Se=U=0,Y=[],fe=e,pe=t,me=i,rt([n,r])};for(var sn in f.beginFormObject=function(e,t,n,r,i){return an(e,t,n,r,i),this},f.endFormObject=function(e){return function(e){if(Ie[e])Ce.pop().restore();else{var t=new rn,n="Xo"+(Object.keys(Pe).length+1).toString(10);t.id=n,Ie[e]=n,Pe[n]=t,Ae.publish("addFormObject",t),Ce.pop().restore()}}(e),this},f.doFormObject=function(e,t){var n=Pe[Ie[e]];return X("q"),X(t.toString()+" cm"),X("/"+n.id+" Do"),X("Q"),this},f.getFormObject=function(e){var t=Pe[Ie[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},f.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(Wp(mt(pt()),e),"function"==typeof Wp.unload&&Up.setTimeout&&setTimeout(Wp.unload,911),this):new Promise(function(t,n){try{var i=Wp(mt(pt()),e);"function"==typeof Wp.unload&&Up.setTimeout&&setTimeout(Wp.unload,911),t(i)}catch(r){n(r.message)}})},bm.API)bm.API.hasOwnProperty(sn)&&("events"===sn&&bm.API.events.length?function(e,t){var n,r,i;for(i=t.length-1;-1!==i;i--)n=t[i][0],r=t[i][1],e.subscribe.apply(e,[n].concat("function"==typeof r?[r]:r))}(Ae,bm.API.events):f[sn]=bm.API[sn]);function on(e){return ke[e].mediaBox.topRightX-ke[e].mediaBox.bottomLeftX}function ln(e,t){ke[e].mediaBox.topRightX=t+ke[e].mediaBox.bottomLeftX}function cn(e){return ke[e].mediaBox.topRightY-ke[e].mediaBox.bottomLeftY}function dn(e,t){ke[e].mediaBox.topRightY=t+ke[e].mediaBox.bottomLeftY}var un=f.getPageWidth=function(e){return on(e=e||U)/he},hn=f.setPageWidth=function(e,t){ln(e,t*he)},fn=f.getPageHeight=function(e){return cn(e=e||U)/he},pn=f.setPageHeight=function(e,t){dn(e,t*he)};return f.internal={pdfEscape:nt,getStyle:St,getFont:Tt,getFontSize:re,getCharSpace:Xt,getTextColor:Jt,getLineHeight:Ut,getLineHeightFactor:zt,getLineWidth:Rt,write:Q,getHorizontalCoordinate:qt,getVerticalCoordinate:Vt,getCoordinateString:Ht,getVerticalCoordinateString:Wt,collections:{},newObject:Me,newAdditionalObject:Ue,newObjectDeferred:Re,newObjectDeferredBegin:Fe,getFilters:He,putStream:We,events:Ae,scaleFactor:he,pageSize:{getWidth:function(){return un(U)},setWidth:function(e){hn(U,e)},getHeight:function(){return fn(U)},setHeight:function(e){pn(U,e)}},encryptionOptions:d,encryption:bt,getEncryptor:function(e){return null!==d?bt.encryptor(e,0):function(e){return e}},output:gt,getNumberOfPages:ot,pages:Y,out:X,f2:j,f3:P,getPageInfo:vt,getPageInfoByObjId:xt,getCurrentPageInfo:wt,getPDFVersion:m,Point:tn,Rectangle:nn,Matrix:Ee,hasHotfix:yt},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return un(U)},set:function(e){hn(U,e)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return fn(U)},set:function(e){pn(U,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ee.length;t<n;t++){var r=tt.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===u&&(h[r]=!0);var i=e[t][0].split("-");et({id:r,fontName:i[0],fontStyle:i[1]||""})}Ae.publish("addFonts",{fonts:ge,dictionary:ye})}.call(f,ee),ue="F1",it(i,n),Ae.publish("initialized"),f}um.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},um.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},um.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},um.prototype.processOwnerPassword=function(e,t){return cm(sm(t).substr(0,5),e)},um.prototype.encryptor=function(e,t){var n=sm(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return cm(n,e)}},pm.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,jc.A)(e)!==(0,jc.A)(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return 0===r},bm.API={events:[]},bm.version="3.0.3";var vm=bm.API,xm=1,wm=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_m=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nm=function(e){return e.toFixed(2)},Sm=function(e){return e.toFixed(5)};vm.__acroform__={};var km=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Am=function(e){return e*xm},jm=function(e){var t=new Vm,n=rg.internal.getHeight(e)||0,r=rg.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Nm(r)),Number(Nm(n))],t},Pm=vm.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},Im=vm.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Cm=vm.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Em=vm.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Cm(e,t-1)},Lm=vm.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Pm(e,t-1)},Dm=vm.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Im(e,t-1)},Tm=vm.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],a=e[1],s=e[2],o=e[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(a+o)||0,l.upperRight_X=n(i+s)||0,l.upperRight_Y=r(a)||0,[Number(Nm(l.lowerLeft_X)),Number(Nm(l.lowerLeft_Y)),Number(Nm(l.upperRight_X)),Number(Nm(l.upperRight_Y))]},Om=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=Mm(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Nm(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=jm(e);return a.scope=e.scope,a.stream=t.join("\n"),a}},Mm=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(e){return e.split("\n")}):i.map(function(e){return[e]});var a=n,s=rg.internal.getHeight(e)||0;s=s<0?-s:s;var o=rg.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,n,r){if(t+1<i.length){var a=n+" "+i[t+1][0];return Rm(a,e,r).width<=o-4}return!1};a++;e:for(;a>0;){t="",a--;var c,d,u=Rm("3",e,a).height,h=e.multiline?s-a:(s-u)/2,f=h+=2,p=0,m=0,g=0;if(a<=0){t="(...) Tj\n",t+="% Width of Text: "+Rm(t,e,a=12).width+", FieldWidth:"+o+"\n";break}for(var y="",b=0,v=0;v<i.length;v++)if(i.hasOwnProperty(v)){var x=!1;if(1!==i[v].length&&g!==i[v].length-1){if((u+2)*(b+2)+2>s)continue e;y+=i[v][g],x=!0,m=v,v--}else{y=" "==(y+=i[v][g]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var w=parseInt(v),_=l(w,y,a),N=v>=i.length-1;if(_&&!N){y+=" ",g=0;continue}if(_||N){if(N)m=w;else if(e.multiline&&(u+2)*(b+2)+2>s)continue e}else{if(!e.multiline)continue e;if((u+2)*(b+2)+2>s)continue e;m=w}}for(var S="",k=p;k<=m;k++){var A=i[k];if(e.multiline){if(k===m){S+=A[g]+" ",g=(g+1)%A.length;continue}if(k===p){S+=A[A.length-1]+" ";continue}}S+=A[0]+" "}switch(S=" "==S.substr(S.length-1)?S.substr(0,S.length-1):S,d=Rm(S,e,a).width,e.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}t+=Nm(c)+" "+Nm(f)+" Td\n",t+="("+wm(S)+") Tj\n",t+=-Nm(c)+" 0 Td\n",f=-(a+2),d=0,p=x?m:m+1,b++,y=""}break}return r.text=t,r.fontSize=a,r},Rm=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Fm={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Um=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===n.type&&e.object===n.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},Bm=vm.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(e){return e};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(0!==a&&(i+=" "),(0,jc.A)(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":"/"!==e[a].substr(0,1)?(void 0!==t&&n&&(r=n.internal.getEncryptor(t)),i+="("+wm(r(e[a].toString()))+")"):i+=e[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},zm=function(e,t,n){var r=function(e){return e};return void 0!==t&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+wm(r(e))+")"},qm=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};qm.prototype.toString=function(){return this.objId+" 0 R"},qm.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},qm.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:Bm(i,this.objId,this.scope)}):i instanceof qm?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):"function"!=typeof i&&e.push({key:r,value:i}))}return e};var Vm=function(){qm.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};km(Vm,qm);var Hm=function(){qm.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+wm(t(e))+")"}},set:function(t){e=t}})};km(Hm,qm);var Wm=function e(){qm.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(t,3))},set:function(e){!0===Boolean(e)?this.F=Lm(t,3):this.F=Dm(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Zm)return;a="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+wm(t(a))+")"},set:function(e){a=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/xm:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Zm||this instanceof tg))return zm(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof $m==0?zm(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof $m==0?"("===e.substr(0,1)?_m(e.substr(1,e.length-2)):_m(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $m==1?_m(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof $m==1?"/"+e:e}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof $m==0?zm(f,this.objId,this.scope):f},set:function(e){e=e.toString(),f=this instanceof $m==0?"("===e.substr(0,1)?_m(e.substr(1,e.length-2)):_m(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $m==1?_m(f.substr(1,f.length-1)):f},set:function(e){e=e.toString(),f=this instanceof $m==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(e){e=Boolean(e),m=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,1):this.Ff=Dm(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,2):this.Ff=Dm(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,3):this.Ff=Dm(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};km(Wm,qm);var Gm=function(){Wm.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Bm(t,this.objId,this.scope)},set:function(e){var n,r;r=[],"string"==typeof(n=e)&&(r=function(e,t,n){n||(n=1);for(var r,i=[];r=t.exec(e);)i.push(r[n]);return i}(n,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,18):this.Ff=Dm(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=Lm(this.Ff,19):this.Ff=Dm(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=Lm(this.Ff,20),t.sort()):this.Ff=Dm(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,22):this.Ff=Dm(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,23):this.Ff=Dm(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,27):this.Ff=Dm(this.Ff,27)}}),this.hasAppearanceStream=!1};km(Gm,Wm);var Ym=function(){Gm.call(this),this.fontName="helvetica",this.combo=!1};km(Ym,Gm);var Km=function(){Ym.call(this),this.combo=!0};km(Km,Ym);var Jm=function(){Km.call(this),this.edit=!0};km(Jm,Km);var $m=function(){Wm.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,15):this.Ff=Dm(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,16):this.Ff=Dm(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,17):this.Ff=Dm(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,26):this.Ff=Dm(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,r=[];for(n in r.push("<<"),t)r.push("/"+n+" ("+wm(e(t[n]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,jc.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};km($m,Wm);var Xm=function(){$m.call(this),this.pushButton=!0};km(Xm,$m);var Qm=function(){$m.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};km(Qm,$m);var Zm=function(){var e,t;Wm.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),r)n.push("/"+t+" ("+wm(e(r[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,jc.A)(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rg.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};km(Zm,Wm),Qm.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Qm.prototype.createOption=function(e){var t=new Zm;return t.Parent=this,t.optionName=e,this.Kids.push(t),ig.call(this.scope,t),t};var eg=function(){$m.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rg.CheckBox.createAppearanceStream()};km(eg,$m);var tg=function(){Wm.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,13):this.Ff=Dm(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,21):this.Ff=Dm(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,23):this.Ff=Dm(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,24):this.Ff=Dm(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,25):this.Ff=Dm(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,26):this.Ff=Dm(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};km(tg,Wm);var ng=function(){tg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Em(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=Lm(this.Ff,14):this.Ff=Dm(this.Ff,14)}}),this.password=!0};km(ng,tg);var rg={CheckBox:{createAppearanceStream:function(){return{N:{On:rg.CheckBox.YesNormal},D:{On:rg.CheckBox.YesPushDown,Off:rg.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=jm(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=Mm(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Nm(rg.internal.getWidth(e))+" "+Nm(rg.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Nm(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=jm(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],a=rg.internal.getHeight(e),s=rg.internal.getWidth(e),o=Mm(e,e.caption);return i.push("1 g"),i.push("0 0 "+Nm(s)+" "+Nm(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Nm(s-1)+" "+Nm(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Nm(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),t.stream=i.join("\n"),t},OffPushDown:function(e){var t=jm(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Nm(rg.internal.getWidth(e))+" "+Nm(rg.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:rg.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=rg.RadioButton.Circle.YesNormal,t.D[e]=rg.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=jm(e);t.scope=e.scope;var n=[],r=rg.internal.getWidth(e)<=rg.internal.getHeight(e)?rg.internal.getWidth(e)/4:rg.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=rg.internal.Bezier_C,a=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Sm(rg.internal.getWidth(e)/2)+" "+Sm(rg.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=jm(e);t.scope=e.scope;var n=[],r=rg.internal.getWidth(e)<=rg.internal.getHeight(e)?rg.internal.getWidth(e)/4:rg.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*rg.internal.Bezier_C).toFixed(5)),s=Number((r*rg.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Sm(rg.internal.getWidth(e)/2)+" "+Sm(rg.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Sm(rg.internal.getWidth(e)/2)+" "+Sm(rg.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=jm(e);t.scope=e.scope;var n=[],r=rg.internal.getWidth(e)<=rg.internal.getHeight(e)?rg.internal.getWidth(e)/4:rg.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),a=Number((i*rg.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Sm(rg.internal.getWidth(e)/2)+" "+Sm(rg.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:rg.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=rg.RadioButton.Cross.YesNormal,t.D[e]=rg.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=jm(e);t.scope=e.scope;var n=[],r=rg.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Nm(rg.internal.getWidth(e)-2)+" "+Nm(rg.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Nm(r.x1.x)+" "+Nm(r.x1.y)+" m"),n.push(Nm(r.x2.x)+" "+Nm(r.x2.y)+" l"),n.push(Nm(r.x4.x)+" "+Nm(r.x4.y)+" m"),n.push(Nm(r.x3.x)+" "+Nm(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=jm(e);t.scope=e.scope;var n=rg.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Nm(rg.internal.getWidth(e))+" "+Nm(rg.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Nm(rg.internal.getWidth(e)-2)+" "+Nm(rg.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Nm(n.x1.x)+" "+Nm(n.x1.y)+" m"),r.push(Nm(n.x2.x)+" "+Nm(n.x2.y)+" l"),r.push(Nm(n.x4.x)+" "+Nm(n.x4.y)+" m"),r.push(Nm(n.x3.x)+" "+Nm(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=jm(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Nm(rg.internal.getWidth(e))+" "+Nm(rg.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};rg.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=rg.internal.getWidth(e),n=rg.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},rg.internal.getWidth=function(e){var t=0;return"object"===(0,jc.A)(e)&&(t=Am(e.Rect[2])),t},rg.internal.getHeight=function(e){var t=0;return"object"===(0,jc.A)(e)&&(t=Am(e.Rect[3])),t};var ig=vm.addField=function(e){if(function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(Wm.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Fm)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");xm=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Hm,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r.objId=void 0,r.hasAnnotation&&Um(r,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var n=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var i=e[r],a=[],s=i.Rect;if(i.Rect&&(i.Rect=Tm(i.Rect,t)),t.internal.newObjectDeferredBegin(i.objId,!0),i.DA=rg.createDefaultAppearanceStream(i),"object"===(0,jc.A)(i)&&"function"==typeof i.getKeyValueListForStream&&(a=i.getKeyValueListForStream()),i.Rect=s,i.hasAppearanceStream&&!i.appearanceStreamContent){var o=Om(i);a.push({key:"AP",value:"<</N "+o+">>"}),t.internal.acroformPlugin.xForms.push(o)}if(i.appearanceStreamContent){var l="";for(var c in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(c)){var d=i.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var r in d)if(d.hasOwnProperty(r)){var u=d[r];"function"==typeof u&&(u=u.call(t,i)),l+="/"+r+" "+u+" ",t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=d)&&(u=u.call(t,i)),l+="/"+r+" "+u,t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u);l+=">>"}a.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:a,objectId:i.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),"object"===(0,jc.A)(i)&&"function"==typeof i.putStream&&i.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}}(this,e),!(e instanceof Wm))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};vm.AcroFormChoiceField=Gm,vm.AcroFormListBox=Ym,vm.AcroFormComboBox=Km,vm.AcroFormEditBox=Jm,vm.AcroFormButton=$m,vm.AcroFormPushButton=Xm,vm.AcroFormRadioButton=Qm,vm.AcroFormCheckBox=eg,vm.AcroFormTextField=tg,vm.AcroFormPasswordField=ng,vm.AcroFormAppearance=rg,vm.AcroForm={ChoiceField:Gm,ListBox:Ym,ComboBox:Km,EditBox:Jm,Button:$m,PushButton:Xm,RadioButton:Qm,CheckBox:eg,TextField:tg,PasswordField:ng,Appearance:rg},bm.AcroForm={ChoiceField:Gm,ListBox:Ym,ComboBox:Km,EditBox:Jm,Button:$m,PushButton:Xm,RadioButton:Qm,CheckBox:eg,TextField:tg,PasswordField:ng,Appearance:rg};bm.AcroForm;function ag(e){return e.reduce(function(e,t,n){return e[t]=n,e},{})}!function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(e,t){var i,a,s,o,l,c=n;if("RGBA"===(t=t||n)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(_(e))for(l in r)for(s=r[l],i=0;i<s.length;i+=1){for(o=!0,a=0;a<s[i].length;a+=1)if(void 0!==s[i][a]&&s[i][a]!==e[a]){o=!1;break}if(!0===o){c=l;break}}else for(l in r)for(s=r[l],i=0;i<s.length;i+=1){for(o=!0,a=0;a<s[i].length;a+=1)if(void 0!==s[i][a]&&s[i][a]!==e.charCodeAt(a)){o=!1;break}if(!0===o){c=l;break}}return c===n&&t!==n&&(c=t),c},a=function e(t){for(var n=this.internal.write,r=this.internal.putStream,i=(0,this.internal.getFilters)();-1!==i.indexOf("FlateEncode");)i.splice(i.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var a=[];if(a.push({key:"Type",value:"/XObject"}),a.push({key:"Subtype",value:"/Image"}),a.push({key:"Width",value:t.width}),a.push({key:"Height",value:t.height}),t.colorSpace===y.INDEXED?a.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(a.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===y.DEVICE_CMYK&&a.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),a.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&a.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)&&t.transparency.length>0){for(var s="",o=0,l=t.transparency.length;o<l;o++)s+=t.transparency[o]+" "+t.transparency[o]+" ";a.push({key:"Mask",value:"["+s+"]"})}void 0!==t.sMask&&a.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:a,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var d,u=null!==(d=t.sMaskBitsPerComponent)&&void 0!==d?d:t.bitsPerComponent,h={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:u,data:t.sMask};"filter"in t&&(h.decodeParameters="/Predictor ".concat(t.predictor," /Colors 1 /BitsPerComponent ").concat(u," /Columns ").concat(t.width),h.filter=t.filter),e.call(this,h)}if(t.colorSpace===y.INDEXED){var f=this.internal.newObject();r({data:S(new Uint8Array(t.palette)),objectId:f}),n("endobj")}},s=function(){var e=this.internal.collections[t+"images"];for(var n in e)a.call(this,e[n])},o=function(){var e,n=this.internal.collections[t+"images"],r=this.internal.write;for(var i in n)r("/I"+(e=n[i]).index,e.objectId,"0","R")},l=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var e=this.internal.collections[t+"images"];return l.call(this),e},d=function(){return Object.keys(this.internal.collections[t+"images"]).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===(0,jc.A)(e)&&1===e.nodeType},f=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return Yp(unescape(r).split("base64,").pop());var i=e.loadFile(r,!0);if(void 0!==i)return i}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var a;switch(n){case"PNG":a="image/png";break;case"WEBP":a="image/webp";break;default:a="image/jpeg"}return Yp(t.toDataURL(a,1).split("base64,").pop())}},p=function(e){var n=this.internal.collections[t+"images"];if(n)for(var r in n)if(e===n[r].alias)return n[r]},m=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},g=function(e,t,n,r,i,a){var s=m.call(this,n,r,i),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=c.call(this);if(n=s[0],r=s[1],d[i.index]=i,a){a*=Math.PI/180;var u=Math.cos(a),h=Math.sin(a),f=function(e){return e.toFixed(4)},p=[f(u),f(h),f(-1*h),f(u),0,0,"cm"]}this.internal.write("q"),a?(this.internal.write([1,"0","0",1,o(e),l(t+r),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([o(n),"0","0",o(r),"0","0","cm"].join(" "))):this.internal.write([o(n),"0","0",o(r),o(e),l(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+i.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(e){var t,n,r=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(_(e))for(n=e.byteLength/2,t=0;t<n;t++)r=(r<<5)-r+e[t],r|=0;return r},x=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},w=e.__addimage__.extractImageFromDataUrl=function(e){if(null==e)return null;if(!(e=e.trim()).startsWith("data:"))return null;var t=e.indexOf(",");return t<0?null:e.substring(0,t).trim().endsWith("base64")?e.substring(t+1):null};e.__addimage__.isArrayBuffer=function(e){return e instanceof ArrayBuffer};var _=e.__addimage__.isArrayBufferView=function(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array},N=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n},S=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=_(e)?e:new Uint8Array(e),r=0;r<n.length;r+=8192)t+=String.fromCharCode.apply(null,n.subarray(r,r+8192));return t};e.addImage=function(){var e,t,r,i,a,s,o,c,d;if("number"==typeof arguments[1]?(t=n,r=arguments[1],i=arguments[2],a=arguments[3],s=arguments[4],o=arguments[5],c=arguments[6],d=arguments[7]):(t=arguments[1],r=arguments[2],i=arguments[3],a=arguments[4],s=arguments[5],o=arguments[6],c=arguments[7],d=arguments[8]),"object"===(0,jc.A)(e=arguments[0])&&!h(e)&&"imageData"in e){var u=e;e=u.imageData,t=u.format||t||n,r=u.x||r||0,i=u.y||i||0,a=u.w||u.width||a,s=u.h||u.height||s,o=u.alias||o,c=u.compression||c,d=u.rotation||u.angle||d}var f=this.internal.getFilters();if(void 0===c&&-1!==f.indexOf("FlateEncode")&&(c="SLOW"),isNaN(r)||isNaN(i))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var p=k.call(this,e,t,o,c);return g.call(this,r,i,a,s,p,d),this};var k=function(t,r,a,s){var o,l,c;if("string"==typeof t&&i(t)===n){t=unescape(t);var m=A(t,!1);(""!==m||void 0!==(m=e.loadFile(t,!0)))&&(t=m)}if(h(t)&&(t=f(t,r)),r=i(t,r),!u(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(c=a)||0===c.length)&&(a=function(e){return"string"==typeof e||_(e)?v(e):_(e.data)?v(e.data):null}(t)),(o=p.call(this,a))||(t instanceof Uint8Array||"RGBA"===r||(l=t,t=N(t)),o=this["process"+r.toUpperCase()](t,d.call(this),a,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:b.NONE}(s),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},A=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var n,r="";if("string"==typeof e){var a;n=null!==(a=w(e))&&void 0!==a?a:e;try{r=Yp(n)}catch(i){if(t)throw x(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+i.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};e.getImageProperties=function(t){var r,a,s="";if(h(t)&&(t=f(t)),"string"==typeof t&&i(t)===n&&(""===(s=A(t,!1))&&(s=e.loadFile(t)||""),t=s),a=i(t),!u(a))throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if(t instanceof Uint8Array||(t=N(t)),!(r=this["process"+a.toUpperCase()](t)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=a,r}}(bm.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};bm.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,r,i,a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((n=l[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){n=l[u];var h=this.internal.pdfEscape,f=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),y=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(r="/Rect ["+a(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+h(g(n.contents))+")",i+=" /Popup "+m.objId+" 0 R",i+=" /P "+o.objId+" 0 R",i+=" /T ("+h(g(y))+") >>",p.content=i;var b=p.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+a(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(i+=" /Open true"),i+=" >>",m.content=i,this.internal.write(p.objId,"0 R",m.objId,"0 R");break;case"freetext":r="/Rect ["+a(n.bounds.x)+" "+s(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var v=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+h(f(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var x=this.annotations._nameMap[n.options.name];n.options.pageNumber=x.page,n.options.top=x.y}else n.options.top||(n.options.top=0);if(r="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+h(f(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var w=s(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+w+" "+n.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,r,i){var a=this.internal.getCurrentPageInfo(),s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:s(e),y:o(t),w:s(e+n),h:o(t+r)},options:i,type:"link"})},e.textWithLink=function(e,t,n,r){var i,a,s=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){a=r.maxWidth;var l=this.splitTextToSize(e,a).length;i=Math.ceil(o*l)}else a=s,i=o;return this.text(e,t,n,r),n+=.2*o,"center"===r.align&&(t-=s/2),"right"===r.align&&(t-=s),this.link(t,n-o,a,i,r),s},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(bm.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},s=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return s(e)&&a(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return s(e)&&i.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return s(e)&&a(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return s(e)&&a(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return s(e)&&a(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return s(e)&&a(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=n,i="",a=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(a++,"number"==typeof(r=r[e.charCodeAt(t)])&&(i+=String.fromCharCode(r),r=n,a=0),t===e.length-1&&(r=n,i+=e.charAt(t-(a-1)),t-=a-1,a=0)):(r=n,i+=e.charAt(t-a),t-=a,a=0);return i};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return s(e)?!1===a(e)?-1:!c(e)||!s(t)&&!s(n)||!s(n)&&o(t)||o(e)&&!s(t)||o(e)&&l(t)||o(e)&&o(t)?0:d(e)&&s(t)&&!o(t)&&s(n)&&c(n)?3:o(e)||!s(n)?1:2:-1},f=function(e){var n=0,r=0,i=0,a="",o="",l="",c=(e=e||"").split("\\s+"),d=[];for(n=0;n<c.length;n+=1){for(d.push(""),r=0;r<c[n].length;r+=1)a=c[n][r],o=c[n][r-1],l=c[n][r+1],s(a)?(i=h(a,o,l),d[n]+=-1!==i?String.fromCharCode(t[a.charCodeAt(0)][i]):a):d[n]+=a;d[n]=u(d[n])}return d.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?n.push([f(t[r][0]),t[r][1],t[r][2]]):n.push([f(t[r])]);e=n}else e=f(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(bm.API),bm.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform","javascript"===e.variant?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(e){i=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(bm.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var i=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return i},set:function(e){i=e}});var a=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var s=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return s},set:function(e){s=e}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),i=t.font||this.getFont(),a=t.scaleFactor||this.internal.scaleFactor,s=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,d))},[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)s<(l=this.getStringUnitWidth(e[u],{font:i})*n)&&(s=l);return 0!==s&&(o=e.length),{w:s/=a,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/a,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=e.cell=function(){var e;e=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var i=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===e.lineNumber?(e.x=(i.x||0)+(i.width||0),e.y=i.y||0):i.y+i.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=i.y+i.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-s,e.y+s,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+s,{align:"center",baseline:"top",maxWidth:e.width-s-s}):this.text(e.text,e.x+s,e.y+s,{align:"left",baseline:"top",maxWidth:e.width-s-s})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,l,c,d){if(r.call(this),!l)throw new Error("No data for PDF table.");var u,h,f,p,m=[],g=[],y=[],b={},v={},x=[],w=[],_=(d=d||{}).autoSize||!1,N=!1!==d.printHeaders,S=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,k=d.margins||Object.assign({width:this.getPageWidth()},t),A="number"==typeof d.padding?d.padding:3,j=d.headerBackgroundColor||"#c8c8c8",P=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=N,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=S,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=P,this.setFontSize(S),null==c)g=m=Object.keys(l[0]),y=m.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,jc.A)(c[0]))for(m=c.map(function(e){return e.name}),g=c.map(function(e){return e.prompt||e.name||""}),y=c.map(function(e){return e.align||"left"}),u=0;u<c.length;u+=1)v[c[u].name]=.7499990551181103*c[u].width;else Array.isArray(c)&&"string"==typeof c[0]&&(g=m=c,y=m.map(function(){return"left"}));if(_||Array.isArray(c)&&"string"==typeof c[0])for(u=0;u<m.length;u+=1){for(b[p=m[u]]=l.map(function(e){return e[p]}),this.setFont(void 0,"bold"),x.push(this.getTextDimensions(g[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),h=b[p],this.setFont(void 0,"normal"),f=0;f<h.length;f+=1)x.push(this.getTextDimensions(h[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);v[p]=Math.max.apply(null,x)+A+A,x=[]}if(N){var I={};for(u=0;u<m.length;u+=1)I[m[u]]={},I[m[u]].text=g[u],I[m[u]].align=y[u];var C=o.call(this,I,v);w=m.map(function(t){return new a(e,n,v[t],C,I[t].text,void 0,I[t].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var E=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(u=0;u<l.length;u+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:u,data:l[u]},this);var L=o.call(this,l[u],v);for(f=0;f<m.length;f+=1){var D=l[u][m[f]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:u,col:f,data:D},this),s.call(this,new a(e,n,v[m[f]],L,D,u+2,E[m[f]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var o=function(e,t){var n=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,i=this.internal.scaleFactor;return Object.keys(e).map(function(r){var i=e[r];return this.splitTextToSize(i.hasOwnProperty("text")?i.text:i,t[r]-n-n)},this).map(function(e){return this.getLineHeightFactor()*e.length*r/i+n+n},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){i=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(i.y=this.internal.__cell__.margins.top||0,l.push(i)),i.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,i),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(bm.API);var sg={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},og=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],lg=ag(og),cg=[100,200,300,400,500,600,700,800,900],dg=ag(cg);function ug(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return sg[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),i=function(e){return"number"==typeof lg[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function hg(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var fg={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},pg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function mg(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function gg(e){return e.trimLeft()}function yg(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function bg(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var vg,xg,wg,_g,Ng,Sg,kg,Ag,jg,Pg=["times"];function Ig(e,t,n,r,i){var a=4,s=Lg;switch(i){case bm.API.image_compression.FAST:a=1,s=Eg;break;case bm.API.image_compression.MEDIUM:a=6,s=Dg;break;case bm.API.image_compression.SLOW:a=9,s=Tg}e=function(e,t,n,r){for(var i,a=e.length/t,s=new Uint8Array(e.length+a),o=[Cg,Eg,Lg,Dg,Tg],l=0;l<a;l+=1){var c=l*t,d=e.subarray(c,c+t);if(r)s.set(r(d,n,i),c+l);else{for(var u=o.length,h=[],f=0;f<u;f+=1)h[f]=o[f](d,n,i);var p=Mg(h.concat());s.set(h[p],c+l)}i=d}return s}(e,t,Math.ceil(n*r/8),s);var o=ud(e,{level:a});return bm.API.__addimage__.arrayBufferToBinaryString(o)}function Cg(e){var t=Array.apply([],e);return t.unshift(0),t}function Eg(e,t){var n=e.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var a=e[i-t]||0;r[i+1]=e[i]-a+256&255}return r}function Lg(e,t,n){var r=e.length,i=[];i[0]=2;for(var a=0;a<r;a+=1){var s=n&&n[a]||0;i[a+1]=e[a]-s+256&255}return i}function Dg(e,t,n){var r=e.length,i=[];i[0]=3;for(var a=0;a<r;a+=1){var s=e[a-t]||0,o=n&&n[a]||0;i[a+1]=e[a]+256-(s+o>>>1)&255}return i}function Tg(e,t,n){var r=e.length,i=[];i[0]=4;for(var a=0;a<r;a+=1){var s=Og(e[a-t]||0,n&&n[a]||0,n&&n[a-t]||0);i[a+1]=e[a]-s+256&255}return i}function Og(e,t,n){if(e===t&&t===n)return e;var r=Math.abs(t-n),i=Math.abs(e-n),a=Math.abs(e+t-n-n);return r<=i&&r<=a?e:i<=a?t:n}function Mg(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))}function Rg(e,t,n){var r=t*n,i=Math.floor(r/8),a=16-(r-8*i+n),s=(1<<n)-1;return Ug(e,i)>>a&s}function Fg(e,t,n,r){var i=n*r,a=Math.floor(i/8),s=16-(i-8*a+r),o=(1<<r)-1,l=(t&o)<<s;!function(e,t,n){if(t+1<e.byteLength)e.setUint16(t,n,!1);else{var r=n>>8&255;e.setUint8(t,r)}}(e,a,Ug(e,a)&~(o<<s)&65535|l)}function Ug(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function Bg(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,s=1<<1+(7&i);e[t++],e[t++];var o=null,l=null;a&&(o=t,l=s,t+=3*s);var c=!0,d=[],u=0,h=null,f=0,p=null;for(this.width=n,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((j=e[t++])>=0))throw Error("Invalid block size");if(0===j)break;t+=j}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var m=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],1&m||(h=null),f=m>>2&7,t++;break;case 254:for(;;){if(!((j=e[t++])>=0))throw Error("Invalid block size");if(0===j)break;t+=j}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,x=e[t++],w=x>>6&1,_=1<<1+(7&x),N=o,S=l,k=!1;x>>7&&(k=!0,N=t,S=_,t+=3*_);var A=t;for(t++;;){var j;if(!((j=e[t++])>=0))throw Error("Invalid block size");if(0===j)break;t+=j}d.push({x:g,y:y,width:b,height:v,has_local_palette:k,palette_offset:N,palette_size:S,data_offset:A,data_length:t-A,transparent_index:h,interlaced:!!w,delay:u,disposal:f});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,r){var i=this.frameInfo(t),a=i.width*i.height,s=new Uint8Array(a);zg(e,i.data_offset,s,a);var o=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,d=n-c,u=c,h=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),p=h,m=4*d;!0===i.interlaced&&(m+=4*n*7);for(var g=8,y=0,b=s.length;y<b;++y){var v=s[y];if(0===u&&(u=c,(p+=m)>=f&&(m=4*d+4*n*(g-1),p=h+(c+d)*(g<<1),g>>=1)),v===l)p+=4;else{var x=e[o+3*v],w=e[o+3*v+1],_=e[o+3*v+2];r[p++]=_,r[p++]=w,r[p++]=x,r[p++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,r){var i=this.frameInfo(t),a=i.width*i.height,s=new Uint8Array(a);zg(e,i.data_offset,s,a);var o=i.palette_offset,l=i.transparent_index;null===l&&(l=256);var c=i.width,d=n-c,u=c,h=4*(i.y*n+i.x),f=4*((i.y+i.height)*n+i.x),p=h,m=4*d;!0===i.interlaced&&(m+=4*n*7);for(var g=8,y=0,b=s.length;y<b;++y){var v=s[y];if(0===u&&(u=c,(p+=m)>=f&&(m=4*d+4*n*(g-1),p=h+(c+d)*(g<<1),g>>=1)),v===l)p+=4;else{var x=e[o+3*v],w=e[o+3*v+1],_=e[o+3*v+2];r[p++]=x,r[p++]=w,r[p++]=_,r[p++]=255}--u}}}function zg(e,t,n,r){for(var i=e[t++],a=1<<i,s=a+1,o=s+1,l=i+1,c=(1<<l)-1,d=0,u=0,h=0,f=e[t++],p=new Int32Array(4096),m=null;;){for(;d<16&&0!==f;)u|=e[t++]<<d,d+=8,1===f?f=e[t++]:--f;if(d<l)break;var g=u&c;if(u>>=l,d-=l,g!==a){if(g===s)break;for(var y=g<o?g:m,b=0,v=y;v>a;)v=p[v]>>8,++b;var x=v;if(h+b+(y!==g?1:0)>r)return void zp.log("Warning, gif stream longer than expected.");n[h++]=x;var w=h+=b;for(y!==g&&(n[h++]=x),v=y;b--;)v=p[v],n[--w]=255&v,v>>=8;null!==m&&o<4096&&(p[o++]=m<<8|x,o>=c+1&&l<12&&(++l,c=c<<1|1)),m=g}else o=s+1,c=(1<<(l=i+1))-1,m=null}return h!==r&&zp.log("Warning, gif stream shorter than expected."),n}function qg(e){var t,n,r,i,a,s=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),f=new Array(64),p=new Array(64),m=[],g=0,y=7,b=new Array(64),v=new Array(64),x=new Array(64),w=new Array(256),_=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],A=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],j=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],E=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(e,t){for(var n=0,r=0,i=new Array,a=1;a<=16;a++){for(var s=1;s<=e[a];s++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=a,r++,n++;n*=2}return i}function D(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<y),n--,--y<0&&(255==g?(T(255),T(0)):T(g),y=7,g=0)}function T(e){m.push(e)}function O(e){T(e>>8&255),T(255&e)}function M(e,t,n,r,i){for(var a,s=i[0],o=i[240],l=function(e,t){var n,r,i,a,s,o,l,c,d,u,h=0;for(d=0;d<8;++d){n=e[h],r=e[h+1],i=e[h+2],a=e[h+3],s=e[h+4],o=e[h+5],l=e[h+6];var p=n+(c=e[h+7]),m=n-c,g=r+l,y=r-l,b=i+o,v=i-o,x=a+s,w=a-s,_=p+x,N=p-x,S=g+b,k=g-b;e[h]=_+S,e[h+4]=_-S;var A=.707106781*(k+N);e[h+2]=N+A,e[h+6]=N-A;var j=.382683433*((_=w+v)-(k=y+m)),P=.5411961*_+j,I=1.306562965*k+j,C=.707106781*(S=v+y),E=m+C,L=m-C;e[h+5]=L+P,e[h+3]=L-P,e[h+1]=E+I,e[h+7]=E-I,h+=8}for(h=0,d=0;d<8;++d){n=e[h],r=e[h+8],i=e[h+16],a=e[h+24],s=e[h+32],o=e[h+40],l=e[h+48];var D=n+(c=e[h+56]),T=n-c,O=r+l,M=r-l,R=i+o,F=i-o,U=a+s,B=a-s,z=D+U,q=D-U,V=O+R,H=O-R;e[h]=z+V,e[h+32]=z-V;var W=.707106781*(H+q);e[h+16]=q+W,e[h+48]=q-W;var G=.382683433*((z=B+F)-(H=M+T)),Y=.5411961*z+G,K=1.306562965*H+G,J=.707106781*(V=F+M),$=T+J,X=T-J;e[h+40]=X+Y,e[h+24]=X-Y,e[h+8]=$+K,e[h+56]=$-K,h++}for(d=0;d<64;++d)u=e[d]*t[d],f[d]=u>0?u+.5|0:u-.5|0;return f}(e,t),c=0;c<64;++c)p[N[c]]=l[c];var d=p[0]-n;n=p[0],0==d?D(r[0]):(D(r[h[a=32767+d]]),D(u[a]));for(var m=63;m>0&&0==p[m];)m--;if(0==m)return D(s),n;for(var g,y=1;y<=m;){for(var b=y;0==p[y]&&y<=m;)++y;var v=y-b;if(v>=16){g=v>>4;for(var x=1;x<=g;++x)D(o);v&=15}a=32767+p[y],D(i[(v<<4)+h[a]]),D(u[a]),y++}return 63!=m&&D(s),n}function R(e){e=Math.min(Math.max(e,1),100),a!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=s((t[n]*e+50)/100);r=Math.min(Math.max(r,1),255),o[N[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;a<64;a++){var u=s((i[a]*e+50)/100);u=Math.min(Math.max(u,1),255),l[N[a]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,p=0;p<8;p++)for(var m=0;m<8;m++)c[f]=1/(o[N[f]]*h[p]*h[m]*8),d[f]=1/(l[N[f]]*h[p]*h[m]*8),f++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),a=e)}this.encode=function(e,a){a&&R(a),m=new Array,g=0,y=7,O(65496),O(65504),O(16),T(74),T(70),T(73),T(70),T(0),T(1),T(1),T(0),O(1),O(1),T(0),T(0),function(){O(65499),O(132),T(0);for(var e=0;e<64;e++)T(o[e]);T(1);for(var t=0;t<64;t++)T(l[t])}(),function(e,t){O(65472),O(17),T(8),O(t),O(e),T(3),T(1),T(17),T(0),T(2),T(17),T(1),T(3),T(17),T(1)}(e.width,e.height),function(){O(65476),O(418),T(0);for(var e=0;e<16;e++)T(S[e+1]);for(var t=0;t<=11;t++)T(k[t]);T(16);for(var n=0;n<16;n++)T(A[n+1]);for(var r=0;r<=161;r++)T(j[r]);T(1);for(var i=0;i<16;i++)T(P[i+1]);for(var a=0;a<=11;a++)T(I[a]);T(17);for(var s=0;s<16;s++)T(C[s+1]);for(var o=0;o<=161;o++)T(E[o])}(),O(65498),O(12),T(3),T(1),T(0),T(2),T(17),T(3),T(17),T(0),T(63),T(0);var s=0,u=0,h=0;g=0,y=7,this.encode.displayName="_encode_";for(var f,p,w,N,L,F,U,B,z,q=e.data,V=e.width,H=e.height,W=4*V,G=0;G<H;){for(f=0;f<W;){for(L=W*G+f,U=-1,B=0,z=0;z<64;z++)F=L+(B=z>>3)*W+(U=4*(7&z)),G+B>=H&&(F-=W*(G+1+B-H)),f+U>=W&&(F-=f+U-W+4),p=q[F++],w=q[F++],N=q[F++],b[z]=(_[p]+_[w+256|0]+_[N+512|0]>>16)-128,v[z]=(_[p+768|0]+_[w+1024|0]+_[N+1280|0]>>16)-128,x[z]=(_[p+1280|0]+_[w+1536|0]+_[N+1792|0]>>16)-128;s=M(b,c,s,t,r),u=M(v,d,u,n,i),h=M(x,d,h,n,i),f+=32}G+=8}if(y>=0){var Y=[];Y[1]=y+1,Y[0]=(1<<y+1)-1,D(Y)}return O(65497),new Uint8Array(m)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),t=L(S,k),n=L(P,I),r=L(A,j),i=L(C,E),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)h[32767+r]=n,u[32767+r]=[],u[32767+r][1]=n,u[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)h[32767+i]=n,u[32767+i]=[],u[32767+i][1]=n,u[32767+i][0]=t-1+i;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)_[e]=19595*e,_[e+256|0]=38470*e,_[e+512|0]=7471*e+32768,_[e+768|0]=-11059*e,_[e+1024|0]=-21709*e,_[e+1280|0]=32768*e+8421375,_[e+1536|0]=-27439*e,_[e+1792|0]=-5329*e}(),R(e)}function Vg(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Hg(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var r=0;4>r;r++)if(e[t+r]!=n.charCodeAt(r))return!0;return!1}function r(e,t,n,r,i){for(var a=0;a<i;a++)e[t+a]=n[r+a]}function i(e,t,n,r){for(var i=0;i<r;i++)e[t+i]=n}function a(e){return new Int32Array(e)}function s(e,t){for(var n=[],r=0;r<e;r++)n.push(new t);return n}function o(e,t){var n=[];return function e(n,r,i){for(var a=i[r],s=0;s<a&&(n.push(i.length>r+1?[]:new t),!(i.length<r+1));s++)e(n[s],r+1,i)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,r,i,a){t(!(i%r));do{e[n+(i-=r)]=a}while(0<i)}function d(e,n,r,i,s){if(t(2328>=s),512>=s)var o=a(512);else if(null==(o=a(s)))return 0;return function(e,n,r,i,s,o){var d,h,f=n,p=1<<r,m=a(16),g=a(16);for(t(0!=s),t(null!=i),t(null!=e),t(0<r),h=0;h<s;++h){if(15<i[h])return 0;++m[i[h]]}if(m[0]==s)return 0;for(g[1]=0,d=1;15>d;++d){if(m[d]>1<<d)return 0;g[d+1]=g[d]+m[d]}for(h=0;h<s;++h)d=i[h],0<i[h]&&(o[g[d]++]=h);if(1==g[15])return(i=new u).g=0,i.value=o[0],c(e,f,1,p,i),p;var y,b=-1,v=p-1,x=0,w=1,_=1,N=1<<r;for(h=0,d=1,s=2;d<=r;++d,s<<=1){if(w+=_<<=1,0>(_-=m[d]))return 0;for(;0<m[d];--m[d])(i=new u).g=d,i.value=o[h++],c(e,f+x,s,N,i),x=l(x,d)}for(d=r+1,s=2;15>=d;++d,s<<=1){if(w+=_<<=1,0>(_-=m[d]))return 0;for(;0<m[d];--m[d]){if(i=new u,(x&v)!=b){for(f+=N,y=1<<(b=d)-r;15>b&&!(0>=(y-=m[b]));)++b,y<<=1;p+=N=1<<(y=b-r),e[n+(b=x&v)].g=y+r,e[n+b].value=f-n-b}i.g=d-r,i.value=o[h++],c(e,f+(x>>r),s,N,i),x=l(x,d)}}return w!=2*g[15]-1?0:p}(e,n,r,i,s,o)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function f(){this.G=s(5,u),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Fn,h)}function p(e,n,r,i){t(null!=e),t(null!=n),t(2147483648>i),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=r,e.Jd=n,e.Yc=r+i,e.Zc=4<=i?r+i-4+1:r,A(e)}function m(e,t){for(var n=0;0<t--;)n|=P(e,128)<<t;return n}function g(e,t){var n=m(e,t);return j(e)?-n:n}function y(e,n,r,i){var a,s=0;for(t(null!=e),t(null!=n),t(4294967288>i),e.Sb=i,e.Ra=0,e.u=0,e.h=0,4<i&&(i=4),a=0;a<i;++a)s+=n[r+a]<<8*a;e.Ra=s,e.bb=i,e.oa=n,e.pa=r}function b(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<zn-8>>>0,++e.bb,e.u-=8;N(e)&&(e.h=1,e.u=0)}function v(e,n){if(t(0<=n),!e.h&&n<=Bn){var r=_(e)&Un[n];return e.u+=n,b(e),r}return e.h=1,e.u=0}function x(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function _(e){return e.Ra>>>(e.u&zn-1)>>>0}function N(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>zn}function S(e,t){e.u=t,e.h=N(e)}function k(e){e.u>=qn&&(t(e.u>=qn),b(e))}function A(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function j(e){return m(e,1)}function P(e,t){var n=e.Ca;0>e.b&&A(e);var r=e.b,i=n*t>>>8,a=(e.I>>>r>i)+0;for(a?(n-=i,e.I-=i+1<<r>>>0):n=i+1,r=n,i=0;256<=r;)i+=8,r>>=8;return r=7^i+Vn[r],e.b-=r,e.Ca=(n<<r)-1,a}function I(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function C(e,t){return e[t+0]|e[t+1]<<8}function E(e,t){return C(e,t)|e[t+2]<<16}function L(e,t){return C(e,t)|C(e,t+2)<<16}function D(e,n){var r=1<<n;return t(null!=e),t(0<n),e.X=a(r),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function T(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),r(n.X,0,e.X,0,1<<n.Xa)}function O(){this.X=[],this.Xa=this.Mb=0}function M(e,n,r,i){t(null!=r),t(null!=i);var a=r[0],s=i[0];return 0==a&&(a=(e*s+n/2)/n),0==s&&(s=(n*a+e/2)/e),0>=a||0>=s?0:(r[0]=a,i[0]=s,1)}function R(e,t){return e+(1<<t)-1>>>t}function F(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function U(t,n){e[n]=function(n,r,i,a,s,o,l){var c;for(c=0;c<s;++c){var d=e[t](o[l+c-1],i,a+c);o[l+c]=F(n[r+c],d)}}}function B(){this.ud=this.hd=this.jd=0}function z(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function q(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function V(e,t){return q(e+(e-t+.5>>1))}function H(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function W(e,t,n,r,i,a,s){for(r=a[s-1],n=0;n<i;++n)a[s+n]=r=F(e[t+n],r)}function G(e,t,n,r,i){var a;for(a=0;a<n;++a){var s=e[t+a],o=s>>8&255,l=16711935&(l=(l=16711935&s)+((o<<16)+o));r[i+a]=(4278255360&s)+l>>>0}}function Y(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function K(e,t,n,r,i,a){var s;for(s=0;s<r;++s){var o=t[n+s],l=o>>>8,c=o,d=255&(d=(d=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),i[a+s]=(4278255360&o)+(d<<16)+c}}function J(t,n,r,i,a){e[n]=function(e,t,n,r,s,o,l,c,d){for(r=l;r<c;++r)for(l=0;l<d;++l)s[o++]=a(n[i(e[t++])])},e[t]=function(t,n,s,o,l,c,d){var u=8>>t.b,h=t.Ea,f=t.K[0],p=t.w;if(8>u)for(t=(1<<t.b)-1,p=(1<<u)-1;n<s;++n){var m,g=0;for(m=0;m<h;++m)m&t||(g=i(o[l++])),c[d++]=a(f[g&p]),g>>=u}else e["VP8LMapColor"+r](o,l,f,p,c,d,n,s,h)}}function $(e,t,n,r,i){for(n=t+n;t<n;){var a=e[t++];r[i++]=a>>16&255,r[i++]=a>>8&255,r[i++]=255&a}}function X(e,t,n,r,i){for(n=t+n;t<n;){var a=e[t++];r[i++]=a>>16&255,r[i++]=a>>8&255,r[i++]=255&a,r[i++]=a>>24&255}}function Q(e,t,n,r,i){for(n=t+n;t<n;){var a=(s=e[t++])>>16&240|s>>12&15,s=240&s|s>>28&15;r[i++]=a,r[i++]=s}}function Z(e,t,n,r,i){for(n=t+n;t<n;){var a=(s=e[t++])>>16&248|s>>13&7,s=s>>5&224|s>>3&31;r[i++]=a,r[i++]=s}}function ee(e,t,n,r,i){for(n=t+n;t<n;){var a=e[t++];r[i++]=255&a,r[i++]=a>>8&255,r[i++]=a>>16&255}}function te(e,t,n,i,a,s){if(0==s)for(n=t+n;t<n;)I(i,((s=e[t++])[0]>>24|s[1]>>8&65280|s[2]<<8&16711680|s[3]<<24)>>>0),a+=32;else r(i,a,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function re(e){return e==qr||e==Vr||e==Hr||e==Wr}function ie(){this.eb=[],this.size=this.A=this.fb=0}function ae(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function se(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ie,this.f.kb=new ae,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var n=e.T,i=t.ba.f.RGBA,a=i.eb,s=i.fb+e.ka*i.A,o=gi[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,h=e.ea,f=e.W,p=t.cc,m=t.dc,g=t.Mc,y=t.Nc,b=e.ka,v=e.ka+e.T,x=e.U,w=x+1>>1;for(0==b?o(l,c,null,null,d,u,h,f,d,u,h,f,a,s,null,null,x):(o(t.ec,t.fc,l,c,p,m,g,y,d,u,h,f,a,s-i.A,a,s,x),++n);b+2<v;b+=2)p=d,m=u,g=h,y=f,u+=e.Rc,f+=e.Rc,s+=2*i.A,o(l,(c+=2*e.fa)-e.fa,l,c,p,m,g,y,d,u,h,f,a,s-i.A,a,s,x);return c+=e.fa,e.j+v<e.o?(r(t.ec,t.fc,l,c,x),r(t.cc,t.dc,d,u,w),r(t.Mc,t.Nc,h,f,w),n--):1&v||o(l,c,null,null,d,u,h,f,d,u,h,f,a,s+i.A,null,null,x),n}function ue(e,n,r){var i=e.F,a=[e.J];if(null!=i){var s=e.U,o=n.ba.S,l=o==Ur||o==Hr;n=n.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,a[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=n.eb;d=n.fb+d*n.A,e=Sr(i,a[0],e.width,s,c,u,d+(l?0:3),n.A),t(r==c),e&&re(o)&&_r(u,d,l,s,c,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,r=11>n,i=n==Mr||n==Fr||n==Ur||n==Br||12==n||re(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!On(t.Oa,e,i?11:12))return 0;if(i&&re(n)&&bn(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=a(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=de,bn()}}else alert("todo:EmitYUV");i&&(t.Jb=ue,r&&gn())}if(r&&!Ci){for(e=0;256>e;++e)Ei[e]=89858*(e-128)+ki>>Si,Ti[e]=-22014*(e-128)+ki,Di[e]=-45773*(e-128),Li[e]=113618*(e-128)+ki>>Si;for(e=Ai;e<ji;++e)t=76283*(e-16)+ki>>Si,Oi[e-Ai]=We(t,255),Mi[e-Ai]=We(t+8>>4,15);Ci=1}return 1}function fe(e){var n=e.ma,r=e.U,i=e.T;return t(!(1&e.ka)),0>=r||0>=i?0:(r=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,r),n.Dc+=r,1)}function pe(e){e.ma.memory=null}function me(e,t,n,r){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,n[0]=v(e,14)+1,r[0]=v(e,1),0!=v(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+v(t,n)+1}function ye(e,t){return 120<t?t-120:1<=(n=((n=Xr[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function be(e,t,n){var r=_(n),i=e[t+=255&r].g-8;return 0<i&&(S(n,n.u+8),r=_(n),t+=e[t].value,t+=r&(1<<i)-1),S(n,n.u+e[t].g),e[t].value}function ve(e,n,r){return r.g+=e.g,r.value+=e.value<<n>>>0,t(8>=r.g),e.g}function xe(e,n,r){var i=e.xc;return t((n=0==i?0:e.vc[e.md*(r>>i)+(n>>i)])<e.Wb),e.Ya[n]}function we(e,n,i,a){var s=e.ab,o=e.c*n,l=e.C;n=l+n;var c=i,d=a;for(a=e.Ta,i=e.Ua;0<s--;){var u=e.gc[s],h=l,f=n,p=c,m=d,g=(d=a,c=i,u.Ea);switch(t(h<f),t(f<=u.nc),u.hc){case 2:Gn(p,m,(f-h)*g,d,c);break;case 0:var y=h,b=f,v=d,x=c,w=(A=u).Ea;0==y&&(Hn(p,m,null,null,1,v,x),W(p,m+1,0,0,w-1,v,x+1),m+=w,x+=w,++y);for(var _=1<<A.b,N=_-1,S=R(w,A.b),k=A.K,A=A.w+(y>>A.b)*S;y<b;){var j=k,P=A,I=1;for(Wn(p,m,v,x-w,1,v,x);I<w;){var C=(I&~N)+_;C>w&&(C=w),(0,Xn[j[P++]>>8&15])(p,m+ +I,v,x+I-w,C-I,v,x+I),I=C}m+=w,x+=w,++y&N||(A+=S)}f!=u.nc&&r(d,c-g,d,c+(f-h-1)*g,g);break;case 1:for(g=p,b=m,w=(p=u.Ea)-(x=p&~(v=(m=1<<u.b)-1)),y=R(p,u.b),_=u.K,u=u.w+(h>>u.b)*y;h<f;){for(N=_,S=u,k=new B,A=b+x,j=b+p;b<A;)Y(N[S++],k),Qn(k,g,b,m,d,c),b+=m,c+=m;b<j&&(Y(N[S++],k),Qn(k,g,b,w,d,c),b+=w,c+=w),++h&v||(u+=y)}break;case 3:if(p==d&&m==c&&0<u.b){for(b=d,p=g=c+(f-h)*g-(x=(f-h)*R(u.Ea,u.b)),m=d,v=c,y=[],x=(w=x)-1;0<=x;--x)y[x]=m[v+x];for(x=w-1;0<=x;--x)b[p+x]=y[x];Yn(u,h,f,d,g,d,c)}else Yn(u,h,f,p,m,d,c)}c=a,d=i}d!=i&&r(a,i,c,d,o)}function _e(e,n){var r=e.V,i=e.Ba+e.c*e.C,a=n-e.C;if(t(n<=e.l.o),t(16>=a),0<a){var s=e.l,o=e.Ta,l=e.Ua,c=s.width;if(we(e,a,r,i),a=l=[l],t((r=e.C)<(i=n)),t(s.v<s.va),i>s.o&&(i=s.o),r<s.j){var d=s.j-r;r=s.j,a[0]+=d*c}if(r>=i?r=0:(a[0]+=4*s.v,s.ka=r-s.j,s.U=s.va-s.v,s.T=i-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var u=r.f.RGBA,h=(i=r.S,a=s.U,s=s.T,d=u.eb,u.A),f=s;for(u=u.fb+e.Ma*u.A;0<f--;){var p=o,m=l,g=a,y=d,b=u;switch(i){case Or:Zn(p,m,g,y,b);break;case Mr:er(p,m,g,y,b);break;case qr:er(p,m,g,y,b),_r(y,b,0,g,1,0);break;case Rr:rr(p,m,g,y,b);break;case Fr:te(p,m,g,y,b,1);break;case Vr:te(p,m,g,y,b,1),_r(y,b,0,g,1,0);break;case Ur:te(p,m,g,y,b,0);break;case Hr:te(p,m,g,y,b,0),_r(y,b,1,g,1,0);break;case Br:tr(p,m,g,y,b);break;case Wr:tr(p,m,g,y,b),Nr(y,b,g,1,0);break;case zr:nr(p,m,g,y,b);break;default:t(0)}l+=c,u+=h}e.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=n,t(e.C<=e.i)}function Ne(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,r=e.Ya[t].H;if(0<n[1][r[1]+0].g||0<n[2][r[2]+0].g||0<n[3][r[3]+0].g)return 0}return 1}function Se(e,n,r,i,a,s){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=mi[e.Z]);n<r;++n)mi[e.Z](o,l,i,a,i,a,s),o=i,l=a,a+=s;e.qd=o,e.rd=l}}function ke(e,n){var r=e.l.ma,i=0==r.Z||1==r.Z?e.l.j:e.C;if(i=e.C<i?i:e.C,t(n<=e.l.o),n>i){var a=e.l.width,s=r.ca,o=r.tb+a*i,l=e.V,c=e.Ba+e.c*i,d=e.gc;t(1==e.ab),t(3==d[0].hc),Jn(d[0],i,n,l,c,s,o),Se(r,i,n,s,o,a)}e.C=e.Ma=n}function Ae(e,n,r,i,a,s,o){var l=e.$/i,c=e.$%i,d=e.m,u=e.s,h=r+e.$,f=h;a=r+i*a;var p=r+i*s,m=280+u.ua,g=e.Pb?l:16777216,y=0<u.ua?u.Wa:null,b=u.wc,v=h<p?xe(u,c,l):null;t(e.C<s),t(p<=a);var x=!1;e:for(;;){for(;x||h<p;){var w=0;if(l>=g){var A=h-r;t((g=e).Pb),g.wd=g.m,g.xd=A,0<g.s.ua&&T(g.s.Wa,g.s.vb),g=l+Zr}if(c&b||(v=xe(u,c,l)),t(null!=v),v.Qb&&(n[h]=v.qb,x=!0),!x)if(k(d),v.jc){w=d,A=n;var j=h,P=v.pd[_(w)&Fn-1];t(v.jc),256>P.g?(S(w,w.u+P.g),A[j]=P.value,w=0):(S(w,w.u+P.g-256),t(256<=P.value),w=P.value),0==w&&(x=!0)}else w=be(v.G[0],v.H[0],d);if(d.h)break;if(x||256>w){if(!x)if(v.nd)n[h]=(v.qb|w<<8)>>>0;else{if(k(d),x=be(v.G[1],v.H[1],d),k(d),A=be(v.G[2],v.H[2],d),j=be(v.G[3],v.H[3],d),d.h)break;n[h]=(j<<24|x<<16|w<<8|A)>>>0}if(x=!1,++h,++c>=i&&(c=0,++l,null!=o&&l<=s&&!(l%16)&&o(e,l),null!=y))for(;f<h;)w=n[f++],y.X[(506832829*w&4294967295)>>>y.Mb]=w}else if(280>w){if(w=ge(w-256,d),A=be(v.G[4],v.H[4],d),k(d),A=ye(i,A=ge(A,d)),d.h)break;if(h-r<A||a-h<w)break e;for(j=0;j<w;++j)n[h+j]=n[h+j-A];for(h+=w,c+=w;c>=i;)c-=i,++l,null!=o&&l<=s&&!(l%16)&&o(e,l);if(t(h<=a),c&b&&(v=xe(u,c,l)),null!=y)for(;f<h;)w=n[f++],y.X[(506832829*w&4294967295)>>>y.Mb]=w}else{if(!(w<m))break e;for(x=w-280,t(null!=y);f<h;)w=n[f++],y.X[(506832829*w&4294967295)>>>y.Mb]=w;w=h,t(!(x>>>(A=y).Xa)),n[w]=A.X[x],x=!0}x||t(d.h==N(d))}if(e.Pb&&d.h&&h<a)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&T(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=o&&o(e,l>s?s:l),e.a=0,e.$=h-r}return 1}return e.a=3,0}function je(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Pe(){var t=new sn;return null==t?null:(t.a=0,t.xb=pi,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Gn=G,Qn=K,Zn=$,er=X,tr=Q,nr=Z,rr=ee,e.VP8LMapColor32b=Kn,e.VP8LMapColor8b=$n,t)}function Ie(e,n,r,o,l){var c=1,h=[e],p=[n],m=o.m,g=o.s,y=null,b=0;e:for(;;){if(r)for(;c&&v(m,1);){var x=h,w=p,N=o,A=1,j=N.m,P=N.gc[N.ab],I=v(j,2);if(N.Oc&1<<I)c=0;else{switch(N.Oc|=1<<I,P.hc=I,P.Ea=x[0],P.nc=w[0],P.K=[null],++N.ab,t(4>=N.ab),I){case 0:case 1:P.b=v(j,3)+2,A=Ie(R(P.Ea,P.b),R(P.nc,P.b),0,N,P.K),P.K=P.K[0];break;case 3:var C,E=v(j,8)+1,L=16<E?0:4<E?1:2<E?2:3;if(x[0]=R(P.Ea,L),P.b=L,C=A=Ie(E,1,0,N,P.K)){var T,O=E,M=P,U=1<<(8>>M.b),B=a(U);if(null==B)C=0;else{var z=M.K[0],q=M.w;for(B[0]=M.K[0][0],T=1;T<1*O;++T)B[T]=F(z[q+T],B[T-1]);for(;T<4*U;++T)B[T]=0;M.K[0]=null,M.K[0]=B,C=1}}A=C;break;case 2:break;default:t(0)}c=A}}if(h=h[0],p=p[0],c&&v(m,1)&&!(c=1<=(b=v(m,4))&&11>=b)){o.a=3;break e}var V;if(V=c)t:{var H,W,G,Y=o,K=h,J=p,$=b,X=r,Q=Y.m,Z=Y.s,ee=[null],te=1,ne=0,re=Qr[$];n:for(;;){if(X&&v(Q,1)){var ie=v(Q,3)+2,ae=R(K,ie),se=R(J,ie),oe=ae*se;if(!Ie(ae,se,0,Y,ee))break n;for(ee=ee[0],Z.xc=ie,H=0;H<oe;++H){var le=ee[H]>>8&65535;ee[H]=le,le>=te&&(te=le+1)}}if(Q.h)break n;for(W=0;5>W;++W){var ce=Kr[W];!W&&0<$&&(ce+=1<<$),ne<ce&&(ne=ce)}var de=s(te*re,u),ue=te,he=s(ue,f);if(null==he)var fe=null;else t(65536>=ue),fe=he;var pe=a(ne);if(null==fe||null==pe||null==de){Y.a=1;break n}var me=de;for(H=G=0;H<te;++H){var ge=fe[H],ye=ge.G,be=ge.H,xe=0,we=1,_e=0;for(W=0;5>W;++W){ce=Kr[W],ye[W]=me,be[W]=G,!W&&0<$&&(ce+=1<<$);r:{var Ne,Se=ce,ke=Y,Pe=pe,Ce=me,Ee=G,Le=0,De=ke.m,Te=v(De,1);if(i(Pe,0,0,Se),Te){var Oe=v(De,1)+1,Me=v(De,1),Re=v(De,0==Me?1:8);Pe[Re]=1,2==Oe&&(Pe[Re=v(De,8)]=1);var Fe=1}else{var Ue=a(19),Be=v(De,4)+4;if(19<Be){ke.a=3;var ze=0;break r}for(Ne=0;Ne<Be;++Ne)Ue[$r[Ne]]=v(De,3);var qe=void 0,Ve=void 0,He=ke,We=Ue,Ge=Se,Ye=Pe,Ke=0,Je=He.m,$e=8,Xe=s(128,u);i:for(;d(Xe,0,7,We,19);){if(v(Je,1)){var Qe=2+2*v(Je,3);if((qe=2+v(Je,Qe))>Ge)break i}else qe=Ge;for(Ve=0;Ve<Ge&&qe--;){k(Je);var Ze=Xe[0+(127&_(Je))];S(Je,Je.u+Ze.g);var et=Ze.value;if(16>et)Ye[Ve++]=et,0!=et&&($e=et);else{var tt=16==et,nt=et-16,rt=Yr[nt],it=v(Je,Gr[nt])+rt;if(Ve+it>Ge)break i;for(var at=tt?$e:0;0<it--;)Ye[Ve++]=at}}Ke=1;break i}Ke||(He.a=3),Fe=Ke}(Fe=Fe&&!De.h)&&(Le=d(Ce,Ee,8,Pe,Se)),Fe&&0!=Le?ze=Le:(ke.a=3,ze=0)}if(0==ze)break n;if(we&&1==Jr[W]&&(we=0==me[G].g),xe+=me[G].g,G+=ze,3>=W){var st,ot=pe[0];for(st=1;st<ce;++st)pe[st]>ot&&(ot=pe[st]);_e+=ot}}if(ge.nd=we,ge.Qb=0,we&&(ge.qb=(ye[3][be[3]+0].value<<24|ye[1][be[1]+0].value<<16|ye[2][be[2]+0].value)>>>0,0==xe&&256>ye[0][be[0]+0].value&&(ge.Qb=1,ge.qb+=ye[0][be[0]+0].value<<8)),ge.jc=!ge.Qb&&6>_e,ge.jc){var lt,ct=ge;for(lt=0;lt<Fn;++lt){var dt=lt,ut=ct.pd[dt],ht=ct.G[0][ct.H[0]+dt];256<=ht.value?(ut.g=ht.g+256,ut.value=ht.value):(ut.g=0,ut.value=0,dt>>=ve(ht,8,ut),dt>>=ve(ct.G[1][ct.H[1]+dt],16,ut),dt>>=ve(ct.G[2][ct.H[2]+dt],0,ut),ve(ct.G[3][ct.H[3]+dt],24,ut))}}}Z.vc=ee,Z.Wb=te,Z.Ya=fe,Z.yc=de,V=1;break t}V=0}if(!(c=V)){o.a=3;break e}if(0<b){if(g.ua=1<<b,!D(g.Wa,b)){o.a=1,c=0;break e}}else g.ua=0;var ft=o,pt=h,mt=p,gt=ft.s,yt=gt.xc;if(ft.c=pt,ft.i=mt,gt.md=R(pt,yt),gt.wc=0==yt?-1:(1<<yt)-1,r){o.xb=fi;break e}if(null==(y=a(h*p))){o.a=1,c=0;break e}c=(c=Ae(o,y,0,h,p,p,null))&&!m.h;break e}return c?(null!=l?l[0]=y:(t(null==y),t(r)),o.$=0,r||je(g)):je(g),c}function Ce(e,n){var r=e.c*e.i,i=r+n+16*n;return t(e.c<=n),e.V=a(i),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+n,1)}function Ee(e,n){var r=e.C,i=n-r,a=e.V,s=e.Ba+e.c*r;for(t(n<=e.l.o);0<i;){var o=16<i?16:i,l=e.l.ma,c=e.l.width,d=c*o,u=l.ca,h=l.tb+c*r,f=e.Ta,p=e.Ua;we(e,o,a,s),kr(f,p,u,h,d),Se(l,r,r+o,u,h,c),i-=o,a+=o*e.c,r+=o}t(r==n),e.C=e.Ma=n}function Le(){this.ub=this.yd=this.td=this.Rb=0}function De(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Te(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Oe(){this.Yb=function(){var e=[];return function e(t,n,r){for(var i=r[n],a=0;a<i&&(t.push(r.length>n+1?[]:0),!(r.length<n+1));a++)e(t[a],n+1,r)}(e,0,[3,11]),e}()}function Me(){this.jb=a(3),this.Wc=o([4,8],Oe),this.Xc=o([4,17],Oe)}function Re(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Fe(){this.ld=this.La=this.dd=this.tc=0}function Ue(){this.Na=this.la=0}function Be(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ze(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function qe(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fe),this.Y=0,this.ya=Array(new ze),this.aa=0,this.l=new Ge}function Ve(){this.y=a(16),this.f=a(8),this.ea=a(8)}function He(){this.cb=this.a=0,this.sc="",this.m=new x,this.Od=new Le,this.Kc=new De,this.ed=new Re,this.Qa=new Te,this.Ic=this.$c=this.Aa=0,this.D=new qe,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,x),this.ia=0,this.pb=s(4,Be),this.Pa=new Me,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ve),this.Hd=0,this.rb=Array(new Ue),this.sb=0,this.wa=Array(new Fe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ze),this.L=this.aa=0,this.gd=o([4,2],Fe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function We(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ye(){var e=new He;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ni||(ni=Xe)),e}function Ke(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Je(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function $e(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return Ke(e,2,"null VP8Io passed to VP8GetHeaders()");var r=n.data,a=n.w,s=n.ha;if(4>s)return Ke(e,7,"Truncated header.");var o=r[a+0]|r[a+1]<<8|r[a+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return Ke(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ke(e,4,"Frame not displayable.");a+=3,s-=3;var c=e.Kc;if(l.Rb){if(7>s)return Ke(e,7,"cannot parse picture header");if(!Je(r,a,s))return Ke(e,3,"Bad code word");c.c=16383&(r[a+4]<<8|r[a+3]),c.Td=r[a+4]>>6,c.i=16383&(r[a+6]<<8|r[a+5]),c.Ud=r[a+6]>>6,a+=7,s-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,i((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,i(o.Zb,0,0,o.Zb.length),i(o.Lb,0,0,o.Lb)}if(l.ub>s)return Ke(e,7,"bad partition length");p(o=e.m,r,a,l.ub),a+=l.ub,s-=l.ub,l.Rb&&(c.Ld=j(o),c.Kd=j(o)),c=e.Qa;var d,u=e.Pa;if(t(null!=o),t(null!=c),c.Cb=j(o),c.Cb){if(c.Bb=j(o),j(o)){for(c.Fb=j(o),d=0;4>d;++d)c.Zb[d]=j(o)?g(o,7):0;for(d=0;4>d;++d)c.Lb[d]=j(o)?g(o,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=j(o)?m(o,8):255}else c.Bb=0;if(o.Ka)return Ke(e,3,"cannot parse segment header");if((c=e.ed).zd=j(o),c.Tb=m(o,6),c.wb=m(o,3),c.Pc=j(o),c.Pc&&j(o)){for(u=0;4>u;++u)j(o)&&(c.vd[u]=g(o,6));for(u=0;4>u;++u)j(o)&&(c.od[u]=g(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return Ke(e,3,"cannot parse filter header");var h=s;if(s=d=a,a=d+h,c=h,e.Xb=(1<<m(e.m,2))-1,h<3*(u=e.Xb))r=7;else{for(d+=3*u,c-=3*u,h=0;h<u;++h){var f=r[s+0]|r[s+1]<<8|r[s+2]<<16;f>c&&(f=c),p(e.Jc[+h],r,d,f),d+=f,c-=f,s+=3}p(e.Jc[+u],r,d,c),r=d<a?0:5}if(0!=r)return Ke(e,r,"cannot parse partitions");for(r=m(d=e.m,7),s=j(d)?g(d,4):0,a=j(d)?g(d,4):0,c=j(d)?g(d,4):0,u=j(d)?g(d,4):0,d=j(d)?g(d,4):0,h=e.Qa,f=0;4>f;++f){if(h.Cb){var y=h.Zb[f];h.Fb||(y+=r)}else{if(0<f){e.pb[f]=e.pb[0];continue}y=r}var b=e.pb[f];b.Sc[0]=ei[We(y+s,127)],b.Sc[1]=ti[We(y+0,127)],b.Eb[0]=2*ei[We(y+a,127)],b.Eb[1]=101581*ti[We(y+c,127)]>>16,8>b.Eb[1]&&(b.Eb[1]=8),b.Qc[0]=ei[We(y+u,117)],b.Qc[1]=ti[We(y+d,127)],b.lc=y+d}if(!l.Rb)return Ke(e,4,"Not a key frame.");for(j(o),l=e.Pa,r=0;4>r;++r){for(s=0;8>s;++s)for(a=0;3>a;++a)for(c=0;11>c;++c)u=P(o,li[r][s][a][c])?m(o,8):si[r][s][a][c],l.Wc[r][s].Yb[a][c]=u;for(s=0;17>s;++s)l.Xc[r][s]=l.Wc[r][ci[s]]}return e.kc=j(o),e.kc&&(e.Bd=m(o,8)),e.cb=1}function Xe(e,t,n,r,i,a,s){var o=t[i].Yb[n];for(n=0;16>i;++i){if(!P(e,o[n+0]))return i;for(;!P(e,o[n+1]);)if(o=t[++i].Yb[0],n=0,16==i)return 16;var l=t[i+1].Yb;if(P(e,o[n+2])){var c=e,d=0;if(P(c,(h=o)[(u=n)+3]))if(P(c,h[u+6])){for(o=0,u=2*(d=P(c,h[u+8]))+(h=P(c,h[u+9+d])),d=0,h=ri[u];h[o];++o)d+=d+P(c,h[o]);d+=3+(8<<u)}else P(c,h[u+7])?(d=7+2*P(c,165),d+=P(c,145)):d=5+P(c,159);else d=P(c,h[u+4])?3+P(c,h[u+5]):2;o=l[2]}else d=1,o=l[1];l=s+ii[i],0>(c=e).b&&A(c);var u,h=c.b,f=(u=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=f,c.Ca|=1,c.I-=(u+1&f)<<h,a[l]=((d^f)-f)*r[(0<i)+0]}return 16}function Qe(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,i(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,t,n,r,i){i=e[t+n+32*r]+(i>>3),e[t+n+32*r]=-256&i?0>i?0:255:i}function et(e,t,n,r,i,a){Ze(e,t,0,n,r+i),Ze(e,t,1,n,r+a),Ze(e,t,2,n,r-a),Ze(e,t,3,n,r-i)}function tt(e){return(20091*e>>16)+e}function nt(e,t,n,r){var i,s=0,o=a(16);for(i=0;4>i;++i){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-tt(e[t+12]),u=tt(e[t+4])+(35468*e[t+12]>>16);o[s+0]=l+u,o[s+1]=c+d,o[s+2]=c-d,o[s+3]=l-u,s+=4,t++}for(i=s=0;4>i;++i)l=(e=o[s+0]+4)+o[s+8],c=e-o[s+8],d=(35468*o[s+4]>>16)-tt(o[s+12]),Ze(n,r,0,0,l+(u=tt(o[s+4])+(35468*o[s+12]>>16))),Ze(n,r,1,0,c+d),Ze(n,r,2,0,c-d),Ze(n,r,3,0,l-u),s++,r+=32}function rt(e,t,n,r){var i=e[t+0]+4,a=35468*e[t+4]>>16,s=tt(e[t+4]),o=35468*e[t+1]>>16;et(n,r,0,i+s,e=tt(e[t+1]),o),et(n,r,1,i+a,e,o),et(n,r,2,i-a,e,o),et(n,r,3,i-s,e,o)}function it(e,t,n,r,i){nt(e,t,n,r),i&&nt(e,t+16,n,r+4)}function at(e,t,n,r){ar(e,t+0,n,r,1),ar(e,t+32,n,r+128,1)}function st(e,t,n,r){var i;for(e=e[t+0]+4,i=0;4>i;++i)for(t=0;4>t;++t)Ze(n,r,t,i,e)}function ot(e,t,n,r){e[t+0]&&lr(e,t+0,n,r),e[t+16]&&lr(e,t+16,n,r+4),e[t+32]&&lr(e,t+32,n,r+128),e[t+48]&&lr(e,t+48,n,r+128+4)}function lt(e,t,n,r){var i,s=a(16);for(i=0;4>i;++i){var o=e[t+0+i]+e[t+12+i],l=e[t+4+i]+e[t+8+i],c=e[t+4+i]-e[t+8+i],d=e[t+0+i]-e[t+12+i];s[0+i]=o+l,s[8+i]=o-l,s[4+i]=d+c,s[12+i]=d-c}for(i=0;4>i;++i)o=(e=s[0+4*i]+3)+s[3+4*i],l=s[1+4*i]+s[2+4*i],c=s[1+4*i]-s[2+4*i],d=e-s[3+4*i],n[r+0]=o+l>>3,n[r+16]=d+c>>3,n[r+32]=o-l>>3,n[r+48]=d-c>>3,r+=64}function ct(e,t,n){var r,i=t-32,a=Dr,s=255-e[i-1];for(r=0;r<n;++r){var o,l=a,c=s+e[t-1];for(o=0;o<n;++o)e[t+o]=l[c+e[i+o]];t+=32}}function dt(e,t){ct(e,t,4)}function ut(e,t){ct(e,t,8)}function ht(e,t){ct(e,t,16)}function ft(e,t){var n;for(n=0;16>n;++n)r(e,t+32*n,e,t-32,16)}function pt(e,t){var n;for(n=16;0<n;--n)i(e,t,e[t-1],16),t+=32}function mt(e,t,n){var r;for(r=0;16>r;++r)i(t,n+32*r,e,16)}function gt(e,t){var n,r=16;for(n=0;16>n;++n)r+=e[t-1+32*n]+e[t+n-32];mt(r>>5,e,t)}function yt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t-1+32*n];mt(r>>4,e,t)}function bt(e,t){var n,r=8;for(n=0;16>n;++n)r+=e[t+n-32];mt(r>>4,e,t)}function vt(e,t){mt(128,e,t)}function xt(e,t,n){return e+2*t+n+2>>2}function wt(e,t){var n,i=t-32;for(i=new Uint8Array([xt(e[i-1],e[i+0],e[i+1]),xt(e[i+0],e[i+1],e[i+2]),xt(e[i+1],e[i+2],e[i+3]),xt(e[i+2],e[i+3],e[i+4])]),n=0;4>n;++n)r(e,t+32*n,i,0,i.length)}function _t(e,t){var n=e[t-1],r=e[t-1+32],i=e[t-1+64],a=e[t-1+96];I(e,t+0,16843009*xt(e[t-1-32],n,r)),I(e,t+32,16843009*xt(n,r,i)),I(e,t+64,16843009*xt(r,i,a)),I(e,t+96,16843009*xt(i,a,a))}function Nt(e,t){var n,r=4;for(n=0;4>n;++n)r+=e[t+n-32]+e[t-1+32*n];for(r>>=3,n=0;4>n;++n)i(e,t+32*n,r,4)}function St(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],a=e[t-1-32],s=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=xt(r,i,e[t-1+96]),e[t+1+96]=e[t+0+64]=xt(n,r,i),e[t+2+96]=e[t+1+64]=e[t+0+32]=xt(a,n,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=xt(s,a,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=xt(o,s,a),e[t+3+32]=e[t+2+0]=xt(l,o,s),e[t+3+0]=xt(c,l,o)}function kt(e,t){var n=e[t+1-32],r=e[t+2-32],i=e[t+3-32],a=e[t+4-32],s=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=xt(e[t+0-32],n,r),e[t+1+0]=e[t+0+32]=xt(n,r,i),e[t+2+0]=e[t+1+32]=e[t+0+64]=xt(r,i,a),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=xt(i,a,s),e[t+3+32]=e[t+2+64]=e[t+1+96]=xt(a,s,o),e[t+3+64]=e[t+2+96]=xt(s,o,l),e[t+3+96]=xt(o,l,l)}function At(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],a=e[t-1-32],s=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=a+s+1>>1,e[t+1+0]=e[t+2+64]=s+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=xt(i,r,n),e[t+0+64]=xt(r,n,a),e[t+0+32]=e[t+1+96]=xt(n,a,s),e[t+1+32]=e[t+2+96]=xt(a,s,o),e[t+2+32]=e[t+3+96]=xt(s,o,l),e[t+3+32]=xt(o,l,c)}function jt(e,t){var n=e[t+0-32],r=e[t+1-32],i=e[t+2-32],a=e[t+3-32],s=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+r+1>>1,e[t+1+0]=e[t+0+64]=r+i+1>>1,e[t+2+0]=e[t+1+64]=i+a+1>>1,e[t+3+0]=e[t+2+64]=a+s+1>>1,e[t+0+32]=xt(n,r,i),e[t+1+32]=e[t+0+96]=xt(r,i,a),e[t+2+32]=e[t+1+96]=xt(i,a,s),e[t+3+32]=e[t+2+96]=xt(a,s,o),e[t+3+64]=xt(s,o,l),e[t+3+96]=xt(o,l,c)}function Pt(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],a=e[t-1+96];e[t+0+0]=n+r+1>>1,e[t+2+0]=e[t+0+32]=r+i+1>>1,e[t+2+32]=e[t+0+64]=i+a+1>>1,e[t+1+0]=xt(n,r,i),e[t+3+0]=e[t+1+32]=xt(r,i,a),e[t+3+32]=e[t+1+64]=xt(i,a,a),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=a}function It(e,t){var n=e[t-1+0],r=e[t-1+32],i=e[t-1+64],a=e[t-1+96],s=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+s+1>>1,e[t+0+32]=e[t+2+64]=r+n+1>>1,e[t+0+64]=e[t+2+96]=i+r+1>>1,e[t+0+96]=a+i+1>>1,e[t+3+0]=xt(o,l,c),e[t+2+0]=xt(s,o,l),e[t+1+0]=e[t+3+32]=xt(n,s,o),e[t+1+32]=e[t+3+64]=xt(r,n,s),e[t+1+64]=e[t+3+96]=xt(i,r,n),e[t+1+96]=xt(a,i,r)}function Ct(e,t){var n;for(n=0;8>n;++n)r(e,t+32*n,e,t-32,8)}function Et(e,t){var n;for(n=0;8>n;++n)i(e,t,e[t-1],8),t+=32}function Lt(e,t,n){var r;for(r=0;8>r;++r)i(t,n+32*r,e,8)}function Dt(e,t){var n,r=8;for(n=0;8>n;++n)r+=e[t+n-32]+e[t-1+32*n];Lt(r>>4,e,t)}function Tt(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t+n-32];Lt(r>>3,e,t)}function Ot(e,t){var n,r=4;for(n=0;8>n;++n)r+=e[t-1+32*n];Lt(r>>3,e,t)}function Mt(e,t){Lt(128,e,t)}function Rt(e,t,n){var r=e[t-n],i=e[t+0],a=3*(i-r)+Er[1020+e[t-2*n]-e[t+n]],s=Lr[112+(a+4>>3)];e[t-n]=Dr[255+r+Lr[112+(a+3>>3)]],e[t+0]=Dr[255+i-s]}function Ft(e,t,n,r){var i=e[t+0],a=e[t+n];return Tr[255+e[t-2*n]-e[t-n]]>r||Tr[255+a-i]>r}function Ut(e,t,n,r){return 4*Tr[255+e[t-n]-e[t+0]]+Tr[255+e[t-2*n]-e[t+n]]<=r}function Bt(e,t,n,r,i){var a=e[t-3*n],s=e[t-2*n],o=e[t-n],l=e[t+0],c=e[t+n],d=e[t+2*n],u=e[t+3*n];return 4*Tr[255+o-l]+Tr[255+s-c]>r?0:Tr[255+e[t-4*n]-a]<=i&&Tr[255+a-s]<=i&&Tr[255+s-o]<=i&&Tr[255+u-d]<=i&&Tr[255+d-c]<=i&&Tr[255+c-l]<=i}function zt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)Ut(e,t+r,n,i)&&Rt(e,t+r,n)}function qt(e,t,n,r){var i=2*r+1;for(r=0;16>r;++r)Ut(e,t+r*n,1,i)&&Rt(e,t+r*n,1)}function Vt(e,t,n,r){var i;for(i=3;0<i;--i)zt(e,t+=4*n,n,r)}function Ht(e,t,n,r){var i;for(i=3;0<i;--i)qt(e,t+=4,n,r)}function Wt(e,t,n,r,i,a,s,o){for(a=2*a+1;0<i--;){if(Bt(e,t,n,a,s))if(Ft(e,t,n,o))Rt(e,t,n);else{var l=e,c=t,d=n,u=l[c-2*d],h=l[c-d],f=l[c+0],p=l[c+d],m=l[c+2*d],g=27*(b=Er[1020+3*(f-h)+Er[1020+u-p]])+63>>7,y=18*b+63>>7,b=9*b+63>>7;l[c-3*d]=Dr[255+l[c-3*d]+b],l[c-2*d]=Dr[255+u+y],l[c-d]=Dr[255+h+g],l[c+0]=Dr[255+f-g],l[c+d]=Dr[255+p-y],l[c+2*d]=Dr[255+m-b]}t+=r}}function Gt(e,t,n,r,i,a,s,o){for(a=2*a+1;0<i--;){if(Bt(e,t,n,a,s))if(Ft(e,t,n,o))Rt(e,t,n);else{var l=e,c=t,d=n,u=l[c-d],h=l[c+0],f=l[c+d],p=Lr[112+(4+(m=3*(h-u))>>3)],m=Lr[112+(m+3>>3)],g=p+1>>1;l[c-2*d]=Dr[255+l[c-2*d]+g],l[c-d]=Dr[255+u+m],l[c+0]=Dr[255+h-p],l[c+d]=Dr[255+f-g]}t+=r}}function Yt(e,t,n,r,i,a){Wt(e,t,n,1,16,r,i,a)}function Kt(e,t,n,r,i,a){Wt(e,t,1,n,16,r,i,a)}function Jt(e,t,n,r,i,a){var s;for(s=3;0<s;--s)Gt(e,t+=4*n,n,1,16,r,i,a)}function $t(e,t,n,r,i,a){var s;for(s=3;0<s;--s)Gt(e,t+=4,1,n,16,r,i,a)}function Xt(e,t,n,r,i,a,s,o){Wt(e,t,i,1,8,a,s,o),Wt(n,r,i,1,8,a,s,o)}function Qt(e,t,n,r,i,a,s,o){Wt(e,t,1,i,8,a,s,o),Wt(n,r,1,i,8,a,s,o)}function Zt(e,t,n,r,i,a,s,o){Gt(e,t+4*i,i,1,8,a,s,o),Gt(n,r+4*i,i,1,8,a,s,o)}function en(e,t,n,r,i,a,s,o){Gt(e,t+4,1,i,8,a,s,o),Gt(n,r+4,1,i,8,a,s,o)}function tn(){this.ba=new se,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function an(){this.ua=0,this.Wa=new O,this.vb=new O,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new f,this.yc=new u}function sn(){this.xb=this.a=0,this.l=new Ge,this.ca=new se,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new an,this.ab=0,this.gc=s(4,rn),this.Oc=0}function on(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ln(e,t,n,r,i,a,s){for(e=null==e?0:e[t+0],t=0;t<s;++t)i[a+t]=e+n[r+t]&255,e=i[a+t]}function cn(e,t,n,r,i,a,s){var o;if(null==e)ln(null,null,n,r,i,a,s);else for(o=0;o<s;++o)i[a+o]=e[t+o]+n[r+o]&255}function dn(e,t,n,r,i,a,s){if(null==e)ln(null,null,n,r,i,a,s);else{var o,l=e[t+0],c=l,d=l;for(o=0;o<s;++o)c=d+(l=e[t+o])-c,d=n[r+o]+(-256&c?0>c?0:255:c)&255,c=l,i[a+o]=d}}function un(e,n,i,s){var o=n.width,l=n.o;if(t(null!=e&&null!=n),0>i||0>=s||i+s>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new on,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=a(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,u=e.P,h=e.qc,f=e.mb,p=e.nb,m=u+1,g=h-1,b=c.l;if(t(null!=d&&null!=f&&null!=n),mi[0]=null,mi[1]=ln,mi[2]=cn,mi[3]=dn,c.ca=f,c.tb=p,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=h)n=0;else if(c.$a=3&d[u+0],c.Z=d[u+0]>>2&3,c.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)n=0;else if(b.put=fe,b.ac=he,b.bc=pe,b.ma=c,b.width=n.width,b.height=n.height,b.Da=n.Da,b.v=n.v,b.va=n.va,b.j=n.j,b.o=n.o,c.$a)e:{t(1==c.$a),n=Pe();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,y(n.m,d,m,g),!Ie(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ne(n.s)?(c.ic=1,d=n.c*n.i,n.Ta=null,n.Ua=0,n.V=a(d),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Ce(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=g>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:s=l-i}t(null!=e.ga),t(i+s<=l);e:{if(n=(d=e.ga).c,l=d.l.o,0==d.$a){if(m=e.rc,g=e.Vc,b=e.Fa,u=e.P+1+i*n,h=e.mb,f=e.nb+i*n,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=mi[d.Z]),c=0;c<s;++c)mi[d.Z](m,g,b,u,h,f,n),m=h,g=f,f+=n,u+=n;else for(c=0;c<s;++c)r(h,f,b,u,n),m=h,g=f,f+=n,u+=n;e.rc=m,e.Vc=g}else{if(t(null!=d.mc),n=i+s,t(null!=(c=d.mc)),t(n<=c.i),c.C>=n)n=1;else if(d.ic||gn(),d.ic){d=c.V,m=c.Ba,g=c.c;var v=c.i,x=(b=1,u=c.$/g,h=c.$%g,f=c.m,p=c.s,c.$),w=g*v,_=g*n,S=p.wc,A=x<_?xe(p,h,u):null;t(x<=w),t(n<=v),t(Ne(p));t:for(;;){for(;!f.h&&x<_;){if(h&S||(A=xe(p,h,u)),t(null!=A),k(f),256>(v=be(A.G[0],A.H[0],f)))d[m+x]=v,++x,++h>=g&&(h=0,++u<=n&&!(u%16)&&ke(c,u));else{if(!(280>v)){b=0;break t}v=ge(v-256,f);var j,P=be(A.G[4],A.H[4],f);if(k(f),!(x>=(P=ye(g,P=ge(P,f)))&&w-x>=v)){b=0;break t}for(j=0;j<v;++j)d[m+x+j]=d[m+x+j-P];for(x+=v,h+=v;h>=g;)h-=g,++u<=n&&!(u%16)&&ke(c,u);x<_&&h&S&&(A=xe(p,h,u))}t(f.h==N(f))}ke(c,u>n?n:u);break t}!b||f.h&&x<w?(b=0,c.a=f.h?5:3):c.$=x,n=b}else n=Ae(c,c.V,c.Ba,c.c,c.i,n,Ee);if(!n){s=0;break e}}i+s>=l&&(e.Cc=1),s=1}if(!s)return null;if(e.Cc&&(null!=(s=e.ga)&&(s.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+i*o}function hn(e,t,n,r,i,a){for(;0<i--;){var s,o=e,l=t+(n?1:0),c=e,d=t+(n?0:3);for(s=0;s<r;++s){var u=c[d+4*s];255!=u&&(u*=32897,o[l+4*s+0]=o[l+4*s+0]*u>>23,o[l+4*s+1]=o[l+4*s+1]*u>>23,o[l+4*s+2]=o[l+4*s+2]*u>>23)}t+=a}}function fn(e,t,n,r,i){for(;0<r--;){var a;for(a=0;a<n;++a){var s=e[t+2*a+0],o=15&(c=e[t+2*a+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*a+0]=(240&s|s>>4)*l>>16&240|(15&s|s<<4)*l>>16>>4&15,e[t+2*a+1]=240&c|o}t+=i}}function pn(e,t,n,r,i,a,s,o){var l,c,d=255;for(c=0;c<i;++c){for(l=0;l<r;++l){var u=e[t+l];a[s+4*l]=u,d&=u}t+=n,s+=o}return 255!=d}function mn(e,t,n,r,i){var a;for(a=0;a<i;++a)n[r+a]=e[t+a]>>8}function gn(){_r=hn,Nr=fn,Sr=pn,kr=mn}function yn(n,r,i){e[n]=function(e,n,a,s,o,l,c,d,u,h,f,p,m,g,y,b,v){var x,w=v-1>>1,_=o[l+0]|c[d+0]<<16,N=u[h+0]|f[p+0]<<16;t(null!=e);var S=3*_+N+131074>>2;for(r(e[n+0],255&S,S>>16,m,g),null!=a&&(S=3*N+_+131074>>2,r(a[s+0],255&S,S>>16,y,b)),x=1;x<=w;++x){var k=o[l+x]|c[d+x]<<16,A=u[h+x]|f[p+x]<<16,j=_+k+N+A+524296,P=j+2*(k+N)>>3;S=P+_>>1,_=(j=j+2*(_+A)>>3)+k>>1,r(e[n+2*x-1],255&S,S>>16,m,g+(2*x-1)*i),r(e[n+2*x-0],255&_,_>>16,m,g+(2*x-0)*i),null!=a&&(S=j+N>>1,_=P+A>>1,r(a[s+2*x-1],255&S,S>>16,y,b+(2*x-1)*i),r(a[s+2*x+0],255&_,_>>16,y,b+(2*x+0)*i)),_=k,N=A}1&v||(S=3*_+N+131074>>2,r(e[n+v-1],255&S,S>>16,m,g+(v-1)*i),null!=a&&(S=3*N+_+131074>>2,r(a[s+v-1],255&S,S>>16,y,b+(v-1)*i)))}}function bn(){gi[Or]=yi,gi[Mr]=vi,gi[Rr]=bi,gi[Fr]=xi,gi[Ur]=wi,gi[Br]=_i,gi[zr]=Ni,gi[qr]=vi,gi[Vr]=xi,gi[Hr]=wi,gi[Wr]=_i}function vn(e){return e&~Ii?0>e?0:255:e>>Pi}function xn(e,t){return vn((19077*e>>8)+(26149*t>>8)-14234)}function wn(e,t,n){return vn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function _n(e,t){return vn((19077*e>>8)+(33050*t>>8)-17685)}function Nn(e,t,n,r,i){r[i+0]=xn(e,n),r[i+1]=wn(e,t,n),r[i+2]=_n(e,t)}function Sn(e,t,n,r,i){r[i+0]=_n(e,t),r[i+1]=wn(e,t,n),r[i+2]=xn(e,n)}function kn(e,t,n,r,i){var a=wn(e,t,n);t=a<<3&224|_n(e,t)>>3,r[i+0]=248&xn(e,n)|a>>5,r[i+1]=t}function An(e,t,n,r,i){var a=240&_n(e,t)|15;r[i+0]=240&xn(e,n)|wn(e,t,n)>>4,r[i+1]=a}function jn(e,t,n,r,i){r[i+0]=255,Nn(e,t,n,r,i+1)}function Pn(e,t,n,r,i){Sn(e,t,n,r,i),r[i+3]=255}function In(e,t,n,r,i){Nn(e,t,n,r,i),r[i+3]=255}function We(e,t){return 0>e?0:e>t?t:e}function Cn(t,n,r){e[t]=function(e,t,i,a,s,o,l,c,d){for(var u=c+(-2&d)*r;c!=u;)n(e[t+0],i[a+0],s[o+0],l,c),n(e[t+1],i[a+0],s[o+0],l,c+r),t+=2,++a,++o,c+=2*r;1&d&&n(e[t+0],i[a+0],s[o+0],l,c)}}function En(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Ln(e,t,n,r,i){switch(e>>>30){case 3:ar(t,n,r,i,0);break;case 2:sr(t,n,r,i);break;case 1:lr(t,n,r,i)}}function Dn(e,t){var n,a,s=t.M,o=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,h=e.oc,f=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)d[u+32*n-1]=129,h[f+32*n-1]=129;for(0<s?l[c-1-32]=d[u-1-32]=h[f-1-32]=129:(i(l,c-32-1,127,21),i(d,u-32-1,127,9),i(h,f-32-1,127,9)),a=0;a<e.za;++a){var p=t.ya[t.aa+a];if(0<a){for(n=-1;16>n;++n)r(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)r(d,u+32*n-4,d,u+32*n+4,4),r(h,f+32*n-4,h,f+32*n+4,4)}var m=e.Gd,g=e.Hd+a,y=p.ad,b=p.Hc;if(0<s&&(r(l,c-32,m[g].y,0,16),r(d,u-32,m[g].f,0,8),r(h,f-32,m[g].ea,0,8)),p.Za){var v=l,x=c-32+16;for(0<s&&(a>=e.za-1?i(v,x,m[g].y[15],4):r(v,x,m[g+1].y,0,4)),n=0;4>n;n++)v[x+128+n]=v[x+256+n]=v[x+384+n]=v[x+0+n];for(n=0;16>n;++n,b<<=2)v=l,x=c+Ri[n],ui[p.Ob[n]](v,x),Ln(b,y,16*+n,v,x)}else if(v=En(a,s,p.Ob[0]),di[v](l,c),0!=b)for(n=0;16>n;++n,b<<=2)Ln(b,y,16*+n,l,c+Ri[n]);for(n=p.Gc,v=En(a,s,p.Dd),hi[v](d,u),hi[v](h,f),b=y,v=d,x=u,255&(p=0|n)&&(170&p?or(b,256,v,x):cr(b,256,v,x)),p=h,b=f,255&(n>>=8)&&(170&n?or(y,320,p,b):cr(y,320,p,b)),s<e.Ub-1&&(r(m[g].y,0,l,c+480,16),r(m[g].f,0,d,u+224,8),r(m[g].ea,0,h,f+224,8)),n=8*o*e.B,m=e.sa,g=e.ta+16*a+16*o*e.R,y=e.qa,p=e.ra+8*a+n,b=e.Ha,v=e.Ia+8*a+n,n=0;16>n;++n)r(m,g+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)r(y,p+n*e.B,d,u+32*n,8),r(b,v+n*e.B,h,f+32*n,8)}}function Tn(e,r,i,a,s,o,l,c,d){var u=[0],h=[0],f=0,p=null!=d?d.kd:0,m=null!=d?d:new nn;if(null==e||12>i)return 7;m.data=e,m.w=r,m.ha=i,r=[r],i=[i],m.gb=[m.gb];e:{var g=r,b=i,v=m.gb;if(t(null!=e),t(null!=b),t(null!=v),v[0]=0,12<=b[0]&&!n(e,g[0],"RIFF")){if(n(e,g[0]+8,"WEBP")){v=3;break e}var x=L(e,g[0]+4);if(12>x||4294967286<x){v=3;break e}if(p&&x>b[0]-8){v=7;break e}v[0]=x,g[0]+=12,b[0]-=12}v=0}if(0!=v)return v;for(x=0<m.gb[0],i=i[0];;){e:{var _=e;b=r,v=i;var N=u,S=h,k=g=[0];if((P=f=[f])[0]=0,8>v[0])v=7;else{if(!n(_,b[0],"VP8X")){if(10!=L(_,b[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var A=L(_,b[0]+8),j=1+E(_,b[0]+12);if(2147483648<=j*(_=1+E(_,b[0]+15))){v=3;break e}null!=k&&(k[0]=A),null!=N&&(N[0]=j),null!=S&&(S[0]=_),b[0]+=18,v[0]-=18,P[0]=1}v=0}}if(f=f[0],g=g[0],0!=v)return v;if(b=!!(2&g),!x&&f)return 3;if(null!=o&&(o[0]=!!(16&g)),null!=l&&(l[0]=b),null!=c&&(c[0]=0),l=u[0],g=h[0],f&&b&&null==d){v=0;break}if(4>i){v=7;break}if(x&&f||!x&&!f&&!n(e,r[0],"ALPH")){i=[i],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];e:{A=e,v=r,x=i;var P=m.gb;N=m.na,S=m.P,k=m.Sa,j=22,t(null!=A),t(null!=x),_=v[0];var I=x[0];for(t(null!=N),t(null!=k),N[0]=null,S[0]=null,k[0]=0;;){if(v[0]=_,x[0]=I,8>I){v=7;break e}var C=L(A,_+4);if(4294967286<C){v=3;break e}var D=8+C+1&-2;if(j+=D,0<P&&j>P){v=3;break e}if(!n(A,_,"VP8 ")||!n(A,_,"VP8L")){v=0;break e}if(I[0]<D){v=7;break e}n(A,_,"ALPH")||(N[0]=A,S[0]=_+8,k[0]=C),_+=D,I-=D}}if(i=i[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=v)break}i=[i],m.Ja=[m.Ja],m.xa=[m.xa];e:if(P=e,v=r,x=i,N=m.gb[0],S=m.Ja,k=m.xa,A=v[0],_=!n(P,A,"VP8 "),j=!n(P,A,"VP8L"),t(null!=P),t(null!=x),t(null!=S),t(null!=k),8>x[0])v=7;else{if(_||j){if(P=L(P,A+4),12<=N&&P>N-12){v=3;break e}if(p&&P>x[0]-8){v=7;break e}S[0]=P,v[0]+=8,x[0]-=8,k[0]=j}else k[0]=5<=x[0]&&47==P[A+0]&&!(P[A+4]>>5),S[0]=x[0];v=0}if(i=i[0],m.Ja=m.Ja[0],m.xa=m.xa[0],r=r[0],0!=v)break;if(4294967286<m.Ja)return 3;if(null==c||b||(c[0]=m.xa?2:1),l=[l],g=[g],m.xa){if(5>i){v=7;break}c=l,p=g,b=o,null==e||5>i?e=0:5<=i&&47==e[r+0]&&!(e[r+4]>>5)?(x=[0],P=[0],N=[0],y(S=new w,e,r,i),me(S,x,P,N)?(null!=c&&(c[0]=x[0]),null!=p&&(p[0]=P[0]),null!=b&&(b[0]=N[0]),e=1):e=0):e=0}else{if(10>i){v=7;break}c=g,null==e||10>i||!Je(e,r+3,i-3)?e=0:(p=e[r+0]|e[r+1]<<8|e[r+2]<<16,b=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=m.Ja||!b||!e?e=0:(l&&(l[0]=b),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],f&&(u[0]!=l||h[0]!=g))return 3;null!=d&&(d[0]=m,d.offset=r-d.w,t(4294967286>r-d.w),t(d.offset==d.ha-i));break}return 0==v||7==v&&f&&null==d?(null!=o&&(o[0]|=null!=m.na&&0<m.na.length),null!=a&&(a[0]=l),null!=s&&(s[0]=g),0):v}function On(e,t,n){var r=t.width,i=t.height,a=0,s=0,o=r,l=i;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,a=e.v,s=e.j,11>n||(a&=-2,s&=-2),0>a||0>s||0>=o||0>=l||a+o>r||s+l>i))return 0;if(t.v=a,t.j=s,t.va=a+o,t.o=s+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!M(o,l,n=[e.ib],a=[e.hb]))return 0;t.ib=n[0],t.hb=a[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*i/4,t.Kb=0),1}function Mn(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Rn(e,t,n,r){if(null==r||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var i=n.cd,s=n.bd,o=-2&n.v,l=-2&n.j;if(0>o||0>l||0>=i||0>=s||o+i>e||l+s>t)return 2;e=i,t=s}if(n.da){if(!M(e,t,i=[n.ib],s=[n.hb]))return 2;e=i[0],t=s[0]}}r.width=e,r.height=t;e:{var c=r.width,d=r.height;if(e=r.S,0>=c||0>=d||!(e>=Or&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){o=s=i=t=0;var u=(l=c*Bi[e])*d;if(11>e||(s=(d+1)/2*(t=(c+1)/2),12==e&&(o=(i=c)*d)),null==(d=a(u+2*s+o))){e=1;break e}r.sd=d,11>e?((c=r.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=r.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=s,c.ea=d,c.W=0+u+s,c.Db=t,c.Ed=s,12==e&&(c.F=d,c.J=0+u+2*s),c.Tc=o,c.lb=i)}if(t=1,i=r.S,s=r.width,o=r.height,i>=Or&&13>i)if(11>i)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+s<=e.size,t&=l>=s*Bi[i],t&=null!=e.eb;else{e=r.f.kb,l=(s+1)/2,u=(o+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var h=Math.abs(e.Db),f=Math.abs(e.lb),p=f*(o-1)+s;t&=c*(o-1)+s<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&c>=s&d>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==i&&(t&=f>=s,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=Mn(r)),e}var Fn=64,Un=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Bn=24,zn=32,qn=8,Vn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];U("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return z(z(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return z(e,t[n-1])},e.Predictor7=function(e,t,n){return z(e,t[n+0])},e.Predictor8=function(e,t,n){return z(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return z(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return z(z(e,t[n-1]),z(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var r=t[n+0];return 0>=H(r>>24&255,e>>24&255,(t=t[n-1])>>24&255)+H(r>>16&255,e>>16&255,t>>16&255)+H(r>>8&255,e>>8&255,t>>8&255)+H(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,n){var r=t[n+0];return(q((e>>24&255)+(r>>24&255)-((t=t[n-1])>>24&255))<<24|q((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|q((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|q((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var r=t[n-1];return(V((e=z(e,t[n+0]))>>24&255,r>>24&255)<<24|V(e>>16&255,r>>16&255)<<16|V(e>>8&255,r>>8&255)<<8|V(255&e,255&r))>>>0};var Hn=e.PredictorAdd0;e.PredictorAdd1=W,U("Predictor2","PredictorAdd2"),U("Predictor3","PredictorAdd3"),U("Predictor4","PredictorAdd4"),U("Predictor5","PredictorAdd5"),U("Predictor6","PredictorAdd6"),U("Predictor7","PredictorAdd7"),U("Predictor8","PredictorAdd8"),U("Predictor9","PredictorAdd9"),U("Predictor10","PredictorAdd10"),U("Predictor11","PredictorAdd11"),U("Predictor12","PredictorAdd12"),U("Predictor13","PredictorAdd13");var Wn=e.PredictorAdd2;J("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),J("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Gn,Yn=e.ColorIndexInverseTransform,Kn=e.MapARGB,Jn=e.VP8LColorIndexInverseTransformAlpha,$n=e.MapAlpha,Xn=e.VP8LPredictorsAdd=[];Xn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Qn,Zn,er,tr,nr,rr,ir,ar,sr,or,lr,cr,dr,ur,hr,fr,pr,mr,gr,yr,br,vr,xr,wr,_r,Nr,Sr,kr,Ar=a(511),jr=a(2041),Pr=a(225),Ir=a(767),Cr=0,Er=jr,Lr=Pr,Dr=Ir,Tr=Ar,Or=0,Mr=1,Rr=2,Fr=3,Ur=4,Br=5,zr=6,qr=7,Vr=8,Hr=9,Wr=10,Gr=[2,3,7],Yr=[3,3,11],Kr=[280,256,256,256,40],Jr=[0,1,1,1,0],$r=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xr=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zr=8,ei=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],ti=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ni=null,ri=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],ii=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ai=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],si=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],li=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ci=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],di=[],ui=[],hi=[],fi=1,pi=2,mi=[],gi=[];yn("UpsampleRgbLinePair",Nn,3),yn("UpsampleBgrLinePair",Sn,3),yn("UpsampleRgbaLinePair",In,4),yn("UpsampleBgraLinePair",Pn,4),yn("UpsampleArgbLinePair",jn,4),yn("UpsampleRgba4444LinePair",An,2),yn("UpsampleRgb565LinePair",kn,2);var yi=e.UpsampleRgbLinePair,bi=e.UpsampleBgrLinePair,vi=e.UpsampleRgbaLinePair,xi=e.UpsampleBgraLinePair,wi=e.UpsampleArgbLinePair,_i=e.UpsampleRgba4444LinePair,Ni=e.UpsampleRgb565LinePair,Si=16,ki=1<<Si-1,Ai=-227,ji=482,Pi=6,Ii=(256<<Pi)-1,Ci=0,Ei=a(256),Li=a(256),Di=a(256),Ti=a(256),Oi=a(ji-Ai),Mi=a(ji-Ai);Cn("YuvToRgbRow",Nn,3),Cn("YuvToBgrRow",Sn,3),Cn("YuvToRgbaRow",In,4),Cn("YuvToBgraRow",Pn,4),Cn("YuvToArgbRow",jn,4),Cn("YuvToRgba4444Row",An,2),Cn("YuvToRgb565Row",kn,2);var Ri=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Fi=[0,2,8],Ui=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(e,n,o,l,c){var d=Mr,u=new tn,h=new se;u.ba=h,h.S=d,h.width=[h.width],h.height=[h.height];var f=h.width,p=h.height,m=new oe;if(null==m||null==e)var g=2;else t(null!=m),g=Tn(e,n,o,m.width,m.height,m.Pd,m.Qd,m.format,null);if(0!=g?f=0:(null!=f&&(f[0]=m.width[0]),null!=p&&(p[0]=m.height[0]),f=1),f){h.width=h.width[0],h.height=h.height[0],null!=l&&(l[0]=h.width),null!=c&&(c[0]=h.height);e:{if(l=new Ge,(c=new nn).data=e,c.w=n,c.ha=o,c.kd=1,n=[0],t(null!=c),(0==(e=Tn(c.data,c.w,c.ha,null,null,null,n,null,c))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=u),l.data=c.data,l.w=c.w+c.offset,l.ha=c.ha-c.offset,l.put=fe,l.ac=he,l.bc=pe,l.ma=u,c.xa){if(null==(e=Pe())){u=1;break e}if(function(e,n){var r=[0],i=[0],a=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,y(e.m,n.data,n.w,n.ha),!me(e.m,r,i,a)){e.a=3;break t}if(e.xb=pi,n.width=r[0],n.height=i[0],!Ie(r[0],i[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(n=Rn(l.width,l.height,u.Oa,u.ba))){t:{l=e;n:for(;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(o=l.l)),t(null!=(c=o.ma)),0!=l.xb){if(l.ca=c.ba,l.tb=c.tb,t(null!=l.ca),!On(c.Oa,o,Fr)){l.a=2;break n}if(!Ce(l,o.width))break n;if(o.da)break n;if((o.da||re(l.ca.S))&&gn(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&gn()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!D(l.s.vb,l.s.Wa.Xa)){l.a=1;break n}l.xb=0}if(!Ae(l,l.V,l.Ba,l.c,l.i,o.o,_e))break n;c.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(n=e.a)}else n=e.a}else{if(null==(e=new Ye)){u=1;break e}if(e.Fa=c.na,e.P=c.P,e.qc=c.Sa,$e(e,l)){if(0==(n=Rn(l.width,l.height,u.Oa,u.ba))){if(e.Aa=0,o=u.Oa,t(null!=(c=e)),null!=o){if(0<(f=0>(f=o.Md)?0:100<f?255:255*f/100)){for(p=m=0;4>p;++p)12>(g=c.pb[p]).lc&&(g.ia=f*Ui[0>g.lc?0:g.lc]>>3),m|=g.ia;m&&(alert("todo:VP8InitRandom"),c.ia=1)}c.Ga=o.Id,100<c.Ga?c.Ga=100:0>c.Ga&&(c.Ga=0)}(function(e,n){if(null==e)return 0;if(null==n)return Ke(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!$e(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var o=Fi[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-o>>4,e.zb=n.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+o>>4,e.Hb=n.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var d=e.Qa.Lb[o];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var u=e.gd[o][c],h=d;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var f=h;0<l.wb&&(f=4<l.wb?f>>2:f>>1)>9-l.wb&&(f=9-l.wb),1>f&&(f=1),u.dd=f,u.tc=2*h+f,u.ld=40<=h?2:15<=h?1:0}else u.tc=0;u.La=c}}}o=0}else Ke(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=1);t:{o=e.Ic,l=4*(f=e.za);var p=32*f,m=f+1,g=0<e.L?f*(0<e.Aa?2:1):0,y=(2==e.Aa?2:1)*f;if((u=l+832+(c=3*(16*o+Fi[e.L])/2*p)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)o=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=a(u),e.Fc=0,null==e.Ec){o=Ke(e,1,"no memory during frame initialization.");break t}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=l,e.Gd=s(p,Ve),e.Hd=0,e.rb=s(m+1,Ue),e.sb=1,e.wa=g?s(g,Fe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=f),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=s(y,ze),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=f),e.R=16*f,e.B=8*f,f=(p=Fi[e.L])*e.R,p=p/2*e.B,e.sa=u,e.ta=h+f,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,h+=c,e.mb=d?u:null,e.nb=d?h:null,t(h+d<=e.Fc+e.Vb),Qe(e),i(e.Ac,e.Bc,0,l),o=1}}if(o){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Cr){for(o=-255;255>=o;++o)Ar[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)jr[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Pr[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Ir[255+o]=0>o?0:255<o?255:o;Cr=1}ir=lt,ar=it,or=at,lr=st,cr=ot,sr=rt,dr=Yt,ur=Kt,hr=Xt,fr=Qt,pr=Jt,mr=$t,gr=Zt,yr=en,br=zt,vr=qt,xr=Vt,wr=Ht,ui[0]=Nt,ui[1]=dt,ui[2]=wt,ui[3]=_t,ui[4]=St,ui[5]=At,ui[6]=kt,ui[7]=jt,ui[8]=It,ui[9]=Pt,di[0]=gt,di[1]=ht,di[2]=ft,di[3]=pt,di[4]=yt,di[5]=bt,di[6]=vt,hi[0]=Dt,hi[1]=ut,hi[2]=Ct,hi[3]=Et,hi[4]=Ot,hi[5]=Tt,hi[6]=Mt,o=1}else o=0}o&&(o=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var s,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(s=0;s<c.za;++s){var d=l,u=c,h=u.Ac,f=u.Bc+4*s,p=u.zc,m=u.ya[u.aa+s];if(u.Qa.Bb?m.$b=P(d,u.Pa.jb[0])?2+P(d,u.Pa.jb[2]):P(d,u.Pa.jb[1]):m.$b=0,u.kc&&(m.Ad=P(d,u.Bd)),m.Za=!P(d,145)+0,m.Za){var g=m.Ob,y=0;for(u=0;4>u;++u){var b,v=p[0+u];for(b=0;4>b;++b){v=oi[h[f+b]][v];for(var x=ai[P(d,v[0])];0<x;)x=ai[2*x+P(d,v[x])];v=-x,h[f+b]=v}r(g,y,h,f,4),y+=4,p[0+u]=v}}else v=P(d,156)?P(d,128)?1:3:P(d,163)?2:0,m.Ob[0]=v,i(h,f,v,4),i(p,0,v,4);m.Dd=P(d,142)?P(d,114)?P(d,183)?1:3:2:0}if(c.m.Ka)return Ke(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,d=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],s=l.ya[l.aa+l.ja],f=l.kc?s.Ad:0)d.la=h.la=0,s.Za||(d.Na=h.Na=0),s.Hc=0,s.Gc=0,s.ia=0;else{var w,_;if(d=h,h=c,f=l.Pa.Xc,p=l.ya[l.aa+l.ja],m=l.pb[p.$b],u=p.ad,g=0,y=l.rb[l.sb-1],v=b=0,i(u,g,0,384),p.Za)var N=0,S=f[3];else{x=a(16);var k=d.Na+y.Na;if(k=ni(h,f[1],k,m.Eb,0,x,0),d.Na=y.Na=(0<k)+0,1<k)ir(x,0,u,g);else{var A=x[0]+3>>3;for(x=0;256>x;x+=16)u[g+x]=A}N=1,S=f[0]}var j=15&d.la,I=15&y.la;for(x=0;4>x;++x){var C=1&I;for(A=_=0;4>A;++A)j=j>>1|(C=(k=ni(h,S,k=C+(1&j),m.Sc,N,u,g))>N)<<7,_=_<<2|(3<k?3:1<k?2:0!=u[g+0]),g+=16;j>>=4,I=I>>1|C<<7,b=(b<<8|_)>>>0}for(S=j,N=I>>4,w=0;4>w;w+=2){for(_=0,j=d.la>>4+w,I=y.la>>4+w,x=0;2>x;++x){for(C=1&I,A=0;2>A;++A)k=C+(1&j),j=j>>1|(C=0<(k=ni(h,f[2],k,m.Qc,0,u,g)))<<3,_=_<<2|(3<k?3:1<k?2:0!=u[g+0]),g+=16;j>>=2,I=I>>1|C<<5}v|=_<<4*w,S|=j<<4<<w,N|=(240&I)<<w}d.la=S,y.la=N,p.Hc=b,p.Gc=v,p.ia=43690&v?0:m.ia,f=!(b|v)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[s.$b][s.Za],l.wa[l.Y+l.ja].La|=!f),c.Ka)return Ke(e,7,"Premature end-of-file encountered.")}if(Qe(e),l=n,c=1,s=(o=e).D,d=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)t:{if(s.M=o.M,s.uc=d,Dn(o,s),c=1,s=(_=o.D).Nb,d=(v=Fi[o.L])*o.R,h=v/2*o.B,x=16*s*o.R,A=8*s*o.B,f=o.sa,p=o.ta-d+x,m=o.qa,u=o.ra-h+A,g=o.Ha,y=o.Ia-h+A,I=0==(j=_.M),b=j>=o.Va-1,2==o.Aa&&Dn(o,_),_.uc)for(C=(k=o).D.M,t(k.D.uc),_=k.yb;_<k.Hb;++_){N=_,S=C;var E=(L=(z=k).D).Nb;w=z.R;var L=L.wa[L.Y+N],D=z.sa,T=z.ta+16*E*w+16*N,O=L.dd,M=L.tc;if(0!=M)if(t(3<=M),1==z.L)0<N&&vr(D,T,w,M+4),L.La&&wr(D,T,w,M),0<S&&br(D,T,w,M+4),L.La&&xr(D,T,w,M);else{var R=z.B,F=z.qa,U=z.ra+8*E*R+8*N,B=z.Ha,z=z.Ia+8*E*R+8*N;E=L.ld,0<N&&(ur(D,T,w,M+4,O,E),fr(F,U,B,z,R,M+4,O,E)),L.La&&(mr(D,T,w,M,O,E),yr(F,U,B,z,R,M,O,E)),0<S&&(dr(D,T,w,M+4,O,E),hr(F,U,B,z,R,M+4,O,E)),L.La&&(pr(D,T,w,M,O,E),gr(F,U,B,z,R,M,O,E))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(_=16*j,j=16*(j+1),I?(l.y=o.sa,l.O=o.ta+x,l.f=o.qa,l.N=o.ra+A,l.ea=o.Ha,l.W=o.Ia+A):(_-=v,l.y=f,l.O=p,l.f=m,l.N=u,l.ea=g,l.W=y),b||(j-=v),j>l.o&&(j=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&_<j&&(l.J=un(o,l,_,j-_),l.F=o.mb,null==l.F&&0==l.F.length)){c=Ke(o,3,"Could not decode alpha data.");break t}_<l.j&&(v=l.j-_,_=l.j,t(!(1&v)),l.O+=o.R*v,l.N+=o.B*(v>>1),l.W+=o.B*(v>>1),null!=l.F&&(l.J+=l.width*v)),_<j&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=_-l.j,l.U=l.va-l.v,l.T=j-_,c=l.put(l))}s+1!=o.Ic||b||(r(o.sa,o.ta-d,f,p+16*o.R,d),r(o.qa,o.ra-h,m,u+8*o.B,h),r(o.Ha,o.Ia-h,g,y+8*o.B,h))}if(!c)return Ke(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),o&=1}return o?(e.cb=0,o):0})(e,l)||(n=e.a)}}else n=e.a}0==n&&null!=u.Oa&&u.Oa.fd&&(n=Mn(u.ba))}u=n}d=0!=u?null:11>d?h.f.RGBA.eb:h.f.kb.y}else d=null;return d};var Bi=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",r=0;r<4;r++)n+=String.fromCharCode(e[t++]);return n}function d(e,t){return e[t+0]|e[t+1]<<8}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function h(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var f=[0],p=[0],m=[],g=new l,y=e,b=function(e,t){var n={},r=0,i=!1,a=0,s=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){for(h(e,t+=4),t+=8;t<e.length;){var o=c(e,t),l=h(e,t+=4);t+=4;var f=l+(1&l);switch(o){case"VP8 ":case"VP8L":void 0===n.frames[r]&&(n.frames[r]={}),(g=n.frames[r]).src_off=i?s:t-8,g.src_size=a+l+8,r++,i&&(i=!1,a=0,s=0);break;case"VP8X":(g=n.header={}).feature_flags=e[t];var p=t+4;g.canvas_width=1+u(e,p),p+=3,g.canvas_height=1+u(e,p),p+=3;break;case"ALPH":i=!0,a=f+8,s=t-8;break;case"ANIM":(g=n.header).bgcolor=h(e,t),p=t+4,g.loop_count=d(e,p),p+=2;break;case"ANMF":var m,g;(g=n.frames[r]={}).offset_x=2*u(e,t),t+=3,g.offset_y=2*u(e,t),t+=3,g.width=1+u(e,t),t+=3,g.height=1+u(e,t),t+=3,g.duration=u(e,t),t+=3,m=e[t++],g.dispose=1&m,g.blend=m>>1&1}"ANMF"!=o&&(t+=f)}return n}}(y,0);b.response=y,b.rgbaoutput=!0,b.dataurl=!1;var v=b.header?b.header:null,x=b.frames?b.frames:null;if(v){v.loop_counter=v.loop_count,f=[v.canvas_height],p=[v.canvas_width];for(var w=0;w<x.length&&0!=x[w].blend;w++);}var _=x[0],N=g.WebPDecodeRGBA(y,_.src_off,_.src_size,p,f);_.rgba=N,_.imgwidth=p[0],_.imgheight=f[0];for(var S=0;S<p[0]*f[0]*4;S++)m[S]=N[S];return this.width=p,this.height=f,this.data=m,this}!function(e){var t,n,r,i,a,s,o,l,c,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new s,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new s,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,s=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var u=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var i=0;Object.defineProperty(this,"posX",{get:function(){return i},set:function(e){isNaN(e)||(i=e)}});var a=0;Object.defineProperty(this,"posY",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var s=!1;Object.defineProperty(this,"autoPaging",{get:function(){return s},set:function(e){s=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof d&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var u=[];Object.defineProperty(this,"ctxStack",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=h(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=h(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var f=null,p=null;Object.defineProperty(this,"fontFaces",{get:function(){return p},set:function(e){f=null,p=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1];t[2];var r=t[3],i=t[4];t[5];var a=t[6],s=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(i)[2];i="px"===s?Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor):"em"===s?Math.floor(parseFloat(i)*this.pdf.getFontSize()):Math.floor(parseFloat(i)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(i);var o=function(e){var t,n,r=[],i=e.trim();if(""===i)return Pg;if(i in pg)return[pg[i]];for(;""!==i;){switch(n=null,t=(i=gg(i)).charAt(0)){case'"':case"'":n=yg(i.substring(1),t);break;default:n=bg(i)}if(null===n)return Pg;if(r.push(n[0]),""!==(i=gg(n[1]))&&","!==i.charAt(0))return Pg;i=i.replace(/^,/,"")}return r}(a);if(this.fontFaces){var l=function(e,t){if(null===f){var n=function(e){var t=[];return Object.keys(e).forEach(function(n){e[n].forEach(function(e){var r=null;switch(e){case"bold":r={family:n,weight:"bold"};break;case"italic":r={family:n,style:"italic"};break;case"bolditalic":r={family:n,weight:"bold",style:"italic"};break;case"":case"normal":r={family:n}}null!==r&&(r.ref={name:n,style:e},t.push(r))})}),t}(e.getFontList());f=function(e){for(var t={},n=0;n<e.length;++n){var r=ug(e[n]),i=r.family,a=r.stretch,s=r.style,o=r.weight;t[i]=t[i]||{},t[i][a]=t[i][a]||{},t[i][a][s]=t[i][a][s]||{},t[i][a][s][o]=r}return t}(n.concat(t))}return f}(this.pdf,this.fontFaces),c=o.map(function(e){return{family:e,stretch:"normal",weight:r,style:n}}),d=function(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},fg,n.genericFontFamilies||{}),a=null,s=null,o=0;o<t.length;++o)if(i[(a=ug(t[o])).family]&&(a.family=i[a.family]),e.hasOwnProperty(a.family)){s=e[a.family];break}if(!(s=s||e[r]))throw new Error("Could not find a font-family for the rule '"+mg(a)+"' and default family '"+r+"'.");if(s=function(e,t){if(t[e])return t[e];var n=lg[e],r=n<=lg.normal?-1:1,i=hg(t,og,n,r);if(!i)throw new Error("Could not find a matching font-stretch value for "+e);return i}(a.stretch,s),s=function(e,t){if(t[e])return t[e];for(var n=sg[e],r=0;r<n.length;++r)if(t[n[r]])return t[n[r]];throw new Error("Could not find a matching font-style for "+e)}(a.style,s),!(s=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=dg[e],r=hg(t,cg,n,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(a.weight,s)))throw new Error("Failed to resolve a font for the rule '"+mg(a)+"'.");return s}(l,c);this.pdf.setFont(d.ref.name,d.ref.style)}else{var u="";("bold"===r||parseInt(r,10)>=700||"bold"===n)&&(u="bold"),"italic"===n&&(u+="italic"),0===u.length&&(u="normal");for(var h="",p={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},m=0;m<o.length;m++){if(void 0!==this.pdf.internal.getFont(o[m],u,{noFallback:!0,disableWarning:!0})){h=o[m];break}if("bolditalic"===u&&void 0!==this.pdf.internal.getFont(o[m],"bold",{noFallback:!0,disableWarning:!0}))h=o[m],u="bold";else if(void 0!==this.pdf.internal.getFont(o[m],"normal",{noFallback:!0,disableWarning:!0})){h=o[m],u="normal";break}}if(""===h)for(var g=0;g<o.length;g++)if(p[o[g]]){h=p[o[g]];break}h=""===h?"Times":h,this.pdf.setFont(h,u)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,R.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,R.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};u.prototype.setLineDash=function(e){this.lineDash=e},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){x.call(this,"fill",!1)},u.prototype.stroke=function(){x.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw zp.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new s(e,t)},u.prototype.closePath=function(){var e=new s(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,jc.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new s(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(e.x,e.y)},u.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw zp.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new s(n.x,n.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},u.prototype.quadraticCurveTo=function(e,t,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t))throw zp.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var i=this.ctx.transform.applyToPoint(new s(n,r)),a=this.ctx.transform.applyToPoint(new s(e,t));this.path.push({type:"qct",x1:a.x,y1:a.y,x:i.x,y:i.y}),this.ctx.lastPoint=new s(i.x,i.y)},u.prototype.bezierCurveTo=function(e,t,n,r,i,a){if(isNaN(i)||isNaN(a)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw zp.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new s(i,a)),l=this.ctx.transform.applyToPoint(new s(e,t)),c=this.ctx.transform.applyToPoint(new s(n,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:o.x,y:o.y}),this.ctx.lastPoint=new s(o.x,o.y)},u.prototype.arc=function(e,t,n,r,i,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i))throw zp.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(a=Boolean(a),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new s(e,t));e=o.x,t=o.y;var l=this.ctx.transform.applyToPoint(new s(0,n)),c=this.ctx.transform.applyToPoint(new s(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(i-r)>=2*Math.PI&&(r=0,i=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:r,endAngle:i,counterclockwise:a})},u.prototype.arcTo=function(e,t,n,r,i){throw new Error("arcTo not implemented.")},u.prototype.rect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw zp.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},u.prototype.fillRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw zp.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var i={};"butt"!==this.lineCap&&(i.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(i.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,r),this.fill(),i.hasOwnProperty("lineCap")&&(this.lineCap=i.lineCap),i.hasOwnProperty("lineJoin")&&(this.lineJoin=i.lineJoin)}},u.prototype.strokeRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw zp.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,n,r),this.stroke())},u.prototype.clearRect=function(e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r))throw zp.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,r))},u.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},u.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(e){var t,n,r,i;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,r=0,i=0;else{var a=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==a)t=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),i=1;else if(null!==(a=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(a[1]),n=parseInt(a[2]),r=parseInt(a[3]),i=parseFloat(a[4]);else{if(i=1,"string"==typeof e&&"#"!==e.charAt(0)){var s=new Gp(e);e=s.ok?s.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,r=e.substring(3,4),r+=r):(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),r=parseInt(r,16)}}return{r:t,g:n,b:r,a:i,style:e}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw zp.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!f.call(this)){var i=T(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;P.call(this,{text:e,x:t,y:n,scale:a,angle:i,align:this.textAlign,maxWidth:r})}},u.prototype.strokeText=function(e,t,n,r){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw zp.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){r=isNaN(r)?void 0:r;var i=T(this.ctx.transform.rotation),a=this.ctx.transform.scaleX;P.call(this,{text:e,x:t,y:n,scale:a,renderingMode:"stroke",angle:i,align:this.textAlign,maxWidth:r})}},u.prototype.measureText=function(e){if("string"!=typeof e)throw zp.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),i=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:i*=Math.round(96*n/72*1e4)/1e4})},u.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw zp.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.rotate=function(e){if(isNaN(e))throw zp.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},u.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw zp.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},u.prototype.transform=function(e,t,n,r,i,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(r)||isNaN(i)||isNaN(a))throw zp.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new l(e,t,n,r,i,a);this.ctx.transform=this.ctx.transform.multiply(s)},u.prototype.setTransform=function(e,t,n,r,i,a){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,r=isNaN(r)?1:r,i=isNaN(i)?0:i,a=isNaN(a)?0:a,this.ctx.transform=new l(e,t,n,r,i,a)};var m=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(e,t,n,r,i,a,s,c,d){var u=this.pdf.getImageProperties(e),h=1,f=1,p=1,y=1;void 0!==r&&void 0!==c&&(p=c/r,y=d/i,h=u.width/r*c/r,f=u.height/i*d/i),void 0===a&&(a=t,s=n,t=0,n=0),void 0!==r&&void 0===c&&(c=r,d=i),void 0===r&&void 0===c&&(c=u.width,d=u.height);for(var x,_=this.ctx.transform.decompose(),N=T(_.rotate.shx),S=new l,k=(S=(S=(S=S.multiply(_.translate)).multiply(_.skew)).multiply(_.scale)).applyToRectangle(new o(a-t*p,s-n*y,r*h,i*f)),A=g.call(this,k),j=[],P=0;P<A.length;P+=1)-1===j.indexOf(A[P])&&j.push(A[P]);if(v(j),this.autoPaging)for(var I=j[0],C=j[j.length-1],E=I;E<C+1;E++){this.pdf.setPage(E);var L=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],D=1===E?this.posY+this.margin[0]:this.margin[0],O=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],R=1===E?0:O+(E-2)*M;if(0!==this.ctx.clip_path.length){var F=this.path;x=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(x,this.posX+this.margin[3],-R+D+this.ctx.prevPageLastElemOffset),w.call(this,"fill",!0),this.path=F}var U=JSON.parse(JSON.stringify(k));U=b([U],this.posX+this.margin[3],-R+D+this.ctx.prevPageLastElemOffset)[0];var B=(E>I||E<C)&&m.call(this);B&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],L,M,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",U.x,U.y,U.w,U.h,null,null,N),B&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",k.x,k.y,k.w,k.h,null,null,N)};var g=function(e,t,n){var r=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var i=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+i)/n)+1);break;case"arc":r.push(Math.floor((e.y+i-e.radius)/n)+1),r.push(Math.floor((e.y+i+e.radius)/n)+1);break;case"qct":var a=O(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((a.y+i)/n)+1),r.push(Math.floor((a.y+a.h+i)/n)+1);break;case"bct":var s=M(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((s.y+i)/n)+1),r.push(Math.floor((s.y+s.h+i)/n)+1);break;case"rect":r.push(Math.floor((e.y+i)/n)+1),r.push(Math.floor((e.y+e.h+i)/n)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)y.call(this);return r},y=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,r=this.lineCap,i=this.lineWidth,a=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=r,this.lineWidth=i,this.lineJoin=a},b=function(e,t,n){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=n;case"qct":e[r].x1+=t,e[r].y1+=n;default:e[r].x+=t,e[r].y+=n}return e},v=function(e){return e.sort(function(e,t){return e-t})},x=function(e,t){for(var n,r,i=this.fillStyle,a=this.strokeStyle,s=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],f=0;f<u.length;f++)if(void 0!==u[f].x)for(var p=g.call(this,u[f]),x=0;x<p.length;x+=1)-1===h.indexOf(p[x])&&h.push(p[x]);for(var _=0;_<h.length;_++)for(;this.pdf.internal.getNumberOfPages()<h[_];)y.call(this);if(v(h),this.autoPaging)for(var N=h[0],S=h[h.length-1],k=N;k<S+1;k++){this.pdf.setPage(k),this.fillStyle=i,this.strokeStyle=a,this.lineCap=s,this.lineWidth=l,this.lineJoin=c;var A=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],j=1===k?this.posY+this.margin[0]:this.margin[0],P=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],I=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],C=1===k?0:P+(k-2)*I;if(0!==this.ctx.clip_path.length){var E=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(n,this.posX+this.margin[3],-C+j+this.ctx.prevPageLastElemOffset),w.call(this,e,!0),this.path=E}if(r=JSON.parse(JSON.stringify(d)),this.path=b(r,this.posX+this.margin[3],-C+j+this.ctx.prevPageLastElemOffset),!1===t||0===k){var L=(k>N||k<S)&&m.call(this);L&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],A,I,null).clip().discardPath()),w.call(this,e,t),L&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,w.call(this,e,t),this.lineWidth=o;this.path=d},w=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!f.call(this))){for(var n,r,i=[],a=this.path,s=0;s<a.length;s++){var o=a[s];switch(o.type){case"begin":i.push({begin:!0});break;case"close":i.push({close:!0});break;case"mt":i.push({start:o,deltas:[],abs:[]});break;case"lt":var l=i.length;if(a[s-1]&&!isNaN(a[s-1].x)&&(n=[o.x-a[s-1].x,o.y-a[s-1].y],l>0))for(;l>=0;l--)if(!0!==i[l-1].close&&!0!==i[l-1].begin){i[l-1].deltas.push(n),i[l-1].abs.push(o);break}break;case"bct":n=[o.x1-a[s-1].x,o.y1-a[s-1].y,o.x2-a[s-1].x,o.y2-a[s-1].y,o.x-a[s-1].x,o.y-a[s-1].y],i[i.length-1].deltas.push(n);break;case"qct":var c=a[s-1].x+2/3*(o.x1-a[s-1].x),d=a[s-1].y+2/3*(o.y1-a[s-1].y),u=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),m=o.x,g=o.y;n=[c-a[s-1].x,d-a[s-1].y,u-a[s-1].x,h-a[s-1].y,m-a[s-1].x,g-a[s-1].y],i[i.length-1].deltas.push(n);break;case"arc":i.push({deltas:[],abs:[],arc:!0}),Array.isArray(i[i.length-1].abs)&&i[i.length-1].abs.push(o)}}r=t?null:"stroke"===e?"stroke":"fill";for(var y=!1,b=0;b<i.length;b++)if(i[b].arc)for(var v=i[b].abs,x=0;x<v.length;x++){var w=v[x];"arc"===w.type?S.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,t,!y):I.call(this,w.x,w.y),y=!0}else if(!0===i[b].close)this.pdf.internal.out("h"),y=!1;else if(!0!==i[b].begin){var _=i[b].start.x,N=i[b].start.y;C.call(this,i[b].deltas,_,N),y=!0}r&&k.call(this,r),t&&A.call(this)}},_=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},N=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(e,t,n,r,i,a,s,o,l){for(var c=L.call(this,n,r,i,a),d=0;d<c.length;d++){var u=c[d];0===d&&(l?j.call(this,u.x1+e,u.y1+t):I.call(this,u.x1+e,u.y1+t)),E.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}o?A.call(this):k.call(this,s)},k=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},A=function(){this.pdf.clip(),this.pdf.discardPath()},j=function(e,t){this.pdf.internal.out(n(e)+" "+r(t)+" m")},P=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),r=_.call(this,e.y),i=N.call(this,r)-n.h,a=this.ctx.transform.applyToPoint(new s(e.x,r)),c=this.ctx.transform.decompose(),d=new l;d=(d=(d=d.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var u,h,f,p=this.ctx.transform.applyToRectangle(new o(e.x,r,n.w,n.h)),y=d.applyToRectangle(new o(e.x,i,n.w,n.h)),x=g.call(this,y),S=[],k=0;k<x.length;k+=1)-1===S.indexOf(x[k])&&S.push(x[k]);if(v(S),this.autoPaging)for(var A=S[0],j=S[S.length-1],P=A;P<j+1;P++){this.pdf.setPage(P);var I=1===P?this.posY+this.margin[0]:this.margin[0],C=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],E=this.pdf.internal.pageSize.height-this.margin[2],L=E-this.margin[0],D=this.pdf.internal.pageSize.width-this.margin[1],T=D-this.margin[3],O=1===P?0:C+(P-2)*L;if(0!==this.ctx.clip_path.length){var M=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(u,this.posX+this.margin[3],-1*O+I),w.call(this,"fill",!0),this.path=M}var R=b([JSON.parse(JSON.stringify(y))],this.posX+this.margin[3],-O+I+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale);var F="text"!==this.autoPaging;if(F||R.y+R.h<=E){if(F||R.y>=I&&R.x<=D){var U=F?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||D-R.x)[0],B=b([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-O+I+this.ctx.prevPageLastElemOffset)[0],z=F&&(P>A||P<j)&&m.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],T,L,null).clip().discardPath()),this.pdf.text(U,B.x,B.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),z&&this.pdf.restoreGraphicsState()}}else R.y<E&&(this.ctx.prevPageLastElemOffset+=E-R.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=f)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),f=this.lineWidth,this.lineWidth=f*e.scale),this.pdf.text(e.text,a.x+this.posX,a.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=f)},I=function(e,t,i,a){i=i||0,a=a||0,this.pdf.internal.out(n(e+i)+" "+r(t+a)+" l")},C=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},E=function(e,n,r,s,o,l,c,d){this.pdf.internal.out([t(i(r+e)),t(a(s+n)),t(i(o+e)),t(a(l+n)),t(i(c+e)),t(a(d+n)),"c"].join(" "))},L=function(e,t,n,r){for(var i=2*Math.PI,a=Math.PI/2;t>n;)t-=i;var s=Math.abs(n-t);s<i&&r&&(s=i-s);for(var o=[],l=r?-1:1,c=t;s>1e-5;){var d=c+l*Math.min(s,a);o.push(D.call(this,e,c,d)),s-=Math.abs(d-c),c=d}return o},D=function(e,t,n){var r=(n-t)/2,i=e*Math.cos(r),a=e*Math.sin(r),s=i,o=-a,l=s*s+o*o,c=l+s*i+o*a,d=4/3*(Math.sqrt(2*l*c)-c)/(s*a-o*i),u=s-d*o,h=o+d*s,f=u,p=-h,m=r+t,g=Math.cos(m),y=Math.sin(m);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*g-h*y,y2:u*y+h*g,x3:f*g-p*y,y3:f*y+p*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},T=function(e){return 180*e/Math.PI},O=function(e,t,n,r,i,a){var s=e+.5*(n-e),l=t+.5*(r-t),c=i+.5*(n-i),d=a+.5*(r-a),u=Math.min(e,i,s,c),h=Math.max(e,i,s,c),f=Math.min(t,a,l,d),p=Math.max(t,a,l,d);return new o(u,f,h-u,p-f)},M=function(e,t,n,r,i,a,s,l){var c,d,u,h,f,p,m,g,y,b,v,x,w,_,N=n-e,S=r-t,k=i-n,A=a-r,j=s-i,P=l-a;for(d=0;d<41;d++)y=(m=(u=e+(c=d/40)*N)+c*((f=n+c*k)-u))+c*(f+c*(i+c*j-f)-m),b=(g=(h=t+c*S)+c*((p=r+c*A)-h))+c*(p+c*(a+c*P-p)-g),0==d?(v=y,x=b,w=y,_=b):(v=Math.min(v,y),x=Math.min(x,b),w=Math.max(w,y),_=Math.max(_,b));return new o(Math.round(v),Math.round(x),Math.round(w-v),Math.round(_-x))},R=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(bm.API),function(e){var t=function(e){var t,n,r,i,a,s,o,l,c,d;for(/[^\x00-\xFF]/.test(e),n=[],r=0,i=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;i>r;r+=4)0!==(a=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(s=(a=((a=((a=((a=(a-(d=a%85))/85)-(c=a%85))/85)-(l=a%85))/85)-(o=a%85))/85)%85,n.push(s+33,o+33,l+33,c+33,d+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,r,i,a,s=String,o="length",l=255,c="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),r=[],i=0,a=(e+=t="uuuuu"[d](e[o]%5||5))[o];a>i;i+=5)n=52200625*(e[c](i)-33)+614125*(e[c](i+1)-33)+7225*(e[c](i+2)-33)+85*(e[c](i+3)-33)+(e[c](i+4)-33),r.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(r,t[o]),s.fromCharCode.apply(s,r)},r=function(e){return e.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",r=0;r<e.length;r+=2)n+=String.fromCharCode("0x"+(e[r]+e[r+1]));return n},a=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=ud(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,s){var o=0,l=e||"",c=[];for("string"==typeof(s=s||[])&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=t(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=i(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=r(l),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=a(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(bm.API),(jg=bm.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var r=void 0;try{r=function(e,t,n){var r=new XMLHttpRequest,i=0,a=function(e){var t=e.length,n=[],r=String.fromCharCode;for(i=0;i<t;i+=1)n.push(r(255&e.charCodeAt(i)));return n.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?n(a(this.responseText)):n(void 0)}),r.send(null),t&&200===r.status)return a(r.responseText)}(e,t,n)}catch(zc){}return r}(e,t,n)},jg.loadImageFile=jg.loadFile,function(e){function t(){return(Up.html2canvas?Promise.resolve(Up.html2canvas):n.e(239).then(n.t.bind(n,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function r(){return(Up.DOMPurify?Promise.resolve(Up.DOMPurify):n.e(977).then(n.bind(n,7977))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var i=function(e){var t=(0,jc.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},a=function(e,t){var n=document.createElement(e);for(var r in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[r]=t.style[r];return n},s=function e(t,n){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),i=t.firstChild;i;i=i.nextSibling)!0!==n&&1===i.nodeType&&"SCRIPT"===i.nodeName||r.appendChild(e(i,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r},o=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),n);return(r=r.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(i(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e),t){case"string":return this.then(r).then(function(t){return this.set({src:a("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,i=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete i.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var a=0;a<n.length;++a){var s=n[a],o=s.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,s.ref.name,s.ref.style)}return i.windowHeight=i.windowHeight||0,i.windowHeight=0==i.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):i.windowHeight,t.context2d.save(!0),e(this.prop.container,i)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(e){if("object"!==i(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},o.prototype.get=function(e,t){return this.then(function(){var n=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(n):n})},o.prototype.setMargin=function(e){return this.then(function(){switch(i(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||bm.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},o.prototype.setProgress=function(e,t,n,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,n,r){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},o.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return n.updateProgress(null,e),t}).then(e,t).then(function(e){return n.updateProgress(1),e})})},o.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then;var r=this;e&&(e=e.bind(r)),t&&(t=t.bind(r));var i=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?r:o.convert(Object.assign({},r),Promise.prototype),a=n.call(i,e,t);return o.convert(a,r.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then(function(){throw new Error(e)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,bm.getPageSize=function(e,t,n){if("object"===(0,jc.A)(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var i,a=(""+n).toLowerCase(),s={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":i=1;break;case"mm":i=72/25.4;break;case"cm":i=72/2.54;break;case"in":i=72;break;case"px":i=.75;break;case"pc":case"em":i=12;break;case"ex":i=6;break;default:throw"Invalid unit: "+t}var o,l=0,c=0;if(s.hasOwnProperty(a))l=s[a][1]/i,c=s[a][0]/i;else try{l=n[1],c=n[0]}catch(Gp){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",c>l&&(o=c,c=l,l=o);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(o=c,c=l,l=o)}return{width:c,height:l,unit:t,k:i,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(ug):null;var n=new o(t);return t.worker?n:n.from(e).doCallback()}}(bm.API),bm.API.addJS=function(e){return wg=e,this.internal.events.subscribe("postPutResources",function(){vg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),xg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+wg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==vg&&void 0!==xg&&this.internal.out("/Names <</JavaScript "+vg+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),i=0;i<r.length;i++){var a=r[i],s=n.exec(a);if(null!=s){var o=s[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(a)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(i=0;i<l;i++){var d=e.internal.newObject();c.push(d);var u=e.internal.getPageInfo(i+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),i=0;i<c.length;i++)e.internal.write("(page_"+(i+1)+")"+c[i]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var e=this;e.outline.root.children.length>0&&(e.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&e.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var r={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var i=t.children[r];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var a=this.count=this.count_r({count:0},i);if(a>0&&this.line("/Count "+a),i.options&&i.options.pageNumber){var s=e.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(bm.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,r,i,a,s){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=a||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,o=function(e){for(var n,r=256*e.charCodeAt(4)+e.charCodeAt(5),i=e.length,a={width:0,height:0,numcomponents:1},s=4;s<i;s+=2){if(s+=r,-1!==t.indexOf(e.charCodeAt(s+1))){n=256*e.charCodeAt(s+5)+e.charCodeAt(s+6),a={width:256*e.charCodeAt(s+7)+e.charCodeAt(s+8),height:n,numcomponents:e.charCodeAt(s+9)};break}r=256*e.charCodeAt(s+2)+e.charCodeAt(s+3)}return a}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e),o.numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:s,bitsPerComponent:8,filter:l,index:n,alias:r}}return c}}(bm.API),bm.API.processPNG=function(e,t,n,r){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,a=new Rp(e,{checkCrc:!0}).decode(),s=a.width,o=a.height,l=a.channels,c=a.palette,d=a.depth;i=c&&1===l?function(e){for(var t=e.width,n=e.height,r=e.data,i=e.palette,a=e.depth,s=!1,o=[],l=[],c=void 0,d=!1,u=0,h=0;h<i.length;h++){var f=pd(i[h],4),p=f[0],m=f[1],g=f[2],y=f[3];o.push(p,m,g),null!=y&&(0===y?(u++,l.length<1&&l.push(h)):y<255&&(d=!0))}if(d||u>1){s=!0,l=void 0;var b=t*n;c=new Uint8Array(b);for(var v=new DataView(r.buffer),x=0;x<b;x++){var w=pd(i[Rg(v,x,a)],4)[3];c[x]=w}}else 0===u&&(l=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:s?8:void 0,colorBytes:r,alphaBytes:c,needSMask:s,palette:o,mask:l}}(a):2===l||4===l?function(e){for(var t=e.data,n=e.width,r=e.height,i=e.channels,a=e.depth,s=2===i?"DeviceGray":"DeviceRGB",o=i-1,l=n*r,c=o,d=l*c,u=1*l,h=Math.ceil(d*a/8),f=Math.ceil(u*a/8),p=new Uint8Array(h),m=new Uint8Array(f),g=new DataView(t.buffer),y=new DataView(p.buffer),b=new DataView(m.buffer),v=!1,x=0;x<l;x++){for(var w=x*i,_=0;_<c;_++)Fg(y,Rg(g,w+_,a),x*c+_,a);var N=Rg(g,w+c,a);N<(1<<a)-1&&(v=!0),Fg(b,N,1*x,a)}return{colorSpace:s,colorsPerPixel:o,sMaskBitsPerComponent:v?a:void 0,colorBytes:p,alphaBytes:m,needSMask:v}}(a):function(e){var t=e.data,n=1===e.channels?"DeviceGray":"DeviceRGB";return{colorSpace:n,colorsPerPixel:"DeviceGray"===n?1:3,colorBytes:t instanceof Uint16Array?function(e){for(var t=e.length,n=new Uint8Array(2*t),r=new DataView(n.buffer,n.byteOffset,n.byteLength),i=0;i<t;i++)r.setUint16(2*i,e[i],!1);return n}(t):t,needSMask:!1}}(a);var u,h,f,p=i,m=p.colorSpace,g=p.colorsPerPixel,y=p.sMaskBitsPerComponent,b=p.colorBytes,v=p.alphaBytes,x=p.needSMask,w=p.palette,_=p.mask,N=null;return r!==bm.API.image_compression.NONE?(N=function(e){var t;switch(e){case bm.API.image_compression.FAST:t=11;break;case bm.API.image_compression.MEDIUM:t=13;break;case bm.API.image_compression.SLOW:t=14;break;default:t=12}return t}(r),u=this.decode.FLATE_DECODE,h="/Predictor ".concat(N," /Colors ").concat(g," /BitsPerComponent ").concat(d," /Columns ").concat(s),e=Ig(b,Math.ceil(s*g*d/8),g,d,r),x&&(f=Ig(v,Math.ceil(s*y/8),1,y,r))):(u=void 0,h=void 0,e=b,x&&(f=v)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:n,data:e,index:t,filter:u,decodeParameters:h,transparency:_,palette:w,sMask:f,predictor:N,width:s,height:o,bitsPerComponent:d,sMaskBitsPerComponent:y,colorSpace:m}}},function(e){e.processGIF89A=function(t,n,r,i){var a=new Bg(t),s=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:o},d=new qg(100).encode(c,100);return e.processJPEG.call(this,d,n,r,i)},e.processGIF87A=e.processGIF89A}(bm.API),Vg.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Vg.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){zp.log("bit decode error:"+n)}},Vg.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[s+4*o]=l.blue,this.data[s+4*o+1]=l.green,this.data[s+4*o+2]=l.red,this.data[s+4*o+3]=255}0!==n&&(this.pos+=4-n)}},Vg.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,o=a>>4,l=15&a,c=this.palette[o];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}0!==t&&(this.pos+=4-t)}},Vg.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[a]=s.red,this.data[a+1]=s.green,this.data[a+2]=s.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}0!==e&&(this.pos+=4-e)}},Vg.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&t)/t*255|0,o=(a>>5&t)/t*255|0,l=(a>>10&t)/t*255|0,c=a>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=s,this.data[d+3]=c}this.pos+=e}},Vg.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&t)/t*255|0,l=(s>>5&n)/n*255|0,c=(s>>11)/t*255|0,d=i*this.width*4+4*a;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Vg.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;this.data[s]=a,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Vg.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=s}},Vg.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var a=new Vg(t,!1),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new qg(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(bm.API),Hg.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var a=new Hg(t),s=a.width,o=a.height,l={data:a.getData(),width:s,height:o},c=new qg(100).encode(l,100);return e.processJPEG.call(this,c,n,r,i)}}(bm.API),bm.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,a=new Uint8Array(i/4*3),s=new Uint8Array(i/4),o=0,l=0,c=0;c<i;c+=4){var d=r[c],u=r[c+1],h=r[c+2],f=r[c+3];a[o++]=d,a[o++]=u,a[o++]=h,s[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:p,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},bm.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},_g=bm.API,Ng=_g.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),s=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:i.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,u=!1!==t.doKerning,h=0,f=e.length,p=0,m=o[0]||l,g=[];for(n=0;n<f;n++)r=e.charCodeAt(n),"function"==typeof i.metadata.widthOfString?g.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/a)||0)/1e3):(h=u&&"object"===(0,jc.A)(c[r])&&!isNaN(parseInt(c[r][p],10))?c[r][p]/d:0,g.push((o[r]||m)/l+h)),p=r;return g},Sg=_g.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return _g.processArabic&&(e=_g.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,n,i)/n:Ng.apply(this,arguments).reduce(function(e,t){return e+t},0)},kg=function(e,t,n,r){for(var i=[],a=0,s=e.length,o=0;a!==s&&o+t[a]<n;)o+=t[a],a++;i.push(e.slice(0,a));var l=a;for(o=0;a!==s;)o+t[a]>r&&(i.push(e.slice(l,a)),o=0,l=a),o+=t[a],a++;return l!==a&&i.push(e.slice(l,a)),i},Ag=function(e,t,n){n||(n={});var r,i,a,s,o,l,c,d=[],u=[d],h=n.textIndent||0,f=0,p=0,m=e.split(" "),g=Ng.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?m[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),b=[];m.map(function(e){(e=e.split(/\s*\n/)).length>1?b=b.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):b.push(e[0])}),m=b,l=Sg.apply(this,[y,n])}for(a=0,s=m.length;a<s;a++){var v=0;if(r=m[a],l&&"\n"==r[0]&&(r=r.substr(1),v=1),h+f+(p=(i=Ng.apply(this,[r,n])).reduce(function(e,t){return e+t},0))>t||v){if(p>t){for(o=kg.apply(this,[r,i,t-(h+f),t]),d.push(o.shift()),d=[o.pop()];o.length;)u.push([o.shift()]);p=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(e,t){return e+t},0)}else d=[r];u.push(d),h=p+l,f=g}else d.push(r),h+=f+p,f=g}return c=l?function(e,t){return(t?y:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},_g.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle),n="Unicode";return t.metadata[n]?{widths:t.metadata[n].widths||{0:1},kerning:t.metadata[n].kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var s=1*this.internal.scaleFactor*t/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(Ag.apply(this,[r[o],s,a]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},a=0;a<16;a++)r[n[a]]=t[a],i[t[a]]=n[a];var s=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,n,r,a,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?n="'"+c+"'":(c=parseInt(c,10),n=(n=s(c).slice(2)).slice(0,-1)+i[n.slice(-1)]),"number"==typeof t)t<0?(r=s(t).slice(3),a="-"):(r=s(t).slice(2),a=""),r=a+r.slice(0,-1)+i[r.slice(-1)];else{if("object"!==(0,jc.A)(t))throw new Error("Don't know what to do with value type "+(0,jc.A)(t)+".");r=o(t)}l.push(n+r)}return l.push("}"),l.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,n,i,a,s={},o=1,l=s,c=[],d="",u="",h=e.length-1,f=1;f<h;f+=1)"'"==(a=e[f])?t?(i=t.join(""),t=void 0):t=[]:t?t.push(a):"{"==a?(c.push([l,i]),l={},i=void 0):"}"==a?((n=c.pop())[0][n[1]]=l,i=void 0,l=n[0]):"-"==a?o=-1:void 0===i?r.hasOwnProperty(a)?(d+=r[a],i=parseInt(d,16)*o,o=1,d=""):d+=a:r.hasOwnProperty(a)?(u+=r[a],l[i]=parseInt(u,16)*o,o=1,i=void 0,u=""):u+=a;return s},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=u.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var r=d.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}(bm.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=e.charCodeAt(r);return n};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(void 0===a)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if("string"!=typeof(r=!1===a.existsFileInVFS(i.postScriptName)?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");!function(n,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(Yp(r)),n.metadata=e.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(i,r)}}])}(bm),bm.API.addSvgAsImage=function(e,t,r,i,a,s,o,l){if(isNaN(t)||isNaN(r))throw zp.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw zp.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=i,c.height=a;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(Up.canvg?Promise.resolve(Up.canvg):n.e(455).then(n.bind(n,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e}).then(function(t){return t.fromString(d,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),t,r,i,a,o,l)})},bm.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},bm.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,a,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(s),l=[],c=0,d=0,u=0;function h(e,t){var n,r=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var f=o.length;for(u=0;u<f;u+=1)n[o[u]].value=n[o[u]].defaultValue,n[o[u]].explicitSet=!1}if("object"===(0,jc.A)(e))for(i in e)if(a=e[i],h(o,i)&&void 0!==a){if("boolean"===n[i].type&&"boolean"==typeof a)n[i].value=a;else if("name"===n[i].type&&h(n[i].valueSet,a))n[i].value=a;else if("integer"===n[i].type&&Number.isInteger(a))n[i].value=a;else if("array"===n[i].type){for(c=0;c<a.length;c+=1)if(r=!0,1===a[c].length&&"number"==typeof a[c][0])l.push(String(a[c]-1));else if(a[c].length>1){for(d=0;d<a[c].length;d+=1)"number"!=typeof a[c][d]&&(r=!1);!0===r&&l.push([a[c][0]-1,a[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),a=unescape(encodeURIComponent("</x:xmpmeta>")),s=n.length+r.length+i.length+t.length+a.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(t+n+r+i+a),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(bm.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,r=t.metadata.Unicode.widths,i=["","0","00","000","0000"],a=[""],s=0,o=e.length;s<o;++s){if(n=t.metadata.characterToGlyph(e.charCodeAt(s)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(s),-1==r.indexOf(n)&&(r.push(n),r.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return a.join("");n=n.toString(16),a.push(i[4-n.length],n)}return a.join("")},r=function(e){var t,n,r,i,a,s,o;for(a="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],s=0,o=(n=Object.keys(e).sort(function(e,t){return e-t})).length;s<o;s++)t=n[s],r.length>=100&&(a+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(i=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+i+">"));return r.length&&(a+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),a+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,a=t.newObject,s=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var o=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=a();s({data:c,addLength1:!0,objectId:u}),i("endobj");var h=a();s({data:r(n.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var f=a();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+hm(n.fontName)),i("/FontFile2 "+u+" 0 R"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/Flags "+n.metadata.flags),i("/StemV "+n.metadata.stemV),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i(">>"),i("endobj");var p=a();i("<<"),i("/Type /Font"),i("/BaseFont /"+hm(n.fontName)),i("/FontDescriptor "+f+" 0 R"),i("/W "+e.API.PDFObject.convert(o)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+n.encoding+")"),i(">>"),i(">>"),i("endobj"),n.objectNumber=a(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+h+" 0 R"),i("/BaseFont /"+hm(n.fontName)),i("/Encoding /"+n.encoding),i("/DescendantFonts ["+p+" 0 R]"),i(">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,i=t.out,a=t.newObject,s=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var o=n.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var d=a();s({data:l,addLength1:!0,objectId:d}),i("endobj");var u=a();s({data:r(n.metadata.toUnicode),addLength1:!0,objectId:u}),i("endobj");var h=a();i("<<"),i("/Descent "+n.metadata.decender),i("/CapHeight "+n.metadata.capHeight),i("/StemV "+n.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+d+" 0 R"),i("/Flags 96"),i("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),i("/FontName /"+hm(n.fontName)),i("/ItalicAngle "+n.metadata.italicAngle),i("/Ascent "+n.metadata.ascender),i(">>"),i("endobj"),n.objectNumber=a();for(var f=0;f<n.metadata.hmtx.widths.length;f++)n.metadata.hmtx.widths[f]=parseInt(n.metadata.hmtx.widths[f]*(1e3/n.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+hm(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),i("endobj"),n.isAlreadyPutted=!0}}(t)}]);var i=function(e){var t,r=e.text||"",i=e.x,a=e.y,s=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,d=o.fonts,u=c,h="",f=0,p="",m=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:r,x:i,y:a,options:s,mutex:o};for(p=r,u=c,Array.isArray(r)&&(p=r[0]),f=0;f<p.length;f+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[p[f].charCodeAt(0)]),t||p[f].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?h+=p[f]:h+="";var g="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===m?g=l(h,u).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===m&&(g=n(h,d[u])),o.isHex=!0,{text:g,x:i,y:a,options:s,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var a=0;for(a=0;a<t.length;a+=1)Array.isArray(t[a])&&3===t[a].length?n.push([i(Object.assign({},r,{text:t[a][0]})).text,t[a][1],t[a][2]]):n.push(i(Object.assign({},r,{text:t[a]})).text);e.text=n}else e.text=i(Object.assign({},r,{text:t})).text}])}(bm),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(bm.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,r,i,a,s,o,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,y=0;this.__bidiEngine__={};var b=function(e){var t=e.charCodeAt(),n=t>>8,r=f[n];return void 0!==r?c[256*r+(255&t)]:252===n||253===n?"AL":m.test(n)?"L":8===n?"R":"N"},v=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=b(e.charAt(n))))return!1;if("R"===t)return!0}return!1},x=function(e,t,s,o){var l,c,d,u,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=s[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":g&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?s[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===s[o-1]){h="EN";break}if(g){h="N";break}for(d=o+1,u=t.length;d<u&&"ET"===t[d];)d++;h=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(i&&!a){for(u=t.length,d=o+1;d<u&&"NSM"===t[d];)d++;if(d<u){var f=e[o],p=f>=1425&&f<=2303||64286===f;if(l=t[d],p&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":s[o-1];break;case"B":g=!1,n=!0,h=y;break;case"S":r=!0,h="N"}return h},w=function(e,t,n){var r=e.split("");return n&&_(r,n,{hiLevel:y}),r.reverse(),t&&t.reverse(),r.join("")},_=function(e,t,i){var a,s,o,l,c,f=-1,p=e.length,m=0,v=[],w=y?u:d,_=[];for(g=!1,n=!1,r=!1,s=0;s<p;s++)_[s]=b(e[s]);for(o=0;o<p;o++){if(c=m,v[o]=x(e,_,v,o),a=240&(m=w[c][h[v[o]]]),m&=15,t[o]=l=w[m][5],a>0)if(16===a){for(s=f;s<o;s++)t[s]=1;f=-1}else f=-1;if(w[m][6])-1===f&&(f=o);else if(f>-1){for(s=f;s<o;s++)t[s]=l;f=-1}"B"===_[o]&&(t[o]=0),i.hiLevel|=l}r&&function(e,t,n){for(var r=0;r<n;r++)if("S"===e[r]){t[r]=y;for(var i=r-1;i>=0&&"WS"===e[i];i--)t[i]=y}}(_,t,p)},N=function(e,t,r,i,a){if(!(a.hiLevel<e)){if(1===e&&1===y&&!n)return t.reverse(),void(r&&r.reverse());for(var s,o,l,c,d=t.length,u=0;u<d;){if(i[u]>=e){for(l=u+1;l<d&&i[l]>=e;)l++;for(c=u,o=l-1;c<o;c++,o--)s=t[c],t[c]=t[o],t[o]=s,r&&(s=r[c],r[c]=r[o],r[o]=s);u=l}u++}}},S=function(e,t,n){var r=e.split(""),i={hiLevel:y};return n||(n=[]),_(r,n,i),function(e,t,n){if(0!==n.hiLevel&&l)for(var r,i=0;i<e.length;i++)1===t[i]&&(r=p.indexOf(e[i]))>=0&&(e[i]=p[r+1])}(r,n,i),N(2,r,t,n,i),N(1,r,t,n,i),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===a&&(a=v(e)),void 0===o&&(o=v(e))}(e,t),i||!s||o)if(i&&s&&a^o)y=a?1:0,e=w(e,t,n);else if(!i&&s&&o)y=a?1:0,e=S(e,t,n),e=w(e,t);else if(!i||a||s||o){if(i&&!s&&a^o)e=w(e,t),a?(y=0,e=S(e,t,n)):(y=1,e=S(e,t,n),e=w(e,t));else if(i&&a&&!s&&o)y=1,e=S(e,t,n),e=w(e,t);else if(!i&&!s&&a^o){var r=l;a?(y=1,e=S(e,t,n),y=0,l=!1,e=S(e,t,n),l=r):(y=0,e=S(e,t,n),e=w(e,t),y=1,l=!1,e=S(e,t,n),l=r,e=w(e,t))}}else y=0,e=S(e,t,n);else y=a?1:0,e=S(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(i=e.isInputVisual,s=e.isOutputVisual,a=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text;e.x,e.y;var r=e.options||{};e.mutex,r.lang;var i=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,n.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var a=0;for(i=[],a=0;a<t.length;a+=1)"[object Array]"===Object.prototype.toString.call(t[a])?i.push([n.doBidiReorder(t[a][0]),t[a][1],t[a][2]]):i.push([n.doBidiReorder(t[a])]);e.text=i}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(bm),bm.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new Gg(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new uy(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Yg(this.contents),this.head=new $g(this),this.name=new ry(this),this.cmap=new Qg(this),this.toUnicode={},this.hhea=new Zg(this),this.maxp=new iy(this),this.hmtx=new ay(this),this.post=new ty(this),this.os2=new ey(this),this.loca=new dy(this),this.glyf=new oy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,r,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,r,i;for(i=[],t=0,n=(r=this.bbox).length;t<n;t++)e=r[t],i.push(Math.round(e*this.scaleFactor));return i}.call(this),this.stemV=0,this.post.exists?(n=255&(r=this.post.italic_angle),32768&(t=r>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(i=this.familyClass)||2===i||3===i||4===i||5===i||7===i,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var r,i,a,s;for(a=0,i=0,s=(e=""+e).length;0<=s?i<s:i>s;i=0<=s?++i:--i)r=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(r))+n*(1e3/t)||0;return a*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var Wg,Gg=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,r;for(r=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,r,i,a,s,o;return e=this.readByte(),t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^r)+16777216*(255^i)+65536*(255^a)+256*(255^s)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*r+16777216*i+65536*a+256*s+o},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],i.push(this.writeByte(t));return i},e}(),Yg=function(){var e;function t(e){var t,n,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,r=this.tableCount;0<=r?n<r:n>r;n=0<=r?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,r,i,a,s,o,l,c,d,u,h,f,p;for(p in h=Object.keys(t).length,o=Math.log(2),d=16*Math.floor(Math.log(h)/o),a=Math.floor(d/o),c=16*h-d,(r=new Gg).writeInt(this.scalarType),r.writeShort(h),r.writeShort(d),r.writeShort(a),r.writeShort(c),i=16*h,l=r.pos+i,s=null,f=[],t)for(u=t[p],r.writeString(p),r.writeInt(e(u)),r.writeInt(l),r.writeInt(u.length),f=f.concat(u),"head"===p&&(s=l),l+=u.length;l%4;)f.push(0),l++;return r.write(f),n=2981146554-e(r.data),r.pos=s+8,r.writeUInt32(n),r.data},e=function(e){var t,n,r,i;for(e=sy.call(e);e.length%4;)e.push(0);for(r=new Gg(e),n=0,t=0,i=e.length;t<i;t=t+=4)n+=r.readUInt32();return 4294967295&n},t}(),Kg={}.hasOwnProperty,Jg=function(e,t){for(var n in t)Kg.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};Wg=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var $g=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Jg(e,Wg),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new Gg).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),Xg=function(){function e(e,t){var n,r,i,a,s,o,l,c,d,u,h,f,p,m,g,y,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),u=h/2,e.pos+=6,i=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,p=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),r=(this.length-e.pos+this.offset)/2,s=function(){var t,n;for(n=[],o=t=0;0<=r?t<r:t>r;o=0<=r?++t:--t)n.push(e.readUInt16());return n}(),o=g=0,b=i.length;g<b;o=++g)for(m=i[o],n=y=f=p[o];f<=m?y<=m:y>=m;n=f<=m?++y:--y)0===c[o]?a=n+l[o]:0!==(a=s[c[o]/2+(n-f)-(u-o)]||0)&&(a+=l[o]),this.codeMap[n]=65535&a}e.pos=d}return e.encode=function(e,t){var n,r,i,a,s,o,l,c,d,u,h,f,p,m,g,y,b,v,x,w,_,N,S,k,A,j,P,I,C,E,L,D,T,O,M,R,F,U,B,z,q,V,H,W,G,Y;switch(I=new Gg,a=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(p=0,m=function(){var e=[];for(f=0;f<256;++f)e.push(0);return e}(),y={0:0},i={},C=0,T=a.length;C<T;C++)null==y[H=e[r=a[C]]]&&(y[H]=++p),i[r]={old:e[r],new:y[e[r]]},m[r]=y[e[r]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(m),{charMap:i,subtable:I.data,maxGlyphID:p+1};case"unicode":for(j=[],d=[],b=0,y={},n={},g=l=null,E=0,O=a.length;E<O;E++)null==y[x=e[r=a[E]]]&&(y[x]=++b),n[r]={old:x,new:y[x]},s=y[x]-r,null!=g&&s===l||(g&&d.push(g),j.push(r),l=s),g=r;for(g&&d.push(g),d.push(65535),j.push(65535),k=2*(S=j.length),N=2*Math.pow(Math.log(S)/Math.LN2,2),u=Math.log(N/2)/Math.LN2,_=2*S-N,o=[],w=[],h=[],f=L=0,M=j.length;L<M;f=++L){if(A=j[f],c=d[f],65535===A){o.push(0),w.push(0);break}if(A-(P=n[A].new)>=32768)for(o.push(0),w.push(2*(h.length+S-f)),r=D=A;A<=c?D<=c:D>=c;r=A<=c?++D:--D)h.push(n[r].new);else o.push(P-A),w.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*S+2*h.length),I.writeUInt16(0),I.writeUInt16(k),I.writeUInt16(N),I.writeUInt16(u),I.writeUInt16(_),q=0,R=d.length;q<R;q++)r=d[q],I.writeUInt16(r);for(I.writeUInt16(0),V=0,F=j.length;V<F;V++)r=j[V],I.writeUInt16(r);for(W=0,U=o.length;W<U;W++)s=o[W],I.writeUInt16(s);for(G=0,B=w.length;G<B;G++)v=w[G],I.writeUInt16(v);for(Y=0,z=h.length;Y<z;Y++)p=h[Y],I.writeUInt16(p);return{charMap:n,subtable:I.data,maxGlyphID:b+1}}},e}(),Qg=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Jg(e,Wg),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=r?n<r:n>r;n=0<=r?++n:--n)t=new Xg(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,r;return null==t&&(t="macroman"),n=Xg.encode(e,t),(r=new Gg).writeUInt16(0),r.writeUInt16(1),n.table=r.data.concat(n.subtable),n},e}(),Zg=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Jg(e,Wg),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),ey=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Jg(e,Wg),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),ty=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Jg(e,Wg),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,r;for(r=[],i=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;i=0<=n?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),ny=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},ry=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Jg(e,Wg),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,r,i,a,s,o,l,c,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),s=e.readShort(),n=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+s+e.readShort()});for(o={},i=c=0,d=n.length;c<d;i=++c)r=n[i],e.pos=r.offset,l=e.readString(r.length),a=new ny(l,r),null==o[u=r.nameID]&&(o[u]=[]),o[r.nameID].push(a);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(Yp){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),iy=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Jg(e,Wg),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),ay=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Jg(e,Wg),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,r,i,a,s,o;for(e.pos=this.offset,this.metrics=[],t=0,s=this.file.hhea.numberOfMetrics;0<=s?t<s:t>s;t=0<=s?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,i;for(i=[],t=n=0;0<=r?n<r:n>r;t=0<=r?++n:--n)i.push(e.readInt16());return i}(),this.widths=function(){var e,t,n,r;for(r=[],e=0,t=(n=this.metrics).length;e<t;e++)i=n[e],r.push(i.advance);return r}.call(this),n=this.widths[this.widths.length-1],o=[],t=a=0;0<=r?a<r:a>r;t=0<=r?++a:--a)o.push(this.widths.push(n));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),sy=[].slice,oy=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Jg(e,Wg),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,r,i,a,s,o,l,c,d;return e in this.cache?this.cache[e]:(i=this.file.loca,t=this.file.contents,n=i.indexOf(e),0===(r=i.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,a=(s=new Gg(t.read(r))).readShort(),l=s.readShort(),d=s.readShort(),o=s.readShort(),c=s.readShort(),this.cache[e]=-1===a?new cy(s,l,d,o,c):new ly(s,a,l,d,o,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var r,i,a,s,o;for(a=[],i=[],s=0,o=t.length;s<o;s++)r=e[t[s]],i.push(a.length),r&&(a=a.concat(r.encode(n)));return i.push(a.length),{table:a,offsets:i}},e}(),ly=function(){function e(e,t,n,r,i,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),cy=function(){function e(e,t,n,r,i){var a,s;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=r,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;s=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&s;)a.pos+=1&s?4:2,128&s?a.pos+=8:64&s?a.pos+=4:8&s&&(a.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new Gg(sy.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),dy=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Jg(e,Wg),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],n=0,t=this.length;n<t;n+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),r=0,i=0,a=0;a<n.length;++a)if(n[a]=r,i<t.length&&t[i]==a){++i,n[a]=r;var s=this.offsets[a],o=this.offsets[a+1]-s;o>0&&(r+=o)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),uy=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,r,i;for(t in r=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[t],e[t]=r[n];return e},e.prototype.glyphsFor=function(e){var t,n,r,i,a,s,o;for(r={},a=0,s=e.length;a<s;a++)r[i=e[a]]=this.font.glyf.glyphFor(i);for(i in t=[],r)(null!=(n=r[i])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(i in o=this.glyphsFor(t))n=o[i],r[i]=n;return r},e.prototype.encode=function(e,t){var n,r,i,a,s,o,l,c,d,u,h,f,p,m,g;for(r in n=Qg.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),h={0:0},g=n.charMap)h[(o=g[r]).old]=o.new;for(f in u=n.maxGlyphID,a)f in h||(h[f]=u++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),d=Object.keys(c).sort(function(e,t){return e-t}),p=function(){var e,t,n;for(n=[],e=0,t=d.length;e<t;e++)s=d[e],n.push(c[s]);return n}(),i=this.font.glyf.encode(a,p,h),l=this.font.loca.encode(i.offsets,p),m={cmap:this.font.cmap.raw(),glyf:i.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},e}();bm.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var r,i,a,s;if(Array.isArray(n))return"["+function(){var e,i,a;for(a=[],e=0,i=n.length;e<i;e++)r=n[e],a.push(t.convert(r));return a}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(i in a=["<<"],n)s=n[i],a.push("/"+i+" "+t.convert(s));return a.push(">>"),a.join("\n")}return""+n},t}();const hy=e=>{let{onClose:t,onSubmit:n}=e;const[i,a]=(0,r.useState)({name:"",mobileNumber:"",email:"",address:"",balanceDue:0}),s=e=>{const{name:t,value:n}=e.target;a(e=>o(o({},e),{},{[t]:"balanceDue"===t?parseFloat(n)||0:n}))};return(0,ie.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50",children:(0,ie.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 mx-4",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ie.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Customer"}),(0,ie.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,ie.jsx)(Gl,{className:"h-5 w-5"})})]}),(0,ie.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!i.name.trim())return void alert("Please enter customer name");const t=parseFloat(i.balanceDue)||0,r=o(o({},i),{},{dueAmount:t,balanceDue:t});console.log("AddCustomerModal - Submitting customer data:",r),console.log("dueAmount:",r.dueAmount,"balanceDue:",r.balanceDue),n(r)},className:"space-y-4",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-600 mb-1",children:"Customer Name *"}),(0,ie.jsx)("input",{type:"text",id:"name",name:"name",value:i.name,onChange:s,className:"input-field",placeholder:"Enter customer name",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"mobileNumber",className:"block text-sm font-medium text-gray-600 mb-1",children:"Mobile Number"}),(0,ie.jsx)("input",{type:"tel",id:"mobileNumber",name:"mobileNumber",value:i.mobileNumber,onChange:s,className:"input-field",placeholder:"Enter mobile number"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-600 mb-1",children:"Email (Optional)"}),(0,ie.jsx)("input",{type:"email",id:"email",name:"email",value:i.email,onChange:s,className:"input-field",placeholder:"Enter email address"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-600 mb-1",children:"Address (Optional)"}),(0,ie.jsx)("textarea",{id:"address",name:"address",value:i.address,onChange:s,rows:3,className:"input-field",placeholder:"Enter address"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"balanceDue",className:"block text-sm font-medium text-gray-600 mb-1",children:"Initial Balance Due (\u20b9)"}),(0,ie.jsx)("input",{type:"number",id:"balanceDue",name:"balanceDue",value:i.balanceDue,onChange:s,step:"0.01",min:"0",className:"input-field",placeholder:"0.00"})]}),(0,ie.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,ie.jsx)("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),(0,ie.jsx)("button",{type:"submit",className:"btn-primary",children:"Save Customer"})]})]})]})})},fy=e=>{let{customer:t,onClose:n,onSubmit:i}=e;const[a,s]=(0,r.useState)({name:t.name||"",mobileNumber:t.mobileNumber||t.phone||"",email:t.email||"",address:t.address||"",balanceDue:t.balanceDue||t.dueAmount||0}),l=e=>{const{name:t,value:n}=e.target;s(e=>o(o({},e),{},{[t]:"balanceDue"===t?parseFloat(n)||0:n}))};return(0,ie.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50",children:(0,ie.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 mx-4",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ie.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Customer"}),(0,ie.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,ie.jsx)(Gl,{className:"h-5 w-5"})})]}),(0,ie.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!a.name.trim())return void alert("Please enter customer name");const n=parseFloat(a.balanceDue)||0,r=o(o(o({},t),a),{},{dueAmount:n,balanceDue:n});console.log("EditCustomerModal - Submitting customer data:",r),console.log("dueAmount:",r.dueAmount,"balanceDue:",r.balanceDue),i(r)},className:"space-y-4",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-600 mb-1",children:"Customer Name *"}),(0,ie.jsx)("input",{type:"text",id:"name",name:"name",value:a.name,onChange:l,className:"input-field",placeholder:"Enter customer name",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"mobileNumber",className:"block text-sm font-medium text-gray-600 mb-1",children:"Mobile Number"}),(0,ie.jsx)("input",{type:"tel",id:"mobileNumber",name:"mobileNumber",value:a.mobileNumber,onChange:l,className:"input-field",placeholder:"Enter mobile number"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-600 mb-1",children:"Email (Optional)"}),(0,ie.jsx)("input",{type:"email",id:"email",name:"email",value:a.email,onChange:l,className:"input-field",placeholder:"Enter email address"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-600 mb-1",children:"Address (Optional)"}),(0,ie.jsx)("textarea",{id:"address",name:"address",value:a.address,onChange:l,rows:3,className:"input-field",placeholder:"Enter address"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"balanceDue",className:"block text-sm font-medium text-gray-600 mb-1",children:"Balance Due (\u20b9)"}),(0,ie.jsx)("input",{type:"number",id:"balanceDue",name:"balanceDue",value:a.balanceDue,onChange:l,step:"0.01",className:"input-field",placeholder:"0.00"})]}),(0,ie.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,ie.jsx)("button",{type:"button",onClick:n,className:"btn-secondary",children:"Cancel"}),(0,ie.jsx)("button",{type:"submit",className:"btn-primary",children:"Update Customer"})]})]})]})})},py=e=>{let{customer:t,onClose:n,onSubmit:i}=e;const[a,s]=(0,r.useState)("");return(0,ie.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50",children:(0,ie.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 mx-4",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ie.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Record Payment"}),(0,ie.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,ie.jsx)(Gl,{className:"h-5 w-5"})})]}),(0,ie.jsxs)("div",{className:"mb-4",children:[(0,ie.jsxs)("p",{className:"text-gray-600",children:["Customer: ",(0,ie.jsx)("span",{className:"font-semibold",children:t.name})]}),(0,ie.jsxs)("p",{className:"text-gray-600",children:["Current Balance: ",(0,ie.jsxs)("span",{className:"font-semibold",children:["\u20b9",(t.balanceDue||0).toFixed(2)]})]})]}),(0,ie.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=parseFloat(a);t<=0?alert("Please enter a valid payment amount"):i(t)},className:"space-y-4",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-600 mb-1",children:"Payment Amount (\u20b9) *"}),(0,ie.jsx)("input",{type:"number",id:"amount",value:a,onChange:e=>s(e.target.value),step:"0.01",min:"0.01",className:"input-field",placeholder:"e.g., 50",required:!0})]}),(0,ie.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,ie.jsx)("button",{type:"button",onClick:n,className:"btn-secondary",children:"Cancel"}),(0,ie.jsx)("button",{type:"submit",className:"btn-primary",children:"Save Payment"})]})]})]})})},my=()=>{const{state:e,dispatch:t}=Nt(),[n,i]=(0,r.useState)(""),[a,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(1),g=e.itemsPerPage,{maxCustomers:y}=ec(e.currentPlan),b=e.customers.length,v=(((e,t)=>{const n=Xl[t];!!n&&n.maxCustomers})(b,e.currentPlan),e.customers.filter(e=>{var t;const r=e.mobileNumber||e.phone||"";return e.name.toLowerCase().includes(n.toLowerCase())||r.includes(n)||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(n.toLowerCase()))})),x=Math.ceil(v.length/g),w=(p-1)*g,_=v.slice(w,w+g),N=e=>{m(e)};return(0,ie.jsxs)("div",{className:"space-y-6",children:[(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Customers"}),(0,ie.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:y===1/0?(0,ie.jsxs)(ie.Fragment,{children:["Total: ",b," / Unlimited"]}):(0,ie.jsxs)(ie.Fragment,{children:["Total: ",b," / ",y]})})]}),(0,ie.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,ie.jsxs)("button",{onClick:()=>s(!0),className:"btn-primary flex items-center",children:[(0,ie.jsx)(wc,{className:"h-4 w-4 mr-2"}),"Add Customer"]})})]}),(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,ie.jsx)("div",{className:"flex-1",children:(0,ie.jsxs)("div",{className:"relative",children:[(0,ie.jsx)(_c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,ie.jsx)("input",{type:"text",placeholder:"Search customers...",value:n,onChange:e=>i(e.target.value),className:"input-field pl-10"})]})}),(0,ie.jsxs)("button",{onClick:()=>{try{const t=new bm("p","mm","a4"),n=t.internal.pageSize.getWidth(),r=t.internal.pageSize.getHeight();t.setFont("helvetica","normal"),t.setFontSize(18),t.text("Customer Report",n/2,15,{align:"center"}),t.setFontSize(11),t.text("".concat(e.username||"Grocery Store","  |  Generated: ").concat((new Date).toLocaleDateString()),n/2,22,{align:"center"}),t.setDrawColor(230),t.setFillColor(245,247,250),t.rect(10,28,n-20,18,"F"),t.setTextColor(60),t.setFontSize(10);const i=e.customers.length,a=e.customers.filter(e=>(e.balanceDue||0)>0).length,s=e.customers.reduce((e,t)=>e+(t.balanceDue||0),0).toFixed(2);t.text("Total Customers: ".concat(i),14,40),t.text("With Balance Due: ".concat(a),70,40),t.text("Total Outstanding: Rs ".concat(s),130,40);const o=52,l={idx:12,name:25,mobileNumber:90,email:130,balance:180};t.setFillColor(234,238,243),t.setDrawColor(220),t.rect(10,o-6,n-20,8,"F"),t.setTextColor(30),t.setFontSize(10),t.text("#",l.idx,o),t.text("Name",l.name,o),t.text("Mobile Number",l.mobileNumber,o),t.text("Email",l.email,o),t.text("Balance Due (Rs)",l.balance,o,{align:"right"});let c=o+6;t.setTextColor(50),t.setFontSize(9),e.customers.forEach((e,i)=>{c>r-20&&(t.addPage(),t.setFillColor(234,238,243),t.setDrawColor(220),t.rect(10,10,n-20,8,"F"),t.setTextColor(30),t.setFontSize(10),t.text("#",l.idx,16),t.text("Name",l.name,16),t.text("Mobile Number",l.mobileNumber,16),t.text("Email",l.email,16),t.text("Balance Due (Rs)",l.balance,16,{align:"right"}),c=24,t.setTextColor(50),t.setFontSize(9));const a=(e.balanceDue||0).toFixed(2),s=e.mobileNumber||e.phone||"";t.text(String(i+1),l.idx,c),t.text((e.name||"").toString().substring(0,20),l.name,c),t.text(s.toString().substring(0,12),l.mobileNumber,c),t.text((e.email||"").toString().substring(0,18),l.email,c),t.text("Rs ".concat(a),l.balance,c,{align:"right"}),c+=6});const d=t.internal.getNumberOfPages();for(let u=1;u<=d;u++)t.setPage(u),t.setFontSize(8),t.setTextColor(120),t.text("Page ".concat(u," of ").concat(d),12,r-8),t.text("".concat(e.username||"Grocery Store"," \u2022 Customer Report"),n-12,r-8,{align:"right"});t.save("customers-report-".concat((new Date).toISOString().split("T")[0],".pdf")),window.showToast&&window.showToast("Customer report exported successfully!","success")}catch(t){console.error("Error generating PDF:",t),window.showToast&&window.showToast("Error generating PDF. Please try again.","error")}},className:"btn-secondary flex items-center",children:[(0,ie.jsx)(ac,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]}),(0,ie.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.length>0?_.map(n=>(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ie.jsxs)("div",{className:"flex-1",children:[(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:n.name}),(n.mobileNumber||n.phone)&&(0,ie.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:n.mobileNumber||n.phone}),n.email&&(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:n.email}),(0,ie.jsx)("div",{className:"mt-3",children:(0,ie.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat((n.balanceDue||0)>0?"bg-red-100 text-red-800":(n.balanceDue||0)<0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:["Balance: \u20b9",(n.balanceDue||0).toFixed(2)]})})]}),(0,ie.jsxs)("div",{className:"flex space-x-2",children:[(0,ie.jsx)("button",{onClick:()=>(e=>{f(e),u(!0)})(n),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg",title:"Record Payment",children:(0,ie.jsx)(mc,{className:"h-4 w-4"})}),(0,ie.jsx)("button",{onClick:()=>{f(n),c(!0)},className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit Customer",children:(0,ie.jsx)(Nc,{className:"h-4 w-4"})}),(0,ie.jsx)("button",{onClick:()=>(n=>{var r;const i=e.customers.find(e=>e.id===n);if(i&&0!==(i.balanceDue||0)){const e=Math.abs(i.balanceDue||0);return void(window.showToast&&window.showToast("Cannot delete customer. Outstanding balance of \u20b9".concat(e.toFixed(2)," must be cleared first."),"error"))}const a=()=>t({type:"DELETE_CUSTOMER",payload:n});if(null!==(r=window)&&void 0!==r&&r.showToastConfirm)return void window.showToastConfirm({title:"Delete customer?",message:"This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",onConfirm:a});const s=document.createElement("div");s.className="fixed inset-0 bg-black bg-opacity-40 z-[1000] flex items-center justify-center p-4",s.innerHTML='\n      <div class="bg-white rounded-xl shadow-2xl max-w-sm w-full p-5">\n        <h3 class="text-lg font-semibold text-gray-900 mb-1">Delete customer?</h3>\n        <p class="text-sm text-gray-600 mb-4">This action cannot be undone.</p>\n        <div class="flex justify-end space-x-2">\n          <button id="cc-cancel" class="px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50">Cancel</button>\n          <button id="cc-confirm" class="px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700">Delete</button>\n        </div>\n      </div>',document.body.appendChild(s);const o=()=>document.body.removeChild(s);s.querySelector("#cc-cancel").onclick=o,s.querySelector("#cc-confirm").onclick=()=>{o(),a()}})(n.id),disabled:0!==(n.balanceDue||0),className:"p-2 rounded-lg ".concat(0!==(n.balanceDue||0)?"text-gray-300 cursor-not-allowed opacity-50":"text-gray-400 hover:text-red-600 hover:bg-red-50"),title:0!==(n.balanceDue||0)?"Cannot delete. Outstanding balance: \u20b9".concat(Math.abs(n.balanceDue||0).toFixed(2)):"Delete Customer",children:(0,ie.jsx)(Sc,{className:"h-4 w-4"})})]})]})},n.id)):(0,ie.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,ie.jsx)(Rl,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,ie.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No customers found"}),(0,ie.jsx)("p",{className:"text-gray-500 mb-4",children:n?"Try adjusting your search terms":"Get started by adding your first customer"}),!n&&(0,ie.jsx)("button",{onClick:()=>s(!0),className:"btn-primary",children:"Add Customer"})]})}),x>1&&(0,ie.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ie.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",w+1," to ",Math.min(w+g,v.length)," of ",v.length," customers"]}),(0,ie.jsxs)("div",{className:"flex space-x-2",children:[(0,ie.jsx)("button",{onClick:()=>N(p-1),disabled:1===p,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:(0,ie.jsx)(kc,{className:"h-4 w-4"})}),(0,ie.jsxs)("span",{className:"px-3 py-2 text-sm font-medium text-gray-700",children:["Page ",p," of ",x]}),(0,ie.jsx)("button",{onClick:()=>N(p+1),disabled:p===x,className:"p-2 rounded-lg border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:(0,ie.jsx)(Ac,{className:"h-4 w-4"})})]})]}),a&&(0,ie.jsx)(hy,{onClose:()=>s(!1),onSubmit:e=>{const n=o(o({id:Date.now().toString()},e),{},{createdAt:(new Date).toISOString()});t({type:"ADD_CUSTOMER",payload:n}),s(!1)}}),l&&h&&(0,ie.jsx)(fy,{customer:h,onClose:()=>{c(!1),f(null)},onSubmit:e=>{t({type:"UPDATE_CUSTOMER",payload:e}),c(!1),f(null)}}),d&&h&&(0,ie.jsx)(py,{customer:h,onClose:()=>{u(!1),f(null)},onSubmit:e=>{if(h&&e>0){const n=(h.dueAmount||h.balanceDue||0)-e,r=o(o({},h),{},{dueAmount:n,balanceDue:n});console.log("Payment submit - Customer data:",r),console.log("dueAmount:",r.dueAmount,"balanceDue:",r.balanceDue),t({type:"UPDATE_CUSTOMER",payload:r});const i={id:Date.now().toString(),type:"payment",date:(new Date).toISOString(),total:e,customer:h.name,items:[]};t({type:"ADD_TRANSACTION",payload:i}),u(!1),f(null)}}})]})},gy=jt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),yy=jt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),by=jt("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["line",{x1:"7",x2:"17",y1:"12",y2:"12",key:"197423"}]]),vy=jt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),xy=jt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),wy={mg:.001,g:1,gm:1,gram:1,grams:1,kg:1e3,kilogram:1e3,kilograms:1e3,ml:1,milliliter:1,milliliters:1,l:1e3,liter:1e3,liters:1e3,litre:1e3,litres:1e3,pcs:1,pieces:1,box:1,boxes:1,packet:1,packets:1,bottle:1,bottles:1,unit:1,units:1},_y=e=>{var t;const n=null===e||void 0===e||null===(t=e.toLowerCase())||void 0===t?void 0:t.trim();return n?["mg","g","gm","gram","grams","kg","kilogram","kilograms"].includes(n)?"g":["ml","milliliter","milliliters","l","liter","liters","litre","litres"].includes(n)?"ml":"pcs":"pcs"},Ny=(e,t)=>{var n;const r=(null===t||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.trim())||"pcs";return e*(wy[r]||1)},Sy=(e,t)=>{var n;const r=(null===t||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.trim())||"pcs";return e/(wy[r]||1)},ky=(e,t)=>_y(e)===_y(t),Ay=(e,t)=>{var n;const r=(null===t||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.trim())||"pcs";return["mg","g","gm","gram","grams","kg","kilogram","kilograms"].includes(r)||["ml","milliliter","milliliters","l","liter","liters","litre","litres"].includes(r)?"".concat(e," ").concat(r):"".concat(Math.round(e)," ").concat(r)},jy=(e,t,n)=>{const r=e.quantity||e.stock||0,i=e.unit||e.quantityUnit||"pcs",a=Ny(r,i),s=Ny(t,n);return ky(i,n)?{available:s<=a,stockInBaseUnit:a,requestedInBaseUnit:s,baseUnit:_y(i),stockDisplay:Ay(r,i),requestedDisplay:Ay(t,n)}:{available:!1,error:"Unit mismatch: Cannot compare ".concat(i," with ").concat(n),stockInBaseUnit:a,requestedInBaseUnit:s,baseUnit:_y(i)}},Py=e=>{let{product:t,onClose:n,onAdd:i}=e;const{state:a}=Nt(),[s,o]=(0,r.useState)(""),l=(t.quantityUnit||t.unit||"pcs").toLowerCase(),c="pcs"===l||"piece"===l||"pieces"===l?["pcs"]:"kg"===l||"g"===l?["kg","g"]:[l],[d,u]=(0,r.useState)(c.includes(l)?l:c[0]);return(0,ie.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50",children:(0,ie.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ie.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:$l("addQuantity",a.currentLanguage)}),(0,ie.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,ie.jsx)(Gl,{className:"h-5 w-5"})})]}),(0,ie.jsxs)("form",{onSubmit:e=>{e.preventDefault();const r=parseFloat(s);r>0&&(i(t,r,d),n())},className:"space-y-4",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[$l("product",a.currentLanguage),": ",t.name]}),(0,ie.jsxs)("p",{className:"text-sm text-gray-600",children:[$l("price",a.currentLanguage),": \u20b9",(t.sellingPrice||t.costPrice||0).toFixed(2)," per ",t.quantityUnit||"pcs"]})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:$l("quantity",a.currentLanguage)}),(0,ie.jsx)("input",{type:"number",value:s,onChange:e=>o(e.target.value),className:"input-field",step:c.includes("kg")||c.includes("g")?"0.01":"1",min:"0",placeholder:"Enter quantity",required:!0,autoFocus:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:$l("unit",a.currentLanguage)}),(0,ie.jsx)("select",{value:d,onChange:e=>u(e.target.value),className:"input-field",children:c.map(e=>(0,ie.jsx)("option",{value:e,children:"pcs"===e?$l("pieces",a.currentLanguage):"kg"===e?$l("kilograms",a.currentLanguage):"g"===e?$l("grams",a.currentLanguage):e},e))})]}),(0,ie.jsx)("button",{type:"submit",className:"w-full bg-emerald-600 text-white py-2.5 px-4 rounded-md hover:bg-emerald-700 transition-colors",children:$l("addToBill",a.currentLanguage)})]})]})})},Iy=jt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Cy=jt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ey=e=>{let{onScan:t,onClose:n}=e;const[i,a]=(0,r.useState)(!1),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)([]),[h,f]=(0,r.useState)("disconnected");(0,r.useEffect)(()=>{f("connecting"),setTimeout(()=>{a(!0),f("connected")},1500)},[]);return(0,ie.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50",children:(0,ie.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:(0,ie.jsx)(by,{className:"h-6 w-6 text-blue-600"})}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Barcode Machine"}),(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:"Physical Scanner Interface"})]})]}),(0,ie.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,ie.jsx)(Gl,{className:"h-5 w-5"})})]}),(0,ie.jsx)("div",{className:"mb-6",children:(0,ie.jsxs)("div",{className:"flex items-center space-x-2 p-3 rounded-lg ".concat("connected"===h?"bg-green-50 border border-green-200":"connecting"===h?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"),children:[(()=>{switch(h){case"connected":return(0,ie.jsx)(Iy,{className:"h-5 w-5"});case"connecting":return(0,ie.jsx)(bc,{className:"h-5 w-5 animate-pulse"});default:return(0,ie.jsx)(Cy,{className:"h-5 w-5"})}})(),(0,ie.jsx)("span",{className:"font-medium ".concat((()=>{switch(h){case"connected":return"text-green-600";case"connecting":return"text-yellow-600";case"disconnected":return"text-red-600";default:return"text-gray-600"}})()),children:"connected"===h?"Machine Connected":"connecting"===h?"Connecting...":"Machine Disconnected"})]})}),(0,ie.jsxs)("div",{className:"space-y-4",children:[(0,ie.jsx)("button",{onClick:()=>{i&&(o(!0),setTimeout(()=>{const e=Math.random().toString(36).substring(2,15).toUpperCase();c(e),u(t=>[{code:e,timestamp:new Date,success:!0},...t.slice(0,4)]),o(!1),t&&t(e)},2e3))},disabled:!i||s,className:"w-full py-4 px-6 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center ".concat(i&&!s?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:s?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Scanning..."]}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(by,{className:"h-5 w-5 mr-2"}),i?"Scan Barcode":"Connect Machine First"]})}),l&&(0,ie.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,ie.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ie.jsx)(Iy,{className:"h-4 w-4 text-green-600"}),(0,ie.jsx)("span",{className:"font-medium text-green-800",children:"Last Scanned:"})]}),(0,ie.jsx)("p",{className:"font-mono text-lg text-green-900",children:l})]}),d.length>0&&(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recent Scans:"}),(0,ie.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:d.map((e,t)=>(0,ie.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,ie.jsx)("span",{className:"font-mono text-sm",children:e.code}),(0,ie.jsx)("span",{className:"text-xs text-gray-500",children:e.timestamp.toLocaleTimeString()})]},t))})]}),(0,ie.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,ie.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Instructions:"}),(0,ie.jsxs)("ul",{className:"text-xs text-blue-700 space-y-1",children:[(0,ie.jsx)("li",{children:"\u2022 Ensure your barcode scanner machine is connected"}),(0,ie.jsx)("li",{children:'\u2022 Click "Scan Barcode" to simulate scanning'}),(0,ie.jsx)("li",{children:"\u2022 The scanned code will be automatically processed"}),(0,ie.jsx)("li",{children:"\u2022 Use physical scanner for real barcode scanning"})]})]}),i&&(0,ie.jsx)("button",{onClick:()=>{a(!1),f("disconnected"),c(""),u([])},className:"w-full py-2 px-4 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors",children:"Disconnect Machine"})]})]})})},Ly=jt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Dy="7898488935@ibl",Ty="Hariom Modi",Oy=e=>{try{if("undefined"===typeof document)return console.warn("Canvas not available, returning placeholder"),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==";const t=document.createElement("canvas"),n=t.getContext("2d"),r=300;t.width=r,t.height=r;const i=25,a=r/i;n.fillStyle="#FFFFFF",n.fillRect(0,0,r,r);const s=My(e),o=Ry(s,i);n.fillStyle="#000000";for(let e=0;e<i;e++)for(let t=0;t<i;t++)o[e][t]&&n.fillRect(t*a,e*a,a,a);return Fy(n,0,0,a),Fy(n,r-7*a,0,a),Fy(n,0,r-7*a,a),t.toDataURL("image/png")}catch(t){return console.error("Error generating QR code:",t),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="}},My=e=>{let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return Math.abs(t)},Ry=(e,t)=>{const n=[];let r=e;for(let i=0;i<t;i++){n[i]=[];for(let e=0;e<t;e++)i<7&&e<7||i<7&&e>=t-7||i>=t-7&&e<7?n[i][e]=!1:(r=1103515245*r+12345&2147483647,n[i][e]=r%3===0)}return n},Fy=(e,t,n,r)=>{e.fillStyle="#000000",e.fillRect(t,n,7*r,7*r),e.fillStyle="#FFFFFF",e.fillRect(t+r,n+r,5*r,5*r),e.fillStyle="#000000",e.fillRect(t+2*r,n+2*r,3*r,3*r)},Uy=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";const i=parseFloat(e).toFixed(2);return"upi://pay?pa=".concat(Dy,"&pn=").concat(encodeURIComponent(n),"&am=").concat(i,"&cu=INR&tr=").concat(t,"&tn=").concat(encodeURIComponent(r||"Payment"))},By=e=>"\u20b9".concat(parseFloat(e).toFixed(2)),zy=async e=>{try{const t=(()=>{const e=Date.now(),t=Math.random().toString(36).substring(2,8);return"TXN".concat(e).concat(t).toUpperCase()})(),n=await async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{const i=Uy(e,t,n,r);return Oy(i)}catch(i){throw console.error("Error generating UPI QR code:",i),i}}(e.total,t,Ty,"Payment for Bill #".concat(e.id," - ").concat(e.customerName)),r=((e,t)=>({transactionId:t,upiId:Dy,amount:e.total,formattedAmount:By(e.total),merchantName:Ty,billId:e.id,customerName:e.customerName,items:e.items.length,paymentMethod:"UPI",status:"pending",createdAt:(new Date).toISOString()}))(e,t);return{qrCodeDataURL:n,paymentSummary:r,upiUrl:Uy(e.total,t,Ty,"Payment for Bill #".concat(e.id," - ").concat(e.customerName))}}catch(t){throw console.error("Error generating bill payment QR:",t),t}},qy=e=>{let{bill:t,onClose:n,onPaymentReceived:i}=e;const[a,s]=(0,r.useState)("pending"),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!0);r.useEffect(()=>{m()},[t]);const m=async()=>{try{p(!0),console.log("\ud83d\udd27 Generating QR code for bill:",t);const e=await zy(t);console.log("\ud83d\udd27 QR generation result:",e),l(e.qrCodeDataURL),d(e.paymentSummary),h(e.upiUrl),console.log("\ud83d\udd27 QR code data URL set:",e.qrCodeDataURL?"Success":"Failed")}catch(e){console.error("\u274c Error generating QR code:",e),window.showToast("Error generating QR code","error")}finally{p(!1)}};return(0,ie.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ie.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ie.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ie.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,ie.jsx)(Ly,{className:"h-6 w-6 text-green-600"})}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"UPI Payment"}),(0,ie.jsx)("p",{className:"text-sm text-gray-500",children:"Scan QR code to pay"})]})]}),(0,ie.jsx)("button",{onClick:n,className:"p-2 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100",children:(0,ie.jsx)(Gl,{className:"h-5 w-5"})})]}),(0,ie.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ie.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,ie.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Bill Summary"}),(0,ie.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ie.jsxs)("div",{className:"flex justify-between",children:[(0,ie.jsx)("span",{className:"text-gray-600",children:"Bill ID:"}),(0,ie.jsxs)("span",{className:"font-medium",children:["#",t.id]})]}),(0,ie.jsxs)("div",{className:"flex justify-between",children:[(0,ie.jsx)("span",{className:"text-gray-600",children:"Customer:"}),(0,ie.jsx)("span",{className:"font-medium",children:t.customerName})]}),(0,ie.jsxs)("div",{className:"flex justify-between",children:[(0,ie.jsx)("span",{className:"text-gray-600",children:"Date:"}),(0,ie.jsx)("span",{className:"font-medium",children:new Date(t.date).toLocaleDateString()})]}),(0,ie.jsxs)("div",{className:"mt-3",children:[(0,ie.jsx)("h5",{className:"font-medium text-gray-800 mb-2",children:"Items:"}),(0,ie.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:t.items.map((e,t)=>(0,ie.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,ie.jsx)("span",{className:"text-gray-600",children:e.name}),(0,ie.jsxs)("span",{className:"font-medium",children:[e.quantity," ",e.unit," \xd7 \u20b9",(e.price||0).toFixed(2)," = \u20b9",(e.total||(e.price||0)*(e.quantity||0)).toFixed(2)]})]},t))})]}),(0,ie.jsxs)("div",{className:"flex justify-between text-lg font-semibold border-t pt-2 mt-3",children:[(0,ie.jsx)("span",{className:"text-gray-900",children:"Total Amount:"}),(0,ie.jsx)("span",{className:"text-green-600",children:By(t.total)})]})]})]}),(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Scan to Pay"}),f?(0,ie.jsx)("div",{className:"flex items-center justify-center h-64 bg-gray-100 rounded-lg",children:(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600 mx-auto mb-2"}),(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:"Generating QR Code..."})]})}):o?(0,ie.jsxs)("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 inline-block",children:[(0,ie.jsx)("img",{src:o,alt:"UPI Payment QR Code",className:"w-64 h-64 mx-auto"}),(0,ie.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Scan with any UPI app (Paytm, PhonePe, Google Pay, etc.)"})]}):(0,ie.jsx)("div",{className:"flex items-center justify-center h-64 bg-gray-100 rounded-lg",children:(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsx)(Cy,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:"Failed to generate QR code"})]})})]}),(0,ie.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,ie.jsx)("h5",{className:"font-medium text-blue-900 mb-2",children:"Payment Instructions:"}),(0,ie.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,ie.jsx)("li",{children:"\u2022 Open your UPI app (Paytm, PhonePe, Google Pay)"}),(0,ie.jsx)("li",{children:"\u2022 Scan the QR code above"}),(0,ie.jsxs)("li",{children:["\u2022 Verify the amount: ",(0,ie.jsx)("span",{className:"font-semibold",children:By(t.total)})]}),(0,ie.jsx)("li",{children:"\u2022 Complete the payment"}),(0,ie.jsx)("li",{children:'\u2022 Click "Payment Received" below to confirm'})]})]}),(0,ie.jsxs)("div",{className:"space-y-3",children:[(0,ie.jsx)("h5",{className:"font-medium text-gray-900",children:"Alternative Payment:"}),(0,ie.jsxs)("div",{className:"flex space-x-2",children:[(0,ie.jsxs)("button",{onClick:()=>{navigator.clipboard.writeText(u),window.showToast("UPI URL copied to clipboard","success")},className:"flex-1 btn-secondary flex items-center justify-center text-sm",children:[(0,ie.jsx)(mc,{className:"h-4 w-4 mr-2"}),"Copy UPI Link"]}),(0,ie.jsxs)("button",{onClick:()=>{window.open(u,"_blank")},className:"flex-1 btn-primary flex items-center justify-center text-sm",children:[(0,ie.jsx)(Ly,{className:"h-4 w-4 mr-2"}),"Open UPI App"]})]})]}),(0,ie.jsxs)("div",{className:"text-center",children:["pending"===a&&(0,ie.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-orange-600",children:[(0,ie.jsx)(ic,{className:"h-5 w-5"}),(0,ie.jsx)("span",{className:"font-medium",children:"Waiting for Payment..."})]}),"completed"===a&&(0,ie.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[(0,ie.jsx)(Iy,{className:"h-5 w-5"}),(0,ie.jsx)("span",{className:"font-medium",children:"Payment Confirmed!"})]})]})]}),(0,ie.jsxs)("div",{className:"flex space-x-3 p-6 border-t border-gray-200",children:[(0,ie.jsx)("button",{onClick:n,className:"flex-1 btn-secondary",disabled:"completed"===a,children:"completed"===a?"Close":"Cancel"}),(0,ie.jsxs)("button",{onClick:()=>{s("completed"),i(c),window.showToast("Payment confirmed successfully!","success")},className:"flex-1 btn-primary flex items-center justify-center",disabled:"completed"===a,children:[(0,ie.jsx)(Iy,{className:"h-4 w-4 mr-2"}),"Payment Received"]})]})]})})},Vy=()=>{const{state:e,dispatch:t}=Nt(),[n,i]=(0,r.useState)(""),[a,s]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)([]),[g,y]=(0,r.useState)(0),[b,v]=(0,r.useState)(0),[x,w]=(0,r.useState)("cash"),[_,N]=(0,r.useState)(""),[S,k]=(0,r.useState)(!1),A=(0,r.useRef)(null),[j,P]=(0,r.useState)(null),[I,C]=(0,r.useState)(!1),[E,L]=(0,r.useState)(!1),[D,T]=(0,r.useState)(null),[O,M]=(0,r.useState)(!1),[R,F]=(0,r.useState)(null),U=(0,r.useRef)(!1),B=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";window.showToast&&window.showToast(e,t,4e3)};(0,r.useEffect)(()=>{const e=()=>{A.current&&A.current.focus()};e(),document.addEventListener("touchstart",e,{passive:!0});const t=()=>{document.hidden||e()};return document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("touchstart",e),document.removeEventListener("visibilitychange",t)}},[]);const q=e.customers,V=e.products.filter(e=>{var t;return e.name.toLowerCase().includes(h.toLowerCase())||(null===(t=e.category)||void 0===t?void 0:t.toLowerCase().includes(h.toLowerCase()))}),H=p.reduce((e,t)=>e+t.price*t.quantity,0),W=H*g/100,G=(H-W)*b/100,Y=H-W+G,K=t=>{console.log("Barcode scan handler called with:",t),console.log("All products:",e.products.map(e=>({name:e.name,barcode:e.barcode})));const n=e.products.find(e=>e.barcode===t);if(console.log("Found product:",n),n)J(n);else{const n=(e.currentLanguage,"".concat($l("productNotFound",e.currentLanguage),": ").concat(t,". ").concat($l("pleaseAddProductFirst",e.currentLanguage),"."));B(n,"error")}N("")},J=e=>{P(e),C(!0)},$=(t,n)=>{if(n<=0)m(e=>e.filter(e=>e.id!==t));else{const r=p.find(e=>e.id===t);if(r){const i=e.products.find(e=>e.id===t);if(i){const t=jy(i,n,r.unit);if(!t.available){if(t.error)return void B(t.error,"error");const n=(e.currentLanguage,"\u26a0\ufe0f ".concat($l("lowStock",e.currentLanguage),"! ").concat($l("available",e.currentLanguage),": ").concat(t.stockDisplay,". ").concat($l("youCannotAddMore",e.currentLanguage),"."));return void B(n,"warning")}}}m(e=>e.map(e=>e.id===t?o(o({},e),{},{quantity:n}):e))}},X=()=>{if(console.log("\ud83d\ude80\ud83d\ude80\ud83d\ude80 makePayment FUNCTION CALLED \ud83d\ude80\ud83d\ude80\ud83d\ude80"),console.log("makePayment called at:",(new Date).toISOString()),console.trace("makePayment call stack"),console.log("Bill items length:",p.length),0!==p.length){if(console.log("=== MAKE PAYMENT DEBUG ==="),console.log("Bill Items:",p),console.log("All Products:",e.products),console.log("Payment Method:",x),console.log("Selected Customer:",n),console.log("Total:",Y),console.log("========================"),"due"===x||"credit"===x){var r;const t=d?a:(null===(r=e.customers.find(e=>e.id===n))||void 0===r?void 0:r.name)||"";if(!t||""===t.trim())return void B("hi"===e.currentLanguage?"\u0915\u0943\u092a\u092f\u093e \u0915\u094d\u0930\u0947\u0924\u093e \u0915\u093e \u0928\u093e\u092e \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902\u0964":"Please enter customer name.","error");let i="";if(d){if(i=l||"",!i||""===i.trim()){const e=q.find(e=>e.name.toLowerCase()===a.toLowerCase());e&&(i=e.mobileNumber||e.phone||"")}}else{const t=e.customers.find(e=>e.id===n);if(!t)return void B("hi"===e.currentLanguage?"\u0915\u0943\u092a\u092f\u093e \u090f\u0915 \u0935\u0948\u0927 \u0917\u094d\u0930\u093e\u0939\u0915 \u091a\u0941\u0928\u0947\u0902\u0964":"Please select a valid customer.","error");i=t.mobileNumber||t.phone||""}if(!i||""===i.trim())return void B("hi"===e.currentLanguage?"\u0921\u094d\u092f\u0942 \u092d\u0941\u0917\u0924\u093e\u0928 \u0915\u0947 \u0932\u093f\u090f \u0917\u094d\u0930\u093e\u0939\u0915 \u0915\u093e \u092e\u094b\u092c\u093e\u0907\u0932 \u0928\u0902\u092c\u0930 \u0906\u0935\u0936\u094d\u092f\u0915 \u0939\u0948\u0964 \u0915\u0943\u092a\u092f\u093e \u092e\u094b\u092c\u093e\u0907\u0932 \u0928\u0902\u092c\u0930 \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902\u0964":"Mobile number is required for due payment. Please enter mobile number.","error");const s=/^[6-9]\d{9}$/,o=i.replace(/\D/g,"");if(!s.test(o))return void B("hi"===e.currentLanguage?"\u0915\u0943\u092a\u092f\u093e \u090f\u0915 \u0935\u0948\u0927 \u092e\u094b\u092c\u093e\u0907\u0932 \u0928\u0902\u092c\u0930 \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902 (10 \u0905\u0902\u0915, 6-9 \u0938\u0947 \u0936\u0941\u0930\u0942)\u0964":"Please enter a valid mobile number (10 digits, starting with 6-9).","error")}console.log("\u2705 Validation passed, proceeding to create order...");try{console.log("\ud83d\udce6 Starting product quantity reduction..."),p.forEach((n,r)=>{const i=e.products.find(e=>e.id===n.productId||e.id===n.id);if(i){console.log("=== QUANTITY REDUCTION DEBUG [Item ".concat(r+1,"] ===")),console.log("Product ID:",i.id,"Name:",i.name);const e=void 0!==i.quantity?i.quantity:void 0!==i.stock?i.stock:0;console.log("Current Quantity:",e,"Unit:",i.unit||i.quantityUnit||"pcs"),console.log("Billing Quantity:",n.quantity,"Unit:",n.unit||i.unit||i.quantityUnit||"pcs");let a=e;const s=i.unit||i.quantityUnit||"pcs",l=n.unit||s;if(l!==s&&n.unit){const t=Ny(n.quantity,l),r=Ny(e,s);a=Sy(r-t,s),console.log("Unit conversion - New quantity:",a)}else a=e-n.quantity,console.log("Direct subtraction:",e,"-",n.quantity,"=",a);const c=Math.max(0,a);console.log("Final Quantity:",c),console.log("========================");const d=o(o({},i),{},{id:i.id,quantity:c,stock:c,isSynced:!1});console.log("Dispatching UPDATE_PRODUCT for:",d.name,"New quantity:",d.quantity),t({type:Se,payload:d})}else console.error("Product not found for bill item:",n),console.error("Searched products:",e.products.map(e=>({id:e.id,name:e.name})))}),console.log("\ud83d\udcdd Starting order creation process..."),console.log("\ud83d\udd0d Extracting sellerId from auth...");const r=z();if(console.log("Extracted sellerId:",r),console.log("Auth state:",localStorage.getItem("auth")),console.log("Current user:",e.currentUser),!r)return console.error("\u274c Cannot create order: sellerId is missing"),console.error("Auth state:",localStorage.getItem("auth")),console.error("Current user:",e.currentUser),void B("Error: User not authenticated. Please login again.","error");if(console.log("\u2705 SellerId extracted successfully:",r),!p||0===p.length)return console.error("Cannot create order: billItems is empty"),void B("Error: No items in the bill. Please add items before confirming.","error");const a=p.map((t,n)=>{var r,i;const a=e.products.find(e=>e.id===t.productId||e.id===t.id),s=null!==(r=null!==(i=null===a||void 0===a?void 0:a.costPrice)&&void 0!==i?i:null===a||void 0===a?void 0:a.unitPrice)&&void 0!==r?r:0;console.log("Order Item ".concat(n+1,":"),{productId:t.productId||t.id,productName:t.name,product:a?{id:a.id,name:a.name,costPrice:a.costPrice,unitPrice:a.unitPrice}:"NOT FOUND",costPrice:s,sellingPrice:t.price,quantity:t.quantity,unit:t.unit});const o={name:t.name||"",sellingPrice:Number(t.price)||0,costPrice:Number(s)||0,quantity:Number(t.quantity)||0,unit:t.unit||"pcs"};return o.name&&""!==o.name.trim()||console.error("\u274c Order Item ".concat(n+1," validation failed: Name is empty")),(void 0===o.sellingPrice||null===o.sellingPrice||"number"!==typeof o.sellingPrice||o.sellingPrice<0)&&console.error("\u274c Order Item ".concat(n+1," validation failed: sellingPrice is invalid:"),o.sellingPrice,typeof o.sellingPrice),void 0!==o.costPrice&&null!==o.costPrice&&"number"===typeof o.costPrice||console.error("\u274c Order Item ".concat(n+1," validation failed: costPrice is invalid:"),o.costPrice,typeof o.costPrice),(void 0===o.quantity||null===o.quantity||"number"!==typeof o.quantity||o.quantity<1)&&console.error("\u274c Order Item ".concat(n+1," validation failed: quantity is invalid:"),o.quantity,typeof o.quantity),o.unit&&"string"===typeof o.unit||console.error("\u274c Order Item ".concat(n+1," validation failed: unit is invalid:"),o.unit,typeof o.unit),console.log("\u2705 Order Item ".concat(n+1," structure:"),o),o});if(0===a.length)return console.error("Cannot create order: orderItems array is empty after mapping"),void B("Error: Could not process order items. Please try again.","error");const l={id:Date.now().toString(),sellerId:r,customerId:n||null,paymentMethod:"due"===x?"due":x||"cash",items:a,totalAmount:Number(Y)||0,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString()};if(console.log("Creating order:",JSON.stringify(l,null,2)),console.log("Order items count:",l.items.length),console.log("Order totalAmount:",l.totalAmount),console.log("Order sellerId:",l.sellerId),!l.sellerId)return console.error("Order validation failed: sellerId is missing"),void B("Error: User not authenticated. Please login again.","error");if(!l.items||0===l.items.length)return console.error("Order validation failed: items array is empty"),void B("Error: No items in order. Please add items before confirming.","error");if(!l.totalAmount||l.totalAmount<=0)return console.error("Order validation failed: totalAmount is invalid:",l.totalAmount),void B("Error: Invalid order total. Please try again.","error");console.log("=== VALIDATING ORDER ITEMS ==="),l.items.forEach((e,t)=>{console.log("Item ".concat(t+1,":"),{name:e.name,nameType:typeof e.name,sellingPrice:e.sellingPrice,sellingPriceType:typeof e.sellingPrice,costPrice:e.costPrice,costPriceType:typeof e.costPrice,quantity:e.quantity,quantityType:typeof e.quantity,unit:e.unit,unitType:typeof e.unit}),e.name&&""!==e.name.trim()||console.error("\u274c Item ".concat(t+1," validation: Name is empty or invalid")),("number"!==typeof e.sellingPrice||e.sellingPrice<0)&&console.error("\u274c Item ".concat(t+1," validation: sellingPrice is invalid:"),e.sellingPrice),("number"!==typeof e.costPrice||e.costPrice<0)&&console.error("\u274c Item ".concat(t+1," validation: costPrice is invalid:"),e.costPrice),("number"!==typeof e.quantity||e.quantity<1)&&console.error("\u274c Item ".concat(t+1," validation: quantity is invalid:"),e.quantity),e.unit&&"string"===typeof e.unit||console.error("\u274c Item ".concat(t+1," validation: unit is invalid:"),e.unit)}),console.log("=== FINAL ORDER OBJECT BEFORE DISPATCH ==="),console.log("Order ID:",l.id,"(type:",typeof l.id,")"),console.log("Order sellerId:",l.sellerId,"(type:",typeof l.sellerId,")"),console.log("Order paymentMethod:",l.paymentMethod,"(type:",typeof l.paymentMethod,")"),console.log("Order items count:",l.items.length),console.log("Order items:",l.items),console.log("Order totalAmount:",l.totalAmount,"(type:",typeof l.totalAmount,")"),console.log("Full order:",JSON.stringify(l,null,2)),console.log("=========================================="),console.log("\ud83d\ude80 Dispatching ADD_ORDER action..."),console.log("\ud83d\ude80 About to dispatch ADD_ORDER action..."),console.log("Order payload:",l),console.log("Dispatch function:",t),console.log("Dispatch type:",typeof t);try{const e={type:Ee,payload:l};console.log("Dispatching action:",e),console.log("Action type:",Ee),t(e),console.log("\u2705 ADD_ORDER action dispatched successfully")}catch(h){return console.error("\u274c Error dispatching ADD_ORDER:",h),console.error("Error message:",h.message),console.error("Error stack:",h.stack),void B("Error creating order. Please try again.","error")}if("due"===x){const r=e.customers.find(e=>e.id===n);if(r){const e=(r.dueAmount||r.balanceDue||0)+Y;t({type:xe,payload:o(o({},r),{},{dueAmount:e,balanceDue:e})})}}m([]),y(0),v(0),i(""),s(""),c(""),u(!1),t({type:We}),B("Order created successfully! Stock reduced for ".concat(p.length," item(s)."),"success")}catch(h){console.error("Error processing payment:",h),window.showToast&&window.showToast("Error processing payment. Please try again.","error")}}else console.log("\u274c No bill items, returning early")},Q=()=>{if(0!==p.length)try{var t;const r=new bm("p","mm","a4"),i=r.internal.pageSize.getWidth(),s=r.internal.pageSize.getHeight();r.setFont("helvetica","normal"),r.setFontSize(18),r.text("TAX INVOICE",i/2,15,{align:"center"}),r.setFontSize(11);const o=e.username||"Grocery Store",l=e.gstNumber||"N/A";r.text(o,14,26),r.text("GST: ".concat(l),14,32);const c="BILL-".concat(Date.now().toString().slice(-6)),u=d?a:(null===(t=e.customers.find(e=>e.id===n))||void 0===t?void 0:t.name)||"Walk-in Customer";r.text("Invoice: ".concat(c),i-14,26,{align:"right"}),r.text("Date: ".concat((new Date).toLocaleDateString()),i-14,32,{align:"right"}),r.text("Customer: ".concat(u),14,42),r.text("Payment: ".concat(x.toUpperCase()),14,48);const h=58;r.setFillColor(234,238,243),r.setDrawColor(220),r.rect(10,h-6,i-20,8,"F"),r.setFontSize(10),r.setTextColor(30),r.text("Item",14,h),r.text("Qty",100,h),r.text("Rate (Rs)",130,h,{align:"right"}),r.text("Amount (Rs)",i-14,h,{align:"right"});let f=h+6;r.setTextColor(50),r.setFontSize(9),p.forEach(e=>{f>s-40&&(r.addPage(),r.setFillColor(234,238,243),r.setDrawColor(220),r.rect(10,10,i-20,8,"F"),r.setFontSize(10),r.setTextColor(30),r.text("Item",14,16),r.text("Qty",100,16),r.text("Rate (Rs)",130,16,{align:"right"}),r.text("Amount (Rs)",i-14,16,{align:"right"}),f=24,r.setTextColor(50),r.setFontSize(9));const t=(e.price*e.quantity).toFixed(2);r.text(e.name.substring(0,30),14,f),r.text("".concat(e.quantity," ").concat(e.unit||""),100,f),r.text("".concat(e.price.toFixed(2)),130,f,{align:"right"}),r.text("".concat(t),i-14,f,{align:"right"}),f+=5}),f+=4,r.setDrawColor(220),r.rect(i-80,f,70,28),r.setFontSize(10),r.text("Subtotal: Rs ".concat(H.toFixed(2)),i-76,f+8),r.text("Discount: Rs ".concat(W.toFixed(2)),i-76,f+14),r.text("Tax: Rs ".concat(G.toFixed(2)),i-76,f+20),r.setFontSize(12),r.text("TOTAL: Rs ".concat(Y.toFixed(2)),i-76,f+26),r.setFontSize(9),r.setTextColor(120),r.text("Thank you for your business!",i/2,s-10,{align:"center"}),r.save("invoice-".concat(u.replace(/\s+/g,"-"),"-").concat(Date.now(),".pdf")),window.showToast&&window.showToast("Bill downloaded successfully!","success")}catch(r){console.error("Error generating PDF:",r),window.showToast&&window.showToast("Error generating PDF. Please try again.","error")}};return(0,r.useEffect)(()=>{const e=e=>{115!==e.keyCode&&"F4"!==e.key||(e.preventDefault(),p.length>0?Q():B("Please add items to the bill first","warning"))};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[p]),(0,ie.jsxs)("div",{className:"space-y-8 fade-in-up",children:[(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h2",{className:"text-3xl font-bold text-black",children:$l("billingSystem",e.currentLanguage)}),(0,ie.jsx)("p",{className:"text-gray-600 mt-2",children:$l("createAndManageBills",e.currentLanguage)})]}),(0,ie.jsxs)("div",{className:"mt-4 sm:mt-0 flex flex-wrap gap-2 sm:gap-3",children:[(0,ie.jsxs)("button",{onClick:Q,className:"btn-secondary flex items-center text-sm",disabled:0===p.length,children:[(0,ie.jsx)(ac,{className:"h-4 w-4 mr-2"}),(0,ie.jsx)("span",{className:"hidden sm:inline",children:"Download Bill"}),(0,ie.jsx)("span",{className:"sm:hidden",children:"Download"})]}),(0,ie.jsxs)("button",{onClick:e=>{if(console.log("\ud83d\udd18 BUTTON CLICKED - Confirm Order button pressed!"),console.log("Event:",e),console.log("Bill items length:",p.length),console.log("Button disabled?",0===p.length),console.log("makePayment function:",X),console.log("makePayment type:",typeof X),0!==p.length)try{console.log("\ud83d\ude80 Calling makePayment function..."),X(),console.log("\u2705 makePayment function completed")}catch(t){console.error("\u274c ERROR in makePayment:",t),console.error("Error message:",t.message),console.error("Error stack:",t.stack),alert("Error creating order: "+t.message)}else console.log("\u26a0\ufe0f Button is disabled - no bill items")},className:"btn-primary flex items-center bg-primary-500 hover:bg-primary-600 text-sm",disabled:0===p.length,style:{cursor:0===p.length?"not-allowed":"pointer"},children:[(0,ie.jsx)(Bl,{className:"h-4 w-4 mr-2"}),(0,ie.jsx)("span",{className:"hidden sm:inline",children:"Make Payment"}),(0,ie.jsx)("span",{className:"sm:hidden",children:"Payment"})]}),("standard"===e.currentPlan||"premium"===e.currentPlan)&&(0,ie.jsxs)("button",{onClick:()=>{if(0!==p.length)try{var t;const r=new bm("p","mm","a4"),i=r.internal.pageSize.getWidth(),s=r.internal.pageSize.getHeight();r.setFont("helvetica","normal"),r.setFontSize(18),r.text("TAX INVOICE",i/2,15,{align:"center"}),r.setFontSize(11);const o=e.username||"Grocery Store",l=e.gstNumber||"N/A";r.text(o,14,26),r.text("GST: ".concat(l),14,32);const c="BILL-".concat(Date.now().toString().slice(-6)),u=d?a:(null===(t=e.customers.find(e=>e.id===n))||void 0===t?void 0:t.name)||"Walk-in Customer";r.text("Invoice: ".concat(c),i-14,26,{align:"right"}),r.text("Date: ".concat((new Date).toLocaleDateString()),i-14,32,{align:"right"}),r.text("Customer: ".concat(u),14,42),r.text("Payment: ".concat(x.toUpperCase()),14,48);const h=58;r.setFillColor(234,238,243),r.setDrawColor(220),r.rect(10,h-6,i-20,8,"F"),r.setFontSize(10),r.setTextColor(30),r.text("Item",14,h),r.text("Qty",100,h),r.text("Rate (Rs)",130,h,{align:"right"}),r.text("Amount (Rs)",i-14,h,{align:"right"});let f=h+6;r.setTextColor(50),r.setFontSize(9),p.forEach(e=>{f>s-40&&(r.addPage(),r.setFillColor(234,238,243),r.setDrawColor(220),r.rect(10,10,i-20,8,"F"),r.setFontSize(10),r.setTextColor(30),r.text("Item",14,16),r.text("Qty",100,16),r.text("Rate (Rs)",130,16,{align:"right"}),r.text("Amount (Rs)",i-14,16,{align:"right"}),f=24,r.setTextColor(50),r.setFontSize(9));const t=(e.price*e.quantity).toFixed(2);r.text(e.name.substring(0,30),14,f),r.text("".concat(e.quantity," ").concat(e.unit||""),100,f),r.text("".concat(e.price.toFixed(2)),130,f,{align:"right"}),r.text("".concat(t),i-14,f,{align:"right"}),f+=5}),f+=4,r.setDrawColor(220),r.rect(i-80,f,70,28),r.setFontSize(10),r.text("Subtotal: Rs ".concat(H.toFixed(2)),i-76,f+8),r.text("Discount: Rs ".concat(W.toFixed(2)),i-76,f+14),r.text("Tax: Rs ".concat(G.toFixed(2)),i-76,f+20),r.setFontSize(12),r.text("TOTAL: Rs ".concat(Y.toFixed(2)),i-76,f+26),r.setFontSize(9),r.setTextColor(120),r.text("Thank you for your business!",i/2,s-10,{align:"center"});const m=r.output("blob"),g=URL.createObjectURL(m),y=document.createElement("a");y.href=g,y.download="invoice-".concat(u.replace(/\s+/g,"-"),"-").concat(Date.now(),".pdf"),document.body.appendChild(y),y.click(),document.body.removeChild(y);const b="Invoice from ".concat(o,"\nCustomer: ").concat(u,"\nTotal: Rs ").concat(Y.toFixed(2),"\n\nPlease check the downloaded PDF file."),v="https://web.whatsapp.com/send?text=".concat(encodeURIComponent(b));window.open(v,"_blank"),setTimeout(()=>{URL.revokeObjectURL(g)},1e3),window.showToast&&window.showToast("PDF downloaded! WhatsApp Web opened - attach the PDF file manually.","success")}catch(r){console.error("Error sharing to WhatsApp:",r),window.showToast&&window.showToast("Error sharing to WhatsApp. Please try again.","error")}},className:"btn-primary flex items-center bg-primary-500 hover:bg-primary-600 text-sm",disabled:0===p.length,children:[(0,ie.jsx)(gy,{className:"h-4 w-4 mr-2"}),(0,ie.jsx)("span",{className:"hidden sm:inline",children:"Share WhatsApp"}),(0,ie.jsx)("span",{className:"sm:hidden",children:"WhatsApp"})]})]})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,ie.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-black mb-4 flex items-center",children:[(0,ie.jsx)(yy,{className:"h-5 w-5 mr-2 text-primary-600"}),$l("customerInformation",e.currentLanguage)]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Customer ","cash"===x&&(0,ie.jsx)("span",{className:"text-gray-500 text-xs font-normal",children:"(Optional)"})]}),(0,ie.jsxs)("div",{className:"space-y-3",children:[(0,ie.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ie.jsx)("input",{type:"checkbox",id:"customName",checked:d,onChange:e=>u(e.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,ie.jsx)("label",{htmlFor:"customName",className:"text-sm font-medium text-gray-700",children:"Use custom customer name"})]}),d?(0,ie.jsxs)("div",{className:"space-y-3",children:[(0,ie.jsx)("input",{type:"text",value:a,onChange:e=>s(e.target.value),placeholder:"Enter customer name",className:"input-field",required:!0}),(0,ie.jsx)("input",{type:"tel",value:l,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,10);c(t)},placeholder:"Enter mobile number (10 digits)",className:"input-field",maxLength:10}),("due"===x||"credit"===x)&&(0,ie.jsx)("p",{className:"text-xs text-primary-600",children:"hi"===e.currentLanguage?"\u26a0\ufe0f \u092e\u094b\u092c\u093e\u0907\u0932 \u0928\u0902\u092c\u0930 \u0921\u094d\u092f\u0942 \u092d\u0941\u0917\u0924\u093e\u0928 \u0915\u0947 \u0932\u093f\u090f \u0906\u0935\u0936\u094d\u092f\u0915 \u0939\u0948":"\u26a0\ufe0f Mobile number is required for due payment"})]}):(0,ie.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"input-field",children:[(0,ie.jsx)("option",{value:"",children:"Choose a customer"}),q.map(e=>{const t=e.mobileNumber||e.phone||"";return(0,ie.jsxs)("option",{value:e.name,children:[e.name," ",t?"(".concat(t,")"):""," ",e.balanceDue||e.dueAmount?"- \u20b9".concat((e.dueAmount||e.balanceDue||0).toFixed(2)," due"):""]},e.id)})]})]})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),(0,ie.jsxs)("select",{value:x,onChange:e=>w(e.target.value),className:"input-field",children:[(0,ie.jsx)("option",{value:"cash",children:"Cash"}),(0,ie.jsx)("option",{value:"card",children:"Card"}),(0,ie.jsx)("option",{value:"upi",children:"UPI"}),(0,ie.jsx)("option",{value:"due",children:"Due (Credit)"})]})]})]})]}),(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-black mb-4 flex items-center",children:[(0,ie.jsx)(Fl,{className:"h-5 w-5 mr-2 text-primary-600"}),"Add Products"]}),(0,ie.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,ie.jsxs)("div",{className:"relative",children:[(0,ie.jsx)(_c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,ie.jsx)("input",{type:"text",placeholder:"Search products...",value:h,onChange:e=>f(e.target.value),className:"input-field pl-10"})]}),(0,ie.jsxs)("div",{className:"relative",children:[(0,ie.jsx)(by,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-primary-600"}),(0,ie.jsx)("input",{type:"text",placeholder:"Enter barcode from machine...",value:_,ref:A,onChange:e=>N(e.target.value),onPaste:e=>{var t;const n=((null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text"))||"").trim();n&&(N(n),setTimeout(()=>{K(n)},100))},onKeyPress:e=>{if("Enter"===e.key){const e=_.trim();e&&K(e)}},className:"input-field pl-12 pr-20"}),(0,ie.jsx)("button",{onClick:()=>k(!0),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",title:"Open Barcode Machine",children:(0,ie.jsx)(by,{className:"h-4 w-4"})})]})]}),(0,ie.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-h-64 overflow-y-auto",children:V.map(e=>(0,ie.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,ie.jsxs)("p",{className:"text-sm text-gray-600",children:["\u20b9",(e.sellingPrice||e.costPrice||0).toFixed(2)," per ",e.quantityUnit||e.unit||"pcs"," \u2022 Quantity: ",e.quantity||e.stock||0]})]}),(0,ie.jsx)("button",{onClick:()=>J(e),className:"btn-primary text-sm px-3 py-1",children:(0,ie.jsx)(wc,{className:"h-3 w-3"})})]},e.id))})]}),(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-black mb-4 flex items-center",children:[(0,ie.jsx)(Pt,{className:"h-5 w-5 mr-2 text-primary-600"}),"Bill Items"]}),0===p.length?(0,ie.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ie.jsx)(Pt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),(0,ie.jsx)("p",{children:"No items added to bill yet"})]}):(0,ie.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,ie.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,ie.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ie.jsx)("h4",{className:"font-medium text-gray-900 break-words",children:e.name}),(0,ie.jsxs)("p",{className:"text-sm text-gray-600 break-words",children:["\u20b9",e.price.toFixed(2)," per ",e.unit||e.quantityUnit||"pcs"]})]}),(0,ie.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ie.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ie.jsx)("button",{onClick:()=>$(e.id,e.quantity-1),className:"w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center",children:"-"}),(0,ie.jsx)("span",{className:"w-12 text-center font-medium",children:e.quantity}),(0,ie.jsx)("span",{className:"text-xs text-gray-500",children:e.unit||e.quantityUnit||"pcs"}),(0,ie.jsx)("button",{onClick:()=>$(e.id,e.quantity+1),className:"w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center",children:"+"})]}),(0,ie.jsxs)("span",{className:"font-semibold text-gray-900 w-20 text-right",children:["\u20b9",(e.price*e.quantity).toFixed(2)]}),(0,ie.jsx)("button",{onClick:()=>{return t=e.id,void m(e=>e.filter(e=>e.id!==t));var t},className:"text-black hover:text-black/80",children:(0,ie.jsx)(Sc,{className:"h-4 w-4"})})]})]},e.id))})]})]}),(0,ie.jsx)("div",{className:"space-y-6",children:(0,ie.jsxs)("div",{className:"card sticky top-4",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-black mb-6 flex items-center",children:[(0,ie.jsx)(vy,{className:"h-5 w-5 mr-2 text-primary-600"}),"Bill Summary"]}),(0,ie.jsxs)("div",{className:"space-y-4",children:[(0,ie.jsxs)("div",{className:"flex justify-between",children:[(0,ie.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,ie.jsxs)("span",{className:"font-semibold",children:["\u20b9",H.toFixed(2)]})]}),(0,ie.jsxs)("div",{className:"flex justify-between",children:[(0,ie.jsx)("span",{className:"text-gray-600",children:"Discount:"}),(0,ie.jsxs)("span",{className:"font-semibold text-primary-600",children:["-\u20b9",W.toFixed(2)]})]}),(0,ie.jsxs)("div",{className:"flex justify-between",children:[(0,ie.jsx)("span",{className:"text-gray-600",children:"Tax:"}),(0,ie.jsxs)("span",{className:"font-semibold",children:["\u20b9",G.toFixed(2)]})]}),(0,ie.jsx)("hr",{className:"border-gray-200"}),(0,ie.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,ie.jsx)("span",{children:"Total:"}),(0,ie.jsxs)("span",{className:"text-primary-600",children:["\u20b9",Y.toFixed(2)]})]})]}),(0,ie.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount (%)"}),(0,ie.jsx)("input",{type:"number",value:g||"",onChange:e=>{const t=e.target.value;y(""===t?0:parseFloat(t)||0)},className:"input-field",min:"0",max:"100",placeholder:"0"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax (%)"}),(0,ie.jsx)("input",{type:"number",value:b||"",onChange:e=>{const t=e.target.value;v(""===t?0:parseFloat(t)||0)},className:"input-field",min:"0",max:"100",placeholder:"0"})]}),(0,ie.jsxs)("button",{onClick:()=>{var r;if(U.current)return console.warn("\u26a0\ufe0f Bill generation already in progress, ignoring duplicate call"),void B("hi"===e.currentLanguage?"\u092c\u093f\u0932 \u091c\u0928\u0930\u0947\u0936\u0928 \u092a\u0939\u0932\u0947 \u0938\u0947 \u091a\u0932 \u0930\u0939\u093e \u0939\u0948, \u0915\u0943\u092a\u092f\u093e \u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e \u0915\u0930\u0947\u0902...":"Bill generation already in progress, please wait...","warning");if(console.log("\ud83d\udd27 Generate Bill clicked"),console.log("\ud83d\udd27 Bill items:",p),console.log("\ud83d\udd27 Selected customer:",n),console.log("\ud83d\udd27 Use custom name:",d),console.log("\ud83d\udd27 Custom customer name:",a),0===p.length)return void B($l("pleaseAddItems",e.currentLanguage),"warning");U.current=!0;for(const t of p){const n=e.products.find(e=>e.id===t.id);if(n){const r=jy(n,t.quantity,t.unit);if(!r.available){if(r.error)return void B(r.error,"error");const t=(e.currentLanguage,"\u26a0\ufe0f ".concat($l("stockError",e.currentLanguage),"! ").concat($l("product",e.currentLanguage),": ").concat(n.name," (").concat($l("available",e.currentLanguage),": ").concat(r.stockDisplay,", ").concat($l("requested",e.currentLanguage),": ").concat(r.requestedDisplay,"). ").concat($l("cannotGenerateBill",e.currentLanguage),"."));return void B(t,"error")}}}let h=d?a:(null===(r=e.customers.find(e=>e.name===n))||void 0===r?void 0:r.name)||n;if("cash"!==x&&"upi"!==x&&"card"!==x){if(!h||""===h.trim())return void B($l("pleaseEnterCustomerName",e.currentLanguage),"warning")}else h&&""!==h.trim()||(h="Walk-in Customer");if("due"===x||"credit"===x){let t="";if(d){if(t=l||"",!t||""===t.trim()){const e=q.find(e=>e.name.toLowerCase()===a.toLowerCase());e&&(t=e.mobileNumber||e.phone||"")}}else{const r=e.customers.find(e=>e.id===n||e.name===n);if(!r)return void B("hi"===e.currentLanguage?"\u0915\u0943\u092a\u092f\u093e \u090f\u0915 \u0935\u0948\u0927 \u0917\u094d\u0930\u093e\u0939\u0915 \u091a\u0941\u0928\u0947\u0902\u0964":"Please select a valid customer.","error");t=r.mobileNumber||r.phone||""}if(!t||""===t.trim())return void B("hi"===e.currentLanguage?"\u0921\u094d\u092f\u0942 \u092d\u0941\u0917\u0924\u093e\u0928 \u0915\u0947 \u0932\u093f\u090f \u0917\u094d\u0930\u093e\u0939\u0915 \u0915\u093e \u092e\u094b\u092c\u093e\u0907\u0932 \u0928\u0902\u092c\u0930 \u0906\u0935\u0936\u094d\u092f\u0915 \u0939\u0948\u0964 \u0915\u0943\u092a\u092f\u093e \u092e\u094b\u092c\u093e\u0907\u0932 \u0928\u0902\u092c\u0930 \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902\u0964":"Mobile number is required for due payment. Please enter mobile number.","error");const r=/^[6-9]\d{9}$/,i=t.replace(/\D/g,"");if(!r.test(i))return void B("hi"===e.currentLanguage?"\u0915\u0943\u092a\u092f\u093e \u090f\u0915 \u0935\u0948\u0927 \u092e\u094b\u092c\u093e\u0907\u0932 \u0928\u0902\u092c\u0930 \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902 (10 \u0905\u0902\u0915, 6-9 \u0938\u0947 \u0936\u0941\u0930\u0942)\u0964":"Please enter a valid mobile number (10 digits, starting with 6-9).","error")}const f=z();if(!f)return void B("hi"===e.currentLanguage?"\u0935\u093f\u0915\u094d\u0930\u0947\u0924\u093e \u092a\u094d\u0930\u092e\u093e\u0923\u0940\u0915\u0930\u0923 \u0924\u094d\u0930\u0941\u091f\u093f\u0964 \u0915\u0943\u092a\u092f\u093e \u092a\u0941\u0928\u0903 \u092a\u094d\u0930\u0935\u0947\u0936 \u0915\u0930\u0947\u0902\u0964":"Seller authentication error. Please login again.","error");let g=null;if(!d&&n){const t=e.customers.find(e=>e.id===n||e.name===n);t&&(g=t.id)}else if(d&&h){const t=e.customers.find(e=>e.name.toLowerCase()===h.toLowerCase());t&&(g=t.id)}const b=p.map(t=>{const n=e.products.find(e=>e.id===t.id),r=n&&(n.costPrice||n.unitPrice)||0,i=t.price||0;return{name:t.name||(null===n||void 0===n?void 0:n.name)||"",sellingPrice:"number"===typeof i?i:parseFloat(i)||0,costPrice:"number"===typeof r?r:parseFloat(r)||0,quantity:"number"===typeof t.quantity?t.quantity:parseFloat(t.quantity)||1,unit:t.unit||(null===n||void 0===n?void 0:n.unit)||"pcs"}}),_=Math.round(100*Y)/100,N={id:Date.now().toString(),sellerId:f,customerId:g,paymentMethod:x,items:b,totalAmount:_,createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),isSynced:!1};console.log("\ud83c\udfaf Creating Order (MongoDB schema):",N),console.log("\ud83c\udfaf Order items:",b),console.log("\ud83c\udfaf Seller ID:",f),console.log("\ud83c\udfaf Customer ID:",g),t({type:Ee,payload:N});const S={id:N.id,customerId:N.customerId,customerName:h,items:p,subtotal:H,discount:W,tax:G,total:N.totalAmount,paymentMethod:N.paymentMethod,date:N.createdAt,status:"completed"};if(p.forEach(n=>{const r=e.products.find(e=>e.id===n.id);if(r){const e=r.unit||r.quantityUnit||"pcs",i=Sy(Ny(n.quantity,n.unit||e),e),a=r.quantity||r.stock||0,s=o(o({},r),{},{quantity:Math.max(0,a-i)});delete s.stock,t({type:Se,payload:s})}}),"due"===x||"credit"===x){let e=q.find(e=>e.name.toLowerCase()===h.toLowerCase());const n=d?l.replace(/\D/g,""):"";if(e){const r=o(o({},e),{},{balanceDue:(e.balanceDue||e.dueAmount||0)+Y,dueAmount:(e.dueAmount||e.balanceDue||0)+Y,mobileNumber:d&&n?n:e.mobileNumber||e.phone||""});t({type:xe,payload:r})}else{const e={id:Date.now().toString(),name:h,balanceDue:Y,dueAmount:Y,mobileNumber:n||"",email:"",address:"",createdAt:(new Date).toISOString()};t({type:"ADD_CUSTOMER",payload:e})}}if(t({type:"ADD_ACTIVITY",payload:{id:Date.now().toString(),message:"Order created for ".concat(h," - \u20b9").concat(Y.toFixed(2)," (").concat(x,")"),timestamp:(new Date).toISOString(),type:"order_created"}}),m([]),i(""),s(""),c(""),u(!1),y(0),v(0),w("cash"),setTimeout(()=>{U.current=!1},2e3),"upi"===x||"online"===x)console.log("\ud83d\udd27 Setting current bill:",S),F(S),console.log("\ud83d\udd27 Opening UPI payment modal"),M(!0);else{const t="".concat($l("billGeneratedSuccessfully",e.currentLanguage),"! ").concat($l("customers",e.currentLanguage),": ").concat(S.customerName,", ").concat($l("total",e.currentLanguage),": \u20b9").concat(S.total.toFixed(2));B(t,"success")}},className:"w-full btn-primary flex items-center justify-center",disabled:U.current||0===p.length||"cash"!==x&&(!d&&!n||d&&!a),children:[(0,ie.jsx)(Bl,{className:"h-4 w-4 mr-2"}),"Generate Bill"]})]})]})}),I&&j&&(0,ie.jsx)(Py,{product:j,onClose:()=>{C(!1),P(null)},onAdd:(t,n,r)=>{const i=jy(t,n,r);if(!i.available){if(i.error)return void B(i.error,"error");const t=(e.currentLanguage,"\u26a0\ufe0f ".concat($l("lowStockWarning",e.currentLanguage),"! ").concat($l("available",e.currentLanguage),": ").concat(i.stockDisplay,", ").concat($l("requested",e.currentLanguage),": ").concat(i.requestedDisplay,". ").concat($l("pleaseReduceQuantity",e.currentLanguage),"."));return void B(t,"warning")}const a=p.find(e=>e.id===t.id);if(a){const i=jy(t,a.quantity+n,r);if(!i.available){const t=(e.currentLanguage,"\u26a0\ufe0f ".concat($l("lowStockWarning",e.currentLanguage),"! Total ").concat($l("requested",e.currentLanguage),": ").concat(i.requestedDisplay," exceeds ").concat($l("available",e.currentLanguage),": ").concat(i.stockDisplay,"."));return void B(t,"warning")}}if(p.find(e=>e.id===t.id&&e.unit===r))m(e=>e.map(e=>e.id===t.id&&e.unit===r?o(o({},e),{},{quantity:e.quantity+n}):e));else{const e=((e,t,n,r)=>{const i=Ny(e,t),a=i/Ny(1,r)*n;return{quantityInBaseUnit:i,totalPrice:Math.round(100*a)/100,displayQuantity:Ay(e,t)}})(n,r,t.sellingPrice||t.costPrice||0,t.quantityUnit||"pcs");m(a=>[...a,{id:t.id,name:t.name,price:e.totalPrice/n,quantity:n,unit:r,quantityUnit:t.quantityUnit||"pcs",category:t.category,displayQuantity:e.displayQuantity,maxQuantity:t.quantity||t.stock||0,baseUnit:i.baseUnit}])}}}),S&&(0,ie.jsx)(Ey,{onScan:e=>{N(e),K(e),k(!1),setTimeout(()=>{A.current&&A.current.focus()},0)},onClose:()=>k(!1)}),E&&D&&(0,ie.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50",children:(0,ie.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ie.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,ie.jsx)(xy,{className:"h-5 w-5 mr-2 text-primary-600"}),"Bill QR Code"]}),(0,ie.jsx)("button",{onClick:()=>L(!1),className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg mb-4",children:[(0,ie.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["Bill ID: ",D.billId]}),(0,ie.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["Customer: ",D.customerName]}),(0,ie.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["Total: \u20b9",D.total.toFixed(2)]}),(0,ie.jsxs)("div",{className:"text-sm text-gray-600 mb-2",children:["Date: ",new Date(D.date).toLocaleDateString()]})]}),(0,ie.jsx)("div",{className:"bg-white border-2 border-gray-300 p-4 rounded-lg mb-4 inline-block",children:(0,ie.jsx)("div",{className:"grid grid-cols-8 gap-1",children:Array.from({length:64},(e,t)=>(0,ie.jsx)("div",{className:"w-3 h-3 ".concat(Math.random()>.5?"bg-black":"bg-white")},t))})}),(0,ie.jsx)("div",{className:"text-xs text-gray-500 mb-4",children:"Scan this QR code to view bill details"}),(0,ie.jsxs)("div",{className:"flex space-x-3",children:[(0,ie.jsxs)("button",{onClick:()=>{(t=>{try{const n=new bm("p","mm","a4");n.setFont("helvetica"),n.setFontSize(20),n.setTextColor(16,185,129),n.text("Grocery Store Invoice",105,15,{align:"center"}),n.setFontSize(10),n.setTextColor(0,0,0),n.text("Customer Name: ".concat(t.customerName),20,25),n.text("Date: ".concat(new Date(t.date).toLocaleDateString()),20,30),n.text("Invoice #: ".concat(t.id),20,35),e.gstNumber&&n.text("GST #: ".concat(e.gstNumber),105,25,{align:"right"}),n.setFillColor(243,244,246),n.rect(20,42,170,8,"F"),n.setFontSize(10),n.setTextColor(0,0,0),n.text("Product Name",22,48),n.text("Qty",110,48),n.text("Price",135,48),n.text("Total",170,48);let r=54;t.items.forEach(e=>{n.setFontSize(9);const t=e.name.length>25?e.name.substring(0,25)+"...":e.name;n.text(t,22,r);const i=e.displayQuantity||"".concat(e.quantity," ").concat(e.unit||e.quantityUnit||"pcs");n.text(i,110,r),n.text("INR ".concat(e.price.toFixed(2)),135,r),n.text("INR ".concat((e.price*e.quantity).toFixed(2)),170,r),r+=7}),r+=5,n.setLineWidth(.5),n.line(20,r,190,r),r+=5,n.setFontSize(10),n.text("Subtotal:",120,r),n.text("INR ".concat(t.subtotal.toFixed(2)),170,r,{align:"right"}),t.discount>0&&(r+=5,n.text("Discount:",120,r),n.text("INR -".concat(t.discount.toFixed(2)),170,r,{align:"right"})),t.tax>0&&(r+=5,n.text("Tax:",120,r),n.text("INR ".concat(t.tax.toFixed(2)),170,r,{align:"right"})),r+=5,n.line(20,r,190,r),r+=5,n.setFontSize(12),n.setFont("helvetica","bold"),n.text("Total Amount:",120,r),n.text("INR ".concat(t.total.toFixed(2)),170,r,{align:"right"}),r+=10,n.setFont("helvetica","normal"),n.setFontSize(10),n.text("Payment Method: ".concat(t.paymentMethod.toUpperCase()),20,r),r+=8,n.setFontSize(10),n.text("Thank you for your business!",105,r,{align:"center"}),n.save("invoice_".concat(t.customerName.replace(/\s+/g,"_"),"_").concat(t.id,".pdf"))}catch(n){console.error("Error generating PDF:",n),alert("Error generating PDF. Please try again.")}})(D),L(!1)},className:"flex-1 btn-secondary flex items-center justify-center",children:[(0,ie.jsx)(ac,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),(0,ie.jsx)("button",{onClick:()=>L(!1),className:"flex-1 btn-primary",children:"Close"})]})]})]})}),O&&R&&("upi"===R.paymentMethod||"online"===R.paymentMethod)&&(0,ie.jsx)(qy,{bill:R,onClose:()=>{M(!1),F(null)},onPaymentReceived:e=>{if(R){const n=o(o({},R),{},{paymentStatus:"paid",paymentMethod:"upi",paymentDetails:e,paidAt:(new Date).toISOString()});t({type:"UPDATE_TRANSACTION",payload:n}),t({type:"ADD_ACTIVITY",payload:{id:Date.now().toString(),message:"UPI Payment received for Bill #".concat(R.id," - \u20b9").concat(R.total.toFixed(2)),timestamp:(new Date).toISOString(),type:"payment_received"}}),B("Payment of \u20b9".concat(R.total.toFixed(2)," received successfully!"),"success")}M(!1),F(null)}})]})]})},Hy=e=>{let{onClose:t,onSave:n,scannedBarcode:i=""}=e;const{state:a,dispatch:s}=Nt(),[l,c]=(0,r.useState)({name:"",description:"",category:"",quantity:"",barcode:i,expiryDate:"",mfgDate:"",costPrice:"",sellingPrice:"",quantityUnit:"pcs",imageUrl:""}),[d,u]=(0,r.useState)(!1),[h,f]=(0,r.useState)("");(0,r.useEffect)(()=>{i&&c(e=>o(o({},e),{},{barcode:i}))},[i]);const p=z(),m=a.categories.filter(e=>!e.sellerId||p&&e.sellerId===p).map(e=>(e.name||"").toLowerCase()).filter(Boolean).sort(),g=()=>{if(!h.trim())return void(window.showToast?window.showToast("Please enter a category name","error"):alert("Please enter a category name"));const e=h.trim().toLowerCase();if(m.includes(e))return void(window.showToast?window.showToast("Category already exists","warning"):alert("Category already exists"));const t={id:"cat-".concat(Date.now()),name:e,createdAt:(new Date).toISOString()};s({type:Be,payload:t}),c(t=>o(o({},t),{},{category:e})),f(""),u(!1),window.showToast&&window.showToast('Category "'.concat(e,'" created and selected'),"success")},[y,b]=(0,r.useState)(!1),v=e=>{const{name:t}=e.target;let{value:n}=e.target;"quantity"===t&&(n=n.replace(/[^0-9]/g,"")),c(e=>o(o({},e),{},{[t]:n})),"barcode"===t&&n.trim()&&x(n)},x=e=>{if(!e.trim())return;const t=a.products.find(t=>t.barcode===e);if(t){const e=e=>{if(!e)return"";try{const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(i)}catch(t){return""}};c(n=>o(o({},n),{},{name:t.name,description:t.description||"",category:t.category||"",costPrice:t.costPrice||"",sellingPrice:t.sellingPrice||"",quantityUnit:t.quantityUnit||"pcs",imageUrl:t.imageUrl||"",mfgDate:e(t.mfgDate||t.mfg||""),expiryDate:e(t.expiryDate||t.expiry||"")})),window.showToast('Product "'.concat(t.name,'" found! Details auto-filled.'),"success")}else c(e=>o(o({},e),{},{name:""}))};return(0,ie.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,ie.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[95vh] overflow-y-auto",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 sticky top-0 bg-white rounded-t-xl",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg mr-2 sm:mr-3",children:(0,ie.jsx)(Fl,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),(0,ie.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Add New Product"})]}),(0,ie.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:(0,ie.jsx)(Gl,{className:"h-5 w-5 text-gray-500"})})]}),(0,ie.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=[];l.name&&l.name.trim()||t.push("Product name is required"),l.quantityUnit&&l.quantityUnit.trim()||t.push("Quantity unit is required");const r=parseInt(l.quantity)||0;r<0&&t.push("Quantity must be 0 or greater");const i=parseFloat(l.costPrice)||0,a=parseFloat(l.sellingPrice)||0;if(i<0&&t.push("Cost price must be 0 or greater"),a<0&&t.push("Selling price must be 0 or greater"),l.mfgDate||t.push("Manufacturing date (MFG Date) is required"),l.expiryDate||t.push("Expiry date is required"),l.description&&l.description.trim()||t.push("Product description is required"),l.mfgDate&&l.expiryDate){const e=new Date(l.mfgDate);new Date(l.expiryDate)<e&&t.push("Expiry date must be after manufacturing date")}if(t.length>0){const e=t.join("\n");return void(window.showToast?window.showToast(e,"error"):alert(e))}const s=o(o({},l),{},{quantity:r,costPrice:i,unitPrice:i,sellingPrice:a,sellingUnitPrice:a,quantityUnit:l.quantityUnit||"pcs",unit:l.quantityUnit||"pcs",mfg:l.mfgDate,mfgDate:l.mfgDate});delete s.stock,n(s)},className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,ie.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),(0,ie.jsx)("input",{type:"text",name:"name",value:l.name,onChange:v,className:"input-field",placeholder:"Enter product name",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,ie.jsxs)("div",{className:"flex gap-2",children:[(0,ie.jsxs)("select",{name:"category",value:l.category,onChange:v,className:"input-field flex-1",children:[(0,ie.jsx)("option",{value:"",children:0===m.length?"No categories yet - Create one":"Select Category"}),m.map(e=>(0,ie.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1).replace(/-/g," ")},e))]}),(0,ie.jsxs)("button",{type:"button",onClick:()=>u(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center space-x-2 whitespace-nowrap",title:"Create New Category",children:[(0,ie.jsx)(wc,{className:"h-4 w-4"}),(0,ie.jsx)("span",{className:"hidden sm:inline",children:"New"})]})]})]})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,ie.jsx)("textarea",{name:"description",value:l.description,onChange:v,className:"input-field",rows:3,placeholder:"Enter product description",required:!0})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost Price (\u20b9) *"}),(0,ie.jsx)("input",{type:"number",name:"costPrice",value:l.costPrice,onChange:v,className:"input-field",placeholder:"0.00",step:"0.01",min:"0",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Price (\u20b9) *"}),(0,ie.jsx)("input",{type:"number",name:"sellingPrice",value:l.sellingPrice,onChange:v,className:"input-field",placeholder:"0.00",step:"0.01",min:"0",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity Unit *"}),(0,ie.jsxs)("select",{name:"quantityUnit",value:l.quantityUnit||"pcs",onChange:v,className:"input-field",required:!0,children:[(0,ie.jsx)("option",{value:"pcs",children:"Pieces (pcs)"}),(0,ie.jsx)("option",{value:"kg",children:"Kilograms (kg)"}),(0,ie.jsx)("option",{value:"gm",children:"Grams (gm)"}),(0,ie.jsx)("option",{value:"liters",children:"Liters (L)"}),(0,ie.jsx)("option",{value:"ml",children:"Milliliters (mL)"}),(0,ie.jsx)("option",{value:"boxes",children:"Boxes"}),(0,ie.jsx)("option",{value:"packets",children:"Packets"}),(0,ie.jsx)("option",{value:"bottles",children:"Bottles"})]})]})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),(0,ie.jsx)("input",{type:"number",name:"quantity",value:l.quantity,onChange:v,onWheel:e=>e.currentTarget.blur(),className:"input-field",placeholder:"0",min:"0",step:"1",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"MFG Date *"}),(0,ie.jsx)("input",{type:"date",name:"mfgDate",value:l.mfgDate,onChange:v,className:"input-field",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date *"}),(0,ie.jsx)("input",{type:"date",name:"expiryDate",value:l.expiryDate,onChange:v,className:"input-field",required:!0})]})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Image URL (Optional)"}),(0,ie.jsx)("input",{type:"url",name:"imageUrl",value:l.imageUrl,onChange:v,className:"input-field w-full",placeholder:"Enter image URL"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode"}),(0,ie.jsx)("input",{type:"text",name:"barcode",value:l.barcode,onChange:v,className:"input-field w-full",placeholder:"Enter barcode"})]}),(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 pt-4 sm:pt-6 border-t border-gray-200",children:[(0,ie.jsx)("button",{type:"button",onClick:t,className:"btn-secondary w-full sm:w-auto order-2 sm:order-1",children:"Cancel"}),(0,ie.jsx)("button",{type:"submit",className:"btn-primary w-full sm:w-auto order-1 sm:order-2",children:"Add Product"})]})]}),d&&(0,ie.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ie.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:(0,ie.jsx)(wc,{className:"h-5 w-5 text-blue-600"})}),(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Category"})]}),(0,ie.jsx)("button",{onClick:()=>{u(!1),f("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:(0,ie.jsx)(Gl,{className:"h-5 w-5 text-gray-500"})})]}),(0,ie.jsxs)("div",{className:"p-6 space-y-4",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),(0,ie.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),className:"input-field w-full",placeholder:"Enter category name (e.g., Electronics, Frozen Foods)",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),g())},autoFocus:!0}),(0,ie.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Category will be saved and can be used for future products"})]}),(0,ie.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,ie.jsx)("button",{type:"button",onClick:()=>{u(!1),f("")},className:"btn-secondary",children:"Cancel"}),(0,ie.jsx)("button",{type:"button",onClick:g,className:"btn-primary",children:"Create & Select"})]})]})]})})]})})},Wy=jt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Gy=e=>{let{product:t,onClose:n,onSave:i}=e;const a=e=>{if(!e)return"";try{const t=new Date(e);if(Number.isNaN(t.getTime()))return"";const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(i)}catch(t){return""}},{state:s,dispatch:l}=Nt(),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(""),[f,p]=(0,r.useState)({id:t.id,name:t.name||"",description:t.description||"",category:t.category||"",quantity:t.quantity||t.stock||"",barcode:t.barcode||"",expiryDate:a(t.expiryDate||t.expiry||""),mfgDate:a(t.mfgDate||t.mfg||""),costPrice:t.costPrice||"",sellingPrice:t.sellingPrice||"",quantityUnit:t.quantityUnit||"pcs"}),[m,g]=(0,r.useState)(!1),y=()=>{const e=(u||"").trim().toLowerCase();if(!e)return void(window.showToast&&window.showToast("Please enter a category name","error"));const t=z();if(s.categories.filter(e=>!e.sellerId||t&&e.sellerId===t).some(t=>(t.name||"").toLowerCase()===e))return void(window.showToast&&window.showToast("Category already exists","warning"));const n={id:"cat-".concat(Date.now()),name:e,createdAt:(new Date).toISOString()};l({type:Be,payload:n}),p(t=>o(o({},t),{},{category:e})),h(""),d(!1),window.showToast&&window.showToast('Category "'.concat(e,'" created and selected'),"success")},b=e=>{const{name:t}=e.target;let{value:n}=e.target;"quantity"===t&&(n=n.replace(/[^0-9]/g,"")),p(e=>o(o({},e),{},{[t]:n}))};return(0,ie.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,ie.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[95vh] overflow-y-auto",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 sticky top-0 bg-white rounded-t-xl",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-1.5 sm:p-2 bg-blue-100 rounded-lg mr-2 sm:mr-3",children:(0,ie.jsx)(Fl,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),(0,ie.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:"Edit Product"})]}),(0,ie.jsx)("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:(0,ie.jsx)(Gl,{className:"h-5 w-5 text-gray-500"})})]}),(0,ie.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=[];f.name&&f.name.trim()||t.push("Product name is required"),f.quantityUnit&&f.quantityUnit.trim()||t.push("Quantity unit is required");const n=parseInt(f.quantity)||0;n<0&&t.push("Quantity must be 0 or greater");const r=parseFloat(f.costPrice)||0,a=parseFloat(f.sellingPrice)||0;if(r<0&&t.push("Cost price must be 0 or greater"),a<0&&t.push("Selling price must be 0 or greater"),f.mfgDate||t.push("Manufacturing date (MFG Date) is required"),f.expiryDate||t.push("Expiry date is required"),f.description&&f.description.trim()||t.push("Product description is required"),f.mfgDate&&f.expiryDate){const e=new Date(f.mfgDate);new Date(f.expiryDate)<e&&t.push("Expiry date must be after manufacturing date")}if(t.length>0){const e=t.join("\n");return void(window.showToast?window.showToast(e,"error"):alert(e))}const s=o(o({},f),{},{quantity:n,costPrice:r,unitPrice:r,sellingPrice:a,sellingUnitPrice:a,quantityUnit:f.quantityUnit||"pcs",unit:f.quantityUnit||"pcs",mfg:f.mfgDate,mfgDate:f.mfgDate,updatedAt:(new Date).toISOString()});delete s.stock,i(s)},className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[(0,ie.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),(0,ie.jsx)("input",{type:"text",name:"name",value:f.name,onChange:b,className:"input-field",placeholder:"Enter product name",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,ie.jsxs)("div",{className:"flex gap-2",children:[(0,ie.jsxs)("select",{name:"category",value:f.category,onChange:b,className:"input-field flex-1",children:[(0,ie.jsx)("option",{value:"",children:"Select Category"}),s.categories.filter(e=>{const t=z();return!e.sellerId||t&&e.sellerId===t}).map(e=>(e.name||"").toLowerCase()).filter(Boolean).sort().map(e=>(0,ie.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1).replace(/-/g," ")},e))]}),(0,ie.jsx)("button",{type:"button",onClick:()=>d(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors flex items-center space-x-2 whitespace-nowrap",title:"Create New Category",children:"New"})]})]})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description *"}),(0,ie.jsx)("textarea",{name:"description",value:f.description,onChange:b,className:"input-field",rows:3,placeholder:"Enter product description",required:!0})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost Price (\u20b9) *"}),(0,ie.jsx)("input",{type:"number",name:"costPrice",value:f.costPrice,onChange:b,className:"input-field",placeholder:"0.00",step:"0.01",min:"0",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Price (\u20b9) *"}),(0,ie.jsx)("input",{type:"number",name:"sellingPrice",value:f.sellingPrice,onChange:b,className:"input-field",placeholder:"0.00",step:"0.01",min:"0",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity Unit *"}),(0,ie.jsxs)("select",{name:"quantityUnit",value:f.quantityUnit||"pcs",onChange:b,className:"input-field",required:!0,children:[(0,ie.jsx)("option",{value:"pcs",children:"Pieces (pcs)"}),(0,ie.jsx)("option",{value:"kg",children:"Kilograms (kg)"}),(0,ie.jsx)("option",{value:"gm",children:"Grams (gm)"}),(0,ie.jsx)("option",{value:"liters",children:"Liters (L)"}),(0,ie.jsx)("option",{value:"ml",children:"Milliliters (mL)"}),(0,ie.jsx)("option",{value:"boxes",children:"Boxes"}),(0,ie.jsx)("option",{value:"packets",children:"Packets"}),(0,ie.jsx)("option",{value:"bottles",children:"Bottles"})]})]})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),(0,ie.jsx)("input",{type:"number",name:"quantity",value:f.quantity,onChange:b,onWheel:e=>e.currentTarget.blur(),className:"input-field",placeholder:"0",min:"0",step:"1",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"MFG Date *"}),(0,ie.jsx)("input",{type:"date",name:"mfgDate",value:f.mfgDate,onChange:b,className:"input-field",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date *"}),(0,ie.jsx)("input",{type:"date",name:"expiryDate",value:f.expiryDate,onChange:b,className:"input-field",required:!0})]})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode"}),(0,ie.jsxs)("div",{className:"flex space-x-3",children:[(0,ie.jsx)("input",{type:"text",name:"barcode",value:f.barcode,onChange:b,className:"input-field flex-1",placeholder:"Enter barcode or scan"}),(0,ie.jsxs)("button",{type:"button",onClick:()=>g(!m),className:"btn-secondary flex items-center",children:[(0,ie.jsx)(Wy,{className:"h-4 w-4 mr-2"}),"Scan"]})]})]}),m&&(0,ie.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,ie.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Barcode Scanner"}),(0,ie.jsx)("div",{id:"edit-product-scanner-video",className:"mb-4"}),(0,ie.jsx)("div",{className:"flex space-x-3",children:(0,ie.jsx)("button",{type:"button",onClick:()=>g(!1),className:"btn-secondary",children:"Close Scanner"})})]}),(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 pt-4 sm:pt-6 border-t border-gray-200",children:[(0,ie.jsx)("button",{type:"button",onClick:n,className:"btn-secondary w-full sm:w-auto order-2 sm:order-1",children:"Cancel"}),(0,ie.jsx)("button",{type:"submit",className:"btn-primary w-full sm:w-auto order-1 sm:order-2",children:"Update Product"})]})]}),c&&(0,ie.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ie.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3"}),(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Category"})]}),(0,ie.jsx)("button",{onClick:()=>{d(!1),h("")},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:(0,ie.jsx)(Gl,{className:"h-5 w-5 text-gray-500"})})]}),(0,ie.jsxs)("div",{className:"p-6 space-y-4",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),(0,ie.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),className:"input-field w-full",placeholder:"Enter category name",onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),y())},autoFocus:!0})]}),(0,ie.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,ie.jsx)("button",{type:"button",onClick:()=>{d(!1),h("")},className:"btn-secondary",children:"Cancel"}),(0,ie.jsx)("button",{type:"button",onClick:y,className:"btn-primary",children:"Create & Select"})]})]})]})})]})})},Yy=()=>{const{state:e,dispatch:t}=Nt(),[n,i]=(0,r.useState)(""),[a,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[h,f]=(0,r.useState)(1),[p,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)(""),{maxProducts:b}=ec(e.currentPlan),v=e.products.length,x=e.products.filter(e=>{var t,r;return e.name.toLowerCase().includes(n.toLowerCase())||(null===(t=e.category)||void 0===t?void 0:t.toLowerCase().includes(n.toLowerCase()))||(null===(r=e.barcode)||void 0===r?void 0:r.includes(n))}),w=Math.ceil(x.length/10),_=10*(h-1),N=x.slice(_,_+10),S=e.products.filter(t=>(t.quantity||t.stock||0)<=e.lowStockThreshold).length,k=e.products.filter(t=>{if(!t.expiryDate)return!1;const n=new Date(t.expiryDate)-new Date,r=Math.ceil(n/864e5);return r<=e.expiryDaysThreshold&&r>=0}).length,A=n=>{const r=e.products.find(e=>e.id===n);window.confirm('Are you sure you want to delete "'.concat(null===r||void 0===r?void 0:r.name,'"?'))&&(t({type:"DELETE_PRODUCT",payload:n}),t({type:"ADD_ACTIVITY",payload:{id:Date.now().toString(),message:'Product "'.concat(null===r||void 0===r?void 0:r.name,'" deleted'),timestamp:(new Date).toISOString(),type:"product_deleted"}}))},j=e=>{u(e),c(!0)};return(0,ie.jsxs)("div",{className:"space-y-4 sm:space-y-6 pb-6",children:[(0,ie.jsxs)("div",{className:"flex flex-col space-y-3 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Products"}),(0,ie.jsxs)("p",{className:"text-sm text-gray-600",children:["Manage your product inventory","unlimited"!==b&&(0,ie.jsxs)("span",{className:"ml-2 text-blue-600 font-medium",children:["(",v,"/",b,")"]})]})]}),(0,ie.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,ie.jsxs)("button",{onClick:()=>m(!0),className:"btn-secondary flex items-center text-sm",children:[(0,ie.jsx)(by,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,ie.jsx)("span",{className:"hidden sm:inline",children:"Barcode Machine"}),(0,ie.jsx)("span",{className:"sm:hidden",children:"Machine"})]}),(0,ie.jsxs)("button",{onClick:()=>{const t=[["Name","Category","Price","Stock","Barcode","Expiry Date"],...e.products.map(e=>[e.name,e.category||"",e.price||0,e.quantity||e.stock||0,e.barcode||"",e.expiryDate||""])].map(e=>e.join(",")).join("\n"),n=new Blob([t],{type:"text/csv"}),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="products.csv",i.click(),window.URL.revokeObjectURL(r)},className:"btn-secondary flex items-center text-sm",children:[(0,ie.jsx)(ac,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,ie.jsx)("span",{className:"hidden sm:inline",children:"Export"}),(0,ie.jsx)("span",{className:"sm:hidden",children:"Export"})]}),(0,ie.jsxs)("button",{onClick:()=>s(!0),className:"btn-primary flex items-center text-sm",children:[(0,ie.jsx)(wc,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,ie.jsx)("span",{className:"hidden sm:inline",children:"Add Product"}),(0,ie.jsx)("span",{className:"sm:hidden",children:"Add"})]})]})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-lg",children:(0,ie.jsx)(Fl,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),(0,ie.jsxs)("div",{className:"ml-3 sm:ml-4",children:[(0,ie.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Total Products"}),(0,ie.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:v})]})]})}),(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-2 sm:p-3 bg-red-100 rounded-lg",children:(0,ie.jsx)(lc,{className:"h-5 w-5 sm:h-6 sm:w-6 text-red-600"})}),(0,ie.jsxs)("div",{className:"ml-3 sm:ml-4",children:[(0,ie.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Low Stock"}),(0,ie.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:S})]})]})}),(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-2 sm:p-3 bg-yellow-100 rounded-lg",children:(0,ie.jsx)(ic,{className:"h-5 w-5 sm:h-6 sm:w-6 text-yellow-600"})}),(0,ie.jsxs)("div",{className:"ml-3 sm:ml-4",children:[(0,ie.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Expiring Soon"}),(0,ie.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:k})]})]})})]}),(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex flex-col space-y-3 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:[(0,ie.jsx)("div",{className:"flex-1 w-full sm:max-w-lg",children:(0,ie.jsxs)("div",{className:"relative",children:[(0,ie.jsx)(_c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,ie.jsx)("input",{type:"text",placeholder:"Search products...",value:n,onChange:e=>i(e.target.value),className:"input-field pl-10 w-full"})]})}),(0,ie.jsx)("div",{className:"w-full sm:w-auto",children:(0,ie.jsxs)("select",{className:"input-field w-full sm:w-auto",children:[(0,ie.jsx)("option",{value:"",children:"All Categories"}),(0,ie.jsx)("option",{value:"grocery",children:"Grocery"}),(0,ie.jsx)("option",{value:"vegetables",children:"Vegetables"}),(0,ie.jsx)("option",{value:"fruits",children:"Fruits"}),(0,ie.jsx)("option",{value:"dairy",children:"Dairy"}),(0,ie.jsx)("option",{value:"beverages",children:"Beverages"})]})})]})}),(0,ie.jsxs)("div",{className:"card hidden md:block",children:[(0,ie.jsx)("div",{className:"overflow-x-auto -mx-4 sm:mx-0",children:(0,ie.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,ie.jsx)("thead",{className:"bg-gray-50",children:(0,ie.jsxs)("tr",{children:[(0,ie.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,ie.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,ie.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),(0,ie.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),(0,ie.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Barcode"}),(0,ie.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry"}),(0,ie.jsx)("th",{className:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,ie.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(t=>(0,ie.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,ie.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsxs)("div",{className:"flex-shrink-0 h-10 w-10",children:[t.imageUrl?(0,ie.jsx)("img",{src:t.imageUrl,alt:t.name,className:"h-10 w-10 rounded-lg object-cover border border-gray-200",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextSibling.style.display="flex"}}):null,(0,ie.jsx)("div",{className:"h-10 w-10 rounded-lg bg-blue-100 flex items-center justify-center ".concat(t.imageUrl?"hidden":"flex"),children:(0,ie.jsx)(Fl,{className:"h-5 w-5 text-blue-600"})})]}),(0,ie.jsxs)("div",{className:"ml-4 min-w-0 flex-1",children:[(0,ie.jsx)("div",{className:"text-sm font-medium text-gray-900 break-words",children:t.name}),(0,ie.jsx)("div",{className:"text-sm text-gray-500 break-words",children:t.description||"No description"})]})]})}),(0,ie.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:(0,ie.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:t.category||"Uncategorized"})}),(0,ie.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.quantityUnit||"pcs"}),(0,ie.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap",children:(0,ie.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat((t.quantity||t.stock||0)<=e.lowStockThreshold?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:t.quantity||t.stock||0})}),(0,ie.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.barcode||"N/A"}),(0,ie.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.expiryDate?new Date(t.expiryDate).toLocaleDateString():"N/A"}),(0,ie.jsx)("td",{className:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,ie.jsxs)("div",{className:"flex space-x-2",children:[(0,ie.jsx)("button",{onClick:()=>j(t),className:"text-blue-600 hover:text-blue-900",children:(0,ie.jsx)(Nc,{className:"h-4 w-4"})}),(0,ie.jsx)("button",{onClick:()=>A(t.id),className:"text-red-600 hover:text-red-900",children:(0,ie.jsx)(Sc,{className:"h-4 w-4"})})]})})]},t.id))})]})}),w>1&&(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-6 space-y-3 sm:space-y-0 px-2 sm:px-0",children:[(0,ie.jsxs)("div",{className:"text-xs sm:text-sm text-gray-700 text-center sm:text-left",children:["Showing ",_+1," to ",Math.min(_+10,x.length)," of ",x.length," results"]}),(0,ie.jsxs)("div",{className:"flex space-x-2",children:[(0,ie.jsx)("button",{onClick:()=>f(Math.max(1,h-1)),disabled:1===h,className:"px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ie.jsxs)("span",{className:"px-3 py-2 text-xs sm:text-sm font-medium text-gray-700",children:["Page ",h," of ",w]}),(0,ie.jsx)("button",{onClick:()=>f(Math.min(w,h+1)),disabled:h===w,className:"px-3 py-2 text-xs sm:text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),(0,ie.jsxs)("div",{className:"md:hidden space-y-3",children:[N.map(t=>(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ie.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,ie.jsxs)("div",{className:"flex-shrink-0 h-12 w-12",children:[t.imageUrl?(0,ie.jsx)("img",{src:t.imageUrl,alt:t.name,className:"h-12 w-12 rounded-lg object-cover border border-gray-200",onError:e=>{e.currentTarget.style.display="none",e.currentTarget.nextSibling.style.display="flex"}}):null,(0,ie.jsx)("div",{className:"h-12 w-12 rounded-lg bg-blue-100 flex items-center justify-center ".concat(t.imageUrl?"hidden":"flex"),children:(0,ie.jsx)(Fl,{className:"h-6 w-6 text-blue-600"})})]}),(0,ie.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ie.jsx)("div",{className:"text-sm font-medium text-gray-900 break-words",children:t.name}),(0,ie.jsx)("div",{className:"text-xs text-gray-500 line-clamp-2 break-words",children:t.description||"No description"}),(0,ie.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[(0,ie.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:t.category||"Uncategorized"}),(0,ie.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-600",children:t.quantityUnit||"pcs"}),(0,ie.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat((t.quantity||t.stock||0)<=e.lowStockThreshold?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:["Quantity: ",t.quantity||t.stock||0]})]}),(0,ie.jsxs)("div",{className:"mt-2 text-xs text-gray-600",children:[(0,ie.jsxs)("div",{children:["Barcode: ",t.barcode||"N/A"]}),(0,ie.jsxs)("div",{children:["Expiry: ",t.expiryDate?new Date(t.expiryDate).toLocaleDateString():"N/A"]})]})]})]}),(0,ie.jsxs)("div",{className:"flex flex-col space-y-2 ml-2",children:[(0,ie.jsx)("button",{onClick:()=>j(t),className:"p-2 text-blue-600 hover:text-blue-900 hover:bg-blue-50 rounded-lg transition",children:(0,ie.jsx)(Nc,{className:"h-4 w-4"})}),(0,ie.jsx)("button",{onClick:()=>A(t.id),className:"p-2 text-red-600 hover:text-red-900 hover:bg-red-50 rounded-lg transition",children:(0,ie.jsx)(Sc,{className:"h-4 w-4"})})]})]})},t.id)),w>1&&(0,ie.jsxs)("div",{className:"flex flex-col items-center justify-between space-y-3 pt-2",children:[(0,ie.jsxs)("div",{className:"text-xs text-gray-700 text-center",children:["Showing ",_+1," to ",Math.min(_+10,x.length)," of ",x.length," results"]}),(0,ie.jsxs)("div",{className:"flex items-center space-x-2 w-full",children:[(0,ie.jsx)("button",{onClick:()=>f(Math.max(1,h-1)),disabled:1===h,className:"flex-1 px-4 py-2 text-xs font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ie.jsxs)("span",{className:"px-3 py-2 text-xs font-medium text-gray-700 whitespace-nowrap",children:[h," / ",w]}),(0,ie.jsx)("button",{onClick:()=>f(Math.min(w,h+1)),disabled:h===w,className:"flex-1 px-4 py-2 text-xs font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]}),a&&(0,ie.jsx)(Hy,{onClose:()=>{s(!1),y("")},onSave:e=>{(e=>{const n=o(o({id:Date.now().toString()},e),{},{createdAt:(new Date).toISOString()});t({type:"ADD_PRODUCT",payload:n}),t({type:"ADD_ACTIVITY",payload:{id:Date.now().toString(),message:'Product "'.concat(n.name,'" added'),timestamp:(new Date).toISOString(),type:"product_added"}}),s(!1)})(e),y("")},scannedBarcode:g}),l&&d&&(0,ie.jsx)(Gy,{product:d,onClose:()=>{c(!1),u(null)},onSave:e=>{t({type:"UPDATE_PRODUCT",payload:e}),t({type:"ADD_ACTIVITY",payload:{id:Date.now().toString(),message:'Product "'.concat(e.name,'" updated'),timestamp:(new Date).toISOString(),type:"product_updated"}}),c(!1),u(null)}}),p&&(0,ie.jsx)(Ey,{onScan:t=>{console.log("Scanned barcode in Products:",t),m(!1);const n=e.products.find(e=>e.barcode===t);n?alert('Product "'.concat(n.name,'" already exists with this barcode.')):(y(t),s(!0))},onClose:()=>m(!1)})]})},Ky=jt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Jy=()=>{const{state:e,dispatch:t}=Nt(),[n,i]=(0,r.useState)(""),[a,s]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)("name"),[h,f]=(0,r.useState)("asc"),[p,m]=(0,r.useState)(1),g=e.products.filter(t=>{var r,i;const s=t.name.toLowerCase().includes(n.toLowerCase())||(null===(r=t.category)||void 0===r?void 0:r.toLowerCase().includes(n.toLowerCase()))||(null===(i=t.barcode)||void 0===i?void 0:i.includes(n)),o=!a||t.category===a,c=t.quantity||t.stock||0,d=!l||"low-stock"===l&&c<=e.lowStockThreshold||"out-of-stock"===l&&0===c||"expiring"===l&&t.expiryDate&&new Date(t.expiryDate)<=new Date(Date.now()+24*e.expiryDaysThreshold*60*60*1e3);return s&&o&&d}).sort((e,t)=>{let n=e[d],r=t[d];return"stock"!==d&&"quantity"!==d||(n=e.quantity||e.stock||0,r=t.quantity||t.stock||0),"asc"===h?n>r?1:-1:n<r?1:-1}),y=Math.ceil(g.length/10),b=10*(p-1),v=g.slice(b,b+10),x=e.products.length,w=e.products.filter(t=>(t.quantity||t.stock||0)<=e.lowStockThreshold).length,_=e.products.filter(e=>0===(e.quantity||e.stock||0)).length,N=e.products.filter(t=>!!t.expiryDate&&new Date(t.expiryDate)<=new Date(Date.now()+24*e.expiryDaysThreshold*60*60*1e3)).length,S=e.products.reduce((e,t)=>e+(t.quantity||t.stock||0)*(t.price||0),0),k=[...new Set(e.products.map(e=>e.category).filter(Boolean))],A=t=>0===t?{label:"Out of Stock",color:"bg-red-100 text-red-800"}:t<=e.lowStockThreshold?{label:"Low Stock",color:"bg-yellow-100 text-yellow-800"}:{label:"In Stock",color:"bg-green-100 text-green-800"},j=(n,r)=>{const i=e.products.find(e=>e.id===n);if(i){const e=i.quantity||i.stock||0,n=Math.max(0,e+r),a=o(o({},i),{},{quantity:n});delete a.stock,t({type:"UPDATE_PRODUCT",payload:a}),t({type:"ADD_ACTIVITY",payload:{id:Date.now().toString(),message:"Quantity adjusted for ".concat(i.name,": ").concat(r>0?"+":"").concat(r),timestamp:(new Date).toISOString(),type:"stock_adjusted"}})}};return(0,ie.jsxs)("div",{className:"space-y-8 fade-in-up",children:[(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Inventory Management"}),(0,ie.jsx)("p",{className:"text-gray-600 mt-2",children:"Monitor and manage your product inventory"})]}),(0,ie.jsx)("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:(0,ie.jsxs)("button",{onClick:()=>{const t=[["Name","Category","Quantity","Price","Value","Status","Barcode","Expiry Date"],...e.products.map(e=>{const t=e.quantity||e.stock||0,n=A(t);return[e.name,e.category||"",t,e.price||0,t*(e.price||0),n.label,e.barcode||"",e.expiryDate||""]})].map(e=>e.join(",")).join("\n"),n=new Blob([t],{type:"text/csv"}),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="inventory-".concat((new Date).toISOString().split("T")[0],".csv"),i.click(),window.URL.revokeObjectURL(r)},className:"btn-secondary flex items-center",children:[(0,ie.jsx)(ac,{className:"h-4 w-4 mr-2"}),"Export"]})})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6",children:[(0,ie.jsx)("div",{className:"stat-card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,ie.jsx)(Fl,{className:"h-6 w-6 text-blue-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),(0,ie.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x})]})]})}),(0,ie.jsx)("div",{className:"stat-card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-yellow-100 rounded-xl",children:(0,ie.jsx)(lc,{className:"h-6 w-6 text-yellow-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),(0,ie.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:w})]})]})}),(0,ie.jsx)("div",{className:"stat-card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-red-100 rounded-xl",children:(0,ie.jsx)(Ky,{className:"h-6 w-6 text-red-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),(0,ie.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:_})]})]})}),(0,ie.jsx)("div",{className:"stat-card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-orange-100 rounded-xl",children:(0,ie.jsx)(ic,{className:"h-6 w-6 text-orange-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Expiring Soon"}),(0,ie.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N})]})]})}),(0,ie.jsx)("div",{className:"stat-card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-green-100 rounded-xl",children:(0,ie.jsx)(pc,{className:"h-6 w-6 text-green-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),(0,ie.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",S.toFixed(2)]})]})]})})]}),(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,ie.jsx)("div",{className:"lg:col-span-2",children:(0,ie.jsxs)("div",{className:"relative",children:[(0,ie.jsx)(_c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,ie.jsx)("input",{type:"text",placeholder:"Search products...",value:n,onChange:e=>i(e.target.value),className:"input-field pl-10"})]})}),(0,ie.jsxs)("select",{value:a,onChange:e=>s(e.target.value),className:"input-field",children:[(0,ie.jsx)("option",{value:"",children:"All Categories"}),k.map(e=>(0,ie.jsx)("option",{value:e,children:e},e))]}),(0,ie.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"input-field",children:[(0,ie.jsx)("option",{value:"",children:"All Status"}),(0,ie.jsx)("option",{value:"low-stock",children:"Low Stock"}),(0,ie.jsx)("option",{value:"out-of-stock",children:"Out of Stock"}),(0,ie.jsx)("option",{value:"expiring",children:"Expiring Soon"})]}),(0,ie.jsxs)("select",{value:"".concat(d,"-").concat(h),onChange:e=>{const[t,n]=e.target.value.split("-");u(t),f(n)},className:"input-field",children:[(0,ie.jsx)("option",{value:"name-asc",children:"Name A-Z"}),(0,ie.jsx)("option",{value:"name-desc",children:"Name Z-A"}),(0,ie.jsx)("option",{value:"stock-asc",children:"Stock Low-High"}),(0,ie.jsx)("option",{value:"stock-desc",children:"Stock High-Low"}),(0,ie.jsx)("option",{value:"price-asc",children:"Price Low-High"}),(0,ie.jsx)("option",{value:"price-desc",children:"Price High-Low"})]})]})}),(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsx)("div",{className:"overflow-x-auto",children:(0,ie.jsxs)("table",{className:"professional-table",children:[(0,ie.jsx)("thead",{children:(0,ie.jsxs)("tr",{children:[(0,ie.jsx)("th",{children:"Product"}),(0,ie.jsx)("th",{children:"Category"}),(0,ie.jsx)("th",{children:"Stock"}),(0,ie.jsx)("th",{children:"Price"}),(0,ie.jsx)("th",{children:"Value"}),(0,ie.jsx)("th",{children:"Status"}),(0,ie.jsx)("th",{children:"Expiry"}),(0,ie.jsx)("th",{children:"Actions"})]})}),(0,ie.jsx)("tbody",{children:v.map(e=>{const n=e.quantity||e.stock||0,r=A(n),i=n*(e.price||0);return(0,ie.jsxs)("tr",{className:"hover:bg-blue-50 transition-colors",children:[(0,ie.jsx)("td",{children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,ie.jsx)(Fl,{className:"h-5 w-5 text-blue-600"})}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,ie.jsx)("p",{className:"text-sm text-gray-500",children:e.barcode||"No barcode"})]})]})}),(0,ie.jsx)("td",{children:(0,ie.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 rounded-full text-xs",children:e.category||"Uncategorized"})}),(0,ie.jsx)("td",{className:"font-semibold",children:n}),(0,ie.jsxs)("td",{className:"font-semibold",children:["\u20b9",(e.price||0).toFixed(2)]}),(0,ie.jsxs)("td",{className:"font-semibold text-green-600",children:["\u20b9",i.toFixed(2)]}),(0,ie.jsx)("td",{children:(0,ie.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(r.color),children:r.label})}),(0,ie.jsx)("td",{className:"text-sm text-gray-600",children:e.expiryDate?new Date(e.expiryDate).toLocaleDateString():"N/A"}),(0,ie.jsx)("td",{children:(0,ie.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ie.jsx)("button",{onClick:()=>j(e.id,1),className:"p-1 text-green-600 hover:text-green-800 hover:bg-green-50 rounded",title:"Add Stock",children:(0,ie.jsx)(wc,{className:"h-4 w-4"})}),(0,ie.jsx)("button",{onClick:()=>j(e.id,-1),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded",title:"Remove Stock",children:(0,ie.jsx)(Ky,{className:"h-4 w-4"})}),(0,ie.jsx)("button",{onClick:()=>t({type:"SET_CURRENT_VIEW",payload:"products"}),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded",title:"Edit Product",children:(0,ie.jsx)(Nc,{className:"h-4 w-4"})})]})})]},e.id)})})]})}),0===v.length&&(0,ie.jsxs)("div",{className:"text-center py-12",children:[(0,ie.jsx)(Fl,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),(0,ie.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Products Found"}),(0,ie.jsx)("p",{className:"text-gray-600 mb-6",children:"Try adjusting your search or filters"}),(0,ie.jsx)("button",{onClick:()=>t({type:"SET_CURRENT_VIEW",payload:"products"}),className:"btn-primary",children:"Add First Product"})]}),y>1&&(0,ie.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,ie.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",b+1," to ",Math.min(b+10,g.length)," of ",g.length," results"]}),(0,ie.jsxs)("div",{className:"flex space-x-2",children:[(0,ie.jsx)("button",{onClick:()=>m(Math.max(1,p-1)),disabled:1===p,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),(0,ie.jsxs)("span",{className:"px-3 py-2 text-sm font-medium text-gray-700",children:["Page ",p," of ",y]}),(0,ie.jsx)("button",{onClick:()=>m(Math.min(y,p+1)),disabled:p===y,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]})},$y=e=>{let{onClose:t,onSave:n}=e;const{state:i}=Nt(),[a,s]=(0,r.useState)({supplierName:"",items:[],notes:""}),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),h=e=>{const{name:t,value:n}=e.target;s(e=>o(o({},e),{},{[t]:n}))},f=(e,t,n)=>{s(r=>o(o({},r),{},{items:r.items.map((r,i)=>i===e?o(o({},r),{},{[t]:n}):r)}))},p=i.products.filter(e=>{var t;return e.name.toLowerCase().includes(l.toLowerCase())||(null===(t=e.category)||void 0===t?void 0:t.toLowerCase().includes(l.toLowerCase()))});return(0,ie.jsx)("div",{className:"professional-modal",children:(0,ie.jsxs)("div",{className:"professional-modal-content",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:(0,ie.jsx)(zl,{className:"h-6 w-6 text-blue-600"})}),(0,ie.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"New Purchase Order"})]}),(0,ie.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:"\xd7"})]}),(0,ie.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=[];if(a.supplierName&&a.supplierName.trim()||t.push("Supplier name is required"),a.items&&0!==a.items.length?a.items.forEach((e,n)=>{e.productName&&e.productName.trim()||t.push("Item ".concat(n+1,": Product name is required"));const r=parseInt(e.quantity)||0;(!r||r<1)&&t.push("Item ".concat(n+1,": Quantity must be at least 1"));(parseFloat(e.price)||0)<0&&t.push("Item ".concat(n+1,": Price must be 0 or greater")),e.unit&&e.unit.trim()||t.push("Item ".concat(n+1,": Unit is required"));const i=["pcs","kg","g","mg","l","ml","box","packet","bottle","dozen"];e.unit&&!i.includes(e.unit)&&t.push("Item ".concat(n+1,": Unit must be one of: ").concat(i.join(", ")))}):t.push("Purchase order must have at least one item"),t.length>0){const e=t.join("\n");return void(window.showToast?window.showToast(e,"error"):alert(e))}const r=a.items.map(e=>o(o({},e),{},{quantity:parseInt(e.quantity)||0,price:parseFloat(e.price)||0,subtotal:(parseFloat(e.price)||0)*(parseInt(e.quantity)||0)})),i=r.reduce((e,t)=>e+t.subtotal,0);i<0?window.showToast?window.showToast("Total must be 0 or greater","error"):alert("Total must be 0 or greater"):n(o(o({},a),{},{items:r,total:i}))},className:"p-6 space-y-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Supplier Name * ",(0,ie.jsx)("span",{className:"text-red-500",children:"(Required)"})]}),(0,ie.jsx)("input",{type:"text",name:"supplierName",value:a.supplierName,onChange:h,className:"input-field",placeholder:"Enter supplier name",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ie.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Items (",a.items.length,")"]}),(0,ie.jsxs)("div",{className:"flex space-x-2",children:[(0,ie.jsxs)("button",{type:"button",onClick:()=>u(!0),className:"btn-secondary text-sm",children:[(0,ie.jsx)(_c,{className:"h-4 w-4 mr-1"}),"Search Products"]}),(0,ie.jsxs)("button",{type:"button",onClick:()=>{s(e=>o(o({},e),{},{items:[...e.items,{productId:"",productName:"",quantity:"",price:"",unit:"pcs",isCustomProduct:!1}]}))},className:"btn-secondary text-sm",children:[(0,ie.jsx)(wc,{className:"h-4 w-4 mr-1"}),"Add Manually"]})]})]}),d&&(0,ie.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 flex items-center justify-center z-50",children:(0,ie.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-96 overflow-hidden",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ie.jsx)("h3",{className:"text-lg font-semibold",children:"Search Products"}),(0,ie.jsx)("button",{onClick:()=>{u(!1),c("")},className:"text-gray-500 hover:text-gray-700",children:"\xd7"})]}),(0,ie.jsxs)("div",{className:"relative mb-4",children:[(0,ie.jsx)(_c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,ie.jsx)("input",{type:"text",placeholder:"Search products by name or category...",value:l,onChange:e=>c(e.target.value),className:"input-field pl-10",autoFocus:!0})]}),(0,ie.jsxs)("div",{className:"max-h-60 overflow-y-auto space-y-2",children:[p.map(e=>(0,ie.jsxs)("div",{onClick:()=>(e=>{const t=a.items.findIndex(t=>t.productId===e.id);if(t>=0)f(t,"quantity",(parseInt(a.items[t].quantity)||0)+1);else{const t=e.costPrice||e.unitPrice||e.price||"";s(n=>o(o({},n),{},{items:[...n.items,{productId:e.id,productName:e.name,quantity:"1",price:t,unit:e.unit||e.quantityUnit||"pcs",isCustomProduct:!1}]}))}u(!1),c("")})(e),className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-blue-50 cursor-pointer transition-colors",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,ie.jsxs)("p",{className:"text-sm text-gray-600",children:[e.category," \u2022 Quantity: ",e.quantity||e.stock||0," ",e.quantityUnit||e.unit||"pcs"]})]}),(0,ie.jsxs)("div",{className:"text-right",children:[(0,ie.jsxs)("p",{className:"font-semibold text-blue-600",children:["\u20b9",(e.price||0).toFixed(2)]}),(0,ie.jsx)("button",{type:"button",className:"text-xs text-blue-600 hover:text-blue-800",children:"Add to Order"})]})]},e.id)),0===p.length&&l&&(0,ie.jsxs)("div",{className:"text-center py-8 text-gray-500",children:['No products found matching "',l,'"']})]})]})}),(0,ie.jsxs)("div",{className:"space-y-3",children:[a.items.map((e,t)=>{const n=i.products.find(t=>t.id===e.productId);return(0,ie.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg border",children:(0,ie.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[(0,ie.jsxs)("div",{className:"md:col-span-2",children:[(0,ie.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,ie.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Product"}),(0,ie.jsx)("button",{type:"button",onClick:()=>(e=>{a.items[e].isCustomProduct?(f(e,"isCustomProduct",!1),f(e,"productName","")):(f(e,"isCustomProduct",!0),f(e,"productId",""))})(t),className:"text-xs px-2 py-1 rounded ".concat(e.isCustomProduct?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:e.isCustomProduct?"Custom":"Existing"})]}),e.isCustomProduct?(0,ie.jsx)("input",{type:"text",value:e.productName,onChange:e=>f(t,"productName",e.target.value),className:"input-field",placeholder:"Enter product name",required:!0}):(0,ie.jsxs)("select",{value:e.productId,onChange:e=>{const n=i.products.find(t=>t.id===e.target.value);if(f(t,"productId",e.target.value),n){const e=n.costPrice||n.unitPrice||n.price||"";f(t,"price",e),f(t,"unit",n.unit||n.quantityUnit||"pcs"),f(t,"productName",n.name)}},className:"input-field",required:!0,children:[(0,ie.jsx)("option",{value:"",children:"Select Product"}),i.products.map(e=>{const t=e.costPrice||e.unitPrice||e.price||0;return(0,ie.jsxs)("option",{value:e.id,children:[e.name," (\u20b9",t.toFixed(2),"/",e.unit||e.quantityUnit||"pcs",")"]},e.id)})]}),n&&!e.isCustomProduct&&(0,ie.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Current Quantity: ",n.quantity||n.stock||0," ",n.quantityUnit||n.unit||"pcs"]})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Quantity * ",(0,ie.jsx)("span",{className:"text-red-500",children:"(Min: 1)"})]}),(0,ie.jsx)("input",{type:"number",value:e.quantity,onChange:e=>f(t,"quantity",e.target.value),className:"input-field",placeholder:"Enter quantity",min:"1",required:!0})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Unit *"}),(0,ie.jsxs)("select",{value:e.unit,onChange:e=>f(t,"unit",e.target.value),className:"input-field",required:!0,children:[(0,ie.jsx)("option",{value:"",children:"Select Unit"}),(0,ie.jsx)("option",{value:"pcs",children:"Pieces"}),(0,ie.jsx)("option",{value:"kg",children:"Kilogram"}),(0,ie.jsx)("option",{value:"g",children:"Gram"}),(0,ie.jsx)("option",{value:"mg",children:"Milligram"}),(0,ie.jsx)("option",{value:"l",children:"Liter"}),(0,ie.jsx)("option",{value:"ml",children:"Milliliter"}),(0,ie.jsx)("option",{value:"box",children:"Box"}),(0,ie.jsx)("option",{value:"packet",children:"Packet"}),(0,ie.jsx)("option",{value:"bottle",children:"Bottle"}),(0,ie.jsx)("option",{value:"dozen",children:"Dozen"})]})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:["Unit Price (\u20b9) * ",(0,ie.jsx)("span",{className:"text-red-500",children:"(Min: 0)"})]}),(0,ie.jsx)("input",{type:"number",value:e.price,onChange:e=>f(t,"price",e.target.value),className:"input-field",placeholder:"0.00",min:"0",step:"0.01",required:!0})]}),(0,ie.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ie.jsxs)("div",{className:"text-right flex-1",children:[(0,ie.jsx)("p",{className:"text-xs text-gray-600",children:"Total"}),(0,ie.jsxs)("p",{className:"font-semibold text-green-600",children:["\u20b9",((parseFloat(e.price)||0)*(parseInt(e.quantity)||0)).toFixed(2)]})]}),(0,ie.jsx)("button",{type:"button",onClick:()=>(e=>{s(t=>o(o({},t),{},{items:t.items.filter((t,n)=>n!==e)}))})(t),className:"text-red-500 hover:text-red-700 p-2",title:"Remove item",children:(0,ie.jsx)(Sc,{className:"h-4 w-4"})})]})]})},t)}),0===a.items.length&&(0,ie.jsxs)("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[(0,ie.jsx)(Fl,{className:"h-12 w-12 mx-auto text-gray-400 mb-3"}),(0,ie.jsx)("p",{className:"text-gray-600 mb-2",children:"No items added yet"}),(0,ie.jsx)("p",{className:"text-sm text-gray-500",children:'Click "Search Products" or "Add Manually" to get started'})]})]}),a.items.length>0&&(0,ie.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,ie.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ie.jsx)("span",{className:"font-medium text-gray-900",children:"Order Total:"}),(0,ie.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:["\u20b9",a.items.reduce((e,t)=>e+(parseFloat(t.price)||0)*(parseInt(t.quantity)||0),0).toFixed(2)]})]}),(0,ie.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[a.items.length," item",1!==a.items.length?"s":""," \u2022 Total Quantity: ",a.items.reduce((e,t)=>e+(parseInt(t.quantity)||0),0)," units"]})]})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,ie.jsx)("textarea",{name:"notes",value:a.notes,onChange:h,className:"input-field",rows:3,placeholder:"Additional notes..."})]}),(0,ie.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,ie.jsx)("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),(0,ie.jsx)("button",{type:"submit",className:"btn-primary",children:"Create Purchase Order"})]})]})]})})},Xy=()=>{const{state:e,dispatch:t}=Nt(),[n,i]=(0,r.useState)(!1),[a,s]=(0,r.useState)(""),[l,c]=(0,r.useState)("all"),[d,u]=(0,r.useState)(1),h=e.purchaseOrders.filter(e=>{var t;if(!0===e.isDeleted)return!1;const n=(null===(t=e.supplierName)||void 0===t?void 0:t.toLowerCase().includes(a.toLowerCase()))||e.id.includes(a),r="all"===l||e.status===l;return n&&r}),f=Math.ceil(h.length/10),p=10*(d-1),m=h.slice(p,p+10),g=e.purchaseOrders.filter(e=>!0!==e.isDeleted),y=g.length,b=g.filter(e=>"pending"===e.status).length,v=g.filter(e=>"completed"===e.status).length,x=g.reduce((e,t)=>e+(t.total||0),0),w=e=>{switch(e){case"pending":return(0,ie.jsx)(ic,{className:"h-4 w-4 text-yellow-600"});case"completed":return(0,ie.jsx)(Iy,{className:"h-4 w-4 text-green-600"});case"cancelled":return(0,ie.jsx)(Cy,{className:"h-4 w-4 text-red-600"});default:return(0,ie.jsx)(ic,{className:"h-4 w-4 text-gray-600"})}},_=e=>{const t="px-3 py-1 rounded-full text-xs font-semibold";switch(e){case"pending":return"".concat(t," bg-yellow-100 text-yellow-800");case"completed":return"".concat(t," bg-green-100 text-green-800");case"cancelled":return"".concat(t," bg-red-100 text-red-800");default:return"".concat(t," bg-gray-100 text-gray-800")}},N=(n,r)=>{const i=e.purchaseOrders.find(e=>e.id===n);if(i){const e=o(o({},i),{},{status:r});t({type:"UPDATE_PURCHASE_ORDER",payload:e}),t({type:"ADD_ACTIVITY",payload:{id:Date.now().toString(),message:"Purchase order ".concat(n," status changed to ").concat(r),timestamp:(new Date).toISOString(),type:"po_status_changed"}})}};return(0,ie.jsxs)("div",{className:"space-y-8 fade-in-up",children:[(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Purchase Orders"}),(0,ie.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage supplier orders and inventory"})]}),(0,ie.jsxs)("button",{onClick:()=>i(!0),className:"btn-primary flex items-center mt-4 sm:mt-0",children:[(0,ie.jsx)(wc,{className:"h-4 w-4 mr-2"}),"New Purchase Order"]})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,ie.jsx)("div",{className:"stat-card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-blue-100 rounded-xl",children:(0,ie.jsx)(zl,{className:"h-6 w-6 text-blue-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),(0,ie.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:y})]})]})}),(0,ie.jsx)("div",{className:"stat-card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-yellow-100 rounded-xl",children:(0,ie.jsx)(ic,{className:"h-6 w-6 text-yellow-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),(0,ie.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:b})]})]})}),(0,ie.jsx)("div",{className:"stat-card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-green-100 rounded-xl",children:(0,ie.jsx)(Iy,{className:"h-6 w-6 text-green-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,ie.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:v})]})]})}),(0,ie.jsx)("div",{className:"stat-card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-purple-100 rounded-xl",children:(0,ie.jsx)(Fl,{className:"h-6 w-6 text-purple-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),(0,ie.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",x.toFixed(2)]})]})]})})]}),(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[(0,ie.jsx)("div",{className:"flex-1 max-w-lg",children:(0,ie.jsxs)("div",{className:"relative",children:[(0,ie.jsx)(_c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,ie.jsx)("input",{type:"text",placeholder:"Search purchase orders...",value:a,onChange:e=>s(e.target.value),className:"input-field pl-10"})]})}),(0,ie.jsx)("div",{className:"flex space-x-3",children:(0,ie.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"input-field",children:[(0,ie.jsx)("option",{value:"all",children:"All Status"}),(0,ie.jsx)("option",{value:"pending",children:"Pending"}),(0,ie.jsx)("option",{value:"completed",children:"Completed"}),(0,ie.jsx)("option",{value:"cancelled",children:"Cancelled"})]})})]})}),(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsx)("div",{className:"overflow-x-auto",children:(0,ie.jsxs)("table",{className:"professional-table",children:[(0,ie.jsx)("thead",{children:(0,ie.jsxs)("tr",{children:[(0,ie.jsx)("th",{children:"Order ID"}),(0,ie.jsx)("th",{children:"Supplier"}),(0,ie.jsx)("th",{children:"Items"}),(0,ie.jsx)("th",{children:"Total Value"}),(0,ie.jsx)("th",{children:"Status"}),(0,ie.jsx)("th",{children:"Date"}),(0,ie.jsx)("th",{children:"Actions"})]})}),(0,ie.jsx)("tbody",{children:m.map(e=>{var n,r;return(0,ie.jsxs)("tr",{className:"hover:bg-blue-50 transition-colors",children:[(0,ie.jsxs)("td",{className:"font-medium text-blue-600",children:["#",e.id]}),(0,ie.jsx)("td",{children:e.supplierName||"Unknown Supplier"}),(0,ie.jsx)("td",{children:(0,ie.jsxs)("span",{className:"badge badge-info",children:[(null===(n=e.items)||void 0===n?void 0:n.length)||0," items"]})}),(0,ie.jsxs)("td",{className:"font-semibold",children:["\u20b9",(null===(r=e.total)||void 0===r?void 0:r.toFixed(2))||"0.00"]}),(0,ie.jsx)("td",{children:(0,ie.jsxs)("span",{className:_(e.status),children:[w(e.status),(0,ie.jsx)("span",{className:"ml-1 capitalize",children:e.status})]})}),(0,ie.jsx)("td",{className:"text-gray-600",children:e.date?new Date(e.date).toLocaleDateString():"N/A"}),(0,ie.jsx)("td",{children:(0,ie.jsxs)("div",{className:"flex space-x-2",children:["pending"===e.status&&(0,ie.jsx)("button",{onClick:()=>N(e.id,"completed"),className:"text-green-600 hover:text-green-800",title:"Mark as completed",children:(0,ie.jsx)(Iy,{className:"h-4 w-4"})}),(0,ie.jsx)("button",{onClick:()=>N(e.id,"cancelled"),className:"text-red-600 hover:text-red-800",title:"Cancel order",children:(0,ie.jsx)(Cy,{className:"h-4 w-4"})}),(0,ie.jsx)("button",{onClick:()=>{return n=e.id,void(window.confirm("Are you sure you want to delete this purchase order?")&&(t({type:"DELETE_PURCHASE_ORDER",payload:n}),t({type:"ADD_ACTIVITY",payload:{id:Date.now().toString(),message:"Purchase order ".concat(n," deleted"),timestamp:(new Date).toISOString(),type:"po_deleted"}})));var n},className:"text-gray-600 hover:text-gray-800",title:"Delete order",children:(0,ie.jsx)(Sc,{className:"h-4 w-4"})})]})})]},e.id)})})]})}),0===m.length&&(0,ie.jsxs)("div",{className:"text-center py-12",children:[(0,ie.jsx)(zl,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),(0,ie.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Purchase Orders"}),(0,ie.jsx)("p",{className:"text-gray-600 mb-6",children:"Get started by creating your first purchase order"}),(0,ie.jsx)("button",{onClick:()=>i(!0),className:"btn-primary",children:"Create Purchase Order"})]}),f>1&&(0,ie.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,ie.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",p+1," to ",Math.min(p+10,h.length)," of ",h.length," results"]}),(0,ie.jsxs)("div",{className:"flex space-x-2",children:[(0,ie.jsx)("button",{onClick:()=>u(Math.max(1,d-1)),disabled:1===d,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),(0,ie.jsxs)("span",{className:"px-3 py-2 text-sm font-medium text-gray-700",children:["Page ",d," of ",f]}),(0,ie.jsx)("button",{onClick:()=>u(Math.min(f,d+1)),disabled:d===f,className:"px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]}),n&&(0,ie.jsx)($y,{onClose:()=>i(!1),onSave:e=>{const n=o(o({id:"PO-".concat(Date.now())},e),{},{status:"pending",date:(new Date).toISOString(),createdAt:(new Date).toISOString(),items:e.items.map(e=>({productId:e.productId||null,productName:e.productName||"",quantity:parseInt(e.quantity)||0,price:parseFloat(e.price)||0,unit:e.unit||"pcs",subtotal:parseFloat(e.subtotal)||(parseFloat(e.price)||0)*(parseInt(e.quantity)||0),isCustomProduct:e.isCustomProduct||!1}))});t({type:"ADD_PURCHASE_ORDER",payload:n}),t({type:"ADD_ACTIVITY",payload:{id:Date.now().toString(),message:"New purchase order ".concat(n.id," created"),timestamp:(new Date).toISOString(),type:"po_created"}}),i(!1)}})]})},Qy=jt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Zy=jt("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),eb=jt("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);function tb(){}const nb=function(){let e=0;return function(){return e++}}();function rb(e){return null===e||"undefined"===typeof e}function ib(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function ab(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}const sb=e=>("number"===typeof e||e instanceof Number)&&isFinite(+e);function ob(e,t){return sb(e)?e:t}function lb(e,t){return"undefined"===typeof e?t:e}const cb=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function db(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function ub(e,t,n,r){let i,a,s;if(ib(e))if(a=e.length,r)for(i=a-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<a;i++)t.call(n,e[i],i);else if(ab(e))for(s=Object.keys(e),a=s.length,i=0;i<a;i++)t.call(n,e[s[i]],s[i])}function hb(e,t){let n,r,i,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],a=t[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function fb(e){if(ib(e))return e.map(fb);if(ab(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=fb(e[n[i]]);return t}return e}function pb(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function mb(e,t,n,r){if(!pb(e))return;const i=t[e],a=n[e];ab(i)&&ab(a)?gb(i,a,r):t[e]=fb(a)}function gb(e,t,n){const r=ib(t)?t:[t],i=r.length;if(!ab(e))return e;const a=(n=n||{}).merger||mb;for(let s=0;s<i;++s){if(!ab(t=r[s]))continue;const i=Object.keys(t);for(let r=0,s=i.length;r<s;++r)a(i[r],e,t,n)}return e}function yb(e,t){return gb(e,t,{merger:bb})}function bb(e,t,n){if(!pb(e))return;const r=t[e],i=n[e];ab(r)&&ab(i)?yb(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=fb(i))}const vb={"":e=>e,x:e=>e.x,y:e=>e.y};function xb(e,t){const n=vb[t]||(vb[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function wb(e){return e.charAt(0).toUpperCase()+e.slice(1)}const _b=e=>"undefined"!==typeof e,Nb=e=>"function"===typeof e,Sb=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const kb=Math.PI,Ab=2*kb,jb=Ab+kb,Pb=Number.POSITIVE_INFINITY,Ib=kb/180,Cb=kb/2,Eb=kb/4,Lb=2*kb/3,Db=Math.log10,Tb=Math.sign;function Ob(e){const t=Math.round(e);e=Rb(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Db(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Mb(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Rb(e,t,n){return Math.abs(e-t)<n}function Fb(e,t,n){let r,i,a;for(r=0,i=e.length;r<i;r++)a=e[r][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function Ub(e){return e*(kb/180)}function Bb(e){return e*(180/kb)}function zb(e){if(!sb(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function qb(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a<-.5*kb&&(a+=Ab),{angle:a,distance:i}}function Vb(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Hb(e,t){return(e-t+jb)%Ab-kb}function Wb(e){return(e%Ab+Ab)%Ab}function Gb(e,t,n,r){const i=Wb(e),a=Wb(t),s=Wb(n),o=Wb(a-i),l=Wb(s-i),c=Wb(i-a),d=Wb(i-s);return i===a||i===s||r&&a===s||o>l&&c<d}function Yb(e,t,n){return Math.max(t,Math.min(n,e))}function Kb(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function Jb(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,a=0;for(;i-a>1;)r=a+i>>1,n(r)?a=r:i=r;return{lo:a,hi:i}}const $b=(e,t,n,r)=>Jb(e,n,r?r=>e[r][t]<=n:r=>e[r][t]<n),Xb=(e,t,n)=>Jb(e,n,r=>e[r][t]>=n);const Qb=["push","pop","shift","splice","unshift"];function Zb(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(Qb.forEach(t=>{delete e[t]}),delete e._chartjs)}function ev(e){const t=new Set;let n,r;for(n=0,r=e.length;n<r;++n)t.add(e[n]);return t.size===r?e:Array.from(t)}const tv="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function nv(e,t,n){const r=n||(e=>Array.prototype.slice.call(e));let i=!1,a=[];return function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];a=r(s),i||(i=!0,tv.call(window,()=>{i=!1,e.apply(t,a)}))}}const rv=e=>"start"===e?"left":"end"===e?"right":"center",iv=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function av(e,t,n){const r=t.length;let i=0,a=r;if(e._sorted){const{iScale:s,_parsed:o}=e,l=s.axis,{min:c,max:d,minDefined:u,maxDefined:h}=s.getUserBounds();u&&(i=Yb(Math.min($b(o,s.axis,c).lo,n?r:$b(t,l,s.getPixelForValue(c)).lo),0,r-1)),a=h?Yb(Math.max($b(o,s.axis,d,!0).hi+1,n?0:$b(t,l,s.getPixelForValue(d),!0).hi+1),i,r)-i:r-i}return{start:i,count:a}}function sv(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const a=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),a}const ov=e=>0===e||1===e,lv=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Ab/n),cv=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Ab/n)+1,dv={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Cb),easeOutSine:e=>Math.sin(e*Cb),easeInOutSine:e=>-.5*(Math.cos(kb*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>ov(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>ov(e)?e:lv(e,.075,.3),easeOutElastic:e=>ov(e)?e:cv(e,.075,.3),easeInOutElastic(e){const t=.1125;return ov(e)?e:e<.5?.5*lv(2*e,t,.45):.5+.5*cv(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-dv.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*dv.easeInBounce(2*e):.5*dv.easeOutBounce(2*e-1)+.5};function uv(e){return e+.5|0}const hv=(e,t,n)=>Math.max(Math.min(e,n),t);function fv(e){return hv(uv(2.55*e),0,255)}function pv(e){return hv(uv(255*e),0,255)}function mv(e){return hv(uv(e/2.55)/100,0,1)}function gv(e){return hv(uv(100*e),0,100)}const yv={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},bv=[..."0123456789ABCDEF"],vv=e=>bv[15&e],xv=e=>bv[(240&e)>>4]+bv[15&e],wv=e=>(240&e)>>4===(15&e);function _v(e){var t=(e=>wv(e.r)&&wv(e.g)&&wv(e.b)&&wv(e.a))(e)?vv:xv;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Nv=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Sv(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function kv(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function Av(e,t,n){const r=Sv(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function jv(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),a=Math.min(t,n,r),s=(i+a)/2;let o,l,c;return i!==a&&(c=i-a,l=s>.5?c/(2-i-a):c/(i+a),o=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),o=60*o+.5),[0|o,l||0,s]}function Pv(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(pv)}function Iv(e,t,n){return Pv(Sv,e,t,n)}function Cv(e){return(e%360+360)%360}function Ev(e){const t=Nv.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?fv(+t[5]):pv(+t[5]));const i=Cv(+t[2]),a=+t[3]/100,s=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Pv(Av,e,t,n)}(i,a,s):"hsv"===t[1]?function(e,t,n){return Pv(kv,e,t,n)}(i,a,s):Iv(i,a,s),{r:n[0],g:n[1],b:n[2],a:r}}const Lv={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Dv={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Tv;function Ov(e){Tv||(Tv=function(){const e={},t=Object.keys(Dv),n=Object.keys(Lv);let r,i,a,s,o;for(r=0;r<t.length;r++){for(s=o=t[r],i=0;i<n.length;i++)a=n[i],o=o.replace(a,Lv[a]);a=parseInt(Dv[s],16),e[o]=[a>>16&255,a>>8&255,255&a]}return e}(),Tv.transparent=[0,0,0,0]);const t=Tv[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Mv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Rv=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Fv=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Uv(e,t,n){if(e){let r=jv(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=Iv(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function Bv(e,t){return e?Object.assign(t||{},e):e}function zv(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=pv(e[3]))):(t=Bv(e,{r:0,g:0,b:0,a:1})).a=pv(t.a),t}function qv(e){return"r"===e.charAt(0)?function(e){const t=Mv.exec(e);let n,r,i,a=255;if(t){if(t[7]!==n){const e=+t[7];a=t[8]?fv(e):hv(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?fv(n):hv(n,0,255)),r=255&(t[4]?fv(r):hv(r,0,255)),i=255&(t[6]?fv(i):hv(i,0,255)),{r:n,g:r,b:i,a:a}}}(e):Ev(e)}class Vv{constructor(e){if(e instanceof Vv)return e;const t=typeof e;let n;"object"===t?n=zv(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*yv[e[1]],g:255&17*yv[e[2]],b:255&17*yv[e[3]],a:5===n?17*yv[e[4]]:255}:7!==n&&9!==n||(t={r:yv[e[1]]<<4|yv[e[2]],g:yv[e[3]]<<4|yv[e[4]],b:yv[e[5]]<<4|yv[e[6]],a:9===n?yv[e[7]]<<4|yv[e[8]]:255})),t}(e)||Ov(e)||qv(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Bv(this._rgb);return e&&(e.a=mv(e.a)),e}set rgb(e){this._rgb=zv(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(mv(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?_v(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=jv(e),n=t[0],r=gv(t[1]),i=gv(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(mv(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const a=t===i?.5:t,s=2*a-1,o=n.a-r.a,l=((s*o===-1?s:(s+o)/(1+s*o))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=a*n.a+(1-a)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=Fv(mv(e.r)),i=Fv(mv(e.g)),a=Fv(mv(e.b));return{r:pv(Rv(r+n*(Fv(mv(t.r))-r))),g:pv(Rv(i+n*(Fv(mv(t.g))-i))),b:pv(Rv(a+n*(Fv(mv(t.b))-a))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Vv(this.rgb)}alpha(e){return this._rgb.a=pv(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=uv(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Uv(this._rgb,2,e),this}darken(e){return Uv(this._rgb,2,-e),this}saturate(e){return Uv(this._rgb,1,e),this}desaturate(e){return Uv(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=jv(e);n[0]=Cv(n[0]+t),n=Iv(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Hv(e){return new Vv(e)}function Wv(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Gv(e){return Wv(e)?e:Hv(e)}function Yv(e){return Wv(e)?e:Hv(e).saturate(.5).darken(.1).hexString()}const Kv=Object.create(null),Jv=Object.create(null);function $v(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function Xv(e,t,n){return"string"===typeof t?gb($v(e,t),n):gb($v(e,""),t)}var Qv=new class{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Yv(t.backgroundColor),this.hoverBorderColor=(e,t)=>Yv(t.borderColor),this.hoverColor=(e,t)=>Yv(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return Xv(this,e,t)}get(e){return $v(this,e)}describe(e,t){return Xv(Jv,e,t)}override(e,t){return Xv(Kv,e,t)}route(e,t,n,r){const i=$v(this,e),a=$v(this,n),s="_"+t;Object.defineProperties(i,{[s]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[s],t=a[r];return ab(e)?Object.assign({},t,e):lb(e,t)},set(e){this[s]=e}}})}}({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Zv(e,t,n,r,i){let a=t[i];return a||(a=t[i]=e.measureText(i).width,n.push(i)),a>r&&(r=a),r}function ex(e,t,n,r){let i=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},a=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let s=0;const o=n.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=n[l],void 0!==u&&null!==u&&!0!==ib(u))s=Zv(e,i,a,s,u);else if(ib(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||ib(h)||(s=Zv(e,i,a,s,h));e.restore();const f=a.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[a[l]];a.splice(0,f)}return s}function tx(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function nx(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function rx(e,t,n,r){ix(e,t,n,r,null)}function ix(e,t,n,r,i){let a,s,o,l,c,d;const u=t.pointStyle,h=t.rotation,f=t.radius;let p=(h||0)*Ib;if(u&&"object"===typeof u&&(a=u.toString(),"[object HTMLImageElement]"===a||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,r),e.rotate(p),e.drawImage(u,-u.width/2,-u.height/2,u.width,u.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),u){default:i?e.ellipse(n,r,i/2,f,0,0,Ab):e.arc(n,r,f,0,Ab),e.closePath();break;case"triangle":e.moveTo(n+Math.sin(p)*f,r-Math.cos(p)*f),p+=Lb,e.lineTo(n+Math.sin(p)*f,r-Math.cos(p)*f),p+=Lb,e.lineTo(n+Math.sin(p)*f,r-Math.cos(p)*f),e.closePath();break;case"rectRounded":c=.516*f,l=f-c,s=Math.cos(p+Eb)*l,o=Math.sin(p+Eb)*l,e.arc(n-s,r-o,c,p-kb,p-Cb),e.arc(n+o,r-s,c,p-Cb,p),e.arc(n+s,r+o,c,p,p+Cb),e.arc(n-o,r+s,c,p+Cb,p+kb),e.closePath();break;case"rect":if(!h){l=Math.SQRT1_2*f,d=i?i/2:l,e.rect(n-d,r-l,2*d,2*l);break}p+=Eb;case"rectRot":s=Math.cos(p)*f,o=Math.sin(p)*f,e.moveTo(n-s,r-o),e.lineTo(n+o,r-s),e.lineTo(n+s,r+o),e.lineTo(n-o,r+s),e.closePath();break;case"crossRot":p+=Eb;case"cross":s=Math.cos(p)*f,o=Math.sin(p)*f,e.moveTo(n-s,r-o),e.lineTo(n+s,r+o),e.moveTo(n+o,r-s),e.lineTo(n-o,r+s);break;case"star":s=Math.cos(p)*f,o=Math.sin(p)*f,e.moveTo(n-s,r-o),e.lineTo(n+s,r+o),e.moveTo(n+o,r-s),e.lineTo(n-o,r+s),p+=Eb,s=Math.cos(p)*f,o=Math.sin(p)*f,e.moveTo(n-s,r-o),e.lineTo(n+s,r+o),e.moveTo(n+o,r-s),e.lineTo(n-o,r+s);break;case"line":s=i?i/2:Math.cos(p)*f,o=Math.sin(p)*f,e.moveTo(n-s,r-o),e.lineTo(n+s,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(p)*f,r+Math.sin(p)*f)}e.fill(),t.borderWidth>0&&e.stroke()}}function ax(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function sx(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ox(e){e.restore()}function lx(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function cx(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function dx(e,t,n,r,i){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=ib(t)?t:[t],o=a.strokeWidth>0&&""!==a.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]);rb(t.rotation)||e.rotate(t.rotation);t.color&&(e.fillStyle=t.color);t.textAlign&&(e.textAlign=t.textAlign);t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,a),l=0;l<s.length;++l)c=s[l],o&&(a.strokeColor&&(e.strokeStyle=a.strokeColor),rb(a.strokeWidth)||(e.lineWidth=a.strokeWidth),e.strokeText(c,n,r,a.maxWidth)),e.fillText(c,n,r,a.maxWidth),ux(e,n,r,c,a),r+=i.lineHeight;e.restore()}function ux(e,t,n,r,i){if(i.strikethrough||i.underline){const a=e.measureText(r),s=t-a.actualBoundingBoxLeft,o=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,c=n+a.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(s,d),e.lineTo(o,d),e.stroke()}}function hx(e,t){const{x:n,y:r,w:i,h:a,radius:s}=t;e.arc(n+s.topLeft,r+s.topLeft,s.topLeft,-Cb,kb,!0),e.lineTo(n,r+a-s.bottomLeft),e.arc(n+s.bottomLeft,r+a-s.bottomLeft,s.bottomLeft,kb,Cb,!0),e.lineTo(n+i-s.bottomRight,r+a),e.arc(n+i-s.bottomRight,r+a-s.bottomRight,s.bottomRight,Cb,0,!0),e.lineTo(n+i,r+s.topRight),e.arc(n+i-s.topRight,r+s.topRight,s.topRight,0,-Cb,!0),e.lineTo(n+s.topLeft,r)}const fx=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),px=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function mx(e,t){const n=(""+e).match(fx);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const gx=e=>+e||0;function yx(e,t){const n={},r=ab(t),i=r?Object.keys(t):t,a=ab(e)?r?n=>lb(e[n],e[t[n]]):t=>e[t]:()=>e;for(const s of i)n[s]=gx(a(s));return n}function bx(e){return yx(e,{top:"y",right:"x",bottom:"y",left:"x"})}function vx(e){return yx(e,["topLeft","topRight","bottomLeft","bottomRight"])}function xx(e){const t=bx(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function wx(e,t){e=e||{},t=t||Qv.font;let n=lb(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=lb(e.style,t.style);r&&!(""+r).match(px)&&(console.warn('Invalid font style specified: "'+r+'"'),r="");const i={family:lb(e.family,t.family),lineHeight:mx(lb(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:lb(e.weight,t.weight),string:""};return i.string=function(e){return!e||rb(e.size)||rb(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function _x(e,t,n,r){let i,a,s,o=!0;for(i=0,a=e.length;i<a;++i)if(s=e[i],void 0!==s&&(void 0!==t&&"function"===typeof s&&(s=s(t),o=!1),void 0!==n&&ib(s)&&(s=s[n%s.length],o=!1),void 0!==s))return r&&!o&&(r.cacheable=!1),s}function Nx(e,t){return Object.assign(Object.create(e),t)}function Sx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];_b(r)||(r=Ox("_fallback",e));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:r,_getTarget:i,override:i=>Sx([i,...e],t,n,r)};return new Proxy(a,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>Ix(n,r,()=>function(e,t,n,r){let i;for(const a of t)if(i=Ox(jx(a,e),n),_b(i))return Px(e,i)?Dx(n,r,e,i):i}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Mx(e).includes(t),ownKeys:e=>Mx(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function kx(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Ax(e,r),setContext:t=>kx(e,t,n,r),override:i=>kx(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Ix(e,t,()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:a,_descriptors:s}=e;let o=r[t];Nb(o)&&s.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:i,_context:a,_subProxy:s,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e),t=t(a,s||r),o.delete(e),Px(e,t)&&(t=Dx(i._scopes,i,e,t));return t}(t,o,e,n));ib(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:i,_context:a,_subProxy:s,_descriptors:o}=n;if(_b(a.index)&&r(e))t=t[a.index%t.length];else if(ab(t[0])){const n=t,r=i._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=Dx(r,i,e,l);t.push(kx(n,a,s&&s[e],o))}}return t}(t,o,e,s.isIndexable));Px(t,o)&&(o=kx(o,i,a&&a[t],s));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function Ax(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Nb(n)?n:()=>n,isIndexable:Nb(r)?r:()=>r}}const jx=(e,t)=>e?e+wb(t):t,Px=(e,t)=>ab(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Ix(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const r=n();return e[t]=r,r}function Cx(e,t,n){return Nb(e)?e(t,n):e}const Ex=(e,t)=>!0===e?t:"string"===typeof e?xb(t,e):void 0;function Lx(e,t,n,r,i){for(const a of t){const t=Ex(n,a);if(t){e.add(t);const a=Cx(t._fallback,n,i);if(_b(a)&&a!==n&&a!==r)return a}else if(!1===t&&_b(r)&&n!==r)return null}return!1}function Dx(e,t,n,r){const i=t._rootScopes,a=Cx(t._fallback,n,r),s=[...e,...i],o=new Set;o.add(r);let l=Tx(o,s,n,a||n,r);return null!==l&&((!_b(a)||a===n||(l=Tx(o,s,a,l,r),null!==l))&&Sx(Array.from(o),[""],i,a,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(ib(i)&&ab(n))return n;return i}(t,n,r)))}function Tx(e,t,n,r,i){for(;n;)n=Lx(e,t,n,r,i);return n}function Ox(e,t){for(const n of t){if(!n)continue;const t=n[e];if(_b(t))return t}}function Mx(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Rx(e,t,n,r){const{iScale:i}=e,{key:a="r"}=this._parsing,s=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],s[o]={r:i.parse(xb(d,a),c)};return s}const Fx=Number.EPSILON||1e-14,Ux=(e,t)=>t<e.length&&!e[t].skip&&e[t],Bx=e=>"x"===e?"y":"x";function zx(e,t,n,r){const i=e.skip?t:e,a=t,s=n.skip?t:n,o=Vb(a,i),l=Vb(s,a);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=r*c,h=r*d;return{previous:{x:a.x-u*(s.x-i.x),y:a.y-u*(s.y-i.y)},next:{x:a.x+h*(s.x-i.x),y:a.y+h*(s.y-i.y)}}}function qx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Bx(t),r=e.length,i=Array(r).fill(0),a=Array(r);let s,o,l,c=Ux(e,0);for(s=0;s<r;++s)if(o=l,l=c,c=Ux(e,s+1),l){if(c){const e=c[t]-l[t];i[s]=0!==e?(c[n]-l[n])/e:0}a[s]=o?c?Tb(i[s-1])!==Tb(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}!function(e,t,n){const r=e.length;let i,a,s,o,l,c=Ux(e,0);for(let d=0;d<r-1;++d)l=c,c=Ux(e,d+1),l&&c&&(Rb(t[d],0,Fx)?n[d]=n[d+1]=0:(i=n[d]/t[d],a=n[d+1]/t[d],o=Math.pow(i,2)+Math.pow(a,2),o<=9||(s=3/Math.sqrt(o),n[d]=i*s*t[d],n[d+1]=a*s*t[d])))}(e,i,a),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=Bx(n),i=e.length;let a,s,o,l=Ux(e,0);for(let c=0;c<i;++c){if(s=o,o=l,l=Ux(e,c+1),!o)continue;const i=o[n],d=o[r];s&&(a=(i-s[n])/3,o["cp1".concat(n)]=i-a,o["cp1".concat(r)]=d-a*t[c]),l&&(a=(l[n]-i)/3,o["cp2".concat(n)]=i+a,o["cp2".concat(r)]=d+a*t[c])}}(e,a,t)}function Vx(e,t,n){return Math.max(Math.min(e,n),t)}function Hx(e,t,n,r,i){let a,s,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)qx(e,i);else{let n=r?e[e.length-1]:e[0];for(a=0,s=e.length;a<s;++a)o=e[a],l=zx(n,o,e[Math.min(a+1,s-(r?0:1))%s],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,i,a,s,o=ax(e[0],t);for(n=0,r=e.length;n<r;++n)s=a,a=o,o=n<r-1&&ax(e[n+1],t),a&&(i=e[n],s&&(i.cp1x=Vx(i.cp1x,t.left,t.right),i.cp1y=Vx(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=Vx(i.cp2x,t.left,t.right),i.cp2y=Vx(i.cp2y,t.top,t.bottom)))}(e,n)}function Wx(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Gx(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Yx(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const Kx=e=>window.getComputedStyle(e,null);const Jx=["top","right","bottom","left"];function $x(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const a=Jx[i];r[a]=parseFloat(e[t+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function Xx(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=Kx(n),a="border-box"===i.boxSizing,s=$x(i,"padding"),o=$x(i,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:a}=r;let s,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,a,e.target))s=i,o=a;else{const e=t.getBoundingClientRect();s=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:s,y:o,box:l}}(e,n),u=s.left+(d&&o.left),h=s.top+(d&&o.top);let{width:f,height:p}=t;return a&&(f-=s.width+o.width,p-=s.height+o.height),{x:Math.round((l-u)/f*n.width/r),y:Math.round((c-h)/p*n.height/r)}}const Qx=e=>Math.round(10*e)/10;function Zx(e,t,n,r){const i=Kx(e),a=$x(i,"margin"),s=Yx(i.maxWidth,e,"clientWidth")||Pb,o=Yx(i.maxHeight,e,"clientHeight")||Pb,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const a=Gx(e);if(a){const e=a.getBoundingClientRect(),s=Kx(a),o=$x(s,"border","width"),l=$x(s,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=Yx(s.maxWidth,a,"clientWidth"),i=Yx(s.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||Pb,maxHeight:i||Pb}}(e,t,n);let{width:c,height:d}=l;if("content-box"===i.boxSizing){const e=$x(i,"border","width"),t=$x(i,"padding");c-=t.width+e.width,d-=t.height+e.height}return c=Math.max(0,c-a.width),d=Math.max(0,r?Math.floor(c/r):d-a.height),c=Qx(Math.min(c,s,l.maxWidth)),d=Qx(Math.min(d,o,l.maxHeight)),c&&!d&&(d=Qx(c/2)),{width:c,height:d}}function ew(e,t,n){const r=t||1,i=Math.floor(e.height*r),a=Math.floor(e.width*r);e.height=i/r,e.width=a/r;const s=e.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height="".concat(e.height,"px"),s.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||s.height!==i||s.width!==a)&&(e.currentDevicePixelRatio=r,s.height=i,s.width=a,e.ctx.setTransform(r,0,0,r,0,0),!0)}const tw=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(vk){}return e}();function nw(e,t){const n=function(e,t){return Kx(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function rw(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function iw(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function aw(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},s=rw(e,i,n),o=rw(i,a,n),l=rw(a,t,n),c=rw(s,o,n),d=rw(o,l,n);return rw(c,d,n)}const sw=new Map;function ow(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=sw.get(n);return r||(r=new Intl.NumberFormat(e,t),sw.set(n,r)),r}(t,n).format(e)}function lw(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function cw(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function dw(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function uw(e){return"angle"===e?{between:Gb,compare:Hb,normalize:Wb}:{between:Kb,compare:(e,t)=>e-t,normalize:e=>e}}function hw(e){let{start:t,end:n,count:r,loop:i,style:a}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:a}}function fw(e,t,n){if(!n)return[e];const{property:r,start:i,end:a}=n,s=t.length,{compare:o,between:l,normalize:c}=uw(r),{start:d,end:u,loop:h,style:f}=function(e,t,n){const{property:r,start:i,end:a}=n,{between:s,normalize:o}=uw(r),l=t.length;let c,d,{start:u,end:h,loop:f}=e;if(f){for(u+=l,h+=l,c=0,d=l;c<d&&s(o(t[u%l][r]),i,a);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:f,style:e.style}}(e,t,n),p=[];let m,g,y,b=!1,v=null;const x=()=>b||l(i,y,m)&&0!==o(i,y),w=()=>!b||0===o(a,m)||l(a,y,m);for(let _=d,N=d;_<=u;++_)g=t[_%s],g.skip||(m=c(g[r]),m!==y&&(b=l(m,i,a),null===v&&x()&&(v=0===o(m,i)?_:N),null!==v&&w()&&(p.push(hw({start:v,end:_,loop:h,count:s,style:f})),v=null),N=_,y=m));return null!==v&&p.push(hw({start:v,end:u,loop:h,count:s,style:f})),p}function pw(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const a=fw(r[i],e.points,t);a.length&&n.push(...a)}return n}function mw(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),a=gw(e.options),{_datasetIndex:s,options:{spanGaps:o}}=e,l=n.length,c=[];let d=a,u=t[0].start,h=u;function f(e,t,r,i){const a=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),d=i,u=t%l)}}for(const p of t){u=o?u:p.start;let e,t=n[u%l];for(h=u+1;h<=p.end;h++){const a=n[h%l];e=gw(r.setContext(Nx(i,{type:"segment",p0:t,p1:a,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),yw(e,d)&&f(u,h-1,p.loop,d),t=a,d=e}u<h-1&&f(u,h-1,p.loop,d)}return c}(e,t,n,r):t}function gw(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function yw(e,t){return t&&JSON.stringify(e)!==JSON.stringify(t)}var bw=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],a=t.duration;i.forEach(r=>r({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=tv.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let a,s=i.length-1,o=!1;for(;s>=0;--s)a=i[s],a._active?(a._total>n.duration&&(n.duration=a._total),a.tick(e),o=!0):(i[s]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const vw="transparent",xw={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=Gv(e||vw),i=r.valid&&Gv(t||vw);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class ww{constructor(e,t,n,r){const i=t[n];r=_x([e.to,r,i,e.from]);const a=_x([e.from,i,r]);this._active=!0,this._fn=e.fn||xw[e.type||typeof a],this._easing=dv[e.easing]||dv.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=a,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=_x([e.to,t,r,e.from]),this._from=_x([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,a=this._loop,s=this._to;let o;if(this._active=i!==s&&(a||t<n),!this._active)return this._target[r]=s,void this._notify(!0);t<0?this._target[r]=i:(o=t/n%2,o=a&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(i,s,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}Qv.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const _w=Object.keys(Qv.animation);Qv.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),Qv.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),Qv.describe("animations",{_fallback:"animation"}),Qv.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}});class Nw{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ab(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const r=e[n];if(!ab(r))return;const i={};for(const e of _w)i[e]=r[e];(ib(r.properties)&&r.properties||[n]).forEach(e=>{e!==n&&t.has(e)||t.set(e,i)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),a=Object.keys(t),s=Date.now();let o;for(o=a.length-1;o>=0;--o){const l=a[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let d=i[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,s);continue}d.cancel()}u&&u.duration?(i[l]=d=new ww(u,e,l,c),r.push(d)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(bw.add(this._chart,n),!0):void 0}}function Sw(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:r?a:i,end:r?i:a}}function kw(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,a;for(i=0,a=r.length;i<a;++i)n.push(r[i].index);return n}function Aw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,a="single"===r.mode;let s,o,l,c;if(null!==t){for(s=0,o=i.length;s<o;++s){if(l=+i[s],l===n){if(r.all)continue;break}c=e.values[l],sb(c)&&(a||0===t||Tb(t)===Tb(c))&&(t+=c)}return t}}function jw(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function Pw(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function Iw(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function Cw(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:a,vScale:s,index:o}=r,l=a.axis,c=s.axis,d=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(a,s,r),u=t.length;let h;for(let f=0;f<u;++f){const e=t[f],{[l]:n,[c]:a}=e;h=(e._stacks||(e._stacks={}))[c]=Pw(i,d,n),h[o]=a,h._top=Iw(h,s,!0,r.type),h._bottom=Iw(h,s,!1,r.type)}}function Ew(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function Lw(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n]}}}const Dw=e=>"reset"===e||"none"===e,Tw=(e,t)=>t?e:Object.assign({},e);class Ow{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=jw(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&Lw(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=lb(n.xAxisID,Ew(e,"x")),a=t.yAxisID=lb(n.yAxisID,Ew(e,"y")),s=t.rAxisID=lb(n.rAxisID,Ew(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,i,a,s),c=t.vAxisID=r(o,a,i,s);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(s),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Zb(this._data,this),e._stacked&&Lw(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(ab(t))this._data=function(e){const t=Object.keys(e),n=new Array(t.length);let r,i,a;for(r=0,i=t.length;r<i;++r)a=t[r],n[r]={x:a,y:e[a]};return n}(t);else if(n!==t){if(n){Zb(n,this);const e=this._cachedMeta;Lw(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),Qb.forEach(e=>{const t="_onData"+wb(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];const s=n.apply(this,i);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...i)}),s}})}))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=jw(t.vScale,t),t.stack!==n.stack&&(r=!0,Lw(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&Cw(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:a}=n,s=i.axis;let o,l,c,d=0===e&&t===r.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=ib(r[e])?this.parseArrayData(n,r,e,t):ab(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[s]||u&&l[s]<u[s];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],d&&(i()&&(d=!1),u=l);n._sorted=d}a&&Cw(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:a}=e,s=i.axis,o=a.axis,l=i.getLabels(),c=i===a,d=new Array(r);let u,h,f;for(u=0,h=r;u<h;++u)f=u+n,d[u]={[s]:c||i.parse(l[f],f),[o]:a.parse(t[f],f)};return d}parseArrayData(e,t,n,r){const{xScale:i,yScale:a}=e,s=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],s[o]={x:i.parse(d[0],c),y:a.parse(d[1],c)};return s}parseObjectData(e,t,n,r){const{xScale:i,yScale:a}=e,{xAxisKey:s="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=t[u],l[c]={x:i.parse(xb(h,s),u),y:a.parse(xb(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,a=t[e.axis];return Aw({keys:kw(r,!0),values:t._stacks[e.axis]},a,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let a=null===i?NaN:i;const s=r&&n._stacks[t.axis];r&&s&&(r.values=s,a=Aw(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,a=r.length,s=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:kw(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(s);let u,h;function f(){h=r[u];const t=h[s.axis];return!sb(h[e.axis])||c>t||d<t}for(u=0;u<a&&(f()||(this.updateRangeFromParsed(l,e,h,o),!i));++u);if(i)for(u=a-1;u>=0;--u)if(!f()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,a;for(r=0,i=t.length;r<i;++r)a=t[r][e.axis],sb(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return ab(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(lb(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=Sw(e,n),i=Sw(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,a=[],s=this._drawStart||0,o=this._drawCount||r.length-s,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,s,o),c=s;c<s+o;++c){const t=r[c];t.hidden||(t.active&&l?a.push(t):t.draw(e,i))}for(c=0;c<a.length;++c)a[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return Nx(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return Nx(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,a=e+"-"+t,s=i[a],o=this.enableOptionSharing&&_b(n);if(s)return Tw(s,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(Qv.elements[e]),f=l.resolveNamedOptions(u,h,()=>this.getContext(n,r),d);return f.$shared&&(f.$shared=o,i[a]=Object.freeze(Tw(f,o))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,a="animation-".concat(t),s=i[a];if(s)return s;let o;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),a=r.getOptionScopes(this.getDataset(),i);o=r.createResolver(a,this.getContext(e,n,t))}const l=new Nw(r,o&&o.animations);return o&&o._cacheable&&(i[a]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Dw(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:a}}updateElement(e,t,n,r){Dw(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!Dw(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[s,o,l]of this._syncList)this[s](o,l);this._syncList=[];const r=n.length,i=t.length,a=Math.min(i,r);a&&this.parse(0,a),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,a=e+t;let s;const o=e=>{for(e.length+=t,s=e.length-1;s>=a;s--)e[s]=e[s-t]};for(o(i),s=e;s<a;++s)i[s]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&Lw(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Mw(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=ev(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,i,a,s,o=t._length;const l=()=>{32767!==a&&-32768!==a&&(_b(s)&&(o=Math.min(o,Math.abs(a-s)||o)),s=a)};for(r=0,i=n.length;r<i;++r)a=t.getPixelForValue(n[r]),l();for(s=void 0,r=0,i=t.ticks.length;r<i;++r)a=t.getPixelForTick(r),l();return o}function Rw(e,t,n,r){return ib(e)?function(e,t,n,r){const i=n.parse(e[0],r),a=n.parse(e[1],r),s=Math.min(i,a),o=Math.max(i,a);let l=s,c=o;Math.abs(s)>Math.abs(o)&&(l=o,c=s),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:a,min:s,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function Fw(e,t,n,r){const i=e.iScale,a=e.vScale,s=i.getLabels(),o=i===a,l=[];let c,d,u,h;for(c=n,d=n+r;c<d;++c)h=t[c],u={},u[i.axis]=o||i.parse(s[c],c),l.push(Rw(h,u,a,c));return l}function Uw(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Bw(e,t,n,r){let i=t.borderSkipped;const a={};if(!i)return void(e.borderSkipped=a);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:s,end:o,reverse:l,top:c,bottom:d}=function(e){let t,n,r,i,a;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",a="start"):(i="start",a="end"),{start:n,end:r,reverse:t,top:i,bottom:a}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=d:(a[zw(d,s,o,l)]=!0,i=c)),a[zw(i,s,o,l)]=!0,e.borderSkipped=a}function zw(e,t,n,r){var i,a,s;return r?(s=n,e=qw(e=(i=e)===(a=t)?s:i===s?a:i,n,t)):e=qw(e,t,n),e}function qw(e,t,n){return"start"===e?t:"end"===e?n:e}function Vw(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}Ow.defaults={},Ow.prototype.datasetElementType=null,Ow.prototype.dataElementType=null;class Hw extends Ow{parsePrimitiveData(e,t,n,r){return Fw(e,t,n,r)}parseArrayData(e,t,n,r){return Fw(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:a}=e,{xAxisKey:s="x",yAxisKey:o="y"}=this._parsing,l="x"===i.axis?s:o,c="x"===a.axis?s:o,d=[];let u,h,f,p;for(u=n,h=n+r;u<h;++u)p=t[u],f={},f[i.axis]=i.parse(xb(p,l),u),d.push(Rw(xb(p,c),f,a,u));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),a=i._custom,s=Uw(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:s}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:a,_cachedMeta:{vScale:s}}=this,o=s.getBasePixel(),l=s.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=i||rb(t[s.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),f=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[s.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||Uw(t._custom)||a===p._top||a===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};u&&(m.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=m.options||e[h].options;Bw(m,g,p,a),Vw(m,g,c.ratio),this.updateElement(e[h],h,m,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),i=n.options.stacked,a=[],s=e=>{const n=e.controller.getParsed(t),r=n&&n[e.vScale.axis];if(rb(r)||isNaN(r))return!0};for(const o of r)if((void 0===t||!s(o))&&((!1===i||-1===a.indexOf(o.stack)||void 0===i&&void 0===o.stack)&&a.push(o.stack),o.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,a;for(i=0,a=t.data.length;i<a;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const s=e.barThickness;return{min:s||Mw(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n},options:{base:r,minBarLength:i}}=this,a=r||0,s=this.getParsed(e),o=s._custom,l=Uw(o);let c,d,u=s[t.axis],h=0,f=n?this.applyStack(t,s,n):u;f!==u&&(h=f-u,f=u),l&&(u=o.barStart,f=o.barEnd-o.barStart,0!==u&&Tb(u)!==Tb(o.barEnd)&&(h=0),h+=u);const p=rb(r)||l?h:r;let m=t.getPixelForValue(p);if(c=this.chart.getDataVisibility(e)?t.getPixelForValue(h+f):m,d=c-m,Math.abs(d)<i){d=function(e,t,n){return 0!==e?Tb(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(d,t,a)*i,u===a&&(m-=d/2);const e=t.getPixelForDecimal(0),n=t.getPixelForDecimal(1),r=Math.min(e,n),s=Math.max(e,n);m=Math.max(Math.min(m,s),r),c=m+d}if(m===t.getPixelForValue(a)){const e=Tb(d)*t.getLineWidthForValue(a)/2;m+=e,d-=e}return{size:d,base:m,head:c,center:c+d/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,a=lb(r.maxBarThickness,1/0);let s,o;if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,l="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,a=i[e];let s=e>0?i[e-1]:null,o=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===s&&(s=a-(null===o?t.end-t.start:o-a)),null===o&&(o=a+a-s);const c=a-(a-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n):function(e,t,n,r){const i=n.barThickness;let a,s;return rb(i)?(a=t.min*n.categoryPercentage,s=n.barPercentage):(a=i*r,s=1),{chunk:a/r,ratio:s,start:t.pixels[e]-a/2}}(e,t,r,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0);s=l.start+l.chunk*c+l.chunk/2,o=Math.min(a,l.chunk*l.ratio)}else s=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(a,t.min*t.ratio);return{base:s-o/2,head:s+o/2,center:s,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null!==this.getParsed(i)[t.axis]&&n[i].draw(this._ctx)}}Hw.id="bar",Hw.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Hw.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Ww extends Ow{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let a=0;a<i.length;a++)i[a]._custom=this.resolveDataElementOptions(a+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let a=0;a<i.length;a++){const e=t[n+a];i[a]._custom=lb(e[2],this.resolveDataElementOptions(a+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let a=0;a<i.length;a++){const e=t[n+a];i[a]._custom=lb(e&&e.r&&+e.r,this.resolveDataElementOptions(a+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,{xScale:n,yScale:r}=t,i=this.getParsed(e),a=n.getLabelForValue(i.x),s=r.getLabelForValue(i.y),o=i._custom;return{label:t.label,value:"("+a+", "+s+(o?", "+o:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:s}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=a.axis,d=s.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!i&&this.getParsed(u),h={},f=h[c]=i?a.getPixelForDecimal(.5):a.getPixelForValue(n[c]),p=h[d]=i?s.getBasePixel():s.getPixelForValue(n[d]);h.skip=isNaN(f)||isNaN(p),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":r),i&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=lb(n&&n._custom,i),r}}Ww.id="bubble",Ww.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Ww.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class Gw extends Ow{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,a,s=e=>+n[e];if(ab(n[e])){const{key:e="value"}=this._parsing;s=t=>+xb(n[t],e)}for(i=e,a=e+t;i<a;++i)r._parsed[i]=s(i)}}_getRotation(){return Ub(this.options.rotation-90)}_getCircumference(){return Ub(this.options.circumference)}_getRotationExtents(){let e=Ab,t=-Ab;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),a=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,a=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,s=Math.max((Math.min(n.width,n.height)-a)/2,0),o=Math.min((l=this.options.cutout,c=s,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:l/c),1);var l,c;const d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function(e,t,n){let r=1,i=1,a=0,s=0;if(t<Ab){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),f=(e,t,r)=>Gb(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>Gb(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),m=f(0,c,u),g=f(Cb,d,h),y=p(kb,c,u),b=p(kb+Cb,d,h);r=(m-y)/2,i=(g-b)/2,a=-(m+y)/2,s=-(g+b)/2}return{ratioX:r,ratioY:i,offsetX:a,offsetY:s}}(h,u,o),y=(n.width-a)/f,b=(n.height-a)/p,v=Math.max(Math.min(y,b)/2,0),x=cb(this.options.radius,v),w=(x-Math.max(x*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*x,this.offsetY=g*x,r.total=this.calculateTotal(),this.outerRadius=x-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*d,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/Ab)}updateElements(e,t,n,r){const i="reset"===r,a=this.chart,s=a.chartArea,o=a.options.animation,l=(s.left+s.right)/2,c=(s.top+s.bottom)/2,d=i&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,i);for(m=t;m<t+n;++m){const t=this._circumference(m,i),n=e[m],a={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};p&&(a.options=f||this.resolveDataElementOptions(m,n.active?"active":r)),g+=t,this.updateElement(n,m,a,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Ab*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=ow(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,a,s,o;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){a=n.getDatasetMeta(r),e=a.data,s=a.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)o=s.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(lb(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Gw.id="doughnut",Gw.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Gw.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},Gw.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((t,r)=>{const i=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let t=e.label;const n=": "+e.formattedValue;return ib(t)?(t=t.slice(),t[0]+=n):t+=n,t}}}}};class Yw extends Ow{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,a=this.chart._animationsDisabled;let{start:s,count:o}=av(t,r,a);this._drawStart=s,this._drawCount=o,sv(t)&&(s=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:l},e),this.updateElements(r,s,o,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:s,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),u=a.axis,h=s.axis,{spanGaps:f,segment:p}=this.options,m=Mb(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r;let y=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),f=g?t:{},v=rb(n[h]),x=f[u]=a.getPixelForValue(n[u],b),w=f[h]=i||v?s.getBasePixel():s.getPixelForValue(o?this.applyStack(s,n,o):n[h],b);f.skip=isNaN(x)||isNaN(w)||v,f.stop=b>0&&Math.abs(n[u]-y[u])>m,p&&(f.parsed=n,f.raw=l.data[b]),d&&(f.options=c||this.resolveDataElementOptions(b,t.active?"active":r)),g||this.updateElement(t,b,f,r),y=n}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Yw.id="line",Yw.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Yw.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Kw extends Ow{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=ow(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return Rx.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),a=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,t,n,r){const i="reset"===r,a=this.chart,s=a.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*kb;let u,h=d;const f=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,f);for(u=t;u<t+n;u++){const t=e[u];let n=h,p=h+this._computeAngle(u,r,f),m=a.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=p,i&&(s.animateScale&&(m=0),s.animateRotate&&(n=p=d));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Ub(this.resolveDataElementOptions(e,t).angle||n):0}}Kw.id="polarArea",Kw.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Kw.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n}}=e.legend.options;return t.labels.map((t,r)=>{const i=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:i.backgroundColor,strokeStyle:i.borderColor,lineWidth:i.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Jw extends Gw{}Jw.id="pie",Jw.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class $w extends Ow{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return Rx.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const a={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,a,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,a="reset"===r;for(let s=t;s<t+n;s++){const t=e[s],n=this.resolveDataElementOptions(s,t.active?"active":r),o=i.getPointPositionForValue(s,this.getParsed(s).r),l=a?i.xCenter:o.x,c=a?i.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,s,d,r)}}}$w.id="radar",$w.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},$w.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Xw{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return Mb(this.x)&&Mb(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}Xw.defaults={},Xw.defaultRoutes=void 0;const Qw={values:e=>ib(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,a=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),a=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const s=Db(Math.abs(a)),o=Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),ow(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=e/Math.pow(10,Math.floor(Db(e)));return 1===r||2===r||5===r?Qw.numeric.call(this,e,t,n):""}};var Zw={formatters:Qw};function e_(e,t){const n=e.options.ticks,r=n.maxTicksLimit||function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=i.length,s=i[0],o=i[a-1],l=[];if(a>r)return function(e,t,n,r){let i,a=0,s=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===s&&(t.push(e[i]),a++,s=n[a*r])}(t,l,i,a/r),l;const c=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const a=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let s=0,o=a.length-1;s<o;s++){const e=a[s];if(e>i)return e}return Math.max(i,1)}(i,t,r);if(a>0){let e,n;const r=a>1?Math.round((o-s)/(a-1)):null;for(t_(t,l,c,rb(r)?0:s-r,s),e=0,n=a-1;e<n;e++)t_(t,l,c,i[e],i[e+1]);return t_(t,l,c,o,rb(r)?t.length:o+r),l}return t_(t,l,c),l}function t_(e,t,n,r,i){const a=lb(r,0),s=Math.min(lb(i,e.length),e.length);let o,l,c,d=0;for(n=Math.ceil(n),i&&(o=i-r,n=o/Math.floor(o/n)),c=a;c<0;)d++,c=Math.round(a+d*n);for(l=Math.max(a,0);l<s;l++)l===c&&(t.push(e[l]),d++,c=Math.round(a+d*n))}Qv.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Zw.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Qv.route("scale.ticks","color","","color"),Qv.route("scale.grid","color","","borderColor"),Qv.route("scale.grid","borderColor","","borderColor"),Qv.route("scale.title","color","","color"),Qv.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e}),Qv.describe("scales",{_fallback:"scale"}),Qv.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e});const n_=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n;function r_(e,t){const n=[],r=e.length/t,i=e.length;let a=0;for(;a<i;a+=r)n.push(e[Math.floor(a)]);return n}function i_(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),a=e._startPixel,s=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-a,s-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<a-o||c>s+o)))return c}function a_(e){return e.drawTicks?e.tickLength:0}function s_(e,t){if(!e.display)return 0;const n=wx(e.font,t),r=xx(e.padding);return(ib(e.text)?e.text.length:1)*n.lineHeight+r.height}function o_(e,t,n){let r=rv(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class l_ extends Xw{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=ob(e,Number.POSITIVE_INFINITY),t=ob(t,Number.NEGATIVE_INFINITY),n=ob(n,Number.POSITIVE_INFINITY),r=ob(r,Number.NEGATIVE_INFINITY),{min:ob(e,n),max:ob(t,r),minDefined:sb(e),maxDefined:sb(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:a}=this.getUserBounds();if(i&&a)return{min:n,max:r};const s=this.getMatchingVisibleMetas();for(let o=0,l=s.length;o<l;++o)t=s[o].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),a||(r=Math.max(r,t.max));return n=a&&n>r?r:n,r=i&&n>r?n:r,{min:ob(n,ob(r,n)),max:ob(r,ob(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){db(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:a}=this.options,s=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,a=cb(t,(i-r)/2),s=(e,t)=>n&&0===e?0:e+t;return{min:s(r,-Math.abs(a)),max:s(i,a)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=s<this.ticks.length;this._convertTicksToLabels(o?r_(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||"auto"===a.source)&&(this.ticks=e_(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){db(this.options.afterUpdate,[this])}beforeSetDimensions(){db(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){db(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),db(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){db(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=db(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){db(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){db(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=this.ticks.length,r=t.minRotation||0,i=t.maxRotation;let a,s,o,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=Yb(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/n:h/(n-1),d+6>a&&(a=h/(n-(e.offset?.5:1)),s=this.maxHeight-a_(e.grid)-t.padding-s_(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=Bb(Math.min(Math.asin(Yb((c.highest.height+6)/a,-1,1)),Math.asin(Yb(s/o,-1,1))-Math.asin(Yb(u/o,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){db(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){db(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,a=this._isVisible(),s=this.isHorizontal();if(a){const a=s_(r,t.options.font);if(s?(e.width=this.maxWidth,e.height=a_(i)+a):(e.height=this.maxHeight,e.width=a_(i)+a),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:a}=this._getLabelSizes(),o=2*n.padding,l=Ub(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(s){const t=n.mirror?0:d*i.width+c*a.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*i.width+d*a.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,d,c)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:a},position:s}=this.options,o=0!==this.labelRotation,l="top"!==s&&"x"===this.axis;if(this.isHorizontal()){const s=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=r*e.width,u=n*t.height):(d=n*e.height,u=r*t.width):"start"===i?u=t.width:"end"===i?d=e.width:"inner"!==i&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-s+a)*this.width/(this.width-s),0),this.paddingRight=Math.max((u-c+a)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+a,this.paddingBottom=r+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){db(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)rb(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=r_(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(e,t){const{ctx:n,_longestTextCache:r}=this,i=[],a=[];let s,o,l,c,d,u,h,f,p,m,g,y=0,b=0;for(s=0;s<t;++s){if(c=e[s].label,d=this._resolveTickFontOptions(s),n.font=u=d.string,h=r[u]=r[u]||{data:{},gc:[]},f=d.lineHeight,p=m=0,rb(c)||ib(c)){if(ib(c))for(o=0,l=c.length;o<l;++o)g=c[o],rb(g)||ib(g)||(p=Zv(n,h.data,h.gc,p,g),m+=f)}else p=Zv(n,h.data,h.gc,p,c),m=f;i.push(p),a.push(m),y=Math.max(p,y),b=Math.max(m,b)}!function(e,t){ub(e,e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}})}(r,t);const v=i.indexOf(y),x=a.indexOf(b),w=e=>({width:i[e]||0,height:a[e]||0});return{first:w(0),last:w(t-1),widest:w(v),highest:w(x),widths:i,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Yb(this._alignToPixels?tx(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Nx(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Nx(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Ub(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,s=i?i.widest.width+a:0,o=i?i.highest.height+a:0;return this.isHorizontal()?o*n>s*r?s/n:o/r:o*r<s*n?o/n:s/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:a}=r,s=i.offset,o=this.isHorizontal(),l=this.ticks.length+(s?1:0),c=a_(i),d=[],u=i.setContext(this.getContext()),h=u.drawBorder?u.borderWidth:0,f=h/2,p=function(e){return tx(n,e,h)};let m,g,y,b,v,x,w,_,N,S,k,A;if("top"===a)m=p(this.bottom),x=this.bottom-c,_=m-f,S=p(e.top)+f,A=e.bottom;else if("bottom"===a)m=p(this.top),S=e.top,A=p(e.bottom)-f,x=m+f,_=this.top+c;else if("left"===a)m=p(this.right),v=this.right-c,w=m-f,N=p(e.left)+f,k=e.right;else if("right"===a)m=p(this.left),N=e.left,k=p(e.right)-f,v=m+f,w=this.left+c;else if("x"===t){if("center"===a)m=p((e.top+e.bottom)/2+.5);else if(ab(a)){const e=Object.keys(a)[0],t=a[e];m=p(this.chart.scales[e].getPixelForValue(t))}S=e.top,A=e.bottom,x=m+f,_=x+c}else if("y"===t){if("center"===a)m=p((e.left+e.right)/2);else if(ab(a)){const e=Object.keys(a)[0],t=a[e];m=p(this.chart.scales[e].getPixelForValue(t))}v=m-f,w=v-c,N=e.left,k=e.right}const j=lb(r.ticks.maxTicksLimit,l),P=Math.max(1,Math.ceil(l/j));for(g=0;g<l;g+=P){const e=i.setContext(this.getContext(g)),t=e.lineWidth,r=e.color,a=e.borderDash||[],l=e.borderDashOffset,c=e.tickWidth,u=e.tickColor,h=e.tickBorderDash||[],f=e.tickBorderDashOffset;y=i_(this,g,s),void 0!==y&&(b=tx(n,y,t),o?v=w=N=k=b:x=_=S=A=b,d.push({tx1:v,ty1:x,tx2:w,ty2:_,x1:N,y1:S,x2:k,y2:A,width:t,color:r,borderDash:a,borderDashOffset:l,tickWidth:c,tickColor:u,tickBorderDash:h,tickBorderDashOffset:f}))}return this._ticksLength=l,this._borderValue=m,d}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,a=this.isHorizontal(),s=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=i,u=a_(n.grid),h=u+c,f=d?-c:h,p=-Ub(this.labelRotation),m=[];let g,y,b,v,x,w,_,N,S,k,A,j,P="middle";if("top"===r)w=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);_=e.textAlign,x=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);_=e.textAlign,x=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(ab(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)x=(e.left+e.right)/2-h;else if(ab(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?P="top":"end"===o&&(P="bottom"));const I=this._getLabelSizes();for(g=0,y=s.length;g<y;++g){b=s[g],v=b.label;const e=i.setContext(this.getContext(g));N=this.getPixelForTick(g)+i.labelOffset,S=this._resolveTickFontOptions(g),k=S.lineHeight,A=ib(v)?v.length:1;const t=A/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=_;if(a?(x=N,"inner"===_&&(h=g===y-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),j="top"===r?"near"===l||0!==p?-A*k+k/2:"center"===l?-I.highest.height/2-t*k+k:-I.highest.height+k/2:"near"===l||0!==p?k/2:"center"===l?I.highest.height/2-t*k:I.highest.height-A*k,d&&(j*=-1)):(w=N,j=(1-A)*k/2),e.showLabelBackdrop){const t=xx(e.backdropPadding),n=I.heights[g],r=I.widths[g];let i=w+j-t.top,a=x-t.left;switch(P){case"middle":i-=n/2;break;case"bottom":i-=n}switch(_){case"center":a-=r/2;break;case"right":a-=r}u={left:a,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}m.push({rotation:p,label:v,font:S,color:n,strokeColor:o,strokeWidth:c,textOffset:j,textAlign:h,textBaseline:P,translation:[x,w],backdrop:u})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ub(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,a=e+i,s=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+i,"near"===n?o="left":"center"===n?(o="center",l+=s/2):(o="right",l+=s)):(l=this.right-a,"near"===n?o="right":"center"===n?(o="center",l-=s/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?o="right":"center"===n?(o="center",l-=s/2):(o="left",l-=s)):(l=this.left+a,"near"===n?o="left":"center"===n?(o="center",l+=s/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,a;const s=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,a=r.length;i<a;++i){const e=r[i];t.drawOnChartArea&&s({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&s({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:n}}=this,r=n.setContext(this.getContext()),i=n.drawBorder?r.borderWidth:0;if(!i)return;const a=n.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let o,l,c,d;this.isHorizontal()?(o=tx(e,this.left,i)-i/2,l=tx(e,this.right,a)+a/2,c=d=s):(c=tx(e,this.top,i)-i/2,d=tx(e,this.bottom,a)+a/2,o=l=s),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(o,c),t.lineTo(l,d),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&sx(t,n);const r=this._labelItems||(this._labelItems=this._computeLabelItems(e));let i,a;for(i=0,a=r.length;i<a;++i){const e=r[i],n=e.font,a=e.label;e.backdrop&&(t.fillStyle=e.backdrop.color,t.fillRect(e.backdrop.left,e.backdrop.top,e.backdrop.width,e.backdrop.height)),dx(t,a,0,e.textOffset,n,e)}n&&ox(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=wx(n.font),a=xx(n.padding),s=n.align;let o=i.lineHeight/2;"bottom"===t||"center"===t||ab(t)?(o+=a.bottom,ib(n.text)&&(o+=i.lineHeight*(n.text.length-1))):o+=a.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,n,r){const{top:i,left:a,bottom:s,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,f,p=0;const m=s-i,g=o-a;if(e.isHorizontal()){if(h=iv(r,a,o),ab(n)){const e=Object.keys(n)[0],r=n[e];f=d[e].getPixelForValue(r)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:n_(e,n,t);u=o-a}else{if(ab(n)){const e=Object.keys(n)[0],r=n[e];h=d[e].getPixelForValue(r)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:n_(e,n,t);f=iv(r,s,i),p="left"===n?-Cb:Cb}return{titleX:h,titleY:f,maxWidth:u,rotation:p}}(this,o,t,s);dx(e,n.text,0,0,i,{color:n.color,maxWidth:d,rotation:u,textAlign:o_(s,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=lb(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===l_.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,a;for(i=0,a=t.length;i<a;++i){const a=t[i];a[n]!==this.id||e&&a.type!==e||r.push(a)}return r}_resolveTickFontOptions(e){return wx(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class c_{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=gb(Object.create(null),[n?Qv.get(n):{},Qv.get(t),e.defaults]);Qv.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),a=[e].concat(r).join("."),s=t[n].split("."),o=s.pop(),l=s.join(".");Qv.route(a,i,l,o)})}(t,e.defaultRoutes);e.descriptors&&Qv.describe(t,e.descriptors)}(e,a,n),this.override&&Qv.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Qv[r]&&(delete Qv[r][n],this.override&&delete Kv[n])}}var d_=new class{constructor(){this.controllers=new c_(Ow,"datasets",!0),this.elements=new c_(Xw,"elements"),this.plugins=new c_(Object,"plugins"),this.scales=new c_(l_,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):ub(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=wb(e);db(n["before"+r],[],n),t[e](n),db(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}};class u_ extends Ow{update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:a}=av(t,n,r);if(this._drawStart=i,this._drawCount=a,sv(t)&&(i=0,a=n.length),this.options.showLine){const{dataset:i,_dataset:a}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!a._decimated,i.points=n;const s=this.resolveDatasetElementOptions(e);s.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:s},e)}this.updateElements(n,i,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=d_.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:a,vScale:s,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=a.axis,f=s.axis,{spanGaps:p,segment:m}=this.options,g=Mb(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r;let b=t>0&&this.getParsed(t-1);for(let v=t;v<t+n;++v){const t=e[v],n=this.getParsed(v),c=y?t:{},p=rb(n[f]),x=c[h]=a.getPixelForValue(n[h],v),w=c[f]=i||p?s.getBasePixel():s.getPixelForValue(o?this.applyStack(s,n,o):n[f],v);c.skip=isNaN(x)||isNaN(w)||p,c.stop=v>0&&Math.abs(n[h]-b[h])>g,m&&(c.parsed=n,c.raw=l.data[v]),u&&(c.options=d||this.resolveDataElementOptions(v,t.active?"active":r)),y||this.updateElement(t,v,c,r),b=n}this.updateSharedOptions(d,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,a)/2}}u_.id="scatter",u_.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},u_.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function h_(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class f_{constructor(e){this.options=e||{}}init(e){}formats(){return h_()}parse(e,t){return h_()}format(e,t){return h_()}add(e,t,n){return h_()}diff(e,t,n){return h_()}startOf(e,t,n){return h_()}endOf(e,t){return h_()}}f_.override=function(e){Object.assign(f_.prototype,e)};var p_={_date:f_};function m_(e,t,n,r){const{controller:i,data:a,_sorted:s}=e,o=i._cachedMeta.iScale;if(o&&t===o.axis&&"r"!==t&&s&&a.length){const e=o._reversePixels?Xb:$b;if(!r)return e(a,t,n);if(i._sharedOptions){const r=a[0],i="function"===typeof r.getRange&&r.getRange(t);if(i){const r=e(a,t,n-i),s=e(a,t,n+i);return{lo:r.lo,hi:s.hi}}}}return{lo:0,hi:a.length-1}}function g_(e,t,n,r,i){const a=e.getSortedVisibleDatasetMetas(),s=n[t];for(let o=0,l=a.length;o<l;++o){const{index:e,data:n}=a[o],{lo:l,hi:c}=m_(a[o],t,s,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function y_(e,t,n,r,i){const a=[];if(!i&&!e.isPointInArea(t))return a;return g_(e,n,t,function(n,s,o){(i||ax(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&a.push({element:n,datasetIndex:s,index:o})},!0),a}function b_(e,t,n,r,i,a){let s=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,a=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}(n);let l=Number.POSITIVE_INFINITY;return g_(e,n,t,function(n,c,d){const u=n.inRange(t.x,t.y,i);if(r&&!u)return;const h=n.getCenterPoint(i);if(!(!!a||e.isPointInArea(h))&&!u)return;const f=o(t,h);f<l?(s=[{element:n,datasetIndex:c,index:d}],l=f):f===l&&s.push({element:n,datasetIndex:c,index:d})}),s}function v_(e,t,n,r,i,a){return a||e.isPointInArea(t)?"r"!==n||r?b_(e,t,n,r,i,a):function(e,t,n,r){let i=[];return g_(e,n,t,function(e,n,a){const{startAngle:s,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=qb(e,{x:t.x,y:t.y});Gb(l,s,o)&&i.push({element:e,datasetIndex:n,index:a})}),i}(e,t,n,i):[]}function x_(e,t,n,r,i){const a=[],s="x"===n?"inXRange":"inYRange";let o=!1;return g_(e,n,t,(e,r,l)=>{e[s](t[n],i)&&(a.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,i))}),r&&!o?[]:a}var w_={evaluateInteractionItems:g_,modes:{index(e,t,n,r){const i=Xx(t,e),a=n.axis||"x",s=n.includeInvisible||!1,o=n.intersect?y_(e,i,a,r,s):v_(e,i,a,!1,r,s),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const i=Xx(t,e),a=n.axis||"xy",s=n.includeInvisible||!1;let o=n.intersect?y_(e,i,a,r,s):v_(e,i,a,!1,r,s);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>y_(e,Xx(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=Xx(t,e),a=n.axis||"xy",s=n.includeInvisible||!1;return v_(e,i,a,n.intersect,r,s)},x:(e,t,n,r)=>x_(e,Xx(t,e),"x",n.intersect,r),y:(e,t,n,r)=>x_(e,Xx(t,e),"y",n.intersect,r)}};const __=["left","top","right","bottom"];function N_(e,t){return e.filter(e=>e.pos===t)}function S_(e,t){return e.filter(e=>-1===__.indexOf(e.pos)&&e.box.axis===t)}function k_(e,t){return e.sort((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function A_(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!__.includes(r))continue;const a=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let a,s,o;for(a=0,s=e.length;a<s;++a){o=e[a];const{fullSize:s}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:s&&t.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:s&&t.availableHeight)}return n}function j_(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function P_(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function I_(e,t,n,r){const{pos:i,box:a}=n,s=e.maxPadding;if(!ab(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?a.height:a.width),n.size=t.size/t.count,e[i]+=n.size}a.getPadding&&P_(s,a.getPadding());const o=Math.max(0,t.outerWidth-j_(s,e,"left","right")),l=Math.max(0,t.outerHeight-j_(s,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function C_(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function E_(e,t,n,r){const i=[];let a,s,o,l,c,d;for(a=0,s=e.length,c=0;a<s;++a){o=e[a],l=o.box,l.update(o.width||t.w,o.height||t.h,C_(o.horizontal,t));const{same:s,other:u}=I_(t,n,o,r);c|=s&&i.length,d=d||u,l.fullSize||i.push(o)}return c&&E_(i,t,n,r)||d}function L_(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function D_(e,t,n,r){const i=n.padding;let{x:a,y:s}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,a=l.size||e.height;_b(l.start)&&(s=l.start),e.fullSize?L_(e,i.left,s,n.outerWidth-i.right-i.left,a):L_(e,t.left+l.placed,s,r,a),l.start=s,l.placed+=r,s=e.bottom}else{const r=t.h*c,s=l.size||e.width;_b(l.start)&&(a=l.start),e.fullSize?L_(e,a,i.top,s,n.outerHeight-i.bottom-i.top):L_(e,a,t.top+l.placed,s,r),l.start=a,l.placed+=r,a=e.right}}t.x=a,t.y=s}Qv.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var T_={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=xx(e.options.layout.padding),a=Math.max(t-i.width,0),s=Math.max(n-i.height,0),o=function(e){const t=function(e){const t=[];let n,r,i,a,s,o;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:a,options:{stack:s,stackWeight:o=1}}=i),t.push({index:n,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&a+s,stackWeight:o});return t}(e),n=k_(t.filter(e=>e.box.fullSize),!0),r=k_(N_(t,"left"),!0),i=k_(N_(t,"right")),a=k_(N_(t,"top"),!0),s=k_(N_(t,"bottom")),o=S_(t,"x"),l=S_(t,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:i.concat(l).concat(s).concat(o),chartArea:N_(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:a.concat(s).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;ub(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/d,hBoxMaxHeight:s/2}),h=Object.assign({},i);P_(h,xx(r));const f=Object.assign({maxPadding:h,w:a,h:s,x:i.left,y:i.top},i),p=A_(l.concat(c),u);E_(o.fullSize,f,u,p),E_(l,f,u,p),E_(c,f,u,p)&&E_(l,f,u,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),D_(o.leftAndTop,f,u,p),f.x+=f.w,f.y+=f.h,D_(o.rightAndBottom,f,u,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ub(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class O_{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class M_ extends O_{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const R_="$chartjs",F_={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},U_=e=>null===e||""===e;const B_=!!tw&&{passive:!0};function z_(e,t,n){e.canvas.removeEventListener(t,n,B_)}function q_(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function V_(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||q_(n.addedNodes,r),t=t&&!q_(n.removedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function H_(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||q_(n.removedNodes,r),t=t&&!q_(n.addedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const W_=new Map;let G_=0;function Y_(){const e=window.devicePixelRatio;e!==G_&&(G_=e,W_.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function K_(e,t,n){const r=e.canvas,i=r&&Gx(r);if(!i)return;const a=nv((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()},window),s=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||a(n,r)});return s.observe(i),function(e,t){W_.size||window.addEventListener("resize",Y_),W_.set(e,t)}(e,a),s}function J_(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){W_.delete(e),W_.size||window.removeEventListener("resize",Y_)}(e)}function $_(e,t,n){const r=e.canvas,i=nv(t=>{null!==e.ctx&&n(function(e,t){const n=F_[e.type]||e.type,{x:r,y:i}=Xx(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))},e,e=>{const t=e[0];return[t,t.offsetX,t.offsetY]});return function(e,t,n){e.addEventListener(t,n,B_)}(r,t,i),i}class X_ extends O_{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[R_]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",U_(i)){const t=nw(e,"width");void 0!==t&&(e.width=t)}if(U_(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=nw(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[R_])return!1;const n=t[R_].initial;["height","width"].forEach(e=>{const r=n[e];rb(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[R_],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:V_,detach:H_,resize:K_}[t]||$_;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:J_,detach:J_,resize:J_}[t]||z_)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return Zx(e,t,n,r)}isAttached(e){const t=Gx(e);return!(!t||!t.isConnected)}}class Q_{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===db(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){rb(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=lb(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(d_.plugins.items);for(let a=0;a<r.length;a++)n.push(d_.getPlugin(r[a]));const i=e.plugins||[];for(let a=0;a<i.length;a++){const e=i[a];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:a}=t;const s=[],o=e.getContext();for(const l of i){const t=l.id,i=Z_(n[t],r);null!==i&&s.push({plugin:l,options:eN(e.config,{plugin:l,local:a[t]},i,o)})}return s}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function Z_(e,t){return t||!1!==e?!0===e?{}:e:null}function eN(e,t,n,r){let{plugin:i,local:a}=t;const s=e.pluginScopeKeys(i),o=e.getOptionScopes(n,s);return a&&i.defaults&&o.push(i.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function tN(e,t){const n=Qv.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function nN(e,t){return"x"===e||"y"===e?e:t.axis||("top"===(n=t.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.charAt(0).toLowerCase();var n}function rN(e){const t=e.options||(e.options={});t.plugins=lb(t.plugins,{}),t.scales=function(e,t){const n=Kv[e.type]||{scales:{}},r=t.scales||{},i=tN(e.type,t),a=Object.create(null),s=Object.create(null);return Object.keys(r).forEach(e=>{const t=r[e];if(!ab(t))return console.error("Invalid scale configuration for scale: ".concat(e));if(t._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(e));const o=nN(e,t),l=function(e,t){return e===t?"_index_":"_value_"}(o,i),c=n.scales||{};a[o]=a[o]||e,s[e]=yb(Object.create(null),[{axis:o},t,c[o],c[l]])}),e.data.datasets.forEach(n=>{const i=n.type||e.type,o=n.indexAxis||tN(i,t),l=(Kv[i]||{}).scales||{};Object.keys(l).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),i=n[t+"AxisID"]||a[t]||t;s[i]=s[i]||Object.create(null),yb(s[i],[{axis:t},r[i],l[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];yb(t,[Qv.scales[t.type],Qv.scale])}),s}(e,t)}function iN(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const aN=new Map,sN=new Set;function oN(e,t){let n=aN.get(e);return n||(n=t(),aN.set(e,n),sN.add(n)),n}const lN=(e,t,n)=>{const r=xb(t,n);void 0!==r&&e.add(r)};class cN{constructor(e){this._config=function(e){return(e=e||{}).data=iN(e.data),rN(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=iN(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),rN(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return oN(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return oN("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return oN("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return oN("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,a=this._cachedScopes(e,n),s=a.get(t);if(s)return s;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>lN(o,e,t))),t.forEach(e=>lN(o,r,e)),t.forEach(e=>lN(o,Kv[i]||{},e)),t.forEach(e=>lN(o,Qv,e)),t.forEach(e=>lN(o,Jv,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),sN.has(t)&&a.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Kv[t]||{},Qv.datasets[t]||{},{type:t},Qv,Jv]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:a,subPrefixes:s}=dN(this._resolverCache,e,r);let o=a;if(function(e,t){const{isScriptable:n,isIndexable:r}=Ax(e);for(const i of t){const t=n(i),a=r(i),s=(a||t)&&e[i];if(t&&(Nb(s)||uN(s))||a&&ib(s))return!0}return!1}(a,t)){i.$shared=!1;o=kx(a,n=Nb(n)?n():n,this.createResolver(e,n,s))}for(const l of t)i[l]=o[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=dN(this._resolverCache,e,n);return ab(t)?kx(i,t,void 0,r):i}}function dN(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let a=r.get(i);if(!a){a={resolver:Sx(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(i,a)}return a}const uN=e=>ab(e)&&Object.getOwnPropertyNames(e).reduce((t,n)=>t||Nb(e[n]),!1);const hN=["top","bottom","left","right","chartArea"];function fN(e,t){return"top"===e||"bottom"===e||-1===hN.indexOf(e)&&"x"===t}function pN(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function mN(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),db(n&&n.onComplete,[e],t)}function gN(e){const t=e.chart,n=t.options.animation;db(n&&n.onProgress,[e],t)}function yN(e){return Wx()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const bN={},vN=e=>{const t=yN(e);return Object.values(bN).filter(e=>e.canvas===t).pop()};function xN(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const a=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=a)}}}class wN{constructor(e,t){const n=this.config=new cN(t),r=yN(e),i=vN(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Wx()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?M_:X_}(r)),this.platform.updateConfig(n);const s=this.platform.acquireContext(r,a.aspectRatio),o=s&&s.canvas,l=o&&o.height,c=o&&o.width;this.id=nb(),this.ctx=s,this.canvas=o,this.width=c,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Q_,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}(e=>this.update(e),a.resizeDelay||0),this._dataChanges=[],bN[this.id]=this,s&&o?(bw.listen(this,"complete",mN),bw.listen(this,"progress",gN),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return rb(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ew(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return nx(this.canvas,this.ctx),this}stop(){return bw.stop(this),this}resize(e,t){bw.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,i),s=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,ew(this,s,!0)&&(this.notifyPlugins("resize",{size:a}),db(n.onResize,[this,a],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){ub(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let i=[];t&&(i=i.concat(Object.keys(t).map(e=>{const n=t[e],r=nN(e,n),i="r"===r,a="x"===r;return{options:n,dposition:i?"chartArea":a?"bottom":"left",dtype:i?"radialLinear":a?"category":"linear"}}))),ub(i,t=>{const i=t.options,a=i.id,s=nN(a,i),o=lb(i.type,t.dtype);void 0!==i.position&&fN(i.position,s)===fN(t.dposition)||(i.position=t.dposition),r[a]=!0;let l=null;if(a in n&&n[a].type===o)l=n[a];else{l=new(d_.getScale(o))({id:a,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)}),ub(r,(e,t)=>{e||delete n[t]}),ub(n,e=>{T_.configure(this,e,e.options),T_.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(pN("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const a=r.type||this.config.type;if(i.type&&i.type!==a&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=a,i.indexAxis=r.indexAxis||tN(a,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=d_.getController(a),{datasetElementType:r,dataElementType:s}=Qv.datasets[a];Object.assign(t.prototype,{dataElementType:d_.getElement(s),datasetElementType:r&&d_.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){ub(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),a=Math.max(+e.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||ub(i,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(pN("z","_idx"));const{_active:s,_lastEvent:o}=this;o?this._eventHandler(o,!0):s.length&&this._updateHoverStyles(s,s,!0),this.render()}_updateScales(){ub(this.scales,e=>{T_.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Sb(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){xN(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let i=1;i<t;i++)if(!Sb(r,n(i)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;T_.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],ub(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Nb(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(bw.has(this)?this.attached&&!bw.running(this)&&bw.start(this):(this.draw(),mN({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,i=this.chartArea,a={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(r&&sx(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&ox(t),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return ax(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=w_.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Nx(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,r);_b(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(i,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),bw.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),nx(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete bN[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};ub(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let a;const s=()=>{r("attach",s),this.attached=!0,this.resize(),n("resize",i),n("detach",a)};a=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",s)},t.isAttached(this.canvas)?s():a()}unbindEvents(){ub(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},ub(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,a,s,o;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),s=0,o=e.length;s<o;++s){a=e[s];const t=a&&this.getDatasetMeta(a.datasetIndex).controller;t&&t[r+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!hb(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),a=i(t,e),s=n?e:i(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),s.length&&r.mode&&this.updateHoverStyle(s,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,a=t,s=this._getActiveElements(e,r,n,a),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,db(i.onHover,[e,s,this],this),o&&db(i.onClick,[e,s,this],this));const c=!hb(s,r);return(c||t)&&(this._active=s,this._updateHoverStyles(s,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}const _N=()=>ub(wN.instances,e=>e._plugins.invalidate()),NN=!0;function SN(e,t,n){const{startAngle:r,pixelMargin:i,x:a,y:s,outerRadius:o,innerRadius:l}=t;let c=i/o;e.beginPath(),e.arc(a,s,o,r-c,n+c),l>i?(c=i/l,e.arc(a,s,l,n+c,r-c,!0)):e.arc(a,s,i,n+Cb,r-Cb),e.closePath(),e.clip()}function kN(e,t,n,r){const i=yx(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const a=(n-t)/2,s=Math.min(a,r*t/2),o=e=>{const t=(n-Math.min(a,e))*r/2;return Yb(e,0,Math.min(a,t))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Yb(i.innerStart,0,s),innerEnd:Yb(i.innerEnd,0,s)}}function AN(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function jN(e,t,n,r,i,a){const{x:s,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+r+n-c,0),h=d>0?d+r+n+c:0;let f=0;const p=i-l;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const m=(p-Math.max(.001,p*u-n/kb)/u)/2,g=l+m+f,y=i-m-f,{outerStart:b,outerEnd:v,innerStart:x,innerEnd:w}=kN(t,h,u,y-g),_=u-b,N=u-v,S=g+b/_,k=y-v/N,A=h+x,j=h+w,P=g+x/A,I=y-w/j;if(e.beginPath(),a){if(e.arc(s,o,u,S,k),v>0){const t=AN(N,k,s,o);e.arc(t.x,t.y,v,k,y+Cb)}const t=AN(j,y,s,o);if(e.lineTo(t.x,t.y),w>0){const t=AN(j,I,s,o);e.arc(t.x,t.y,w,y+Cb,I+Math.PI)}if(e.arc(s,o,h,y-w/h,g+x/h,!0),x>0){const t=AN(A,P,s,o);e.arc(t.x,t.y,x,P+Math.PI,g-Cb)}const n=AN(_,g,s,o);if(e.lineTo(n.x,n.y),b>0){const t=AN(_,S,s,o);e.arc(t.x,t.y,b,g-Cb,S)}}else{e.moveTo(s,o);const t=Math.cos(S)*u+s,n=Math.sin(S)*u+o;e.lineTo(t,n);const r=Math.cos(k)*u+s,i=Math.sin(k)*u+o;e.lineTo(r,i)}e.closePath()}function PN(e,t,n,r,i,a){const{options:s}=t,{borderWidth:o,borderJoinStyle:l}=s,c="inner"===s.borderAlign;o&&(c?(e.lineWidth=2*o,e.lineJoin=l||"round"):(e.lineWidth=o,e.lineJoin=l||"bevel"),t.fullCircles&&function(e,t,n){const{x:r,y:i,startAngle:a,pixelMargin:s,fullCircles:o}=t,l=Math.max(t.outerRadius-s,0),c=t.innerRadius+s;let d;for(n&&SN(e,t,a+Ab),e.beginPath(),e.arc(r,i,c,a+Ab,a,!0),d=0;d<o;++d)e.stroke();for(e.beginPath(),e.arc(r,i,l,a,a+Ab),d=0;d<o;++d)e.stroke()}(e,t,c),c&&SN(e,t,i),jN(e,t,n,r,i,a),e.stroke())}Object.defineProperties(wN,{defaults:{enumerable:NN,value:Qv},instances:{enumerable:NN,value:bN},overrides:{enumerable:NN,value:Kv},registry:{enumerable:NN,value:d_},version:{enumerable:NN,value:"3.9.1"},getChart:{enumerable:NN,value:vN},register:{enumerable:NN,value:function(){d_.add(...arguments),_N()}},unregister:{enumerable:NN,value:function(){d_.remove(...arguments),_N()}}});class IN extends Xw{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:a}=qb(r,{x:e,y:t}),{startAngle:s,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=this.options.spacing/2,h=lb(d,o-s)>=Ab||Gb(i,s,o),f=Kb(a,l+u,c+u);return h&&f}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:a,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:o,spacing:l}=this.options,c=(r+i)/2,d=(a+s+l+o)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/2,i=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Ab?Math.floor(n/Ab):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();let s=0;if(r){s=r/2;const t=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(t)*s,Math.sin(t)*s),this.circumference>=kb&&(s=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const o=function(e,t,n,r,i){const{fullCircles:a,startAngle:s,circumference:o}=t;let l=t.endAngle;if(a){jN(e,t,n,r,s+Ab,i);for(let t=0;t<a;++t)e.fill();isNaN(o)||(l=s+o%Ab,o%Ab===0&&(l+=Ab))}return jN(e,t,n,r,l,i),e.fill(),l}(e,this,s,i,a);PN(e,this,s,i,o,a),e.restore()}}function CN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=lb(n.borderCapStyle,t.borderCapStyle),e.setLineDash(lb(n.borderDash,t.borderDash)),e.lineDashOffset=lb(n.borderDashOffset,t.borderDashOffset),e.lineJoin=lb(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=lb(n.borderWidth,t.borderWidth),e.strokeStyle=lb(n.borderColor,t.borderColor)}function EN(e,t,n){e.lineTo(n.x,n.y)}function LN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:a=r-1}=n,{start:s,end:o}=t,l=Math.max(i,s),c=Math.min(a,o),d=i<s&&a<s||i>o&&a>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!d?r+c-l:c-l}}function DN(e,t,n,r){const{points:i,options:a}=t,{count:s,start:o,loop:l,ilen:c}=LN(i,n,r),d=function(e){return e.stepped?lx:e.tension||"monotone"===e.cubicInterpolationMode?cx:EN}(a);let u,h,f,{move:p=!0,reverse:m}=r||{};for(u=0;u<=c;++u)h=i[(o+(m?c-u:u))%s],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):d(e,f,h,m,a.stepped),f=h);return l&&(h=i[(o+(m?c:0))%s],d(e,f,h,m,a.stepped)),!!l}function TN(e,t,n,r){const i=t.points,{count:a,start:s,ilen:o}=LN(i,n,r),{move:l=!0,reverse:c}=r||{};let d,u,h,f,p,m,g=0,y=0;const b=e=>(s+(c?o-e:e))%a,v=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(u=i[b(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=i[b(d)],u.skip)continue;const t=u.x,n=u.y,r=0|t;r===h?(n<f?f=n:n>p&&(p=n),g=(y*g+t)/++y):(v(),e.lineTo(t,n),h=r,y=0,f=p=n),m=n}v()}function ON(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?TN:DN}IN.id="arc",IN.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},IN.defaultRoutes={backgroundColor:"backgroundColor"};const MN="function"===typeof Path2D;function RN(e,t,n,r){MN&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),CN(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:a}=t,s=ON(t);for(const o of i)CN(e,a,o.style),e.beginPath(),s(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class FN extends Xw{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Hx(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const a=!!e._loop,{start:s,end:o}=function(e,t,n,r){let i=0,a=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(a+=i);a>i&&e[a%t].skip;)a--;return a%=t,{start:i,end:a}}(n,i,a,r);return mw(e,!0===r?[{start:s,end:o,loop:a}]:function(e,t,n,r){const i=e.length,a=[];let s,o=t,l=e[t];for(s=t+1;s<=n;++s){const n=e[s%i];n.skip||n.stop?l.skip||(r=!1,a.push({start:t%i,end:(s-1)%i,loop:r}),t=o=n.stop?s:null):(o=s,l.skip&&(t=s)),l=n}return null!==o&&a.push({start:t%i,end:o%i,loop:r}),a}(n,s,o<s?o+i:o,!!e._fullLoop&&0===s&&o===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,a=pw(this,{property:t,start:r,end:r});if(!a.length)return;const s=[],o=function(e){return e.stepped?iw:e.tension||"monotone"===e.cubicInterpolationMode?aw:rw}(n);let l,c;for(l=0,c=a.length;l<c;++l){const{start:c,end:d}=a[l],u=i[c],h=i[d];if(u===h){s.push(u);continue}const f=o(u,h,Math.abs((r-u[t])/(h[t]-u[t])),n.stepped);f[t]=e[t],s.push(f)}return 1===s.length?s[0]:s}pathSegment(e,t,n){return ON(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=ON(this);let a=this._loop;t=t||0,n=n||this.points.length-t;for(const s of r)a&=i(e,this,s,{start:t,end:t+n-1});return!!a}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),RN(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function UN(e,t,n,r){const i=e.options,{[n]:a}=e.getProps([n],r);return Math.abs(t-a)<i.radius+i.hitRadius}FN.id="line",FN.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},FN.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},FN.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};class BN extends Xw{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:a}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-a,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return UN(this,e,"x",t)}inYRange(e,t){return UN(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!ax(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,rx(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function zN(e,t){const{x:n,y:r,base:i,width:a,height:s}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=s/2,o=Math.min(n,i),l=Math.max(n,i),c=r-u,d=r+u):(u=a/2,o=n-u,l=n+u,c=Math.min(r,i),d=Math.max(r,i)),{left:o,top:c,right:l,bottom:d}}function qN(e,t,n,r){return e?0:Yb(t,n,r)}function VN(e){const t=zN(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,a=bx(r);return{t:qN(i.top,a.top,0,n),r:qN(i.right,a.right,0,t),b:qN(i.bottom,a.bottom,0,n),l:qN(i.left,a.left,0,t)}}(e,n/2,r/2),a=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,a=vx(i),s=Math.min(t,n),o=e.borderSkipped,l=r||ab(i);return{topLeft:qN(!l||o.top||o.left,a.topLeft,0,s),topRight:qN(!l||o.top||o.right,a.topRight,0,s),bottomLeft:qN(!l||o.bottom||o.left,a.bottomLeft,0,s),bottomRight:qN(!l||o.bottom||o.right,a.bottomRight,0,s)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:a},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function HN(e,t,n,r){const i=null===t,a=null===n,s=e&&!(i&&a)&&zN(e,r);return s&&(i||Kb(t,s.left,s.right))&&(a||Kb(n,s.top,s.bottom))}function WN(e,t){e.rect(t.x,t.y,t.w,t.h)}function GN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-r,s=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+a,h:e.h+s,radius:e.radius}}BN.id="point",BN.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},BN.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class YN extends Xw{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:a}=VN(this),s=(o=a.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?hx:WN;var o;e.save(),a.w===i.w&&a.h===i.h||(e.beginPath(),s(e,GN(a,t,i)),e.clip(),s(e,GN(i,-t,a)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),s(e,GN(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return HN(this,e,t,n)}inXRange(e,t){return HN(this,e,null,t)}inYRange(e,t){return HN(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}YN.id="bar",YN.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},YN.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};const KN=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class JN extends Xw{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=db(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=wx(n.font),i=r.size,a=this._computeTitleHeight(),{boxWidth:s,itemHeight:o}=KN(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(a,i,s,o)+10):(c=this.maxHeight,l=this._fitCols(a,i,s,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:a,options:{labels:{padding:s}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+s;let d=e;i.textAlign="left",i.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*s>a)&&(d+=c,l[l.length-(f>0?0:1)]=0,h+=c,u++),o[f]={left:0,top:h,row:u,width:p,height:r},l[l.length-1]+=p+s}),d}_fitCols(e,t,n,r){const{ctx:i,maxHeight:a,options:{labels:{padding:s}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=a-e;let d=s,u=0,h=0,f=0,p=0;return this.legendItems.forEach((e,a)=>{const m=n+t/2+i.measureText(e.text).width;a>0&&h+r+2*s>c&&(d+=u+s,l.push({width:u,height:h}),f+=u+s,p++,u=h=0),o[a]={left:f,top:h,col:p,width:m,height:r},u=Math.max(u,m),h+=r+s}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,a=lw(i,this.left,this.width);if(this.isHorizontal()){let i=0,s=iv(n,this.left+r,this.right-this.lineWidths[i]);for(const o of t)i!==o.row&&(i=o.row,s=iv(n,this.left+r,this.right-this.lineWidths[i])),o.top+=this.top+e+r,o.left=a.leftForLtr(a.x(s),o.width),s+=o.width+r}else{let i=0,s=iv(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const o of t)o.col!==i&&(i=o.col,s=iv(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),o.top=s,o.left+=this.left+r,o.left=a.leftForLtr(a.x(o.left),o.width),s+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;sx(e,this),this._draw(),ox(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:a}=e,s=Qv.color,o=lw(e.rtl,this.left,this.width),l=wx(a.font),{color:c,padding:d}=a,u=l.size,h=u/2;let f;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:p,boxHeight:m,itemHeight:g}=KN(a,u),y=this.isHorizontal(),b=this._computeTitleHeight();f=y?{x:iv(i,this.left+d,this.right-n[0]),y:this.top+d+b,line:0}:{x:this.left+d,y:iv(i,this.top+b+d,this.bottom-t[0].height),line:0},cw(this.ctx,e.textDirection);const v=g+d;this.legendItems.forEach((x,w)=>{r.strokeStyle=x.fontColor||c,r.fillStyle=x.fontColor||c;const _=r.measureText(x.text).width,N=o.textAlign(x.textAlign||(x.textAlign=a.textAlign)),S=p+h+_;let k=f.x,A=f.y;o.setWidth(this.width),y?w>0&&k+S+d>this.right&&(A=f.y+=v,f.line++,k=f.x=iv(i,this.left+d,this.right-n[f.line])):w>0&&A+v>this.bottom&&(k=f.x=k+t[f.line].width+d,f.line++,A=f.y=iv(i,this.top+b+d,this.bottom-t[f.line].height));!function(e,t,n){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;r.save();const i=lb(n.lineWidth,1);if(r.fillStyle=lb(n.fillStyle,s),r.lineCap=lb(n.lineCap,"butt"),r.lineDashOffset=lb(n.lineDashOffset,0),r.lineJoin=lb(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=lb(n.strokeStyle,s),r.setLineDash(lb(n.lineDash,[])),a.usePointStyle){const s={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=o.xPlus(e,p/2);ix(r,s,l,t+h,a.pointStyleWidth&&p)}else{const a=t+Math.max((u-m)/2,0),s=o.leftForLtr(e,p),l=vx(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?hx(r,{x:s,y:a,w:p,h:m,radius:l}):r.rect(s,a,p,m),r.fill(),0!==i&&r.stroke()}r.restore()}(o.x(k),A,x),k=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(N,k+p+h,y?k+S:this.right,e.rtl),function(e,t,n){dx(r,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(k),A,x),y?f.x+=S+d:f.y+=v}),dw(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=wx(t.font),r=xx(t.padding);if(!t.display)return;const i=lw(e.rtl,this.left,this.width),a=this.ctx,s=t.position,o=n.size/2,l=r.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=iv(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+iv(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=iv(s,d,d+u);a.textAlign=i.textAlign(rv(s)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=n.string,dx(a,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=wx(e.font),n=xx(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(Kb(e,this.left,this.right)&&Kb(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],Kb(e,r.left,r.left+r.width)&&Kb(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&db(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&db(t.onHover,[e,n,this],this)}else n&&db(t.onClick,[e,n,this],this)}}var $N={id:"legend",_element:JN,start(e,t,n){const r=e.legend=new JN({ctx:e.ctx,options:n,chart:e});T_.configure(e,r,n),T_.addBox(e,r)},stop(e){T_.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;T_.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:a}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const s=e.controller.getStyle(n?0:void 0),o=xx(s.borderWidth);return{text:t[e.index].label,fillStyle:s.backgroundColor,fontColor:a,hidden:!e.visible,lineCap:s.borderCapStyle,lineDash:s.borderDash,lineDashOffset:s.borderDashOffset,lineJoin:s.borderJoinStyle,lineWidth:(o.width+o.height)/4,strokeStyle:s.borderColor,pointStyle:r||s.pointStyle,rotation:s.rotation,textAlign:i||s.textAlign,borderRadius:0,datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class XN extends Xw{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=ib(n.text)?n.text.length:1;this._padding=xx(n.padding);const i=r*wx(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:a}=this,s=a.align;let o,l,c,d=0;return this.isHorizontal()?(l=iv(s,n,i),c=t+e,o=i-n):("left"===a.position?(l=n+e,c=iv(s,r,t),d=-.5*kb):(l=i-e,c=iv(s,t,r),d=.5*kb),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=wx(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:a,maxWidth:s,rotation:o}=this._drawArgs(r);dx(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:o,textAlign:rv(t.align),textBaseline:"middle",translation:[i,a]})}}var QN={id:"title",_element:XN,start(e,t,n){!function(e,t){const n=new XN({ctx:e.ctx,options:t,chart:e});T_.configure(e,n,t),T_.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;T_.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;T_.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const ZN={average(e){if(!e.length)return!1;let t,n,r=0,i=0,a=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r+=e.x,i+=e.y,++a}}return{x:r/a,y:i/a}},nearest(e,t){if(!e.length)return!1;let n,r,i,a=t.x,s=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=Vb(t,r.getCenterPoint());e<o&&(o=e,i=r)}}if(i){const e=i.tooltipPosition();a=e.x,s=e.y}return{x:a,y:s}}};function eS(e,t){return t&&(ib(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function tS(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function nS(e,t){const{element:n,datasetIndex:r,index:i}=t,a=e.getDatasetMeta(r).controller,{label:s,value:o}=a.getLabelAndValue(i);return{chart:e,label:s,parsed:a.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:o,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function rS(e,t){const n=e.chart.ctx,{body:r,footer:i,title:a}=e,{boxWidth:s,boxHeight:o}=t,l=wx(t.bodyFont),c=wx(t.titleFont),d=wx(t.footerFont),u=a.length,h=i.length,f=r.length,p=xx(t.padding);let m=p.height,g=0,y=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,u&&(m+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),y){m+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}h&&(m+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let b=0;const v=function(e){g=Math.max(g,n.measureText(e).width+b)};return n.save(),n.font=c.string,ub(e.title,v),n.font=l.string,ub(e.beforeBody.concat(e.afterBody),v),b=t.displayColors?s+2+t.boxPadding:0,ub(r,e=>{ub(e.before,v),ub(e.lines,v),ub(e.after,v)}),b=0,n.font=d.string,ub(e.footer,v),n.restore(),g+=p.width,{width:g,height:m}}function iS(e,t,n,r){const{x:i,width:a}=n,{width:s,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=i<=(o+l)/2?"left":"right":i<=a/2?c="left":i>=s-a/2&&(c="right"),function(e,t,n,r){const{x:i,width:a}=r,s=n.caretSize+n.caretPadding;return"left"===e&&i+a+s>t.width||"right"===e&&i-a-s<0||void 0}(c,e,t,n)&&(c="center"),c}function aS(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||iS(e,t,n,r),yAlign:r}}function sS(e,t,n,r){const{caretSize:i,caretPadding:a,cornerRadius:s}=e,{xAlign:o,yAlign:l}=n,c=i+a,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:f}=vx(s);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const m=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(d,h)+i:"right"===o&&(p+=Math.max(u,f)+i),{x:Yb(p,0,r.width-t.width),y:Yb(m,0,r.height-t.height)}}function oS(e,t,n){const r=xx(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function lS(e){return eS([],tS(e))}function cS(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}class dS extends Xw{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new Nw(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Nx(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=n.beforeTitle.apply(this,[e]),i=n.title.apply(this,[e]),a=n.afterTitle.apply(this,[e]);let s=[];return s=eS(s,tS(r)),s=eS(s,tS(i)),s=eS(s,tS(a)),s}getBeforeBody(e,t){return lS(t.callbacks.beforeBody.apply(this,[e]))}getBody(e,t){const{callbacks:n}=t,r=[];return ub(e,e=>{const t={before:[],lines:[],after:[]},i=cS(n,e);eS(t.before,tS(i.beforeLabel.call(this,e))),eS(t.lines,i.label.call(this,e)),eS(t.after,tS(i.afterLabel.call(this,e))),r.push(t)}),r}getAfterBody(e,t){return lS(t.callbacks.afterBody.apply(this,[e]))}getFooter(e,t){const{callbacks:n}=t,r=n.beforeFooter.apply(this,[e]),i=n.footer.apply(this,[e]),a=n.afterFooter.apply(this,[e]);let s=[];return s=eS(s,tS(r)),s=eS(s,tS(i)),s=eS(s,tS(a)),s}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],a=[];let s,o,l=[];for(s=0,o=t.length;s<o;++s)l.push(nS(this.chart,t[s]));return e.filter&&(l=l.filter((t,r,i)=>e.filter(t,r,i,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),ub(l,t=>{const n=cS(e.callbacks,t);r.push(n.labelColor.call(this,t)),i.push(n.labelPointStyle.call(this,t)),a.push(n.labelTextColor.call(this,t))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=a,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,a=[];if(r.length){const e=ZN[n.position].call(this,r,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);const t=this._size=rS(this,n),s=Object.assign({},e,t),o=aS(this.chart,n,s),l=sS(n,s,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=a,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:a,cornerRadius:s}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=vx(s),{x:u,y:h}=e,{width:f,height:p}=t;let m,g,y,b,v,x;return"center"===i?(v=h+p/2,"left"===r?(m=u,g=m-a,b=v+a,x=v-a):(m=u+f,g=m+a,b=v-a,x=v+a),y=m):(g="left"===r?u+Math.max(o,c)+a:"right"===r?u+f-Math.max(l,d)-a:this.caretX,"top"===i?(b=h,v=b-a,m=g-a,y=g+a):(b=h+p,v=b+a,m=g+a,y=g-a),x=b),{x1:m,x2:g,x3:y,y1:b,y2:v,y3:x}}drawTitle(e,t,n){const r=this.title,i=r.length;let a,s,o;if(i){const l=lw(n.rtl,this.x,this.width);for(e.x=oS(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",a=wx(n.titleFont),s=n.titleSpacing,t.fillStyle=n.titleColor,t.font=a.string,o=0;o<i;++o)t.fillText(r[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+s,o+1===i&&(e.y+=n.titleMarginBottom-s)}}_drawColorBox(e,t,n,r,i){const a=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:o,boxWidth:l,boxPadding:c}=i,d=wx(i.bodyFont),u=oS(this,"left",i),h=r.x(u),f=o<d.lineHeight?(d.lineHeight-o)/2:0,p=t.y+f;if(i.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=p+o/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,rx(e,t,n,c),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,rx(e,t,n,c)}else{e.lineWidth=ab(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const t=r.leftForLtr(h,l-c),n=r.leftForLtr(r.xPlus(h,1),l-c-2),s=vx(a.borderRadius);Object.values(s).some(e=>0!==e)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,hx(e,{x:t,y:p,w:l,h:o,radius:s}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),hx(e,{x:n,y:p+1,w:l-2,h:o-2,radius:s}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,p,l,o),e.strokeRect(t,p,l,o),e.fillStyle=a.backgroundColor,e.fillRect(n,p+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:a,displayColors:s,boxHeight:o,boxWidth:l,boxPadding:c}=n,d=wx(n.bodyFont);let u=d.lineHeight,h=0;const f=lw(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+h),e.y+u/2),e.y+=u+i},m=f.textAlign(a);let g,y,b,v,x,w,_;for(t.textAlign=a,t.textBaseline="middle",t.font=d.string,e.x=oS(this,m,n),t.fillStyle=n.bodyColor,ub(this.beforeBody,p),h=s&&"right"!==m?"center"===a?l/2+c:l+2+c:0,v=0,w=r.length;v<w;++v){for(g=r[v],y=this.labelTextColors[v],t.fillStyle=y,ub(g.before,p),b=g.lines,s&&b.length&&(this._drawColorBox(t,e,v,f,n),u=Math.max(d.lineHeight,o)),x=0,_=b.length;x<_;++x)p(b[x]),u=d.lineHeight;ub(g.after,p)}h=0,u=d.lineHeight,ub(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let a,s;if(i){const o=lw(n.rtl,this.x,this.width);for(e.x=oS(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",a=wx(n.footerFont),t.fillStyle=n.footerColor,t.font=a.string,s=0;s<i;++s)t.fillText(r[s],o.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:a}=this,{x:s,y:o}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:f}=vx(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(s+d,o),"top"===a&&this.drawCaret(e,t,n,r),t.lineTo(s+l-u,o),t.quadraticCurveTo(s+l,o,s+l,o+u),"center"===a&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(s+l,o+c-f),t.quadraticCurveTo(s+l,o+c,s+l-f,o+c),"bottom"===a&&this.drawCaret(e,t,n,r),t.lineTo(s+h,o+c),t.quadraticCurveTo(s,o+c,s,o+c-h),"center"===a&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(s,o+d),t.quadraticCurveTo(s,o,s+d,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=ZN[e.position].call(this,this._active,this._eventPosition);if(!n)return;const a=this._size=rS(this,e),s=Object.assign({},n,this._size),o=aS(t,e,s),l=sS(e,s,o,t);r._to===l.x&&i._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=a.width,this.height=a.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const a=xx(t.padding),s=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&s&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),cw(e,t.textDirection),i.y+=a.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),dw(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),i=!hb(n,r),a=this._positionChanged(r,t);(i||a)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],a=this._getActiveElements(e,i,t,n),s=this._positionChanged(a,e),o=t||!hb(a,i)||s;return o&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t;const a=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,a=ZN[i.position].call(this,e,t);return!1!==a&&(n!==a.x||r!==a.y)}}dS.positioners=ZN;var uS={id:"tooltip",_element:dS,positioners:ZN,afterInit(e,t,n){n&&(e.tooltip=new dS({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",n))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:tb,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:tb,beforeBody:tb,beforeLabel:tb,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return rb(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:tb,afterBody:tb,beforeFooter:tb,footer:tb,afterFooter:tb}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function hS(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}class fS extends l_{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(rb(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:Yb(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:hS(n,e,lb(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=t;a++)r.push({value:a});return r}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function pS(e,t){const n=[],{bounds:r,step:i,min:a,max:s,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=i||1,f=c-1,{min:p,max:m}=t,g=!rb(a),y=!rb(s),b=!rb(l),v=(m-p)/(d+1);let x,w,_,N,S=Ob((m-p)/f/h)*h;if(S<1e-14&&!g&&!y)return[{value:p},{value:m}];N=Math.ceil(m/S)-Math.floor(p/S),N>f&&(S=Ob(N*S/f/h)*h),rb(o)||(x=Math.pow(10,o),S=Math.ceil(S*x)/x),"ticks"===r?(w=Math.floor(p/S)*S,_=Math.ceil(m/S)*S):(w=p,_=m),g&&y&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((s-a)/i,S/1e3)?(N=Math.round(Math.min((s-a)/S,c)),S=(s-a)/N,w=a,_=s):b?(w=g?a:w,_=y?s:_,N=l-1,S=(_-w)/N):(N=(_-w)/S,N=Rb(N,Math.round(N),S/1e3)?Math.round(N):Math.ceil(N));const k=Math.max(zb(S),zb(w));x=Math.pow(10,rb(o)?k:o),w=Math.round(w*x)/x,_=Math.round(_*x)/x;let A=0;for(g&&(u&&w!==a?(n.push({value:a}),w<a&&A++,Rb(Math.round((w+A*S)*x)/x,a,mS(a,v,e))&&A++):w<a&&A++);A<N;++A)n.push({value:Math.round((w+A*S)*x)/x});return y&&u&&_!==s?n.length&&Rb(n[n.length-1].value,s,mS(s,v,e))?n[n.length-1].value=s:n.push({value:s}):y&&_!==s||n.push({value:_}),n}function mS(e,t,n){let{horizontal:r,minRotation:i}=n;const a=Ub(i),s=(r?Math.sin(a):Math.cos(a))||.001,o=.75*t*(""+e).length;return Math.min(t/s,o)}fS.id="category",fS.defaults={ticks:{callback:fS.prototype.getLabelForValue}};class gS extends l_{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return rb(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const a=e=>r=t?r:e,s=e=>i=n?i:e;if(e){const e=Tb(r),t=Tb(i);e<0&&t<0?s(0):e>0&&t>0&&a(0)}if(r===i){let t=1;(i>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(t=Math.abs(.05*i)),s(i+t),e||a(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=pS({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Fb(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return ow(e,this.chart.options.locale,this.options.ticks.format)}}class yS extends gS{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=sb(e)?e:0,this.max=sb(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Ub(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function bS(e){return 1===e/Math.pow(10,Math.floor(Db(e)))}yS.id="linear",yS.defaults={ticks:{callback:Zw.formatters.numeric}};class vS extends l_{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=gS.prototype.parse.apply(this,[e,t]);if(0!==n)return sb(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=sb(e)?Math.max(0,e):null,this.max=sb(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,a=e=>r=t?r:e,s=(e,t)=>Math.pow(10,Math.floor(Db(e))+t);n===r&&(n<=0?(i(1),a(10)):(i(s(n,-1)),a(s(r,1)))),n<=0&&i(s(r,-1)),r<=0&&a(s(n,1)),this._zero&&this.min!==this._suggestedMin&&n===s(this.min,0)&&i(s(n,-1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=function(e,t){const n=Math.floor(Db(t.max)),r=Math.ceil(t.max/Math.pow(10,n)),i=[];let a=ob(e.min,Math.pow(10,Math.floor(Db(t.min)))),s=Math.floor(Db(a)),o=Math.floor(a/Math.pow(10,s)),l=s<0?Math.pow(10,Math.abs(s)):1;do{i.push({value:a,major:bS(a)}),++o,10===o&&(o=1,++s,l=s>=0?1:l),a=Math.round(o*Math.pow(10,s)*l)/l}while(s<n||s===n&&o<r);const c=ob(e.max,a);return i.push({value:c,major:bS(a)}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Fb(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":ow(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Db(e),this._valueRange=Db(this.max)-Db(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Db(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function xS(e){const t=e.ticks;if(t.display&&e.display){const e=xx(t.backdropPadding);return lb(t.font&&t.font.size,Qv.font.size)+e.height}return 0}function wS(e,t,n){return n=ib(n)?n:[n],{w:ex(e,t.string,n),h:n.length*t.lineHeight}}function _S(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function NS(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],a=e._pointLabels.length,s=e.options.pointLabels,o=s.centerPointLabels?kb/a:0;for(let l=0;l<a;l++){const a=s.setContext(e.getPointLabelContext(l));i[l]=a.padding;const c=e.getPointPosition(l,e.drawingArea+i[l],o),d=wx(a.font),u=wS(e.ctx,d,e._pointLabels[l]);r[l]=u;const h=Wb(e.getIndexAngle(l)+o),f=Math.round(Bb(h));SS(n,t,h,_S(f,c.x,u.w,0,180),_S(f,c.y,u.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,a=e.options,s=xS(a)/2,o=e.drawingArea,l=a.pointLabels.centerPointLabels?kb/i:0;for(let c=0;c<i;c++){const i=e.getPointPosition(c,o+s+n[c],l),a=Math.round(Bb(Wb(i.angle+Cb))),d=t[c],u=jS(i.y,d.h,a),h=kS(a),f=AS(i.x,d.w,h);r.push({x:i.x,y:u,textAlign:h,left:f,top:u,right:f+d.w,bottom:u+d.h})}return r}(e,r,i)}function SS(e,t,n,r,i){const a=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/a,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/a,e.r=Math.max(e.r,t.r+o)),i.start<t.t?(l=(t.t-i.start)/s,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/s,e.b=Math.max(e.b,t.b+l))}function kS(e){return 0===e||180===e?"center":e<180?"left":"right"}function AS(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function jS(e,t,n){return 90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t),e}function PS(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,Ab);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let a=1;a<r;a++)n=e.getPointPosition(a,t),i.lineTo(n.x,n.y)}}vS.id="logarithmic",vS.defaults={ticks:{callback:Zw.formatters.logarithmic,major:{enabled:!0}}};class IS extends gS{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=xx(xS(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=sb(e)&&!isNaN(e)?e:0,this.max=sb(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/xS(this.options))}generateTickLabels(e){gS.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=db(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?NS(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return Wb(e*(Ab/(this._pointLabels.length||1))+Ub(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(rb(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(rb(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Nx(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-Cb+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),PS(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r}=t,i=this._pointLabels.length;let a,s,o;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=r.setContext(e.getPointLabelContext(i)),a=wx(t.font),{x:s,y:o,textAlign:l,left:c,top:d,right:u,bottom:h}=e._pointLabelItems[i],{backdropColor:f}=t;if(!rb(f)){const e=vx(t.borderRadius),r=xx(t.backdropPadding);n.fillStyle=f;const i=c-r.left,a=d-r.top,s=u-c+r.width,o=h-d+r.height;Object.values(e).some(e=>0!==e)?(n.beginPath(),hx(n,{x:i,y:a,w:s,h:o,radius:e}),n.fill()):n.fillRect(i,a,s,o)}dx(n,e._pointLabels[i],s,o+a.lineHeight/2,a,{color:t.color,textAlign:l,textBaseline:"middle"})}}(this,i),r.display&&this.ticks.forEach((e,t)=>{if(0!==t){s=this.getDistanceFromCenterForValue(e.value);!function(e,t,n,r){const i=e.ctx,a=t.circular,{color:s,lineWidth:o}=t;!a&&!r||!s||!o||n<0||(i.save(),i.strokeStyle=s,i.lineWidth=o,i.setLineDash(t.borderDash),i.lineDashOffset=t.borderDashOffset,i.beginPath(),PS(e,n,a,r),i.closePath(),i.stroke(),i.restore())}(this,r.setContext(this.getContext(t-1)),s,i)}}),n.display){for(e.save(),a=i-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:l}=r;l&&i&&(e.lineWidth=l,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,s=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),o=this.getPointPosition(a,s),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(o.x,o.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,s)=>{if(0===s&&!t.reverse)return;const o=n.setContext(this.getContext(s)),l=wx(o.font);if(i=this.getDistanceFromCenterForValue(this.ticks[s].value),o.showLabelBackdrop){e.font=l.string,a=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=xx(o.backdropPadding);e.fillRect(-a/2-t.left,-i-l.size/2-t.top,a+t.width,l.size+t.height)}dx(e,r.label,0,-i,l,{color:o.color})}),e.restore()}drawTitle(){}}IS.id="radialLinear",IS.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Zw.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}},IS.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},IS.descriptors={angleLines:{_fallback:"grid"}};const CS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ES=Object.keys(CS);function LS(e,t){return e-t}function DS(e,t){if(rb(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:a}=e._parseOpts;let s=t;return"function"===typeof r&&(s=r(s)),sb(s)||(s="string"===typeof r?n.parse(s,r):n.parse(s)),null===s?null:(i&&(s="week"!==i||!Mb(a)&&!0!==a?n.startOf(s,i):n.startOf(s,"isoWeek",a)),+s)}function TS(e,t,n,r){const i=ES.length;for(let a=ES.indexOf(e);a<i-1;++a){const e=CS[ES[a]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return ES[a]}return ES[i-1]}function OS(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=Jb(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function MS(e,t,n){const r=[],i={},a=t.length;let s,o;for(s=0;s<a;++s)o=t[s],i[o]=s,r.push({value:o,major:!1});return 0!==a&&n?function(e,t,n,r){const i=e._adapter,a=+i.startOf(t[0].value,r),s=t[t.length-1].value;let o,l;for(o=a;o<=s;o=+i.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class RS extends l_{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t){const n=e.time||(e.time={}),r=this._adapter=new p_._date(e.adapters.date);r.init(t),yb(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:DS(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:a,maxDefined:s}=this.getUserBounds();function o(e){a||isNaN(e.min)||(r=Math.min(r,e.min)),s||isNaN(e.max)||(i=Math.max(i,e.max))}a&&s||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=sb(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=sb(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,a=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?TS(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let a=ES.length-1;a>=ES.indexOf(n);a--){const n=ES[a];if(CS[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return ES[n?ES.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=ES.indexOf(e)+1,n=ES.length;t<n;++t)if(CS[ES[t]].common)return ES[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&a.reverse(),MS(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let t,n,r=0,i=0;this.options.offset&&e.length&&(t=this.getDecimalForValue(e[0]),r=1===e.length?1-t:(this.getDecimalForValue(e[1])-t)/2,n=this.getDecimalForValue(e[e.length-1]),i=1===e.length?n:(n-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;r=Yb(r,0,a),i=Yb(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,a=i.unit||TS(i.minUnit,t,n,this._getLabelCapacity(t)),s=lb(i.stepSize,1),o="week"===a&&i.isoWeekday,l=Mb(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":a),e.diff(n,t,a)>1e5*s)throw new Error(t+" and "+n+" are too far apart with stepSize of "+s+" "+a);const f="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,s,a),u++)OS(c,d,f);return d!==n&&"ticks"!==r.bounds&&1!==u||OS(c,d,f),Object.keys(c).sort((e,t)=>e-t).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}_tickFormatFunction(e,t,n,r){const i=this.options,a=i.time.displayFormats,s=this._unit,o=this._majorUnit,l=s&&a[s],c=o&&a[o],d=n[t],u=o&&c&&d&&d.major,h=this._adapter.format(e,r||(u?c:l)),f=i.ticks.callback;return f?db(f,[h,t,n],this):h}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=Ub(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),a=Math.sin(r),s=this._resolveTickFontOptions(0).size;return{w:n*i+s*a,h:n*a+s*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,MS(this,[e],this._majorUnit),r),a=this._getLabelSize(i),s=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return s>0?s:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(DS(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ev(e.sort(LS))}}function FS(e,t,n){let r,i,a,s,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=$b(e,"pos",t)),({pos:r,time:a}=e[o]),({pos:i,time:s}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=$b(e,"time",t)),({time:r,pos:a}=e[o]),({time:i,pos:s}=e[l]));const c=i-r;return c?a+(s-a)*(t-r)/c:a}RS.id="time",RS.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class US extends RS{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=FS(t,this.min),this._tableRange=FS(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let a,s,o,l,c;for(a=0,s=e.length;a<s;++a)l=e[a],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(a=0,s=r.length;a<s;++a)c=r[a+1],o=r[a-1],l=r[a],Math.round((c+o)/2)!==l&&i.push({time:l,pos:a/(s-1)});return i}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(FS(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return FS(this._table,n*this._tableRange+this._minPos,!0)}}US.id="timeseries",US.defaults=RS.defaults;const BS=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],zS="label";function qS(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function VS(e,t){e.labels=t}function HS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zS;const r=[];e.datasets=t.map(t=>{const i=e.datasets.find(e=>e[n]===t[n]);return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):o({},t)})}function WS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zS;const n={labels:[],datasets:[]};return VS(n,e.labels),HS(n,e.datasets,t),n}function GS(e,t){let{height:n=150,width:i=300,redraw:a=!1,datasetIdKey:s,type:l,data:c,options:d,plugins:u=[],fallbackContent:h,updateMode:f}=e,p=St(e,BS);const m=(0,r.useRef)(null),g=(0,r.useRef)(),y=()=>{m.current&&(g.current=new wN(m.current,{type:l,data:WS(c,s),options:d&&o({},d),plugins:u}),qS(t,g.current))},b=()=>{qS(t,null),g.current&&(g.current.destroy(),g.current=null)};return(0,r.useEffect)(()=>{var e,t;!a&&g.current&&d&&(e=g.current,t=d,Object.assign(e.options,t))},[a,d]),(0,r.useEffect)(()=>{!a&&g.current&&VS(g.current.config.data,c.labels)},[a,c.labels]),(0,r.useEffect)(()=>{!a&&g.current&&c.datasets&&HS(g.current.config.data,c.datasets,s)},[a,c.datasets]),(0,r.useEffect)(()=>{g.current&&(a?(b(),setTimeout(y)):g.current.update(f))},[a,d,c.labels,c.datasets,f]),(0,r.useEffect)(()=>{g.current&&(b(),setTimeout(y))},[l]),(0,r.useEffect)(()=>(y(),()=>b()),[]),r.createElement("canvas",Object.assign({ref:m,role:"img",height:n,width:i},p),h)}const YS=(0,r.forwardRef)(GS);function KS(e,t){return wN.register(t),(0,r.forwardRef)((t,n)=>r.createElement(YS,Object.assign({},t,{ref:n,type:e})))}const JS=KS("bar",Hw),$S=KS("pie",Jw);wN.register(fS,yS,YN,QN,uS,$N,IN);const XS=()=>{const{state:e,dispatch:t}=Nt(),[n,i]=(0,r.useState)("30d"),[a,s]=(0,r.useState)(!0),[l,d]=(0,r.useState)("IndexedDB");(0,r.useEffect)(()=>{(async()=>{try{s(!0);const[A,j,P,I]=await Promise.all([E(u).catch(()=>[]),E(h).catch(()=>[]),E(f).catch(()=>[]),E(c).catch(()=>[])]),C=(I||[]).map(e=>o(o({},e),{},{dueAmount:void 0!==e.dueAmount?e.dueAmount:void 0!==e.balanceDue?e.balanceDue:0,balanceDue:void 0!==e.dueAmount?e.dueAmount:void 0!==e.balanceDue?e.balanceDue:0,mobileNumber:e.mobileNumber||e.phone||""}));t({type:"SET_ORDERS",payload:A||[]}),t({type:"SET_TRANSACTIONS",payload:j||[]}),t({type:"SET_PURCHASE_ORDERS",payload:P||[]}),t({type:"SET_CUSTOMERS",payload:C}),d("IndexedDB"),s(!1);if(await Q())try{var e;const s=await B("/data/all",{method:"GET"});if(s.success&&null!==(e=s.data)&&void 0!==e&&e.data){var n,r,i,a,l,p,m,g,y,b,v,x,w,_,N,S;const{orders:e,transactions:k,purchaseOrders:I,customers:E}=s.data.data,L=(E||[]).map(e=>o(o({},e),{},{dueAmount:e.dueAmount||0,balanceDue:e.dueAmount||0,mobileNumber:e.mobileNumber||e.phone||""})),D=((null===A||void 0===A?void 0:A.length)||0)!==((null===e||void 0===e?void 0:e.length)||0)||(null===e||void 0===e?void 0:e.length)>0&&(null===A||void 0===A?void 0:A.length)>0&&(null===(n=e[0])||void 0===n?void 0:n._id)!==(null===(r=A[0])||void 0===r?void 0:r._id)&&(null===(i=e[0])||void 0===i?void 0:i.id)!==(null===(a=A[0])||void 0===a?void 0:a.id),T=((null===j||void 0===j?void 0:j.length)||0)!==((null===k||void 0===k?void 0:k.length)||0)||(null===k||void 0===k?void 0:k.length)>0&&(null===j||void 0===j?void 0:j.length)>0&&(null===(l=k[0])||void 0===l?void 0:l._id)!==(null===(p=j[0])||void 0===p?void 0:p._id)&&(null===(m=k[0])||void 0===m?void 0:m.id)!==(null===(g=j[0])||void 0===g?void 0:g.id),O=((null===P||void 0===P?void 0:P.length)||0)!==((null===I||void 0===I?void 0:I.length)||0)||(null===I||void 0===I?void 0:I.length)>0&&(null===P||void 0===P?void 0:P.length)>0&&(null===(y=I[0])||void 0===y?void 0:y._id)!==(null===(b=P[0])||void 0===b?void 0:b._id)&&(null===(v=I[0])||void 0===v?void 0:v.id)!==(null===(x=P[0])||void 0===x?void 0:x.id),M=((null===C||void 0===C?void 0:C.length)||0)!==((null===L||void 0===L?void 0:L.length)||0)||(null===L||void 0===L?void 0:L.length)>0&&(null===C||void 0===C?void 0:C.length)>0&&(null===(w=L[0])||void 0===w?void 0:w._id)!==(null===(_=C[0])||void 0===_?void 0:_._id)&&(null===(N=L[0])||void 0===N?void 0:N.id)!==(null===(S=C[0])||void 0===S?void 0:S.id);(e||k||I||E)&&(D||T||O||M||(null===e||void 0===e?void 0:e.length)>0||(null===k||void 0===k?void 0:k.length)>0||(null===I||void 0===I?void 0:I.length)>0)&&(t({type:"SET_ORDERS",payload:e||[]}),t({type:"SET_TRANSACTIONS",payload:k||[]}),t({type:"SET_PURCHASE_ORDERS",payload:I||[]}),t({type:"SET_CUSTOMERS",payload:L}),d("MongoDB"),await Promise.all([re(u,e||[]),re(h,k||[]),re(f,I||[]),re(c,L)]))}}catch(k){console.error("Error fetching financial data from MongoDB:",k)}}catch(A){console.error("Error loading financial data:",A),s(!1)}})()},[t]);const p=e.orders.reduce((e,t)=>e+(t.totalAmount||0),0),m=e.purchaseOrders.reduce((e,t)=>e+(t.total||0),0),g=p-m,y=p>0?g/p*100:0,b=e.customers.reduce((e,t)=>e+(t.balanceDue||0),0),v=e.customers.filter(e=>(e.balanceDue||0)>0).length,x=e.orders.sort((e,t)=>new Date(t.createdAt||t.date||0)-new Date(e.createdAt||e.date||0)).slice(0,10).map(t=>{const n=t.customerId?e.customers.find(e=>e.id===t.customerId||e._id===t.customerId):null;return{id:t.id||t._id,customerName:(null===n||void 0===n?void 0:n.name)||"Walk-in Customer",total:t.totalAmount||0,paymentMethod:t.paymentMethod||"cash",date:t.createdAt||t.date||new Date,type:"Sale"}}),w=e.customers.filter(e=>e.paymentHistory&&e.paymentHistory.length>0).flatMap(e=>e.paymentHistory.map(t=>o(o({},t),{},{customerName:e.name}))).sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(0,10),_=(()=>{const t=new Date,n=new Date(t.getFullYear(),t.getMonth()-5,1),r=[];for(let i=0;i<6;i++){const t=new Date(n);t.setMonth(t.getMonth()+i);const a=e.orders.filter(e=>{const n=new Date(e.createdAt||e.date);return n.getMonth()===t.getMonth()&&n.getFullYear()===t.getFullYear()}),s=a.reduce((e,t)=>e+(t.totalAmount||0),0);r.push(s)}return r})();const N={labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Revenue",data:_,backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2,borderRadius:8},{label:"Expenses",data:_.map(e=>.3*e),backgroundColor:"rgba(239, 68, 68, 0.8)",borderColor:"rgba(239, 68, 68, 1)",borderWidth:2,borderRadius:8}]},S=(()=>{const t=e.orders.filter(e=>"cash"===e.paymentMethod).length,n=e.orders.filter(e=>"card"===e.paymentMethod).length,r=e.orders.filter(e=>"upi"===e.paymentMethod).length,i=e.orders.filter(e=>"due"===e.paymentMethod||"credit"===e.paymentMethod).length;return[t,n,r,i]})(),k=(()=>{const t=e.orders.filter(e=>"cash"===e.paymentMethod).reduce((e,t)=>e+(t.totalAmount||0),0),n=e.orders.filter(e=>"card"===e.paymentMethod).reduce((e,t)=>e+(t.totalAmount||0),0),r=e.orders.filter(e=>"upi"===e.paymentMethod).reduce((e,t)=>e+(t.totalAmount||0),0),i=e.orders.filter(e=>"due"===e.paymentMethod||"credit"===e.paymentMethod).reduce((e,t)=>e+(t.totalAmount||0),0);return[t,n,r,i]})(),A={labels:["Cash","Card","UPI","Credit/Due"],datasets:[{label:"Amount (\u20b9)",data:k,backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(59, 130, 246, 0.8)","rgba(168, 85, 247, 0.8)","rgba(249, 115, 22, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(59, 130, 246, 1)","rgba(168, 85, 247, 1)","rgba(249, 115, 22, 1)"],borderWidth:2}]},j={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,generateLabels:function(e){const t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((e,n)=>{const r=t.datasets[0],i=r.data[n],a=S[n];return{text:"".concat(e,": \u20b9").concat(i.toLocaleString("en-IN")," (").concat(a," orders)"),fillStyle:r.backgroundColor[n],strokeStyle:r.borderColor[n],lineWidth:r.borderWidth,hidden:!1,index:n}}):[]}}},tooltip:{callbacks:{label:function(e){const t=e.label||"",n=e.parsed||0,r=S[e.dataIndex],i=k.reduce((e,t)=>e+t,0),a=i>0?(n/i*100).toFixed(1):0;return"".concat(t,": \u20b9").concat(n.toLocaleString("en-IN")," (").concat(r," orders, ").concat(a,"%)")}}}}};return a&&0===e.orders.length&&0===e.transactions.length?(0,ie.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,ie.jsx)("p",{className:"text-gray-600",children:"Loading financial data..."})]})}):(0,ie.jsxs)("div",{className:"space-y-8 fade-in-up",children:[(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Financial Management"}),(0,ie.jsx)("p",{className:"text-gray-600 mt-2",children:"Track revenue, expenses, and performance"}),(0,ie.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Data source: ",l," ","online"===e.systemStatus?"\ud83c\udf10":"\ud83d\udcf4"]})]}),(0,ie.jsxs)("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[(0,ie.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"input-field w-40",children:[(0,ie.jsx)("option",{value:"7d",children:"Last 7 days"}),(0,ie.jsx)("option",{value:"30d",children:"Last 30 days"}),(0,ie.jsx)("option",{value:"90d",children:"Last 90 days"}),(0,ie.jsx)("option",{value:"1y",children:"Last year"})]}),(0,ie.jsxs)("button",{onClick:()=>{const e={summary:{totalRevenue:p,totalExpenses:m,netProfit:g,profitMargin:y,totalReceivables:b,customersWithDebt:v},transactions:x,payments:w},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="financial-report-".concat((new Date).toISOString().split("T")[0],".json"),r.click(),window.URL.revokeObjectURL(n)},className:"btn-secondary flex items-center",children:[(0,ie.jsx)(ac,{className:"h-4 w-4 mr-2"})," Export Report"]})]})]}),(0,ie.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Total Revenue",value:p,color:"green",icon:(0,ie.jsx)(pc,{})},{title:"Total Expenses",value:m,color:"red",icon:(0,ie.jsx)(Qy,{})},{title:"Net Profit",value:g,color:"blue",icon:(0,ie.jsx)(vy,{})},{title:"Receivables",value:b,color:"orange",icon:(0,ie.jsx)(mc,{})}].map((e,t)=>(0,ie.jsxs)("div",{className:"stat-card flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-".concat(e.color,"-100 rounded-xl text-").concat(e.color,"-600"),children:e.icon}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:e.title}),(0,ie.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",e.value.toFixed(2)]})]})]},t))}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ie.jsx)(Hl,{className:"h-5 w-5 mr-2 text-blue-600"})," Revenue vs Expenses"]}),(0,ie.jsx)("div",{className:"h-64",children:(0,ie.jsx)(JS,{data:N,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:20}}},scales:{y:{beginAtZero:!0},x:{grid:{display:!1}}}}})})]}),(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ie.jsx)(Zy,{className:"h-5 w-5 mr-2 text-purple-600"})," Payment Methods (Revenue)"]}),(0,ie.jsx)("div",{className:"h-64",children:(0,ie.jsx)($S,{data:A,options:j})}),(0,ie.jsx)("div",{className:"mt-4 grid grid-cols-2 gap-2 text-sm",children:A.labels.map((e,t)=>{const n=k[t],r=S[t],i=k.reduce((e,t)=>e+t,0),a=i>0?(n/i*100).toFixed(1):0;return(0,ie.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,ie.jsxs)("span",{className:"font-medium text-gray-700",children:[e,":"]}),(0,ie.jsxs)("span",{className:"text-gray-900",children:["\u20b9",n.toLocaleString("en-IN")," (",r,", ",a,"%)"]})]},t)})})]})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ie.jsx)(Bl,{className:"h-5 w-5 mr-2 text-green-600"})," Recent Transactions"]}),x.length?x.map((e,t)=>{var n,r;return(0,ie.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl mb-2",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-medium",children:e.customerName||"Walk-in Customer"}),(0,ie.jsxs)("p",{className:"text-xs text-gray-500",children:[(null===(n=e.paymentMethod)||void 0===n?void 0:n.toUpperCase())||"Cash"," \u2022 ",new Date(e.date).toLocaleDateString()]})]}),(0,ie.jsxs)("p",{className:"font-semibold",children:["\u20b9",(null===(r=e.total)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]},e.id||t)}):(0,ie.jsx)("p",{className:"text-gray-500 text-center py-6",children:"No recent sales"})]}),(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ie.jsx)(eb,{className:"h-5 w-5 mr-2 text-blue-600"})," Recent Payments"]}),w.length?w.map((e,t)=>{var n;return(0,ie.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl mb-2",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-medium",children:e.customerName||"Unknown"}),(0,ie.jsxs)("p",{className:"text-xs text-gray-500",children:["Payment \u2022 ",new Date(e.date).toLocaleDateString()]})]}),(0,ie.jsxs)("p",{className:"font-semibold",children:["\u20b9",(null===(n=e.amount)||void 0===n?void 0:n.toFixed(2))||"0.00"]})]},t)}):(0,ie.jsx)("p",{className:"text-gray-500 text-center py-6",children:"No recent payments"})]})]}),(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,ie.jsx)(Cy,{className:"h-5 w-5 mr-2 text-yellow-600"})," Financial Alerts"]}),b>0&&(0,ie.jsxs)("div",{className:"p-4 bg-yellow-50 rounded-xl border-l-4 border-yellow-400 mb-3",children:[(0,ie.jsx)(Cy,{className:"h-6 w-6 text-yellow-600 inline mr-2"}),(0,ie.jsx)("span",{className:"font-semibold",children:"Outstanding Receivables:"})," \u20b9",b.toFixed(2)]}),y<10&&(0,ie.jsxs)("div",{className:"p-4 bg-red-50 rounded-xl border-l-4 border-red-400 mb-3",children:[(0,ie.jsx)(Qy,{className:"h-6 w-6 text-red-600 inline mr-2"}),"Low Profit Margin (",y.toFixed(1),"%)"]}),g<0&&(0,ie.jsxs)("div",{className:"p-4 bg-red-50 rounded-xl border-l-4 border-red-400 mb-3",children:[(0,ie.jsx)(Cy,{className:"h-6 w-6 text-red-600 inline mr-2"}),"Negative Profit: \u20b9",Math.abs(g).toFixed(2)]}),0===b&&y>=10&&g>=0&&(0,ie.jsxs)("div",{className:"text-center py-8",children:[(0,ie.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,ie.jsx)(vc,{className:"h-8 w-8 text-green-600"})}),(0,ie.jsx)("p",{className:"text-green-600 font-semibold",children:"Great! Your finances are healthy \ud83c\udfaf"})]})]})]})},QS=jt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),ZS=jt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),ek=jt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),tk=()=>{const{state:e,dispatch:t}=Nt(),[n,i]=(0,r.useState)([]),[a,s]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),h=(0,r.useRef)(null),f=(0,r.useRef)(null),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[n]),(0,r.useEffect)(()=>{const n=window.SpeechRecognition||window.webkitSpeechRecognition;n&&(f.current=new n,f.current.continuous=!1,f.current.lang=e.voiceAssistantLanguage,f.current.interimResults=!1,f.current.onstart=()=>{console.log("\ud83c\udfa4 Recognition started"),c(!0),t({type:"SET_LISTENING",payload:!0})},f.current.onend=()=>{console.log("\ud83c\udfa4 Recognition ended"),c(!1),t({type:"SET_LISTENING",payload:!1})},f.current.onerror=e=>{console.error("\ud83c\udfa4 Speech recognition error:",e.error),c(!1),t({type:"SET_LISTENING",payload:!1})},f.current.onresult=e=>{const t=e.results[0][0].transcript;console.log("\ud83c\udfa4 Speech recognized:",t),s(t),u(!1),c(!1),setTimeout(()=>{t.trim()&&p.current&&p.current(t)},300)})},[e.voiceAssistantLanguage,t]);const m=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;if(!e.trim())return;console.log("\ud83c\udfaf handleSendMessage called with:",e);const t={type:"user",content:e,timestamp:new Date};i(e=>[...e,t]),s(""),u(!0);try{console.log("\ud83d\udd0d Processing query:",e);const t=await g(e);console.log("\u2705 Processed result:",t);const n={type:"ai",content:t.message,timestamp:new Date};i(e=>[...e,n]),console.log("\ud83d\udd0a About to speak response:",t.message),setTimeout(()=>{x(t.message)},500)}catch(n){console.error("\u274c Error processing message:",n);const e={type:"ai",content:"Sorry, I encountered an error processing your request.",timestamp:new Date};i(t=>[...t,e])}finally{u(!1)}},[a,e,t]);(0,r.useEffect)(()=>{p.current=m},[m]);const g=async n=>{const r=n.toLowerCase();console.log("\ud83c\udfaf Processing voice query:",n,"Lower:",r);const{intent:i}=(e=>{const t=e.toLowerCase();if(console.log("\ud83d\udd0d Detecting intent for:",e),t.includes("add")&&t.includes("product")||t.includes("product add")||t.includes("saman add")||t.includes("item add")||t.includes("product dalo")||t.includes("\u0928\u092f\u093e product")||t.includes("product \u091c\u094b\u0921\u093c\u094b"))return console.log("\u2705 Intent detected: ADD_PRODUCT"),{intent:"ADD_PRODUCT",keywords:["add","product","item","saman","dalo"]};if((t.includes("\u092c\u093e\u0915\u0940")||t.includes("baki")||t.includes("balance"))&&e.split(/\s+/).length>=2)return console.log("\u2705 Intent detected: ADD_CUSTOMER (balance) for pattern:",e),{intent:"ADD_CUSTOMER",keywords:["add","customer","baki","balance"]};if((/\u20b9\s*\d+/.test(e)||/\d+/.test(e))&&/[\u0900-\u097F]/.test(e)&&!t.includes("paid")&&!t.includes("\u091c\u092e\u093e"))return console.log("\u2705 Intent detected: ADD_CUSTOMER (amount pattern)"),{intent:"ADD_CUSTOMER",keywords:["add","customer","amount"]};if(t.includes("add")&&(t.includes("customer")||t.includes("\u0917\u094d\u0930\u093e\u0939\u0915"))||t.includes("naya customer")||t.includes("\u0928\u092f\u093e \u0917\u094d\u0930\u093e\u0939\u0915")||t.includes("customer add")||t.includes("\u0917\u094d\u0930\u093e\u0939\u0915 \u091c\u094b\u0921\u093c\u094b")||t.includes("add")&&(t.includes("baki")||t.includes("\u092c\u093e\u0915\u0940"))||t.includes("add")&&(t.includes("credit")||t.includes("due")))return console.log("\u2705 Intent detected: ADD_CUSTOMER"),{intent:"ADD_CUSTOMER",keywords:["add","customer","create","new","naya","karo"]};if(t.includes("paid")||t.includes("pay")||t.includes("jama")||t.includes("\u091c\u092e\u093e")||t.includes("gave")||t.includes("de diya")||t.includes("\u0926\u093f\u092f\u093e")||t.includes("diye")||t.includes("pay kiye"))return{intent:"PAYMENT",keywords:["paid","payment","received","jama","diye"]};if(t.includes("balance")||t.includes("kitna")||t.includes("\u0915\u093f\u0924\u0928\u093e")||t.includes("de deta")||t.includes("batao")||t.includes("\u0915\u093f\u0924\u0928\u0947")||t.includes("owe")||t.includes("pending"))return{intent:"CHECK_BALANCE",keywords:["balance","due","owed","kitna","batao"]};if(t.includes("report")||t.includes("show")||t.includes("report")||t.includes("today")||t.includes("\u0906\u091c")||t.includes("aaj")||t.includes("sale")||t.includes("profit")||t.includes("bikri"))return{intent:"SHOW_REPORT",keywords:["report","sales","today","aaj","profit"]};if(t.includes("delete")||t.includes("remove")||t.includes("\u0939\u091f\u093e\u0913")||t.includes("hatao")||t.includes("remove"))return{intent:"DELETE_CUSTOMER",keywords:["delete","remove","hatao"]};if(t.includes("list")||t.includes("customers")||t.includes("\u0938\u092d\u0940")||t.includes("sabhi")||t.includes("dikhao")||t.includes("show all")||t.includes("all customers"))return{intent:"SHOW_CUSTOMERS",keywords:["list","customers","all","sabhi","dikhao"]};if(t.includes("credit")||t.includes("credit de")||t.includes("credit do")||t.includes("ko credit"))return{intent:"CREDIT_AMOUNT",keywords:["credit","give credit"]};if(t.includes("clear")||t.includes("balance clear")||t.includes("clear karo"))return{intent:"CLEAR_BALANCE",keywords:["clear","balance clear"]};if(t.includes("pending")||t.includes("kuch baki")||t.includes("due payments"))return{intent:"SHOW_PENDING",keywords:["pending","due","baki"]};if(t.includes("total balance")||t.includes("total collection")||t.includes("sabka balance"))return console.log("\u2705 Intent detected: TOTAL_BALANCE"),{intent:"TOTAL_BALANCE",keywords:["total","collection","sabka"]};if(t.includes("generate bill")||t.includes("bill generate")||t.includes("bill banao")||t.includes("bill banaiye")||t.includes("create bill")||t.includes("bill create"))return console.log("\u2705 Intent detected: GENERATE_BILL"),{intent:"GENERATE_BILL",keywords:["generate","bill","create"]};const n=/\u20b9?\s*\d+/.test(e),r=/[\u0900-\u097F]|[A-Z][a-z]+/.test(e);return n&&r&&!t.includes("paid")&&!t.includes("\u091c\u092e\u093e")?(console.log("\u2705 Intent detected: ADD_CUSTOMER (fallback pattern with amount & name)"),{intent:"ADD_CUSTOMER",keywords:["fallback","amount","name"]}):(console.log("\u274c Intent detected: UNKNOWN for:",e),{intent:"UNKNOWN",keywords:[]})})(n);if(console.log("\ud83c\udfaf Detected intent:",i),"DELETE_CUSTOMER"===i){const r=y(n),i=e.customers.find(e=>e.name.toLowerCase().includes(r.toLowerCase()));return i?(t({type:"DELETE_CUSTOMER",payload:i.id}),{message:'\u2705 \u0917\u094d\u0930\u093e\u0939\u0915 "'.concat(i.name,'" \u0939\u091f\u093e \u0926\u093f\u092f\u093e \u0917\u092f\u093e\u0964'),action:"delete_customer"}):{message:'\u0917\u094d\u0930\u093e\u0939\u0915 "'.concat(r,'" \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e\u0964'),action:null}}if("SHOW_CUSTOMERS"===i){const t=e.customers.length,n=e.customers.reduce((e,t)=>e+(t.balanceDue||0),0);return{message:"\ud83d\udccb \u0915\u0941\u0932 \u0917\u094d\u0930\u093e\u0939\u0915: ".concat(t," | Total Balance: \u20b9").concat(n.toFixed(2)),action:"show_customers"}}if("SHOW_REPORT"===i){const t=(new Date).toISOString().split("T")[0],n=e.transactions.filter(e=>e.date.startsWith(t)),r=n.reduce((e,t)=>e+(t.total||0),0),i=e.customers.filter(e=>(e.balanceDue||0)<0),a=i.reduce((e,t)=>e+Math.abs(t.balanceDue||0),0);return{message:"\ud83d\udcca \u0906\u091c \u0915\u0940 \u092c\u093f\u0915\u094d\u0930\u0940: \u20b9".concat(r.toFixed(2)," | Transactions: ").concat(n.length," | Credit: \u20b9").concat(a.toFixed(2)),action:"show_report"}}if("CREDIT_AMOUNT"===i){const r=y(n),i=v(n);if(r&&"Unknown"!==r&&i)return await async function(n,r){let i=e.customers.find(e=>e.name.toLowerCase()===n.toLowerCase());if(!i)for(const t of e.customers){const e=a(t.name,n);if(e>=.7){i=t,console.log('Fuzzy matched: "'.concat(t.name,'" with "').concat(n,'" (').concat((100*e).toFixed(0),"%)"));break}}if(i){const e=(i.balanceDue||0)+r,n=o(o({},i),{},{balanceDue:e});return t({type:"UPDATE_CUSTOMER",payload:n}),{message:'\u2705 \u0917\u094d\u0930\u093e\u0939\u0915 "'.concat(i.name,'" \u0915\u094b \u20b9').concat(r," \u0915\u093e credit \u0926\u093f\u092f\u093e\u0964 \u0928\u092f\u093e \u092c\u0948\u0932\u0947\u0902\u0938: \u20b9").concat(e.toFixed(2)),action:"credit_customer"}}{const e=/[\u0900-\u097F]/.test(n)?s(n):n,i={id:Date.now().toString(),name:e,balanceDue:r,phone:"",email:"",address:"",createdAt:(new Date).toISOString()};return t({type:"ADD_CUSTOMER",payload:i}),{message:'\u2705 \u0928\u092f\u093e \u0917\u094d\u0930\u093e\u0939\u0915 "'.concat(e,'" \u091c\u094b\u0921\u093c\u093e\u0964 Credit: \u20b9').concat(r),action:"credit_customer"}}}(r,i)}if("CLEAR_BALANCE"===i){const r=y(n),i=e.customers.find(e=>e.name.toLowerCase().includes(r.toLowerCase()));if(i){const e=i.balanceDue||0,n=o(o({},i),{},{balanceDue:0});return t({type:"UPDATE_CUSTOMER",payload:n}),{message:"\u2705 ".concat(i.name," \u0915\u093e \u092c\u0948\u0932\u0947\u0902\u0938 \u0915\u094d\u0932\u093f\u092f\u0930 \u0939\u0941\u0906 (\u20b9").concat(e.toFixed(2),")"),action:"clear_balance"}}}if("SHOW_PENDING"===i){const t=e.customers.filter(e=>(e.balanceDue||0)>0),n=t.reduce((e,t)=>e+(t.balanceDue||0),0);return{message:"\u23f3 Pending \u092c\u0948\u0932\u0947\u0902\u0938: ".concat(t.length," \u0917\u094d\u0930\u093e\u0939\u0915 | Total: \u20b9").concat(n.toFixed(2)),action:"show_pending"}}if("TOTAL_BALANCE"===i){const t=e.customers.reduce((e,t)=>e+(t.balanceDue||0),0),n=e.customers.reduce((e,t)=>e+Math.abs(Math.min(0,t.balanceDue||0)),0);return{message:"\ud83d\udcb0 Total Collection Due: \u20b9".concat(t.toFixed(2)," | Credit Given: \u20b9").concat(n.toFixed(2)),action:"total_balance"}}if("GENERATE_BILL"===i){const e=y(n);return e?(t({type:"SET_CURRENT_VIEW",payload:"billing"}),{message:"\ud83d\udccb Bill generation initiated for ".concat(e,'. Please add items to the bill and click "Generate Bill" to create UPI payment QR code.'),action:"navigate_billing"}):{message:'\ud83d\udccb Bill generation initiated. Please specify customer name and add items to the bill, then click "Generate Bill" to create UPI payment QR code.',action:"navigate_billing"}}const a=function(e,t){const n=e=>e.toLowerCase().replace(/\u0915\u093e|\u0915\u0940|\u0915\u094b|\u0915\u0947|\u092e\u0947\u0902|\u0938\u0947/gi,"").replace(/\s+/g,"").trim(),r=n(e),i=n(t);if(r===i)return 1;const a=r.length>i.length?r:i,s=r.length>i.length?i:r;if(0===a.length)return 1;const o=c(a,s),d=(a.length-o)/a.length;return l(e,t)?.95:d},s=e=>{const t={"\u092e\u094b\u0939\u093f\u0924":"mohit","\u0938\u094b\u092e\u092f\u093e":"somya","\u0930\u093e\u091c\u0942":"raju","\u0938\u0941\u0928\u0940\u0932":"sunil","\u0930\u093e\u092e":"ram","\u0936\u094d\u092f\u093e\u092e":"shyam","\u0915\u0943\u0937\u094d\u0923":"krishna","\u0905\u0930\u094d\u091c\u0941\u0928":"arjun","\u092a\u094d\u0930\u093f\u092f\u0902\u0915\u093e":"priyanka","\u0905\u0902\u0915\u093f\u0924":"ankit","\u0930\u0935\u093f":"ravi","\u092a\u094d\u0930\u092e\u094b\u0926":"pramod","\u092e\u093e\u0927\u0935":"madhava","\u0938\u094b\u092e\u0947\u0928\u0940":"someni","\u0938\u094c\u092e\u094d\u092f":"soumya"};if(t[e])return t[e];const n={"\u0905":"a","\u0906":"aa","\u093e":"a","\u0907":"i","\u0940":"i","\u0908":"ee","\u0909":"u","\u0942":"u","\u090a":"oo","\u090f":"e","\u0947":"e","\u0910":"ai","\u0913":"o","\u094b":"o","\u0914":"au","\u094c":"au","\u0915":"k","\u0916":"kh","\u0917":"g","\u0918":"gh","\u091a":"ch","\u091b":"chh","\u091c":"j","\u091d":"jh","\u091f":"t","\u0920":"th","\u0921":"d","\u0922":"dh","\u0924":"t","\u0925":"th","\u0926":"d","\u0927":"dh","\u0928":"n","\u092a":"p","\u092b":"ph","\u092c":"b","\u092d":"bh","\u092e":"m","\u092f":"y","\u0930":"r","\u0932":"l","\u0935":"v","\u0936":"sh","\u0937":"sh","\u0938":"s","\u0939":"h"};let r="";for(let i=0;i<e.length;i++){const t=e[i];if(n[t])r+=n[t];else{if(/[\u0900-\u097F]/.test(t))continue;r+=t}}return r.toLowerCase().trim()||e},l=(e,t)=>{const n=e.replace(/[\u0900-\u097F]/g,"").toLowerCase().trim(),r=t.replace(/[\u0900-\u097F]/g,"").toLowerCase().trim();if(n&&r)return n===r||n.includes(r)||r.includes(n);const i=s(e),a=s(t);return i===a||i.includes(a)||a.includes(i)||i===t.toLowerCase()||a===e.toLowerCase()},c=(e,t)=>{const n=[];for(let r=0;r<=t.length;r++)n[r]=[r];for(let r=0;r<=e.length;r++)n[0][r]=r;for(let r=1;r<=t.length;r++)for(let i=1;i<=e.length;i++)t.charAt(r-1)===e.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,n[r][i-1]+1,n[r-1][i]+1);return n[t.length][e.length]};if("CHECK_BALANCE"===i||(r.includes("balance")||r.includes("\u0915\u093f\u0924\u0928\u093e")||r.includes("kitna"))&&(r.includes("is")||r.includes("\u0915\u093e")||r.includes("\u0915\u093f\u0924\u0928\u093e"))){const t=y(n);let r=e.customers.find(e=>e.name.toLowerCase()===t.toLowerCase());if(!r)for(const n of e.customers){if(a(n.name,t)>=.7){r=n,console.log('Fuzzy matched balance check: "'.concat(n.name,'" with "').concat(t,'"'));break}}if(r){const e=r.balanceDue||0;return{message:"".concat(r.name," \u0915\u093e \u092c\u0948\u0932\u0947\u0902\u0938 \u20b9").concat(e.toFixed(2)," \u0939\u0948\u0964"),action:null}}return{message:'\u0917\u094d\u0930\u093e\u0939\u0915 "'.concat(t,'" \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e\u0964'),action:null}}if("PAYMENT"===i){const r=y(n),i=v(n);if(r&&"Unknown"!==r&&i){let n=e.customers.find(e=>e.name.toLowerCase()===r.toLowerCase());if(!n)for(const t of e.customers){if(a(t.name,r)>=.7){n=t,console.log('Fuzzy matched payment: "'.concat(t.name,'" with "').concat(r,'"'));break}}if(n){const e=(n.balanceDue||0)-i,r=o(o({},n),{},{balanceDue:e,credit:e<0?Math.abs(e):0});t({type:"UPDATE_CUSTOMER",payload:r});const a={id:Date.now().toString(),type:"payment",date:(new Date).toISOString(),total:i,customer:n.name,items:[]};t({type:"ADD_TRANSACTION",payload:a});let s="\u2705 ".concat(n.name," \u0928\u0947 \u20b9").concat(i," \u091c\u092e\u093e \u0915\u093f\u092f\u093e\u0964");return s+=0===e?" \u092c\u0948\u0932\u0947\u0902\u0938 \u0915\u094d\u0932\u093f\u092f\u0930 \u0939\u094b \u0917\u092f\u093e!":e<0?" \u0915\u094d\u0930\u0947\u0921\u093f\u091f \u092c\u0948\u0932\u0947\u0902\u0938: \u20b9".concat(Math.abs(e).toFixed(2)):" \u0928\u092f\u093e \u092c\u0948\u0932\u0947\u0902\u0938: \u20b9".concat(e.toFixed(2)),{message:s,action:"payment"}}return{message:'\u0917\u094d\u0930\u093e\u0939\u0915 "'.concat(r,'" \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e\u0964 \u0915\u094d\u092f\u093e \u0906\u092a \u0928\u092f\u093e \u0917\u094d\u0930\u093e\u0939\u0915 \u091c\u094b\u0921\u093c\u0928\u093e \u091a\u093e\u0939\u0947\u0902\u0917\u0947?'),action:null}}}if("ADD_PRODUCT"===i){const r=b(n);if(r&&"Unknown"!==r){const n=e.products.find(e=>e.name.toLowerCase()===r.toLowerCase());if(n)return{message:'Product "'.concat(r,'" already exists in inventory.'),action:"product_exists"};{const e={id:Date.now().toString(),name:r,price:0,quantity:0,category:"General",description:"",barcode:"",expiryDate:"",createdAt:(new Date).toISOString()};return t({type:"ADD_PRODUCT",payload:e}),{message:'\u2705 Product "'.concat(r,'" added successfully to inventory!'),action:"add_product"}}}return{message:"Please specify a product name to add.",action:null}}if("ADD_CUSTOMER"===i){console.log("\ud83d\udcdd Processing ADD_CUSTOMER intent");const r=y(n),i=v(n);if(console.log("\ud83d\udcdd Customer name extracted:",r,"Amount:",i),r&&"Unknown"!==r){let n=e.customers.find(e=>e.name.toLowerCase()===r.toLowerCase());if(!n)for(const t of e.customers){if(a(t.name,r)>=.7){n=t,console.log('Fuzzy matched add: "'.concat(t.name,'" with "').concat(r,'"'));break}}if(n){const e=(n.balanceDue||0)+i,r=o(o({},n),{},{balanceDue:e});return t({type:"UPDATE_CUSTOMER",payload:r}),{message:'\u2705 \u0917\u094d\u0930\u093e\u0939\u0915 "'.concat(n.name,'" \u0905\u092a\u0921\u0947\u091f \u0939\u0941\u0906\u0964 \u092c\u0948\u0932\u0947\u0902\u0938: \u20b9').concat(e.toFixed(2)),action:"update_customer"}}{const e=/[\u0900-\u097F]/.test(r)?s(r):r,n={id:Date.now().toString(),name:e,balanceDue:i||0,phone:"",email:"",address:"",createdAt:(new Date).toISOString()};return t({type:"ADD_CUSTOMER",payload:n}),{message:'\u2705 \u0917\u094d\u0930\u093e\u0939\u0915 "'.concat(e,'" \u091c\u094b\u0921\u093c\u093e \u0917\u092f\u093e\u0964 \u092c\u0948\u0932\u0947\u0902\u0938: \u20b9').concat(i||0),action:"add_customer"}}}return{message:"\u0917\u094d\u0930\u093e\u0939\u0915 \u0915\u093e \u0928\u093e\u092e \u0928\u0939\u0940\u0902 \u092e\u093f\u0932\u093e\u0964 \u0915\u0943\u092a\u092f\u093e \u0928\u093e\u092e \u0914\u0930 \u0930\u093e\u0936\u093f \u0926\u094b\u0928\u094b\u0902 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0947\u0902\u0964 (No customer name found)",action:null}}return{message:"\u092e\u0948\u0902 \u0938\u092e\u091d \u0917\u092f\u093e, \u0932\u0947\u0915\u093f\u0928 \u0914\u0930 \u0938\u094d\u092a\u0937\u094d\u091f \u0928\u093f\u0930\u094d\u0926\u0947\u0936 \u091a\u093e\u0939\u093f\u090f\u0964 \u0915\u0943\u092a\u092f\u093e \u0915\u0939\u0947\u0902 \u091c\u0948\u0938\u0947: ",action:null}},y=e=>{console.log("\ud83d\udd0d Extracting customer name from:",e);const t=e.split(" ");console.log("\ud83d\udcdd Words:",t);const n=["add","the","is","and","to","with","baki","\u092c\u093e\u0915\u0940","\u0926\u0947\u0928\u093e","dene","due","paid","\u091c\u092e\u093e","jama","\u20b9","rupee","rupees","\u0930\u0941\u092a\u090f","\u0930\u0941\u092a\u092f\u0947","\u0926\u0947\u0928\u0947","\u0915\u0930\u094b","\u0915\u0930","\u0932\u0917\u093e\u0913","\u0932\u0917\u093e\u0928\u093e","\u0930\u0942\u092a\u092f\u0947","rupees","\u0930\u0941\u092a\u090f","\u0915\u093e","\u0915\u0940","\u0915\u094b","\u0915\u0947","\u092e\u0947\u0902","\u0938\u0947","\u092a\u0930","par","ke","ki","ka","mein"],r=t.findIndex(e=>e.includes("\u20b9")||/^\d+/.test(e)||n.some(t=>e.toLowerCase().includes(t.toLowerCase())));if(console.log("\ud83d\udccd Keyword index:",r),r>0){const e=t.slice(0,r).filter(e=>{const t=e.toLowerCase();return!e.match(/^\d+/)&&e.length>1&&!n.includes(t)});if(console.log("\u2705 Name words:",e),e.length>0){const t=e.join(" ");return console.log("\u2705 Extracted name:",t),t}}const i=t.filter(e=>{const t=e.toLowerCase();return e.length>1&&!n.includes(t)&&!t.match(/^\d/)&&(e[0]===e[0].toUpperCase()||/[\u0900-\u097F]/.test(e))});if(console.log("\ud83d\udd24 Potential names:",i),i.length>0)return console.log("\u2705 Using potential name:",i[0]),i[0];for(const a of t){const e=a.toLowerCase();if(a.length>1&&!n.includes(e)&&!e.match(/^\d/))return console.log("\u2705 Using fallback name:",a),a}return console.log("\u274c No name found, returning Unknown"),"Unknown"},b=e=>{const t=e.split(" "),n=["add","product","item","saman","dalo","\u091c\u094b\u0921\u093c\u094b","\u0928\u092f\u093e","naya","the","is","and","to","with","in","to","inventory"],r=t.findIndex(e=>"add"===e.toLowerCase()||"dalo"===e.toLowerCase()||"\u091c\u094b\u0921\u093c\u094b"===e.toLowerCase());if(r>=0&&r<t.length-1){const e=t.slice(r+1).filter(e=>{const t=e.toLowerCase();return!n.includes(t)&&e.length>1});if(e.length>0)return e.join(" ")}for(const i of t){const e=i.toLowerCase();if(i.length>1&&!n.includes(e)&&!e.match(/^\d/))return i}return"Unknown"},v=e=>{const t=e.match(/\u20b9?(\d+(?:\.\d{2})?)/);return t?parseFloat(t[1]):0},x=async t=>{console.log("\ud83d\udd0a Speak called with:",t),console.log("\ud83d\udd0a Voice assistant enabled:",e.voiceAssistantEnabled),console.log("\ud83d\udd0a Current language:",e.currentLanguage),console.log("\ud83d\udd0a Speech synthesis available:","speechSynthesis"in window),!1!==e.voiceAssistantEnabled?"speechSynthesis"in window?(console.log("\ud83d\udd0a Using browser speech synthesis"),speechSynthesis.cancel(),setTimeout(()=>{const n=new SpeechSynthesisUtterance(t);n.lang="hi"===e.currentLanguage?"hi-IN":"en-US",n.rate=.8,n.pitch=1,n.volume=1,n.onstart=()=>{console.log("\ud83d\udd0a Browser speech started:",t)},n.onend=()=>{console.log("\ud83d\udd0a Browser speech ended")},n.onerror=e=>{console.error("\ud83d\udd0a Browser speech error:",e.error),w(t)};try{speechSynthesis.speak(n),console.log("\ud83d\udd0a speechSynthesis.speak() called")}catch(r){console.error("\ud83d\udd0a Error calling speechSynthesis.speak():",r),w(t)}},100)):(console.log("\ud83d\udd0a Speech synthesis not available, trying Google TTS"),w(t)):console.log("\ud83d\udd0a Voice assistant disabled")},w=async t=>{console.log("\ud83d\udd0a Trying Google TTS API");try{const n=await fetch("https://texttospeech.googleapis.com/v1/text:synthesize",{method:"POST",headers:{"Content-Type":"application/json","X-Goog-Api-Key":"AIzaSyDiqf-vNMjF5SdGzC_15FwZ5IOyAjtuVVM"},body:JSON.stringify({input:{text:t},voice:{languageCode:"hi"===e.currentLanguage?"hi-IN":"en-US",name:"hi"===e.currentLanguage?"hi-IN-Wavenet-A":"en-US-Wavenet-D",ssmlGender:"FEMALE"},audioConfig:{audioEncoding:"MP3",speakingRate:.9,pitch:0,volumeGainDb:0}})});if(n.ok){const e=(await n.json()).audioContent,r=new Audio("data:audio/mp3;base64,".concat(e));r.oncanplaythrough=()=>{console.log("\ud83d\udd0a Google TTS audio ready to play"),r.play()},r.onplay=()=>{console.log("\ud83d\udd0a Google TTS speech started:",t)},r.onended=()=>{console.log("\ud83d\udd0a Google TTS speech ended")},r.onerror=e=>{console.error("\ud83d\udd0a Google TTS audio error:",e)},r.load()}else{console.error("\ud83d\udd0a Google TTS API error:",n.status,n.statusText);const e=await n.text();console.error("\ud83d\udd0a Google TTS error response:",e)}}catch(n){console.error("\ud83d\udd0a Google TTS error:",n)}};return r.useEffect(()=>{window.testSpeech=()=>{const t="hi"===e.currentLanguage?"\u0928\u092e\u0938\u094d\u0924\u0947, \u092f\u0939 \u090f\u0915 \u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u0939\u0948":"Hello, this is a test";console.log("\ud83e\uddea Global test speech triggered"),console.log("\ud83e\uddea Voice assistant enabled:",e.voiceAssistantEnabled),console.log("\ud83e\uddea Current language:",e.currentLanguage),x(t)},setTimeout(()=>{console.log("\ud83e\uddea Auto-testing speech synthesis on mount");x("Voice assistant is ready")},2e3)},[e.currentLanguage,e.voiceAssistantEnabled]),(0,ie.jsxs)("div",{className:"space-y-4 sm:space-y-6 pb-20 sm:pb-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 flex items-center",children:[(0,ie.jsx)(Vl,{className:"h-5 w-5 sm:h-6 sm:w-6 mr-2 text-blue-600"}),"AI Assistant"]}),(0,ie.jsxs)("p",{className:"mt-1 text-xs sm:text-sm text-gray-600",children:[(0,ie.jsx)("span",{className:"hidden sm:inline",children:"\u0935\u0949\u092f\u0938-\u091a\u093e\u0932\u093f\u0924 \u0917\u094d\u0930\u094b\u0938\u0930\u0940 \u0938\u094d\u091f\u094b\u0930 \u092a\u094d\u0930\u092c\u0902\u0927\u0928 | Voice-powered grocery management"}),(0,ie.jsx)("span",{className:"sm:hidden",children:"Voice Assistant"})]})]}),(0,ie.jsxs)("div",{className:"card h-[calc(100vh-280px)] sm:h-[600px] flex flex-col",children:[(0,ie.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4",children:[0===n.length?(0,ie.jsxs)("div",{className:"text-center text-gray-500 py-8 sm:py-12",children:[(0,ie.jsx)("div",{className:"mx-auto w-12 h-12 sm:w-16 sm:h-16 bg-blue-100 rounded-full flex items-center justify-center mb-3 sm:mb-4",children:(0,ie.jsx)(uc,{className:"h-6 w-6 sm:h-8 sm:w-8 text-blue-600"})}),(0,ie.jsxs)("p",{className:"text-base sm:text-lg font-medium mb-2",children:[(0,ie.jsx)("span",{className:"hidden sm:inline",children:"AI Assistant \u0915\u0947 \u0938\u093e\u0925 \u092c\u093e\u0924 \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902"}),(0,ie.jsx)("span",{className:"sm:hidden",children:"Start Conversation"})]}),(0,ie.jsxs)("p",{className:"text-xs sm:text-sm text-gray-400 mb-3 sm:mb-4",children:[(0,ie.jsx)("span",{className:"hidden sm:inline",children:"Start a conversation with your AI assistant"}),(0,ie.jsx)("span",{className:"sm:hidden",children:"Use voice or text"})]}),(0,ie.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4 mt-3 sm:mt-4 text-left mx-2",children:[(0,ie.jsx)("p",{className:"text-xs sm:text-sm font-medium text-blue-900 mb-2",children:"Try these commands:"}),(0,ie.jsxs)("ul",{className:"text-xs text-blue-800 space-y-1",children:[(0,ie.jsx)("li",{className:"hidden sm:block",children:'"\u0930\u093e\u091c\u0942 \u20b950 \u092c\u093e\u0915\u0940" - Add balance'}),(0,ie.jsx)("li",{className:"sm:hidden",children:'"Raju \u20b950 baki" - Add balance'}),(0,ie.jsx)("li",{className:"hidden sm:block",children:'"\u0938\u0941\u0928\u0940\u0932 \u0928\u0947 \u20b930 \u091c\u092e\u093e \u0915\u093f\u092f\u093e" - Payment'}),(0,ie.jsx)("li",{className:"sm:hidden",children:'"Sunil \u20b930 payment" - Payment'}),(0,ie.jsx)("li",{children:'"Add Raju \u20b950" - Add customer'}),(0,ie.jsx)("li",{children:'"Raju kitna de deta hai" - Check balance'})]})]})]}):n.map((e,t)=>(0,ie.jsx)("div",{className:"flex ".concat("user"===e.type?"justify-end":"justify-start"),children:(0,ie.jsx)("div",{className:"max-w-[85%] sm:max-w-xs lg:max-w-md px-3 py-2 sm:px-4 sm:py-2 rounded-lg ".concat("user"===e.type?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:(0,ie.jsxs)("div",{className:"flex items-start space-x-2",children:["ai"===e.type&&(0,ie.jsx)(uc,{className:"h-3 w-3 sm:h-4 sm:w-4 mt-0.5 flex-shrink-0"}),"user"===e.type&&(0,ie.jsx)(yy,{className:"h-3 w-3 sm:h-4 sm:w-4 mt-0.5 flex-shrink-0"}),(0,ie.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ie.jsx)("p",{className:"text-xs sm:text-sm break-words",children:e.content}),(0,ie.jsx)("p",{className:"text-xs opacity-70 mt-1",children:e.timestamp.toLocaleTimeString()})]})]})})},t)),d&&(0,ie.jsx)("div",{className:"flex justify-start",children:(0,ie.jsx)("div",{className:"bg-gray-100 text-gray-900 px-4 py-2 rounded-lg",children:(0,ie.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ie.jsx)(uc,{className:"h-4 w-4"}),(0,ie.jsxs)("div",{className:"flex space-x-1",children:[(0,ie.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,ie.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,ie.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),(0,ie.jsx)("div",{ref:h})]}),(0,ie.jsxs)("div",{className:"border-t border-gray-200 p-3 sm:p-4",children:[(0,ie.jsxs)("div",{className:"flex space-x-2",children:[(0,ie.jsxs)("div",{className:"flex-1 relative",children:[(0,ie.jsx)("input",{type:"text",value:a,onChange:e=>s(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m())},placeholder:"Type or speak...",className:"input-field pr-10 text-sm",disabled:d}),(0,ie.jsx)("button",{onClick:()=>{var e;if(l)null===(e=f.current)||void 0===e||e.stop();else try{var t;null===(t=f.current)||void 0===t||t.start()}catch(n){console.error("Error starting recognition:",n)}},className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 rounded ".concat(l?"text-red-600 hover:bg-red-50":"text-gray-400 hover:text-gray-600 hover:bg-gray-50"),disabled:d,children:l?(0,ie.jsx)(QS,{className:"h-4 w-4"}):(0,ie.jsx)(ZS,{className:"h-4 w-4"})})]}),(0,ie.jsx)("button",{onClick:()=>m(),disabled:!a.trim()||d,className:"btn-primary flex items-center disabled:opacity-50 disabled:cursor-not-allowed px-3 sm:px-4",children:(0,ie.jsx)(ek,{className:"h-4 w-4"})}),(0,ie.jsx)("button",{onClick:()=>{const t="hi"===e.currentLanguage?"\u0928\u092e\u0938\u094d\u0924\u0947, \u092f\u0939 \u090f\u0915 \u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u0939\u0948":"Hello, this is a test";console.log("\ud83e\uddea Manual test speech triggered"),x(t)},className:"btn-secondary flex items-center px-3 sm:px-4",title:"Test Voice",children:"\ud83d\udd0a"})]}),(0,ie.jsx)("p",{className:"text-xs text-gray-500 mt-2 hidden sm:block",children:"Enter \u0926\u092c\u093e\u090f\u0902 \u092f\u093e \u092e\u093e\u0907\u0915\u094d\u0930\u094b\u092b\u093c\u094b\u0928 \u092a\u0930 \u0915\u094d\u0932\u093f\u0915 \u0915\u0930\u0947\u0902 | Press Enter or click microphone"})]})]}),l&&(0,ie.jsx)("div",{className:"card bg-blue-50 border-blue-200",children:(0,ie.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ie.jsx)("div",{className:"w-3 h-3 bg-blue-600 rounded-full animate-pulse"}),(0,ie.jsx)("span",{className:"text-blue-800 font-medium",children:"Listening..."})]})})]})};wN.register(fS,yS,YN,QN,uS,$N);const nk=()=>{const{state:e,dispatch:t}=Nt(),[n,i]=(0,r.useState)("sales"),a=()=>{if(0===e.transactions.length)return{labels:["No Data"],datasets:[{label:"Sales",data:[0],backgroundColor:"rgba(156, 163, 175, 0.8)",borderColor:"rgba(156, 163, 175, 1)",borderWidth:2,borderRadius:8,borderSkipped:!1}]};const t=new Date,n=new Date(t.getFullYear(),t.getMonth()-5,1),r={};for(let e=0;e<6;e++){const t=new Date(n);t.setMonth(t.getMonth()+e);const i=t.toLocaleDateString("en-US",{month:"short"});r[i]=0}e.transactions.forEach(e=>{const t=new Date(e.date);if(t>=n){const n=t.toLocaleDateString("en-US",{month:"short"});r[n]=(r[n]||0)+(e.total||0)}});return{labels:Object.keys(r),datasets:[{label:"Sales (\u20b9)",data:Object.values(r),backgroundColor:"rgba(16, 185, 129, 0.8)",borderColor:"rgba(16, 185, 129, 1)",borderWidth:2,borderRadius:8,borderSkipped:!1}]}},s={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{usePointStyle:!0,padding:15,font:{size:13,weight:"500"},color:"#374151"}},title:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",padding:12,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,cornerRadius:8,displayColors:!0,callbacks:{label:function(e){return"sales"===n?"Sales: \u20b9".concat(e.parsed.y.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})):"inventory"===n?"Stock: ".concat(e.parsed.y," units"):"Customers: ".concat(e.parsed.y)}}}},scales:{x:{grid:{display:!1},ticks:{font:{size:12},color:"#6B7280"},border:{color:"#E5E7EB"}},y:{grid:{color:"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:12},color:"#6B7280",callback:function(e){return"sales"===n?"\u20b9"+e.toLocaleString("en-IN"):e}},border:{color:"#E5E7EB"}}}};return(0,ie.jsxs)("div",{className:"space-y-6",children:[(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),(0,ie.jsx)("p",{className:"text-gray-600",children:"View detailed reports and analytics"})]}),(0,ie.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,ie.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"input-field",children:[(0,ie.jsx)("option",{value:"sales",children:"Sales Report"}),(0,ie.jsx)("option",{value:"inventory",children:"Inventory Report"}),(0,ie.jsx)("option",{value:"customers",children:"Customer Report"})]})})]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,ie.jsx)(Hl,{className:"h-6 w-6 text-orange-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Sales"}),(0,ie.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",e.transactions.reduce((e,t)=>e+(t.total||0),0).toFixed(2)]})]})]})}),(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,ie.jsx)(pc,{className:"h-6 w-6 text-green-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Profit"}),(0,ie.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",Math.max(0,e.transactions.reduce((e,t)=>e+(t.total||0),0)-e.products.reduce((e,t)=>e+(t.costPrice||0)*(t.quantitySold||0),0)).toFixed(2)]})]})]})}),(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,ie.jsx)(Fl,{className:"h-6 w-6 text-blue-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Products"}),(0,ie.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.products.length})]})]})}),(0,ie.jsx)("div",{className:"card",children:(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,ie.jsx)(Rl,{className:"h-6 w-6 text-purple-600"})}),(0,ie.jsxs)("div",{className:"ml-4",children:[(0,ie.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Customers"}),(0,ie.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.customers.length})]})]})})]}),(0,ie.jsxs)("div",{className:"card p-6",children:[(0,ie.jsxs)("div",{className:"mb-6",children:[(0,ie.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"sales"===n?"Sales & Profit Report":"inventory"===n?"Inventory Report":"Customer Report"}),(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:"sales"===n?"Monthly sales performance over the last 6 months":"inventory"===n?"Top 10 products by stock quantity":"Customer distribution by payment status"})]}),(0,ie.jsx)("div",{className:"h-[400px] sm:h-[450px] lg:h-[500px]",children:(0,ie.jsx)(JS,{data:(()=>{switch(n){case"sales":default:return a();case"inventory":return(()=>{if(0===e.products.length)return{labels:["No Data"],datasets:[{label:"Stock Quantity",data:[0],backgroundColor:"rgba(156, 163, 175, 0.8)",borderColor:"rgba(156, 163, 175, 1)",borderWidth:2,borderRadius:8,borderSkipped:!1}]};const t=[...e.products].sort((e,t)=>(t.quantity||0)-(e.quantity||0)).slice(0,10),n=t.map(e=>e.name),r=t.map(e=>e.quantity||0);return{labels:n,datasets:[{label:"Stock Quantity",data:r,backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2,borderRadius:8,borderSkipped:!1}]}})();case"customers":return(()=>{if(0===e.customers.length)return{labels:["No Data"],datasets:[{label:"Customers",data:[0],backgroundColor:["rgba(156, 163, 175, 0.8)"],borderColor:["rgba(156, 163, 175, 1)"],borderWidth:2,borderRadius:8,borderSkipped:!1}]};const t=e.customers.filter(e=>0===(e.balanceDue||0)).length,n=e.customers.filter(e=>(e.balanceDue||0)>0).length,r=e.customers.filter(e=>(e.balanceDue||0)<0).length;return{labels:["No Due","Has Due","Has Credit"],datasets:[{label:"Customers",data:[t,n,r],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(249, 115, 22, 0.8)","rgba(59, 130, 246, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(249, 115, 22, 1)","rgba(59, 130, 246, 1)"],borderWidth:2,borderRadius:8,borderSkipped:!1}]}})()}})(),options:s})})]}),(0,ie.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:(0,ie.jsxs)("div",{className:"card",children:[(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Selling Products"}),(0,ie.jsx)("div",{className:"space-y-3",children:e.products.slice(0,5).map((e,t)=>(0,ie.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ie.jsxs)("div",{className:"flex items-center",children:[(0,ie.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:(0,ie.jsx)("span",{className:"text-sm font-medium text-orange-600",children:t+1})}),(0,ie.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-900",children:e.name})]}),(0,ie.jsxs)("span",{className:"text-sm text-gray-600",children:[e.quantity||e.stock||0," units"]})]},e.id))})]})})]})},rk=jt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),ik=jt("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),ak=jt("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),sk=jt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),ok=()=>{const{state:e,dispatch:t}=Nt(),[n,i]=(0,r.useState)([]),[a,s]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[h,f]=(0,r.useState)(0),[p,m]=(0,r.useState)(null),g=async()=>{try{c(null);const r=await B("/data/plans");if(r.success&&r.data){const a=(Array.isArray(r.data),r.data);let s=[],l=null,d=0;if(Array.isArray(a)?s=a:a&&Array.isArray(a.data)?(s=a.data,l=a.sellerPlanInfo,d=a.activePlanOrdersCount||0):r.data.data&&Array.isArray(r.data.data)&&(s=r.data.data,l=r.data.sellerPlanInfo,d=r.data.activePlanOrdersCount||0),Array.isArray(s)){var t,n;const a=s.map(t=>{var n,r;return o(o({},t),{},{current:void 0!==t.isCurrentPlan?t.isCurrentPlan:e.currentPlan===t.id||e.currentPlan===(null===(n=t.name)||void 0===n||null===(r=n.toLowerCase())||void 0===r?void 0:r.replace(/\s+/g,"-"))||e.currentPlan===t._id})});i(a),l?u(l):null!==(t=r.data)&&void 0!==t&&t.sellerPlanInfo&&u(r.data.sellerPlanInfo),d>0?f(d):null!==(n=r.data)&&void 0!==n&&n.activePlanOrdersCount&&f(r.data.activePlanOrdersCount)}else c("Invalid plans data format"),i([])}else c("No internet"),window.showToast&&window.showToast("No internet","error"),i([])}catch(r){console.error("Error fetching plans:",r),c("No internet"),window.showToast&&window.showToast("No internet","error"),i([])}};(0,r.useEffect)(()=>{(async()=>{s(!0),await g(),s(!1)})()},[e.currentPlan]);const y=async()=>{try{const e=await B("/data/current-plan");if(e.success&&e.data){const n=Array.isArray(e.data)?e.data:e.data.data||e.data;n&&t({type:ye,payload:n})}}catch(e){console.error("Error fetching current plan details:",e)}};if(a)return(0,ie.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),(0,ie.jsx)("p",{className:"text-gray-600",children:"Loading plans..."})]})});if(l&&0===n.length)return(0,ie.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ie.jsxs)("div",{className:"text-center p-8 bg-red-50 rounded-lg border border-red-200 max-w-md",children:[(0,ie.jsxs)("p",{className:"text-red-600 mb-4",children:["Error loading plans: ",l]}),(0,ie.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600",children:"Retry"})]})});if(0===n.length)return(0,ie.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,ie.jsxs)("div",{className:"text-center p-8",children:[(0,ie.jsx)("p",{className:"text-gray-600 mb-4",children:"No plans available at the moment."}),(0,ie.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600",children:"Refresh"})]})});const b=n.find(e=>e.current)||n[0];return(0,ie.jsxs)("div",{className:"space-y-8",children:[(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsx)("div",{className:"flex justify-center mb-4",children:(0,ie.jsx)("div",{className:"p-4 bg-gradient-to-r from-black to-primary-500 rounded-full",children:(0,ie.jsx)(Wl,{className:"h-12 w-12 text-white"})})}),(0,ie.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose Your Plan"}),(0,ie.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Unlock the full potential of your grocery business with our advanced features and tools."}),(0,ie.jsxs)("div",{className:"mt-6 p-4 bg-primary-50 border border-primary-200 rounded-lg max-w-2xl mx-auto",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-center text-primary-800",children:[(0,ie.jsx)(Wl,{className:"h-5 w-5 mr-2"}),(0,ie.jsx)("span",{className:"font-medium",children:"How to Upgrade:"})]}),(0,ie.jsx)("p",{className:"text-primary-700 text-sm mt-2",children:"Simply click on any plan card below to instantly upgrade your account. All features will be unlocked immediately!"})]})]}),l&&n.length>0&&(0,ie.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:(0,ie.jsx)("p",{className:"text-yellow-800 text-sm",children:"\u26a0\ufe0f Some plans may not be available. Showing available plans."})}),(0,ie.jsx)("div",{className:"bg-gradient-to-r from-black to-primary-500 rounded-xl p-6 text-white",children:(0,ie.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("h2",{className:"text-2xl font-bold mb-2",children:["Current Plan: ",(null===b||void 0===b?void 0:b.name)||"Basic"]}),(0,ie.jsx)("p",{className:"text-white/80",children:(null===b||void 0===b?void 0:b.description)||""}),d&&d.expiryDate&&(0,ie.jsxs)("p",{className:"text-white/80 text-sm mt-2",children:["Expires: ",new Date(d.expiryDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),d.isExpired&&(0,ie.jsx)("span",{className:"ml-2 bg-red-500 px-2 py-1 rounded text-xs",children:"Expired"})]}),h>1&&(0,ie.jsxs)("p",{className:"text-white/80 text-sm mt-1",children:["You have ",h," active plan orders"]}),(0,ie.jsx)("p",{className:"text-white/80 text-sm mt-2",children:"\ud83d\udca1 Click any plan below to upgrade instantly!"})]}),(0,ie.jsxs)("div",{className:"text-right",children:[(0,ie.jsx)("p",{className:"text-3xl font-bold",children:(null===b||void 0===b?void 0:b.price)||"\u20b9299"}),(0,ie.jsx)("p",{className:"text-green-100",children:(null===b||void 0===b?void 0:b.period)||"per month"})]})]})}),(0,ie.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:n.map((r,i)=>(0,ie.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-lg border-2 border-primary-200 ".concat(r.popular?"ring-2 ring-primary-500 ring-opacity-50":""," ").concat(r.current?"opacity-75":""),children:[r.popular&&(0,ie.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:(0,ie.jsxs)("div",{className:"bg-primary-500 text-white px-4 py-2 rounded-full text-sm font-semibold flex items-center",children:[(0,ie.jsx)(rk,{className:"h-4 w-4 mr-1"}),"Most Popular"]})}),r.current&&(0,ie.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 z-10",children:(0,ie.jsx)("div",{className:"bg-primary-500 text-white px-4 py-2 rounded-full text-sm font-semibold",children:"Current Plan"})}),!r.current&&r.userHasThisPlan&&(0,ie.jsx)("div",{className:"absolute -top-4 right-4 z-10",children:(0,ie.jsx)("div",{className:"bg-primary-500 text-white px-3 py-1 rounded-full text-xs font-semibold",children:"You Have This Plan"})}),(0,ie.jsxs)("div",{className:"p-8",children:[(0,ie.jsxs)("div",{className:"text-center mb-6",children:[(0,ie.jsx)("div",{className:"text-4xl mb-2",children:r.icon}),(0,ie.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.name}),(0,ie.jsxs)("div",{className:"mb-4",children:[(0,ie.jsx)("span",{className:"text-4xl font-bold text-gray-900",children:r.price}),(0,ie.jsx)("span",{className:"text-gray-600 ml-2",children:r.period})]}),(0,ie.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:r.description})]}),(0,ie.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,ie.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Limits"}),(0,ie.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,ie.jsxs)("div",{className:"flex justify-between",children:[(0,ie.jsx)("span",{className:"text-gray-600",children:"Max Customers:"}),(0,ie.jsx)("span",{className:"font-medium",children:r.maxCustomers})]}),(0,ie.jsxs)("div",{className:"flex justify-between",children:[(0,ie.jsx)("span",{className:"text-gray-600",children:"Max Products:"}),(0,ie.jsx)("span",{className:"font-medium",children:r.maxProducts})]})]})]}),r.unlockedModules&&r.unlockedModules.length>0&&(0,ie.jsxs)("div",{className:"mb-4",children:[(0,ie.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[(0,ie.jsx)(ik,{className:"h-4 w-4 mr-2 text-primary-500"}),"Unlocked Modules"]}),(0,ie.jsx)("ul",{className:"space-y-2",children:r.unlockedModules.map((e,t)=>(0,ie.jsxs)("li",{className:"flex items-start",children:[(0,ie.jsx)(ak,{className:"h-4 w-4 text-primary-500 mr-2 mt-0.5 flex-shrink-0"}),(0,ie.jsx)("span",{className:"text-sm text-gray-700",children:e})]},t))})]}),r.lockedModules&&r.lockedModules.length>0&&(0,ie.jsxs)("div",{className:"mb-6",children:[(0,ie.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[(0,ie.jsx)(Yl,{className:"h-4 w-4 mr-2 text-primary-500"}),"Locked Modules"]}),(0,ie.jsx)("ul",{className:"space-y-2",children:r.lockedModules.map((e,t)=>(0,ie.jsxs)("li",{className:"flex items-start",children:[(0,ie.jsx)(Yl,{className:"h-4 w-4 text-primary-500 mr-2 mt-0.5 flex-shrink-0"}),(0,ie.jsx)("span",{className:"text-sm text-gray-500",children:e})]},t))})]}),(0,ie.jsx)("button",{onClick:()=>(async r=>{var i;const a=n.find(e=>e.id===r||e._id===r);if(null!==a&&void 0!==a&&a.current)return;if(null!==a&&void 0!==a&&a.userHasThisPlan){try{m(r);const e=await B("/data/plans/upgrade",{method:"POST",body:{planId:r}});if(e.success){var s;const n=(null===(s=e.data)||void 0===s?void 0:s.data)||e.data;t({type:ge,payload:r}),window.showToast("Switched to ".concat((null===n||void 0===n?void 0:n.planName)||(null===a||void 0===a?void 0:a.name)||"selected plan","!"),"success"),await g(),await y()}else window.showToast("No internet","error")}catch(p){console.error("Error switching plan:",p),window.showToast("No internet","error")}finally{m(null)}return}if(0!==((null===a||void 0===a?void 0:a.rawPrice)||parseFloat((null===a||void 0===a||null===(i=a.price)||void 0===i?void 0:i.replace("\u20b9",""))||"0")))try{var o,c,d,u;m(r);const n=await B("/data/plans/create-razorpay-order",{method:"POST",body:{planId:r}});if(!n.success)return window.showToast("No internet","error"),void m(null);const i=(null===(o=n.data)||void 0===o?void 0:o.data)||n.data;if(null!==i&&void 0!==i&&i.isFree){const e=await B("/data/plans/upgrade",{method:"POST",body:{planId:r}});if(e.success){var h;const n=(null===(h=e.data)||void 0===h?void 0:h.data)||e.data;t({type:ge,payload:r}),window.showToast("Successfully upgraded to ".concat((null===n||void 0===n?void 0:n.planName)||(null===a||void 0===a?void 0:a.name)||"selected plan","!"),"success"),await g(),await y()}return void m(null)}const{orderId:s,amount:f,currency:p,key:b,planOrderId:v}=i;if(!b)return console.error("Razorpay key is missing from response:",i),window.showToast("Payment configuration error. Please contact support.","error"),void m(null);if(!window.Razorpay)return console.error("Razorpay script is not loaded"),window.showToast("Payment gateway is not available. Please refresh the page.","error"),void m(null);if(!s||!f||!p)return console.error("Missing payment details:",{orderId:s,amount:f,currency:p,key:b,planOrderId:v}),window.showToast("Invalid payment order. Please try again.","error"),void m(null);const x={key:b,amount:f,currency:p,name:"Grocery ERP",description:"Plan Purchase: ".concat((null===a||void 0===a?void 0:a.name)||"Selected Plan"),order_id:s,handler:async function(e){try{const i=await B("/data/plans/verify-razorpay-payment",{method:"POST",body:{razorpayOrderId:e.razorpay_order_id,razorpayPaymentId:e.razorpay_payment_id,razorpaySignature:e.razorpay_signature,planOrderId:v}});if(i.success){var n;const e=(null===(n=i.data)||void 0===n?void 0:n.data)||i.data;t({type:ge,payload:r}),window.showToast("Successfully upgraded to ".concat((null===e||void 0===e?void 0:e.planName)||(null===a||void 0===a?void 0:a.name)||"selected plan","!"),"success"),await g(),await y()}else window.showToast("No internet","error")}catch(i){console.error("Payment verification error:",i),window.showToast("No internet","error")}finally{m(null)}},prefill:{name:(null===(c=e.currentUser)||void 0===c?void 0:c.name)||"",email:(null===(d=e.currentUser)||void 0===d?void 0:d.email)||"",contact:(null===(u=e.currentUser)||void 0===u?void 0:u.phone)||""},theme:{color:"#10b981"},modal:{ondismiss:function(){m(null),window.showToast("Payment cancelled","warning")}}};try{const e=new window.Razorpay(x);e.on("payment.failed",function(e){console.error("Payment failed:",e.error),window.showToast("Payment failed: ".concat(e.error.description||e.error.reason||"Unknown error"),"error"),m(null)}),e.open()}catch(l){console.error("Error opening Razorpay checkout:",l),window.showToast("Failed to open payment gateway. Please try again.","error"),m(null)}}catch(p){console.error("Error initiating payment:",p),window.showToast("No internet","error"),m(null)}else try{m(r);const e=await B("/data/plans/upgrade",{method:"POST",body:{planId:r}});if(e.success){var f;const n=(null===(f=e.data)||void 0===f?void 0:f.data)||e.data;t({type:ge,payload:r}),window.showToast("Successfully upgraded to ".concat((null===n||void 0===n?void 0:n.planName)||(null===a||void 0===a?void 0:a.name)||"selected plan","!"),"success"),await g(),await y()}else window.showToast("No internet","error")}catch(p){console.error("Error upgrading plan:",p),window.showToast("No internet","error")}finally{m(null)}})(r.id||r._id),className:"w-full py-3 px-6 rounded-lg font-semibold transition-all duration-200 ".concat(r.current?"bg-gray-300 text-gray-500 cursor-not-allowed":p===(r.id||r._id)?"bg-gray-400 text-white cursor-wait":"bg-primary-500 hover:bg-primary-600 text-white shadow-lg hover:shadow-xl transform hover:-translate-y-1"),disabled:r.current||p===(r.id||r._id),children:r.current?"Current Plan":p===(r.id||r._id)?r.userHasThisPlan?"Switching...":"Upgrading...":r.userHasThisPlan?"Switch Plan":r.popular?"Upgrade Now":"Upgrade Plan"})]})]},r.id||r._id))}),(0,ie.jsxs)("div",{className:"bg-white rounded-xl p-8",children:[(0,ie.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Feature Comparison"}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsx)("div",{className:"p-4 bg-primary-50 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,ie.jsx)(bc,{className:"h-8 w-8 text-primary-600"})}),(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Lightning Fast"}),(0,ie.jsx)("p",{className:"text-gray-600",children:"Optimized performance for quick operations"})]}),(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsx)("div",{className:"p-4 bg-primary-50 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,ie.jsx)(sk,{className:"h-8 w-8 text-primary-600"})}),(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Secure & Reliable"}),(0,ie.jsx)("p",{className:"text-gray-600",children:"Your data is safe with enterprise-grade security"})]}),(0,ie.jsxs)("div",{className:"text-center",children:[(0,ie.jsx)("div",{className:"p-4 bg-primary-50 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,ie.jsx)(Rl,{className:"h-8 w-8 text-primary-600"})}),(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Team Collaboration"}),(0,ie.jsx)("p",{className:"text-gray-600",children:"Work together with your team seamlessly"})]})]})]}),(0,ie.jsxs)("div",{className:"bg-white rounded-xl p-8",children:[(0,ie.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Frequently Asked Questions"}),(0,ie.jsxs)("div",{className:"space-y-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Can I change my plan anytime?"}),(0,ie.jsx)("p",{className:"text-gray-600",children:"Yes, you can upgrade or downgrade your plan at any time. Changes take effect immediately."})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Is there a free trial?"}),(0,ie.jsx)("p",{className:"text-gray-600",children:"Yes, all paid plans come with a 14-day free trial. No credit card required."})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"What payment methods do you accept?"}),(0,ie.jsx)("p",{className:"text-gray-600",children:"We accept all major credit cards, UPI, and bank transfers."})]})]})]})]})},lk=jt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),ck=jt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),dk=jt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),uk=jt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),hk=jt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),fk=jt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),pk=jt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),mk=()=>{var e;const{state:t,dispatch:n}=Nt(),[i,a]=(0,r.useState)("general"),[s,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)({message:"",type:"info"}),[u,h]=(0,r.useState)({lowStockThreshold:t.lowStockThreshold||"",expiryDaysThreshold:t.expiryDaysThreshold||"",storeName:t.storeName||"Grocery Store",gstNumber:t.gstNumber||"",currentLanguage:t.currentLanguage,username:(null===(e=t.currentUser)||void 0===e?void 0:e.username)||"",password:"",voiceAssistantEnabled:!1!==t.voiceAssistantEnabled,voiceAssistantLanguage:t.voiceAssistantLanguage||"en-US"}),f=[{id:"general",label:"General",icon:Kl},{id:"alerts",label:"Alerts",icon:oc},{id:"language",label:"Language",icon:sc},{id:"data",label:"Data",icon:lk}];return(0,ie.jsxs)("div",{className:"space-y-8 fade-in-up",children:[(0,ie.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:$l("settings",t.currentLanguage)}),(0,ie.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your application settings and preferences"})]})}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,ie.jsx)("div",{className:"lg:col-span-1",children:(0,ie.jsx)("div",{className:"card",children:(0,ie.jsx)("nav",{className:"space-y-2",children:f.map(e=>{const t=e.icon;return(0,ie.jsxs)("button",{onClick:()=>a(e.id),className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ".concat(i===e.id?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"),children:[(0,ie.jsx)(t,{className:"h-4 w-4 mr-3"}),e.label]},e.id)})})})}),(0,ie.jsx)("div",{className:"lg:col-span-3",children:(0,ie.jsxs)("div",{className:"card",children:["general"===i&&(0,ie.jsxs)("div",{className:"space-y-6",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,ie.jsx)(Kl,{className:"h-5 w-5 mr-2 text-blue-600"}),"General Settings"]}),(0,ie.jsxs)("div",{className:"space-y-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Business Information"}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Store Name"}),(0,ie.jsx)("input",{type:"text",value:u.storeName,onChange:e=>h(t=>o(o({},t),{},{storeName:e.target.value})),className:"input-field",placeholder:"Enter store name"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number"}),(0,ie.jsx)("input",{type:"text",value:u.gstNumber,onChange:e=>h(t=>o(o({},t),{},{gstNumber:e.target.value})),className:"input-field",placeholder:"Enter GST number"})]})]})]}),(0,ie.jsxs)("div",{className:"border-t pt-6",children:[(0,ie.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[(0,ie.jsx)(yy,{className:"h-4 w-4 mr-2 text-blue-600"}),"User Account"]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),(0,ie.jsx)("input",{type:"text",value:u.username,onChange:e=>h(t=>o(o({},t),{},{username:e.target.value})),className:"input-field",placeholder:"Enter username"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsxs)("label",{className:"flex text-sm font-medium text-gray-700 mb-2 items-center",children:[(0,ie.jsx)(Yl,{className:"h-4 w-4 mr-2"}),"New Password"]}),(0,ie.jsx)("input",{type:"password",value:u.password,onChange:e=>h(t=>o(o({},t),{},{password:e.target.value})),className:"input-field",placeholder:"Enter new password (leave blank to keep current)"}),(0,ie.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to keep current password"})]})]})]}),(0,ie.jsxs)("div",{className:"border-t pt-6",children:[(0,ie.jsxs)("h4",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[(0,ie.jsx)(ZS,{className:"h-4 w-4 mr-2 text-purple-600"}),"Voice Assistant"]}),(0,ie.jsxs)("div",{className:"space-y-4",children:[(0,ie.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("p",{className:"font-medium text-gray-900",children:"Enable Voice Assistant"}),(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:"Allow voice commands and speech recognition"})]}),(0,ie.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,ie.jsx)("input",{type:"checkbox",checked:u.voiceAssistantEnabled,onChange:e=>h(t=>o(o({},t),{},{voiceAssistantEnabled:e.target.checked})),className:"sr-only peer"}),(0,ie.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Voice Assistant Language"}),(0,ie.jsxs)("select",{value:u.voiceAssistantLanguage,onChange:e=>h(t=>o(o({},t),{},{voiceAssistantLanguage:e.target.value})),className:"input-field",children:[(0,ie.jsx)("option",{value:"en-US",children:"English (US)"}),(0,ie.jsx)("option",{value:"hi-IN",children:"Hindi (India)"}),(0,ie.jsx)("option",{value:"en-GB",children:"English (UK)"}),(0,ie.jsx)("option",{value:"es-ES",children:"Spanish"}),(0,ie.jsx)("option",{value:"fr-FR",children:"French"})]}),(0,ie.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Language for voice recognition and speech synthesis"}),(0,ie.jsx)("button",{type:"button",onClick:()=>{u.voiceAssistantLanguage;window.testSpeech?window.testSpeech():console.log("Test speech function not available")},className:"mt-2 text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200",children:"Test Voice"})]})]})]})]})]}),"alerts"===i&&(0,ie.jsxs)("div",{className:"space-y-6",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,ie.jsx)(oc,{className:"h-5 w-5 mr-2 text-yellow-600"}),"Alert Settings"]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Low Stock Threshold"}),(0,ie.jsx)("input",{type:"number",value:u.lowStockThreshold,onChange:e=>h(t=>o(o({},t),{},{lowStockThreshold:e.target.value})),className:"input-field",min:"0",placeholder:"Enter threshold"}),(0,ie.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Products with stock at or below this number will trigger low stock alerts"})]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Days Threshold"}),(0,ie.jsx)("input",{type:"number",value:u.expiryDaysThreshold,onChange:e=>h(t=>o(o({},t),{},{expiryDaysThreshold:e.target.value})),className:"input-field",min:"0",placeholder:"Enter days"}),(0,ie.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Products expiring within this many days will trigger expiry alerts"})]})]})]}),"language"===i&&(0,ie.jsxs)("div",{className:"space-y-6",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,ie.jsx)(sc,{className:"h-5 w-5 mr-2 text-green-600"}),"Language Settings"]}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Language"}),(0,ie.jsxs)("select",{value:u.currentLanguage,onChange:e=>h(t=>o(o({},t),{},{currentLanguage:e.target.value})),className:"input-field",children:[(0,ie.jsx)("option",{value:"en",children:"English"}),(0,ie.jsx)("option",{value:"hi",children:"\u0939\u093f\u0902\u0926\u0940 (Hindi)"})]}),(0,ie.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Choose your preferred language for the application interface"})]})]}),"data"===i&&(0,ie.jsxs)("div",{className:"space-y-6",children:[(0,ie.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,ie.jsx)(lk,{className:"h-5 w-5 mr-2 text-purple-600"}),"Data Management"]}),(0,ie.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,ie.jsxs)("div",{className:"space-y-4",children:[(0,ie.jsx)("h4",{className:"font-medium text-gray-900",children:"Export Data"}),(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:"Download a backup of all your data including customers, products, transactions, and settings."}),(0,ie.jsxs)("button",{onClick:()=>{const e={customers:t.customers,products:t.products,transactions:t.transactions,purchaseOrders:t.purchaseOrders,settings:{lowStockThreshold:t.lowStockThreshold,expiryDaysThreshold:t.expiryDaysThreshold,storeName:t.storeName,gstNumber:t.gstNumber}},n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=window.URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download="grocery-erp-backup-".concat((new Date).toISOString().split("T")[0],".json"),i.click(),window.URL.revokeObjectURL(r),window.showToast&&window.showToast("Data exported successfully!","success")},className:"btn-secondary flex items-center",children:[(0,ie.jsx)(ac,{className:"h-4 w-4 mr-2"}),"Export Data"]})]}),(0,ie.jsxs)("div",{className:"space-y-4",children:[(0,ie.jsx)("h4",{className:"font-medium text-gray-900",children:"Import Data"}),(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:"Restore data from a previously exported backup file."}),(0,ie.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{try{const t=JSON.parse(e.target.result);t.customers&&n({type:"SET_CUSTOMERS",payload:t.customers}),t.products&&n({type:"SET_PRODUCTS",payload:t.products}),t.transactions&&n({type:"SET_TRANSACTIONS",payload:t.transactions}),t.purchaseOrders&&n({type:"SET_PURCHASE_ORDERS",payload:t.purchaseOrders}),t.settings&&(t.settings.lowStockThreshold&&n({type:"SET_LOW_STOCK_THRESHOLD",payload:t.settings.lowStockThreshold}),t.settings.expiryDaysThreshold&&n({type:"SET_EXPIRY_DAYS_THRESHOLD",payload:t.settings.expiryDaysThreshold}),t.settings.gstNumber&&n({type:"SET_GST_NUMBER",payload:t.settings.gstNumber})),window.showToast&&window.showToast("Data imported successfully!","success")}catch(t){window.showToast&&window.showToast("Error importing data. Please check the file format.","error")}},e.readAsText(t)}},className:"hidden",id:"import-file"}),(0,ie.jsxs)("label",{htmlFor:"import-file",className:"btn-secondary flex items-center cursor-pointer",children:[(0,ie.jsx)(ck,{className:"h-4 w-4 mr-2"}),"Import Data"]})]}),(0,ie.jsxs)("div",{className:"space-y-4",children:[(0,ie.jsx)("h4",{className:"font-medium text-gray-900",children:"Sync to Cloud"}),(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:"Sync your data to the cloud backend for backup and cross-device access."}),(0,ie.jsx)("button",{onClick:async()=>{l(!0),d({message:"Syncing data to cloud...",type:"info"});try{const e=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://your-backend-api.com/sync",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!navigator.onLine&&!t.force)return console.warn("Device is offline. Cannot sync data."),{success:!1,message:"Device is offline"};try{const n=await M();n.syncedAt=(new Date).toISOString(),n.userId=t.userId||null;const r=await fetch(e,{method:"POST",headers:o({"Content-Type":"application/json"},t.headers),body:JSON.stringify(n)});if(!r.ok)throw new Error("Backend sync failed: ".concat(r.statusText));const i=await r.json();return console.log("Data synced successfully:",i),{success:!0,message:"Data synced successfully",data:i}}catch(n){return console.error("Error syncing data:",n),{success:!1,message:n.message}}}();e.success?(d({message:e.message||"Data synced successfully!",type:"success"}),window.showToast&&window.showToast("Data synced to cloud successfully!","success")):(d({message:e.message||"Failed to sync data",type:"error"}),window.showToast&&window.showToast(e.message||"Failed to sync data to cloud","error"))}catch(e){console.error("Sync error:",e),d({message:"Error syncing data to cloud",type:"error"}),window.showToast&&window.showToast("Error syncing data to cloud. Please try again.","error")}finally{l(!1)}},disabled:s,className:"btn-secondary flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:s?(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(dk,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):(0,ie.jsxs)(ie.Fragment,{children:[(0,ie.jsx)(uk,{className:"h-4 w-4 mr-2"}),"Sync Now"]})}),c.message&&(0,ie.jsx)("p",{className:"text-sm ".concat("success"===c.type?"text-green-600":"error"===c.type?"text-red-600":"text-blue-600"),children:c.message})]}),(0,ie.jsxs)("div",{className:"space-y-4",children:[(0,ie.jsx)("h4",{className:"font-medium text-gray-900",children:"IndexedDB Export/Import"}),(0,ie.jsx)("p",{className:"text-sm text-gray-600",children:"Export or import data from IndexedDB storage."}),(0,ie.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,ie.jsxs)("button",{onClick:async()=>{try{const e=await M(),t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="indexeddb-backup-".concat((new Date).toISOString().split("T")[0],".json"),r.click(),window.URL.revokeObjectURL(n),window.showToast&&window.showToast("IndexedDB data exported successfully!","success")}catch(e){console.error("Export error:",e),window.showToast&&window.showToast("Error exporting IndexedDB data","error")}},className:"btn-secondary flex items-center justify-center",children:[(0,ie.jsx)(ac,{className:"h-4 w-4 mr-2"}),"Export IndexedDB"]}),(0,ie.jsx)("input",{type:"file",accept:".json",onChange:async e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=async e=>{try{const t=JSON.parse(e.target.result),r=await R(t);if(r.success){const e=await E("customers"),t=await E("products"),r=await E("transactions");n({type:"SET_CUSTOMERS",payload:e}),n({type:"SET_PRODUCTS",payload:t}),n({type:"SET_TRANSACTIONS",payload:r}),window.showToast&&window.showToast("IndexedDB data imported successfully!","success")}else window.showToast&&window.showToast(r.message||"Error importing IndexedDB data","error")}catch(t){console.error("Import error:",t),window.showToast&&window.showToast("Error importing data. Please check the file format.","error")}},e.readAsText(t)}},className:"hidden",id:"import-indexeddb-file"}),(0,ie.jsxs)("label",{htmlFor:"import-indexeddb-file",className:"btn-secondary flex items-center justify-center cursor-pointer",children:[(0,ie.jsx)(ck,{className:"h-4 w-4 mr-2"}),"Import IndexedDB"]})]})]})]}),(0,ie.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,ie.jsxs)("div",{className:"flex items-start",children:[(0,ie.jsx)(lc,{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3"}),(0,ie.jsxs)("div",{children:[(0,ie.jsx)("h4",{className:"font-medium text-yellow-800",children:"Important Notice"}),(0,ie.jsx)("p",{className:"text-sm text-yellow-700 mt-1",children:"Importing data will replace all existing data. Make sure to export your current data before importing."})]})]})})]}),(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-between pt-6 border-t border-gray-200 gap-3",children:[(0,ie.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 flex-1",children:[(0,ie.jsxs)("button",{onClick:()=>{var e;h({lowStockThreshold:"",expiryDaysThreshold:"",storeName:"Grocery Store",gstNumber:"",currentLanguage:"en",username:(null===(e=t.currentUser)||void 0===e?void 0:e.username)||"",password:"",voiceAssistantEnabled:!0,voiceAssistantLanguage:"en-US"})},className:"btn-secondary flex items-center justify-center",children:[(0,ie.jsx)(hk,{className:"h-4 w-4 mr-2"}),"Reset to Defaults"]}),(0,ie.jsxs)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to logout?"))try{await function(e){return on(e).signOut()}(Ll),n({type:"LOGOUT"})}catch(e){console.error("Sign out error:",e),n({type:"LOGOUT"})}},className:"btn-secondary flex items-center justify-center bg-red-50 text-red-600 hover:bg-red-100 border-red-300",children:[(0,ie.jsx)(fk,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),(0,ie.jsxs)("button",{onClick:()=>{var e;const r=""===u.lowStockThreshold?t.lowStockThreshold:parseInt(u.lowStockThreshold),i=""===u.expiryDaysThreshold?t.expiryDaysThreshold:parseInt(u.expiryDaysThreshold);isNaN(r)||isNaN(i)?window.showToast&&window.showToast("Please enter valid numbers for thresholds","error"):(n({type:"SET_LOW_STOCK_THRESHOLD",payload:r}),n({type:"SET_EXPIRY_DAYS_THRESHOLD",payload:i}),n({type:"SET_GST_NUMBER",payload:u.gstNumber}),n({type:"SET_STORE_NAME",payload:u.storeName}),n({type:"SET_LANGUAGE",payload:u.currentLanguage}),n({type:"SET_VOICE_ASSISTANT_LANGUAGE",payload:u.voiceAssistantLanguage}),n({type:"SET_VOICE_ASSISTANT_ENABLED",payload:u.voiceAssistantEnabled}),u.username&&u.username!==(null===(e=t.currentUser)||void 0===e?void 0:e.username)&&n({type:"UPDATE_USER",payload:o(o({},t.currentUser),{},{username:u.username})}),u.password&&""!==u.password.trim()&&n({type:"UPDATE_USER",payload:o(o({},t.currentUser),{},{password:u.password})}),console.log("Settings saved:",{lowStockValue:r,expiryValue:i,voiceAssistantEnabled:u.voiceAssistantEnabled}),window.showToast&&window.showToast("Settings saved! Low Stock: ".concat(r,", Expiry Days: ").concat(i,", Voice Assistant: ").concat(u.voiceAssistantEnabled?"ON":"OFF"),"success"))},className:"btn-primary flex items-center justify-center",children:[(0,ie.jsx)(pk,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]})})]})]})},gk=()=>{const{state:e,dispatch:t}=Nt();(0,r.useEffect)(()=>{"upgrade"!==e.currentView&&(Zl(e.currentView,e.currentPlan,e.currentPlanDetails)||(t({type:"SET_CURRENT_VIEW",payload:"dashboard"}),window.showToast&&window.showToast(tc(e.currentView,e.currentPlan),"warning")))},[e.currentView,e.currentPlan,e.currentPlanDetails,t]);return(0,ie.jsx)("div",{className:"h-full",children:(()=>{switch(e.currentView){case"dashboard":default:return(0,ie.jsx)(xc,{});case"customers":return(0,ie.jsx)(my,{});case"billing":return(0,ie.jsx)(Vy,{});case"products":return(0,ie.jsx)(Yy,{});case"inventory":return(0,ie.jsx)(Jy,{});case"purchase":return(0,ie.jsx)(Xy,{});case"financial":return(0,ie.jsx)(XS,{});case"assistant":return(0,ie.jsx)(tk,{});case"reports":return(0,ie.jsx)(nk,{});case"upgrade":return(0,ie.jsx)(ok,{});case"settings":return(0,ie.jsx)(mk,{})}})()})},yk=()=>{const{state:e}=Nt();return e.isAuthenticated?(0,ie.jsx)("div",{className:"App",children:(0,ie.jsx)(fc,{children:(0,ie.jsx)(gk,{})})}):(0,ie.jsx)(Ol,{})};const bk=function(){return(0,ie.jsx)(_t,{children:(0,ie.jsx)(yk,{})})};i.createRoot(document.getElementById("root")).render((0,ie.jsx)(r.StrictMode,{children:(0,ie.jsx)(bk,{})})),U().then(e=>{e.available?console.log("\u2705 Backend connected:",e.data):(console.warn("\u26a0\ufe0f Backend not available:",e.error),console.warn("\u26a0\ufe0f App will work in offline mode. Some features may be limited."))}).catch(e=>{console.warn("\u26a0\ufe0f Backend health check failed:",e)}),"serviceWorker"in navigator?window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("\u2705 Service Worker registered successfully:",e.scope);const t=localStorage.getItem("auth");if(t)try{const e=JSON.parse(t);e.isAuthenticated&&navigator.serviceWorker.controller&&setTimeout(()=>{navigator.serviceWorker.controller.postMessage({type:"AUTHENTICATED",user:e.currentUser}),navigator.serviceWorker.controller.postMessage({type:"CACHE_APP_RESOURCES"})},1e3)}catch(vk){console.error("Error parsing auth data:",vk)}e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&console.log("New service worker available. Refresh to update.")})})}).catch(e=>{console.error("\u274c Service Worker registration failed:",e)}),navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("Service worker controller changed. Reloading...")})}):console.warn("\u26a0\ufe0f Service Workers are not supported in this browser."),console.log("\ud83d\udcf1 PWA Installability Check:"),console.log("- Service Worker Support:","serviceWorker"in navigator),console.log("- Display Mode:",window.matchMedia("(display-mode: standalone)").matches?"standalone":"browser")})();
//# sourceMappingURL=main.b819b8e6.js.map